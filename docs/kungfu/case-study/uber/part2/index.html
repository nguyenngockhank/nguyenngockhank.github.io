<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Design Uber (2nd) | Nguyễn Khánk&#39;s Wiki</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="apple-touch-icon" sizes="180x180" href="../public/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../public/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../public/favicons/favicon-16x16.png">
    <link rel="manifest" href="../public/favicons/manifest.json">
    <link rel="mask-icon" href="../public/favicons/safari-pinned-tab.svg" color="#3a0839">
    <link rel="shortcut icon" href="../public/favicons/favicon.ico">
    <meta name="description" content="Wikipedia của tui">
    <meta name="msapplication-TileColor" content="#3a0839">
    <meta name="msapplication-config" content="../public/favicons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    
    <link rel="preload" href="/docs/assets/css/0.styles.6292c5a4.css" as="style"><link rel="preload" href="/docs/assets/js/app.db2046e3.js" as="script"><link rel="preload" href="/docs/assets/js/2.d804b278.js" as="script"><link rel="preload" href="/docs/assets/js/148.fab12880.js" as="script"><link rel="preload" href="/docs/assets/js/89.1b6d5e8a.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.29f10f64.js"><link rel="prefetch" href="/docs/assets/js/100.c09a3bd0.js"><link rel="prefetch" href="/docs/assets/js/101.a718a85b.js"><link rel="prefetch" href="/docs/assets/js/102.a56bf6d2.js"><link rel="prefetch" href="/docs/assets/js/103.6db1f41d.js"><link rel="prefetch" href="/docs/assets/js/104.b8981923.js"><link rel="prefetch" href="/docs/assets/js/105.9b0685e9.js"><link rel="prefetch" href="/docs/assets/js/106.6ad79a35.js"><link rel="prefetch" href="/docs/assets/js/107.819e431e.js"><link rel="prefetch" href="/docs/assets/js/108.06d4a226.js"><link rel="prefetch" href="/docs/assets/js/109.75c34362.js"><link rel="prefetch" href="/docs/assets/js/11.e254bd36.js"><link rel="prefetch" href="/docs/assets/js/110.c48a55b9.js"><link rel="prefetch" href="/docs/assets/js/111.4895f687.js"><link rel="prefetch" href="/docs/assets/js/112.9861f050.js"><link rel="prefetch" href="/docs/assets/js/113.904f1837.js"><link rel="prefetch" href="/docs/assets/js/114.7244bf2c.js"><link rel="prefetch" href="/docs/assets/js/115.831a2725.js"><link rel="prefetch" href="/docs/assets/js/116.d10f040e.js"><link rel="prefetch" href="/docs/assets/js/117.c1a5c641.js"><link rel="prefetch" href="/docs/assets/js/118.695d83e0.js"><link rel="prefetch" href="/docs/assets/js/119.e2538eae.js"><link rel="prefetch" href="/docs/assets/js/12.abcafaf3.js"><link rel="prefetch" href="/docs/assets/js/120.690a0a75.js"><link rel="prefetch" href="/docs/assets/js/121.77d78c16.js"><link rel="prefetch" href="/docs/assets/js/122.f13eaef9.js"><link rel="prefetch" href="/docs/assets/js/123.e3995c0c.js"><link rel="prefetch" href="/docs/assets/js/124.ceed4a5e.js"><link rel="prefetch" href="/docs/assets/js/125.ffdc6c0a.js"><link rel="prefetch" href="/docs/assets/js/126.e8e39030.js"><link rel="prefetch" href="/docs/assets/js/127.8b911b0d.js"><link rel="prefetch" href="/docs/assets/js/128.8f79732f.js"><link rel="prefetch" href="/docs/assets/js/129.8d895104.js"><link rel="prefetch" href="/docs/assets/js/13.37275560.js"><link rel="prefetch" href="/docs/assets/js/130.c66beee4.js"><link rel="prefetch" href="/docs/assets/js/131.7823e84a.js"><link rel="prefetch" href="/docs/assets/js/132.8cc5a776.js"><link rel="prefetch" href="/docs/assets/js/133.0a34fd62.js"><link rel="prefetch" href="/docs/assets/js/134.9cb23b2a.js"><link rel="prefetch" href="/docs/assets/js/135.b8ba40e0.js"><link rel="prefetch" href="/docs/assets/js/136.9d627f3c.js"><link rel="prefetch" href="/docs/assets/js/137.f91e8cc3.js"><link rel="prefetch" href="/docs/assets/js/138.bae14ab0.js"><link rel="prefetch" href="/docs/assets/js/139.484d945e.js"><link rel="prefetch" href="/docs/assets/js/14.3dc84dac.js"><link rel="prefetch" href="/docs/assets/js/140.a1923f8a.js"><link rel="prefetch" href="/docs/assets/js/141.6254ebe9.js"><link rel="prefetch" href="/docs/assets/js/142.9ee23485.js"><link rel="prefetch" href="/docs/assets/js/143.a2d31e0d.js"><link rel="prefetch" href="/docs/assets/js/144.bfe6b2e8.js"><link rel="prefetch" href="/docs/assets/js/145.919b3228.js"><link rel="prefetch" href="/docs/assets/js/146.3762efb8.js"><link rel="prefetch" href="/docs/assets/js/147.a7e711e2.js"><link rel="prefetch" href="/docs/assets/js/149.49f41b74.js"><link rel="prefetch" href="/docs/assets/js/15.a4f4442f.js"><link rel="prefetch" href="/docs/assets/js/150.7123ea5a.js"><link rel="prefetch" href="/docs/assets/js/151.ccfb5624.js"><link rel="prefetch" href="/docs/assets/js/152.b0439145.js"><link rel="prefetch" href="/docs/assets/js/153.168c7e51.js"><link rel="prefetch" href="/docs/assets/js/154.61eabcfe.js"><link rel="prefetch" href="/docs/assets/js/155.9f54cf0d.js"><link rel="prefetch" href="/docs/assets/js/156.aa5ff0a0.js"><link rel="prefetch" href="/docs/assets/js/157.437e12df.js"><link rel="prefetch" href="/docs/assets/js/158.097f0d57.js"><link rel="prefetch" href="/docs/assets/js/159.4a1fe816.js"><link rel="prefetch" href="/docs/assets/js/16.1e9d402d.js"><link rel="prefetch" href="/docs/assets/js/160.55366a79.js"><link rel="prefetch" href="/docs/assets/js/161.6aadbe0d.js"><link rel="prefetch" href="/docs/assets/js/162.afe0f2fd.js"><link rel="prefetch" href="/docs/assets/js/163.f15d665d.js"><link rel="prefetch" href="/docs/assets/js/164.5f819b02.js"><link rel="prefetch" href="/docs/assets/js/165.53b18e3c.js"><link rel="prefetch" href="/docs/assets/js/166.be956b7d.js"><link rel="prefetch" href="/docs/assets/js/167.59dbe428.js"><link rel="prefetch" href="/docs/assets/js/168.7a7b6db5.js"><link rel="prefetch" href="/docs/assets/js/169.443db184.js"><link rel="prefetch" href="/docs/assets/js/17.99ada2e3.js"><link rel="prefetch" href="/docs/assets/js/170.eab7f546.js"><link rel="prefetch" href="/docs/assets/js/171.06182392.js"><link rel="prefetch" href="/docs/assets/js/172.40595375.js"><link rel="prefetch" href="/docs/assets/js/173.79d134c3.js"><link rel="prefetch" href="/docs/assets/js/174.1e224e61.js"><link rel="prefetch" href="/docs/assets/js/175.29d5ad14.js"><link rel="prefetch" href="/docs/assets/js/176.33519665.js"><link rel="prefetch" href="/docs/assets/js/177.c23fa558.js"><link rel="prefetch" href="/docs/assets/js/178.99f39e70.js"><link rel="prefetch" href="/docs/assets/js/179.83a311e6.js"><link rel="prefetch" href="/docs/assets/js/18.825044f7.js"><link rel="prefetch" href="/docs/assets/js/180.78901468.js"><link rel="prefetch" href="/docs/assets/js/181.10d4c46c.js"><link rel="prefetch" href="/docs/assets/js/182.36a1be5d.js"><link rel="prefetch" href="/docs/assets/js/183.e7780458.js"><link rel="prefetch" href="/docs/assets/js/184.6e1c383a.js"><link rel="prefetch" href="/docs/assets/js/185.ff610f72.js"><link rel="prefetch" href="/docs/assets/js/186.6896c340.js"><link rel="prefetch" href="/docs/assets/js/187.00cc56ad.js"><link rel="prefetch" href="/docs/assets/js/188.7c7392d4.js"><link rel="prefetch" href="/docs/assets/js/189.c9f59f35.js"><link rel="prefetch" href="/docs/assets/js/19.96501048.js"><link rel="prefetch" href="/docs/assets/js/190.6dea442a.js"><link rel="prefetch" href="/docs/assets/js/191.4dc6807b.js"><link rel="prefetch" href="/docs/assets/js/192.da06d8e8.js"><link rel="prefetch" href="/docs/assets/js/193.3d0b0aaa.js"><link rel="prefetch" href="/docs/assets/js/194.9bda21eb.js"><link rel="prefetch" href="/docs/assets/js/195.80f97aad.js"><link rel="prefetch" href="/docs/assets/js/196.82fbf86b.js"><link rel="prefetch" href="/docs/assets/js/197.e646468a.js"><link rel="prefetch" href="/docs/assets/js/198.bb07b47e.js"><link rel="prefetch" href="/docs/assets/js/199.347e81f8.js"><link rel="prefetch" href="/docs/assets/js/20.a723545b.js"><link rel="prefetch" href="/docs/assets/js/200.6b3f6886.js"><link rel="prefetch" href="/docs/assets/js/201.15725c90.js"><link rel="prefetch" href="/docs/assets/js/202.9430a7f9.js"><link rel="prefetch" href="/docs/assets/js/203.d9c83ad4.js"><link rel="prefetch" href="/docs/assets/js/204.34e9e935.js"><link rel="prefetch" href="/docs/assets/js/205.12a78c89.js"><link rel="prefetch" href="/docs/assets/js/206.d57800c1.js"><link rel="prefetch" href="/docs/assets/js/207.06c688a5.js"><link rel="prefetch" href="/docs/assets/js/208.622e9ead.js"><link rel="prefetch" href="/docs/assets/js/209.89bb34be.js"><link rel="prefetch" href="/docs/assets/js/21.bd916130.js"><link rel="prefetch" href="/docs/assets/js/210.22699d48.js"><link rel="prefetch" href="/docs/assets/js/211.2ca70621.js"><link rel="prefetch" href="/docs/assets/js/212.778d0c51.js"><link rel="prefetch" href="/docs/assets/js/213.b90a8e05.js"><link rel="prefetch" href="/docs/assets/js/214.182f49c3.js"><link rel="prefetch" href="/docs/assets/js/215.1a216bb2.js"><link rel="prefetch" href="/docs/assets/js/216.f3f3dd97.js"><link rel="prefetch" href="/docs/assets/js/217.8907d34c.js"><link rel="prefetch" href="/docs/assets/js/218.9a364b5b.js"><link rel="prefetch" href="/docs/assets/js/219.2d429059.js"><link rel="prefetch" href="/docs/assets/js/22.49ed1fb7.js"><link rel="prefetch" href="/docs/assets/js/220.5f9a9719.js"><link rel="prefetch" href="/docs/assets/js/221.0ef028c7.js"><link rel="prefetch" href="/docs/assets/js/222.89c0a0b7.js"><link rel="prefetch" href="/docs/assets/js/223.653b578a.js"><link rel="prefetch" href="/docs/assets/js/224.1496e4b5.js"><link rel="prefetch" href="/docs/assets/js/225.993a0123.js"><link rel="prefetch" href="/docs/assets/js/226.3740a257.js"><link rel="prefetch" href="/docs/assets/js/227.a7c19a37.js"><link rel="prefetch" href="/docs/assets/js/228.f48a0a59.js"><link rel="prefetch" href="/docs/assets/js/229.19b98800.js"><link rel="prefetch" href="/docs/assets/js/23.ccec09a7.js"><link rel="prefetch" href="/docs/assets/js/230.5538805e.js"><link rel="prefetch" href="/docs/assets/js/231.0017a9a6.js"><link rel="prefetch" href="/docs/assets/js/232.599ce02a.js"><link rel="prefetch" href="/docs/assets/js/233.cd4178a9.js"><link rel="prefetch" href="/docs/assets/js/234.1cd0c54c.js"><link rel="prefetch" href="/docs/assets/js/235.0a504032.js"><link rel="prefetch" href="/docs/assets/js/236.1e4d01df.js"><link rel="prefetch" href="/docs/assets/js/237.3ec6197f.js"><link rel="prefetch" href="/docs/assets/js/238.f3bb785f.js"><link rel="prefetch" href="/docs/assets/js/239.cab19e42.js"><link rel="prefetch" href="/docs/assets/js/24.897fe81d.js"><link rel="prefetch" href="/docs/assets/js/240.5233141a.js"><link rel="prefetch" href="/docs/assets/js/241.180a58f7.js"><link rel="prefetch" href="/docs/assets/js/242.15b90b50.js"><link rel="prefetch" href="/docs/assets/js/243.80ee4a90.js"><link rel="prefetch" href="/docs/assets/js/244.dc318bc1.js"><link rel="prefetch" href="/docs/assets/js/245.04729ef9.js"><link rel="prefetch" href="/docs/assets/js/246.d5c8a287.js"><link rel="prefetch" href="/docs/assets/js/247.52e2c790.js"><link rel="prefetch" href="/docs/assets/js/248.b85a0c1a.js"><link rel="prefetch" href="/docs/assets/js/249.f67d47b2.js"><link rel="prefetch" href="/docs/assets/js/25.79f3be33.js"><link rel="prefetch" href="/docs/assets/js/250.18f0f662.js"><link rel="prefetch" href="/docs/assets/js/251.65047d71.js"><link rel="prefetch" href="/docs/assets/js/252.0a974501.js"><link rel="prefetch" href="/docs/assets/js/253.7ab28866.js"><link rel="prefetch" href="/docs/assets/js/254.c386f3e6.js"><link rel="prefetch" href="/docs/assets/js/255.1540891c.js"><link rel="prefetch" href="/docs/assets/js/256.efb7622b.js"><link rel="prefetch" href="/docs/assets/js/257.6d75dac4.js"><link rel="prefetch" href="/docs/assets/js/258.f12de3f9.js"><link rel="prefetch" href="/docs/assets/js/259.7c5a7399.js"><link rel="prefetch" href="/docs/assets/js/26.0ae51e10.js"><link rel="prefetch" href="/docs/assets/js/260.6d79a764.js"><link rel="prefetch" href="/docs/assets/js/261.0e137344.js"><link rel="prefetch" href="/docs/assets/js/262.8825a172.js"><link rel="prefetch" href="/docs/assets/js/263.ce17c764.js"><link rel="prefetch" href="/docs/assets/js/264.b68557d2.js"><link rel="prefetch" href="/docs/assets/js/265.ab21dc95.js"><link rel="prefetch" href="/docs/assets/js/266.45fd9f19.js"><link rel="prefetch" href="/docs/assets/js/267.600f8fcf.js"><link rel="prefetch" href="/docs/assets/js/268.f8cbdd47.js"><link rel="prefetch" href="/docs/assets/js/269.a603c59a.js"><link rel="prefetch" href="/docs/assets/js/27.c3b66515.js"><link rel="prefetch" href="/docs/assets/js/270.284692c4.js"><link rel="prefetch" href="/docs/assets/js/271.ef9a52bd.js"><link rel="prefetch" href="/docs/assets/js/272.45168ffc.js"><link rel="prefetch" href="/docs/assets/js/273.60af76eb.js"><link rel="prefetch" href="/docs/assets/js/274.a69189c8.js"><link rel="prefetch" href="/docs/assets/js/275.7b3c4445.js"><link rel="prefetch" href="/docs/assets/js/276.723f04c4.js"><link rel="prefetch" href="/docs/assets/js/277.9a8ee4c3.js"><link rel="prefetch" href="/docs/assets/js/278.c03c737e.js"><link rel="prefetch" href="/docs/assets/js/279.b6cf83d7.js"><link rel="prefetch" href="/docs/assets/js/28.b172a311.js"><link rel="prefetch" href="/docs/assets/js/280.6d5c2398.js"><link rel="prefetch" href="/docs/assets/js/281.0ffae366.js"><link rel="prefetch" href="/docs/assets/js/282.3fd4014e.js"><link rel="prefetch" href="/docs/assets/js/283.e7d2e1b9.js"><link rel="prefetch" href="/docs/assets/js/284.978ba342.js"><link rel="prefetch" href="/docs/assets/js/285.3b94b057.js"><link rel="prefetch" href="/docs/assets/js/286.afd518b0.js"><link rel="prefetch" href="/docs/assets/js/287.428109d8.js"><link rel="prefetch" href="/docs/assets/js/288.186f416e.js"><link rel="prefetch" href="/docs/assets/js/289.51eaf108.js"><link rel="prefetch" href="/docs/assets/js/29.ef851f3c.js"><link rel="prefetch" href="/docs/assets/js/290.57c4d2a3.js"><link rel="prefetch" href="/docs/assets/js/291.e80fcb53.js"><link rel="prefetch" href="/docs/assets/js/292.ef8aefe4.js"><link rel="prefetch" href="/docs/assets/js/293.b031d426.js"><link rel="prefetch" href="/docs/assets/js/294.bc50d9ab.js"><link rel="prefetch" href="/docs/assets/js/295.1c5cd99e.js"><link rel="prefetch" href="/docs/assets/js/296.5b5a6f21.js"><link rel="prefetch" href="/docs/assets/js/297.48e76783.js"><link rel="prefetch" href="/docs/assets/js/298.020ea855.js"><link rel="prefetch" href="/docs/assets/js/299.7c4e7779.js"><link rel="prefetch" href="/docs/assets/js/3.77532d9e.js"><link rel="prefetch" href="/docs/assets/js/30.029a1e57.js"><link rel="prefetch" href="/docs/assets/js/300.4f91719c.js"><link rel="prefetch" href="/docs/assets/js/301.3aa9ff3d.js"><link rel="prefetch" href="/docs/assets/js/302.f846baff.js"><link rel="prefetch" href="/docs/assets/js/303.c9f2dc6e.js"><link rel="prefetch" href="/docs/assets/js/304.14a51a2a.js"><link rel="prefetch" href="/docs/assets/js/305.350048e2.js"><link rel="prefetch" href="/docs/assets/js/306.bef8069f.js"><link rel="prefetch" href="/docs/assets/js/307.1b040c49.js"><link rel="prefetch" href="/docs/assets/js/308.326383f2.js"><link rel="prefetch" href="/docs/assets/js/309.2a7be8de.js"><link rel="prefetch" href="/docs/assets/js/31.32fee0b6.js"><link rel="prefetch" href="/docs/assets/js/310.293f7f95.js"><link rel="prefetch" href="/docs/assets/js/311.96c0dec4.js"><link rel="prefetch" href="/docs/assets/js/312.e4b17030.js"><link rel="prefetch" href="/docs/assets/js/313.d43ff30e.js"><link rel="prefetch" href="/docs/assets/js/314.e6b9c2a8.js"><link rel="prefetch" href="/docs/assets/js/315.8e32e679.js"><link rel="prefetch" href="/docs/assets/js/316.0b87133d.js"><link rel="prefetch" href="/docs/assets/js/317.03e484b7.js"><link rel="prefetch" href="/docs/assets/js/318.396abaa9.js"><link rel="prefetch" href="/docs/assets/js/319.c00ff209.js"><link rel="prefetch" href="/docs/assets/js/32.bf0a5810.js"><link rel="prefetch" href="/docs/assets/js/320.35c888da.js"><link rel="prefetch" href="/docs/assets/js/321.50b4e75f.js"><link rel="prefetch" href="/docs/assets/js/322.fd7024bc.js"><link rel="prefetch" href="/docs/assets/js/323.0bca13d7.js"><link rel="prefetch" href="/docs/assets/js/324.243bb708.js"><link rel="prefetch" href="/docs/assets/js/325.160ec52a.js"><link rel="prefetch" href="/docs/assets/js/326.aaa272c9.js"><link rel="prefetch" href="/docs/assets/js/327.9249173d.js"><link rel="prefetch" href="/docs/assets/js/328.985779f1.js"><link rel="prefetch" href="/docs/assets/js/329.ce612969.js"><link rel="prefetch" href="/docs/assets/js/33.6e128516.js"><link rel="prefetch" href="/docs/assets/js/330.e2572945.js"><link rel="prefetch" href="/docs/assets/js/331.80540964.js"><link rel="prefetch" href="/docs/assets/js/332.5858aeaf.js"><link rel="prefetch" href="/docs/assets/js/333.ff6987e3.js"><link rel="prefetch" href="/docs/assets/js/334.b6443976.js"><link rel="prefetch" href="/docs/assets/js/335.3d3f60db.js"><link rel="prefetch" href="/docs/assets/js/336.abcab891.js"><link rel="prefetch" href="/docs/assets/js/337.21b3bb71.js"><link rel="prefetch" href="/docs/assets/js/338.f2a92e04.js"><link rel="prefetch" href="/docs/assets/js/339.f3040ea0.js"><link rel="prefetch" href="/docs/assets/js/34.662282d8.js"><link rel="prefetch" href="/docs/assets/js/340.e2b002aa.js"><link rel="prefetch" href="/docs/assets/js/341.e05513a3.js"><link rel="prefetch" href="/docs/assets/js/342.64f0a1d4.js"><link rel="prefetch" href="/docs/assets/js/343.dd7a6ee2.js"><link rel="prefetch" href="/docs/assets/js/344.f49c287d.js"><link rel="prefetch" href="/docs/assets/js/345.372f9a2f.js"><link rel="prefetch" href="/docs/assets/js/346.61129c45.js"><link rel="prefetch" href="/docs/assets/js/347.174507fa.js"><link rel="prefetch" href="/docs/assets/js/348.ca65caa1.js"><link rel="prefetch" href="/docs/assets/js/349.1c291cbc.js"><link rel="prefetch" href="/docs/assets/js/35.38f9ad2c.js"><link rel="prefetch" href="/docs/assets/js/350.d49dea92.js"><link rel="prefetch" href="/docs/assets/js/351.1f5729de.js"><link rel="prefetch" href="/docs/assets/js/352.1eac6240.js"><link rel="prefetch" href="/docs/assets/js/353.e25d22f7.js"><link rel="prefetch" href="/docs/assets/js/354.4a8162d4.js"><link rel="prefetch" href="/docs/assets/js/355.fd066307.js"><link rel="prefetch" href="/docs/assets/js/356.a5d37507.js"><link rel="prefetch" href="/docs/assets/js/357.8b189314.js"><link rel="prefetch" href="/docs/assets/js/358.7b5ffd69.js"><link rel="prefetch" href="/docs/assets/js/359.bfcd0e7b.js"><link rel="prefetch" href="/docs/assets/js/36.f05e3180.js"><link rel="prefetch" href="/docs/assets/js/360.2b90de08.js"><link rel="prefetch" href="/docs/assets/js/361.b97abd23.js"><link rel="prefetch" href="/docs/assets/js/362.3e15675c.js"><link rel="prefetch" href="/docs/assets/js/363.f7f38ffb.js"><link rel="prefetch" href="/docs/assets/js/364.eb7c9eb2.js"><link rel="prefetch" href="/docs/assets/js/365.41013f5a.js"><link rel="prefetch" href="/docs/assets/js/366.52b3c9c3.js"><link rel="prefetch" href="/docs/assets/js/367.1302d157.js"><link rel="prefetch" href="/docs/assets/js/368.96fa7c1c.js"><link rel="prefetch" href="/docs/assets/js/369.0d726a1c.js"><link rel="prefetch" href="/docs/assets/js/37.7aabb160.js"><link rel="prefetch" href="/docs/assets/js/370.34a0ca92.js"><link rel="prefetch" href="/docs/assets/js/371.a7b023bb.js"><link rel="prefetch" href="/docs/assets/js/372.33a7cf07.js"><link rel="prefetch" href="/docs/assets/js/373.ce3426a9.js"><link rel="prefetch" href="/docs/assets/js/374.4674acdc.js"><link rel="prefetch" href="/docs/assets/js/375.5ff7a45d.js"><link rel="prefetch" href="/docs/assets/js/376.3d1dcad7.js"><link rel="prefetch" href="/docs/assets/js/377.7c9c9f32.js"><link rel="prefetch" href="/docs/assets/js/378.48d1587d.js"><link rel="prefetch" href="/docs/assets/js/379.aca6e94b.js"><link rel="prefetch" href="/docs/assets/js/38.4680ad91.js"><link rel="prefetch" href="/docs/assets/js/380.9c8e7347.js"><link rel="prefetch" href="/docs/assets/js/381.013e45c4.js"><link rel="prefetch" href="/docs/assets/js/382.6575b812.js"><link rel="prefetch" href="/docs/assets/js/383.7bb435a7.js"><link rel="prefetch" href="/docs/assets/js/384.926bde64.js"><link rel="prefetch" href="/docs/assets/js/385.115b3252.js"><link rel="prefetch" href="/docs/assets/js/386.1f1f37e6.js"><link rel="prefetch" href="/docs/assets/js/387.9301470c.js"><link rel="prefetch" href="/docs/assets/js/388.10b02e6f.js"><link rel="prefetch" href="/docs/assets/js/389.c90654b6.js"><link rel="prefetch" href="/docs/assets/js/39.c7b396cc.js"><link rel="prefetch" href="/docs/assets/js/390.6689c9da.js"><link rel="prefetch" href="/docs/assets/js/391.199294df.js"><link rel="prefetch" href="/docs/assets/js/392.e4e53bb3.js"><link rel="prefetch" href="/docs/assets/js/393.0396aaa3.js"><link rel="prefetch" href="/docs/assets/js/394.8bc22f38.js"><link rel="prefetch" href="/docs/assets/js/395.7c511957.js"><link rel="prefetch" href="/docs/assets/js/396.6024cfa4.js"><link rel="prefetch" href="/docs/assets/js/397.e752c4f6.js"><link rel="prefetch" href="/docs/assets/js/398.ab4c8e33.js"><link rel="prefetch" href="/docs/assets/js/399.8c134f8a.js"><link rel="prefetch" href="/docs/assets/js/4.82261dab.js"><link rel="prefetch" href="/docs/assets/js/40.4dae231e.js"><link rel="prefetch" href="/docs/assets/js/400.247ccf0e.js"><link rel="prefetch" href="/docs/assets/js/401.a9c881dc.js"><link rel="prefetch" href="/docs/assets/js/402.60012fd7.js"><link rel="prefetch" href="/docs/assets/js/403.5283b1f1.js"><link rel="prefetch" href="/docs/assets/js/404.90b4eb2e.js"><link rel="prefetch" href="/docs/assets/js/405.0d029cdc.js"><link rel="prefetch" href="/docs/assets/js/406.a0a1a0d3.js"><link rel="prefetch" href="/docs/assets/js/407.fde97132.js"><link rel="prefetch" href="/docs/assets/js/408.898c5a2f.js"><link rel="prefetch" href="/docs/assets/js/409.5a0b73e2.js"><link rel="prefetch" href="/docs/assets/js/41.3f0d0489.js"><link rel="prefetch" href="/docs/assets/js/410.182234e5.js"><link rel="prefetch" href="/docs/assets/js/411.444b8193.js"><link rel="prefetch" href="/docs/assets/js/412.17635762.js"><link rel="prefetch" href="/docs/assets/js/413.a612bb37.js"><link rel="prefetch" href="/docs/assets/js/414.8bfb663a.js"><link rel="prefetch" href="/docs/assets/js/415.644fe2e8.js"><link rel="prefetch" href="/docs/assets/js/416.bd97aadd.js"><link rel="prefetch" href="/docs/assets/js/417.b3a33257.js"><link rel="prefetch" href="/docs/assets/js/418.b0ea43c6.js"><link rel="prefetch" href="/docs/assets/js/419.b8edbad8.js"><link rel="prefetch" href="/docs/assets/js/42.91bf6482.js"><link rel="prefetch" href="/docs/assets/js/420.138206a8.js"><link rel="prefetch" href="/docs/assets/js/421.7442eef0.js"><link rel="prefetch" href="/docs/assets/js/422.e939d74e.js"><link rel="prefetch" href="/docs/assets/js/423.a15a35b6.js"><link rel="prefetch" href="/docs/assets/js/424.46b05b6c.js"><link rel="prefetch" href="/docs/assets/js/425.e36dbe0a.js"><link rel="prefetch" href="/docs/assets/js/426.7a20535b.js"><link rel="prefetch" href="/docs/assets/js/427.7810bb86.js"><link rel="prefetch" href="/docs/assets/js/428.8beba6a8.js"><link rel="prefetch" href="/docs/assets/js/429.6165a2ec.js"><link rel="prefetch" href="/docs/assets/js/43.afcbd312.js"><link rel="prefetch" href="/docs/assets/js/430.d7f811d1.js"><link rel="prefetch" href="/docs/assets/js/431.24c55cb2.js"><link rel="prefetch" href="/docs/assets/js/432.7ac18880.js"><link rel="prefetch" href="/docs/assets/js/433.e88b832e.js"><link rel="prefetch" href="/docs/assets/js/434.c4a25690.js"><link rel="prefetch" href="/docs/assets/js/435.36fa80d1.js"><link rel="prefetch" href="/docs/assets/js/436.01476aae.js"><link rel="prefetch" href="/docs/assets/js/437.3f61f7e0.js"><link rel="prefetch" href="/docs/assets/js/438.f17c13de.js"><link rel="prefetch" href="/docs/assets/js/439.5ea4549f.js"><link rel="prefetch" href="/docs/assets/js/44.b6babaa2.js"><link rel="prefetch" href="/docs/assets/js/440.55de4088.js"><link rel="prefetch" href="/docs/assets/js/441.11303a7c.js"><link rel="prefetch" href="/docs/assets/js/442.61754d48.js"><link rel="prefetch" href="/docs/assets/js/443.39b23c26.js"><link rel="prefetch" href="/docs/assets/js/444.dfa703f4.js"><link rel="prefetch" href="/docs/assets/js/445.1a0b19b1.js"><link rel="prefetch" href="/docs/assets/js/446.bd78ae33.js"><link rel="prefetch" href="/docs/assets/js/447.c0db1e1a.js"><link rel="prefetch" href="/docs/assets/js/448.9b5ae0c7.js"><link rel="prefetch" href="/docs/assets/js/449.47fc910f.js"><link rel="prefetch" href="/docs/assets/js/45.385d74ee.js"><link rel="prefetch" href="/docs/assets/js/450.d50f1fc9.js"><link rel="prefetch" href="/docs/assets/js/451.4b3975f5.js"><link rel="prefetch" href="/docs/assets/js/452.e6d53fef.js"><link rel="prefetch" href="/docs/assets/js/453.a0e63220.js"><link rel="prefetch" href="/docs/assets/js/454.3d14f1b7.js"><link rel="prefetch" href="/docs/assets/js/455.edd9f5b8.js"><link rel="prefetch" href="/docs/assets/js/456.101acf8f.js"><link rel="prefetch" href="/docs/assets/js/457.22c21277.js"><link rel="prefetch" href="/docs/assets/js/458.a4eb67e2.js"><link rel="prefetch" href="/docs/assets/js/459.0da9415c.js"><link rel="prefetch" href="/docs/assets/js/46.9213f5a1.js"><link rel="prefetch" href="/docs/assets/js/460.a7c57687.js"><link rel="prefetch" href="/docs/assets/js/461.7c4a9782.js"><link rel="prefetch" href="/docs/assets/js/462.f4e84a5b.js"><link rel="prefetch" href="/docs/assets/js/463.f7a0c193.js"><link rel="prefetch" href="/docs/assets/js/464.83d202ca.js"><link rel="prefetch" href="/docs/assets/js/465.6790709a.js"><link rel="prefetch" href="/docs/assets/js/466.77ba632b.js"><link rel="prefetch" href="/docs/assets/js/467.fff6f2d7.js"><link rel="prefetch" href="/docs/assets/js/468.74455d2b.js"><link rel="prefetch" href="/docs/assets/js/469.2d7f09f4.js"><link rel="prefetch" href="/docs/assets/js/47.aea042ec.js"><link rel="prefetch" href="/docs/assets/js/470.4a170ced.js"><link rel="prefetch" href="/docs/assets/js/471.629773e7.js"><link rel="prefetch" href="/docs/assets/js/472.3a4808d9.js"><link rel="prefetch" href="/docs/assets/js/473.963202e3.js"><link rel="prefetch" href="/docs/assets/js/474.7d5035fb.js"><link rel="prefetch" href="/docs/assets/js/475.6786d855.js"><link rel="prefetch" href="/docs/assets/js/476.d246730a.js"><link rel="prefetch" href="/docs/assets/js/477.c7b62617.js"><link rel="prefetch" href="/docs/assets/js/478.403336ea.js"><link rel="prefetch" href="/docs/assets/js/479.6ba99154.js"><link rel="prefetch" href="/docs/assets/js/48.660913b3.js"><link rel="prefetch" href="/docs/assets/js/480.958fb75a.js"><link rel="prefetch" href="/docs/assets/js/481.fcce62ef.js"><link rel="prefetch" href="/docs/assets/js/482.f0cea238.js"><link rel="prefetch" href="/docs/assets/js/483.119dded3.js"><link rel="prefetch" href="/docs/assets/js/484.b6c3c48f.js"><link rel="prefetch" href="/docs/assets/js/485.9154cd3c.js"><link rel="prefetch" href="/docs/assets/js/486.eb591101.js"><link rel="prefetch" href="/docs/assets/js/487.82dbd6d3.js"><link rel="prefetch" href="/docs/assets/js/488.181a90df.js"><link rel="prefetch" href="/docs/assets/js/489.f08215ce.js"><link rel="prefetch" href="/docs/assets/js/49.0f67443c.js"><link rel="prefetch" href="/docs/assets/js/490.c4971505.js"><link rel="prefetch" href="/docs/assets/js/491.0228bb91.js"><link rel="prefetch" href="/docs/assets/js/492.8e901052.js"><link rel="prefetch" href="/docs/assets/js/493.2aedb517.js"><link rel="prefetch" href="/docs/assets/js/494.fd6031c1.js"><link rel="prefetch" href="/docs/assets/js/495.d1f0c159.js"><link rel="prefetch" href="/docs/assets/js/496.c4db55c9.js"><link rel="prefetch" href="/docs/assets/js/497.1b6c1fdd.js"><link rel="prefetch" href="/docs/assets/js/498.572098f2.js"><link rel="prefetch" href="/docs/assets/js/499.f576b131.js"><link rel="prefetch" href="/docs/assets/js/5.6ee80271.js"><link rel="prefetch" href="/docs/assets/js/50.954bdb5a.js"><link rel="prefetch" href="/docs/assets/js/500.e5d93225.js"><link rel="prefetch" href="/docs/assets/js/501.e51021ad.js"><link rel="prefetch" href="/docs/assets/js/502.dbe80b91.js"><link rel="prefetch" href="/docs/assets/js/503.897f132f.js"><link rel="prefetch" href="/docs/assets/js/504.72ab4da5.js"><link rel="prefetch" href="/docs/assets/js/505.564824ab.js"><link rel="prefetch" href="/docs/assets/js/506.aca5d129.js"><link rel="prefetch" href="/docs/assets/js/507.7491633f.js"><link rel="prefetch" href="/docs/assets/js/508.6ba726b6.js"><link rel="prefetch" href="/docs/assets/js/509.19c82b9a.js"><link rel="prefetch" href="/docs/assets/js/51.c58a1b07.js"><link rel="prefetch" href="/docs/assets/js/510.93956aeb.js"><link rel="prefetch" href="/docs/assets/js/511.61ce1343.js"><link rel="prefetch" href="/docs/assets/js/512.6c219f25.js"><link rel="prefetch" href="/docs/assets/js/513.93806098.js"><link rel="prefetch" href="/docs/assets/js/514.6e4b6269.js"><link rel="prefetch" href="/docs/assets/js/515.73fbdf33.js"><link rel="prefetch" href="/docs/assets/js/516.684e2f51.js"><link rel="prefetch" href="/docs/assets/js/517.5c5a5dad.js"><link rel="prefetch" href="/docs/assets/js/518.adff6d8c.js"><link rel="prefetch" href="/docs/assets/js/519.07972a8e.js"><link rel="prefetch" href="/docs/assets/js/52.2070b6bf.js"><link rel="prefetch" href="/docs/assets/js/520.a175f125.js"><link rel="prefetch" href="/docs/assets/js/521.69a7e4c2.js"><link rel="prefetch" href="/docs/assets/js/522.144a8597.js"><link rel="prefetch" href="/docs/assets/js/523.14a60144.js"><link rel="prefetch" href="/docs/assets/js/524.d5851a6b.js"><link rel="prefetch" href="/docs/assets/js/525.396d3ff8.js"><link rel="prefetch" href="/docs/assets/js/526.2a0867a7.js"><link rel="prefetch" href="/docs/assets/js/527.91be42e2.js"><link rel="prefetch" href="/docs/assets/js/528.73d625af.js"><link rel="prefetch" href="/docs/assets/js/529.42f34bb6.js"><link rel="prefetch" href="/docs/assets/js/53.801b69aa.js"><link rel="prefetch" href="/docs/assets/js/530.c3ccd7d4.js"><link rel="prefetch" href="/docs/assets/js/531.fe3dbd3d.js"><link rel="prefetch" href="/docs/assets/js/54.0f1f14ba.js"><link rel="prefetch" href="/docs/assets/js/55.43d4097e.js"><link rel="prefetch" href="/docs/assets/js/56.d0f88964.js"><link rel="prefetch" href="/docs/assets/js/57.e9bbcc8e.js"><link rel="prefetch" href="/docs/assets/js/58.87664598.js"><link rel="prefetch" href="/docs/assets/js/59.0bba0d21.js"><link rel="prefetch" href="/docs/assets/js/6.8370c87c.js"><link rel="prefetch" href="/docs/assets/js/60.3dda6f32.js"><link rel="prefetch" href="/docs/assets/js/61.d5b753c4.js"><link rel="prefetch" href="/docs/assets/js/62.93375237.js"><link rel="prefetch" href="/docs/assets/js/63.cb3b1c72.js"><link rel="prefetch" href="/docs/assets/js/64.513ca09c.js"><link rel="prefetch" href="/docs/assets/js/65.626431c5.js"><link rel="prefetch" href="/docs/assets/js/66.94e05310.js"><link rel="prefetch" href="/docs/assets/js/67.e3ae7bb3.js"><link rel="prefetch" href="/docs/assets/js/68.392377ed.js"><link rel="prefetch" href="/docs/assets/js/69.1f5a7c45.js"><link rel="prefetch" href="/docs/assets/js/7.f22cdf2a.js"><link rel="prefetch" href="/docs/assets/js/70.d43f2076.js"><link rel="prefetch" href="/docs/assets/js/71.5770e293.js"><link rel="prefetch" href="/docs/assets/js/72.37a45bc1.js"><link rel="prefetch" href="/docs/assets/js/73.7975faab.js"><link rel="prefetch" href="/docs/assets/js/74.9717840d.js"><link rel="prefetch" href="/docs/assets/js/75.f2b8ef33.js"><link rel="prefetch" href="/docs/assets/js/76.b6911194.js"><link rel="prefetch" href="/docs/assets/js/77.0cd54369.js"><link rel="prefetch" href="/docs/assets/js/78.c7376af7.js"><link rel="prefetch" href="/docs/assets/js/79.6d748105.js"><link rel="prefetch" href="/docs/assets/js/8.9970460e.js"><link rel="prefetch" href="/docs/assets/js/80.003ecac3.js"><link rel="prefetch" href="/docs/assets/js/81.7c5ee1a5.js"><link rel="prefetch" href="/docs/assets/js/82.d83ce873.js"><link rel="prefetch" href="/docs/assets/js/83.0aa3d01d.js"><link rel="prefetch" href="/docs/assets/js/84.14dc9f9b.js"><link rel="prefetch" href="/docs/assets/js/85.64c9fa7e.js"><link rel="prefetch" href="/docs/assets/js/86.761903aa.js"><link rel="prefetch" href="/docs/assets/js/87.af95d370.js"><link rel="prefetch" href="/docs/assets/js/88.771f3fbf.js"><link rel="prefetch" href="/docs/assets/js/9.87705599.js"><link rel="prefetch" href="/docs/assets/js/90.47ce6726.js"><link rel="prefetch" href="/docs/assets/js/91.4d04dfa1.js"><link rel="prefetch" href="/docs/assets/js/92.f9f92f6f.js"><link rel="prefetch" href="/docs/assets/js/93.9a86cb3a.js"><link rel="prefetch" href="/docs/assets/js/94.a8dfa3c2.js"><link rel="prefetch" href="/docs/assets/js/95.009afa2c.js"><link rel="prefetch" href="/docs/assets/js/96.19477522.js"><link rel="prefetch" href="/docs/assets/js/97.b5b8e439.js"><link rel="prefetch" href="/docs/assets/js/98.bd78ab94.js"><link rel="prefetch" href="/docs/assets/js/99.09e04b18.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.6292c5a4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">Nguyễn Khánk's Wiki</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/architect/" class="nav-link">
  Architecture
</a></div><div class="nav-item"><a href="https://nguyenngockhank.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/architect/" class="nav-link">
  Architecture
</a></div><div class="nav-item"><a href="https://nguyenngockhank.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>System Design Case Studies</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/kungfu/case-study/notification/" class="sidebar-link">Design a notification system</a></li><li><a href="/docs/kungfu/case-study/metrics/" class="sidebar-link">Metrics Monitoring &amp; Alerting System</a></li><li><a href="/docs/kungfu/case-study/ad-click/" class="sidebar-link">Ad Click Event Aggregation</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Online tools</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Booking System</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Social Network</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>Location-based</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/kungfu/case-study/proximity-service/" class="sidebar-link">Proximity Service</a></li><li><a href="/docs/kungfu/case-study/proximity-service/part2/" class="sidebar-link">Designing Yelp or Nearby Friends</a></li><li><a href="/docs/kungfu/case-study/nearby-friends/" class="sidebar-link">Nearby Friends</a></li><li><a href="/docs/kungfu/case-study/google-maps/" class="sidebar-link">Design Google Maps</a></li><li><a href="/docs/kungfu/case-study/uber/" aria-current="page" class="sidebar-link">Design Uber</a></li><li><a href="/docs/kungfu/case-study/uber/part2/" aria-current="page" class="active sidebar-link">Design Uber (2nd)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/kungfu/case-study/uber/part2/#_1-what-is-uber" class="sidebar-link">1. What is Uber?</a></li><li class="sidebar-sub-header"><a href="/docs/kungfu/case-study/uber/part2/#_2-requirements-and-goals-of-the-system" class="sidebar-link">2. Requirements and Goals of the System</a></li><li class="sidebar-sub-header"><a href="/docs/kungfu/case-study/uber/part2/#_3-capacity-estimation-and-constraints" class="sidebar-link">3. Capacity Estimation and Constraints</a></li><li class="sidebar-sub-header"><a href="/docs/kungfu/case-study/uber/part2/#_4-basic-system-design-and-algorithm" class="sidebar-link">4. Basic System Design and Algorithm</a></li><li class="sidebar-sub-header"><a href="/docs/kungfu/case-study/uber/part2/#_5-fault-tolerance-and-replication" class="sidebar-link">5. Fault Tolerance and Replication</a></li><li class="sidebar-sub-header"><a href="/docs/kungfu/case-study/uber/part2/#_6-ranking" class="sidebar-link">6. Ranking</a></li><li class="sidebar-sub-header"><a href="/docs/kungfu/case-study/uber/part2/#_7-advanced-issues" class="sidebar-link">7. Advanced Issues</a></li></ul></li><li><a href="/docs/kungfu/case-study/grab-nearby-drivers/" class="sidebar-link">Pharos - Searching Nearby Drivers on Road Network at Scale</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Video</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Chat system</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>The Art of Readable Code</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>A Philosophy of Software Design</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Building Microservices</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>97 Things Every Programmer Should Know</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>NoSql Distilled</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Go</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Others</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="design-uber-2nd"><a href="#design-uber-2nd" class="header-anchor">#</a> Design Uber (2nd)</h1> <p>Let's design a ride-sharing service like Uber, which connects passengers who need a ride with drivers
who have a car. Similar Services: Lyft, Didi, Via, Sidecar etc.
Difficulty level: Hard</p> <p>Prerequisite: Designing Yelp</p> <h2 id="_1-what-is-uber"><a href="#_1-what-is-uber" class="header-anchor">#</a> 1. What is Uber?</h2> <p>Uber enables its customers to book drivers for taxi rides. Uber drivers use their personal cars to drive
customers around. Both customers and drivers communicate with each other through their smartphones
using the Uber app.</p> <h2 id="_2-requirements-and-goals-of-the-system"><a href="#_2-requirements-and-goals-of-the-system" class="header-anchor">#</a> 2. Requirements and Goals of the System</h2> <p>Let’s start with building a simpler version of Uber.
There are two kinds of users in our system:  <strong>Drivers</strong> &amp; <strong>Customers</strong>.</p> <ul><li>Drivers need to regularly notify the service about their current location and their availability to pick passengers.</li> <li>Passengers get to see all the nearby available drivers.</li> <li>Customer can request a ride; nearby drivers are notified that a customer is ready to be picked up.</li> <li>Once a driver and a customer accept a ride, they can constantly see each other’s current location until the trip finishes.</li> <li>Upon reaching the destination, the driver marks the journey complete to become available for the next ride.</li></ul> <h2 id="_3-capacity-estimation-and-constraints"><a href="#_3-capacity-estimation-and-constraints" class="header-anchor">#</a> 3. Capacity Estimation and Constraints</h2> <ul><li>Let’s assume we have 300M customers and 1M drivers with 1M daily active customers and 500K daily active drivers.</li> <li>Let’s assume 1M daily rides.</li> <li>Let’s assume that all active drivers notify their current location every three seconds.</li> <li>Once a customer puts in a request for a ride, the system should be able to contact drivers in realtime.</li></ul> <h2 id="_4-basic-system-design-and-algorithm"><a href="#_4-basic-system-design-and-algorithm" class="header-anchor">#</a> 4. Basic System Design and Algorithm</h2> <p>We will take the solution discussed in Designing Yelp and modify it to make it work for the abovementioned “Uber” use cases. The biggest difference we have is that our QuadTree was not built
keeping in mind that there would be frequent updates to it. So, we have two issues with our Dynamic
Grid solution:</p> <ul><li>Since all active drivers are reporting their locations every three seconds, we need to update our
data structures to reflect that. If we have to update the QuadTree for every change in the driver’s
position, it will take a lot of time and resources. To update a driver to its new location, we must
find the right grid based on the driver’s previous location. If the new position does not belong to
the current grid, we have to remove the driver from the current grid and move/reinsert the user
to the correct grid. After this move, if the new grid reaches the maximum limit of drivers, we
have to repartition it.</li> <li>We need to have a quick mechanism to propagate the current location of all the nearby drivers
to any active customer in that area. Also, when a ride is in progress, our system needs to notify
both the driver and passenger about the current location of the car.</li></ul> <p>Although our QuadTree helps us find nearby drivers quickly, a fast update in the tree is not guaranteed</p> <p><strong>Do we need to modify our QuadTree every time a driver reports their location?</strong> If we don’t update
our QuadTree with every update from the driver, it will have some old data and will not reflect the
current location of drivers correctly. If you recall, our purpose of building the QuadTree was to find
nearby drivers (or places) efficiently. Since all active drivers report their location every three seconds,
therefore there will be a lot more updates happening to our tree than querying for nearby drivers. So,
what if we keep the latest position reported by all drivers in a hash table and update our QuadTree a
little less frequently? Let’s assume we guarantee that a driver’s current location will be reflected in the
QuadTree within 15 seconds. Meanwhile, we will maintain a hash table that will store the current
location reported by drivers; let’s call this DriverLocationHT.</p> <p><strong>How much memory we need for DriverLocationHT?</strong> We need to store DriveID, their present and
old location, in the hash table. So, we need a total of 35 bytes to store one record:</p> <ol><li>DriverID (3 bytes - 1 million drivers)</li> <li>Old latitude (8 bytes)</li> <li>Old longitude (8 bytes)</li> <li>New latitude (8 bytes)</li> <li>New longitude (8 bytes) Total = 35 bytes</li></ol> <p>If we have 1 million total drivers, we need the following memory (ignoring hash table overhead):</p> <div class="language- extra-class"><pre class="language-text"><code>1 million * 35 bytes =&gt; 35 MB 
</code></pre></div><p><strong>How much bandwidth will our service consume to receive location updates from all drivers?</strong> If we
get DriverID and their location, it will be (3+16 =&gt; 19 bytes). If we receive this information every three
seconds from one million drivers, we will be getting 19MB per three seconds.</p> <p><strong>Do we need to distribute DriverLocationHT onto multiple servers?</strong> Although our memory and
bandwidth requirements don’t require this, since all this information can easily be stored on one server,
but, for scalability, performance, and fault tolerance, we should distribute DriverLocationHT onto
multiple servers. We can distribute based on the DriverID to make the distribution completely random.
Let’s call the machines holding DriverLocationHT the Driver Location server. Other than storing the
driver’s location, each of these servers will do two things:</p> <ol><li>As soon as the server receives an update for a driver’s location, they will broadcast that
information to all the interested customers.</li> <li>The server needs to notify the respective QuadTree server to refresh the driver’s location. As
discussed above, this can happen every 10 seconds.</li></ol> <p><strong>How can we efficiently broadcast the driver’s location to customers?</strong> We can have a <strong>Push Model</strong>
where the server will push the positions to all the relevant users. We can have a dedicated Notification
Service that can broadcast the current location of drivers to all the interested customers. We can build
our Notification service on a publisher/subscriber model. When a customer opens the Uber app on their
cell phone, they query the server to find nearby drivers. On the server side, before returning the list of
drivers to the customer, we will subscribe the customer for all the updates from those drivers. We can
maintain a list of customers (subscribers) interested in knowing the location of a driver and, whenever
we have an update in DriverLocationHT for that driver, we can broadcast the current location of the
driver to all subscribed customers. This way, our system makes sure that we always show the driver’s
current position to the customer.</p> <p><strong>How much memory will we need to store all these subscriptions?</strong> As we have estimated above, we
will have 1M daily active customers and 500K daily active drivers. On average let’s assume that five
customers subscribe to one driver. Let’s assume we store all this information in a hash table so that we
can update it efficiently. We need to store driver and customer IDs to maintain the subscriptions.
Assuming we will need 3 bytes for DriverID and 8 bytes for CustomerID, we will need 21MB of
memory.</p> <div class="language- extra-class"><pre class="language-text"><code>(500K * 3) + (500K * 5 * 8 ) ~= 21 MB
</code></pre></div><p><strong>How much bandwidth will we need to broadcast the driver’s location to customers?</strong> For every
active driver, we have five subscribers, so the total subscribers we have:</p> <div class="language- extra-class"><pre class="language-text"><code>5 * 500K =&gt; 2.5M
</code></pre></div><p>To all these customers we need to send DriverID (3 bytes) and their location (16 bytes) every second,
so, we need the following bandwidth:</p> <div class="language- extra-class"><pre class="language-text"><code>2.5M * 19 bytes =&gt; 47.5 MB/s
</code></pre></div><p><strong>How can we efficiently implement Notification service?</strong> We can either use HTTP long polling or
push notifications.</p> <p><strong>How will the new publishers/drivers get added for a current customer?</strong> As we have proposed
above, customers will be subscribed to nearby drivers when they open the Uber app for the first time,
what will happen when a new driver enters the area the customer is looking at? To add a new
customer/driver subscription dynamically, we need to keep track of the area the customer is watching.
This will make our solution complicated; how about if instead of pushing this information, clients pull
it from the server?</p> <p><strong>How about if clients pull information about nearby drivers from the server?</strong> Clients can send their
current location, and the server will find all the nearby drivers from the QuadTree to return them to the
client. Upon receiving this information, the client can update their screen to reflect current positions of
the drivers. Clients can query every five seconds to limit the number of round trips to the server. This
solution looks simpler compared to the push model described above.</p> <p><strong>Do we need to repartition a grid as soon as it reaches the maximum limit?</strong> We can have a cushion
to let each grid grow a little bigger beyond the limit before we decide to partition it. Let’s say our grids
can grow/shrink an extra 10% before we partition/merge them. This should decrease the load for a grid
partition or merge on high traffic grids.</p> <p><img src="/docs/assets/img/30.5585bff3.png" alt="img"></p> <p><strong>How would “Request Ride” use case work?</strong></p> <ol><li>The customer will put a request for a ride.</li> <li>One of the Aggregator servers will take the request and asks QuadTree servers to return nearby
drivers.</li> <li>The Aggregator server collects all the results and sorts them by ratings.</li> <li>The Aggregator server will send a notification to the top (say three) drivers simultaneously,
whichever driver accepts the request first will be assigned the ride. The other drivers will
receive a cancellation request. If none of the three drivers respond, the Aggregator will request a
ride from the next three drivers from the list.</li> <li>Once a driver accepts a request, the customer is notified.</li></ol> <h2 id="_5-fault-tolerance-and-replication"><a href="#_5-fault-tolerance-and-replication" class="header-anchor">#</a> 5. Fault Tolerance and Replication</h2> <p>What if a Driver Location server or Notification server dies? We would need replicas of these
servers, so that if the primary dies the secondary can take control. Also, we can store this data in some
persistent storage like SSDs that can provide fast IOs; this will ensure that if both primary and
secondary servers die we can recover the data from the persistent storage.</p> <h2 id="_6-ranking"><a href="#_6-ranking" class="header-anchor">#</a> 6. Ranking</h2> <p>How about if we want to rank the search results not just by proximity but also by popularity or
relevance?</p> <p><strong>How can we return top rated drivers within a given radius?</strong> Let’s assume we keep track of the
overall ratings of each driver in our database and QuadTree. An aggregated number can represent this
popularity in our system, e.g., how many stars does a driver get out of ten? While searching for the top
10 drivers within a given radius, we can ask each partition of the QuadTree to return the top 10 drivers
with a maximum rating. The aggregator server can then determine the top 10 drivers among all the
drivers returned by different partitions.</p> <h2 id="_7-advanced-issues"><a href="#_7-advanced-issues" class="header-anchor">#</a> 7. Advanced Issues</h2> <ol><li>How will we handle clients on slow and disconnecting networks?</li> <li>What if a client gets disconnected when they are a part of a ride? How will we handle billing in
such a scenario?</li> <li>How about if clients pull all the information, compared to servers always pushing it?</li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/kungfu/case-study/uber/" class="prev router-link-active">
        Design Uber
      </a></span> <span class="next"><a href="/docs/kungfu/case-study/grab-nearby-drivers/">
        Pharos - Searching Nearby Drivers on Road Network at Scale
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----><!----></div></div>
    <script src="/docs/assets/js/app.db2046e3.js" defer></script><script src="/docs/assets/js/2.d804b278.js" defer></script><script src="/docs/assets/js/148.fab12880.js" defer></script><script src="/docs/assets/js/89.1b6d5e8a.js" defer></script>
  </body>
</html>
