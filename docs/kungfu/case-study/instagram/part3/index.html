<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Design Instagram (3rd) | Nguyễn Khánk&#39;s Wiki</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="apple-touch-icon" sizes="180x180" href="../public/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../public/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../public/favicons/favicon-16x16.png">
    <link rel="manifest" href="../public/favicons/manifest.json">
    <link rel="mask-icon" href="../public/favicons/safari-pinned-tab.svg" color="#3a0839">
    <link rel="shortcut icon" href="../public/favicons/favicon.ico">
    <meta name="description" content="Wikipedia của tui">
    <meta name="msapplication-TileColor" content="#3a0839">
    <meta name="msapplication-config" content="../public/favicons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    
    <link rel="preload" href="/docs/assets/css/0.styles.13bbcd8a.css" as="style"><link rel="preload" href="/docs/assets/js/app.2639b5bd.js" as="script"><link rel="preload" href="/docs/assets/js/2.275e5570.js" as="script"><link rel="preload" href="/docs/assets/js/49.f7084fd0.js" as="script"><link rel="preload" href="/docs/assets/js/72.79427537.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.5ca59287.js"><link rel="prefetch" href="/docs/assets/js/100.d3c3d454.js"><link rel="prefetch" href="/docs/assets/js/101.8ed57b66.js"><link rel="prefetch" href="/docs/assets/js/102.bf067fee.js"><link rel="prefetch" href="/docs/assets/js/103.16a0606c.js"><link rel="prefetch" href="/docs/assets/js/104.e365d67d.js"><link rel="prefetch" href="/docs/assets/js/105.9d4c9526.js"><link rel="prefetch" href="/docs/assets/js/106.6136671b.js"><link rel="prefetch" href="/docs/assets/js/107.92c1b5bb.js"><link rel="prefetch" href="/docs/assets/js/108.3bbd86b1.js"><link rel="prefetch" href="/docs/assets/js/109.ee45415f.js"><link rel="prefetch" href="/docs/assets/js/11.abe69edf.js"><link rel="prefetch" href="/docs/assets/js/110.2fa4a23b.js"><link rel="prefetch" href="/docs/assets/js/111.e2296580.js"><link rel="prefetch" href="/docs/assets/js/112.5688f881.js"><link rel="prefetch" href="/docs/assets/js/113.3c3bce91.js"><link rel="prefetch" href="/docs/assets/js/114.126126dc.js"><link rel="prefetch" href="/docs/assets/js/115.44f2cc79.js"><link rel="prefetch" href="/docs/assets/js/116.813179e2.js"><link rel="prefetch" href="/docs/assets/js/117.6852d468.js"><link rel="prefetch" href="/docs/assets/js/118.37259a5f.js"><link rel="prefetch" href="/docs/assets/js/119.513eb06d.js"><link rel="prefetch" href="/docs/assets/js/12.43019b11.js"><link rel="prefetch" href="/docs/assets/js/120.53e04b57.js"><link rel="prefetch" href="/docs/assets/js/121.8ce3e34d.js"><link rel="prefetch" href="/docs/assets/js/122.f9a22fbd.js"><link rel="prefetch" href="/docs/assets/js/123.ca119704.js"><link rel="prefetch" href="/docs/assets/js/124.85514dd4.js"><link rel="prefetch" href="/docs/assets/js/125.c2ff124b.js"><link rel="prefetch" href="/docs/assets/js/126.6f554027.js"><link rel="prefetch" href="/docs/assets/js/127.99713bb1.js"><link rel="prefetch" href="/docs/assets/js/128.47b743ac.js"><link rel="prefetch" href="/docs/assets/js/129.cc593442.js"><link rel="prefetch" href="/docs/assets/js/13.54e9d0cc.js"><link rel="prefetch" href="/docs/assets/js/130.4ae4050d.js"><link rel="prefetch" href="/docs/assets/js/131.bc2a7c2b.js"><link rel="prefetch" href="/docs/assets/js/132.6255fcdc.js"><link rel="prefetch" href="/docs/assets/js/133.cfab1e70.js"><link rel="prefetch" href="/docs/assets/js/134.6946c09f.js"><link rel="prefetch" href="/docs/assets/js/135.cf935433.js"><link rel="prefetch" href="/docs/assets/js/136.41ab1f0a.js"><link rel="prefetch" href="/docs/assets/js/137.a93a6f0f.js"><link rel="prefetch" href="/docs/assets/js/138.675e8bfa.js"><link rel="prefetch" href="/docs/assets/js/139.c670ceb6.js"><link rel="prefetch" href="/docs/assets/js/14.efc4b5ea.js"><link rel="prefetch" href="/docs/assets/js/140.bf11643c.js"><link rel="prefetch" href="/docs/assets/js/141.f963f9e5.js"><link rel="prefetch" href="/docs/assets/js/142.36c7c970.js"><link rel="prefetch" href="/docs/assets/js/143.721702c7.js"><link rel="prefetch" href="/docs/assets/js/144.064450dd.js"><link rel="prefetch" href="/docs/assets/js/145.b220e2c6.js"><link rel="prefetch" href="/docs/assets/js/146.68404031.js"><link rel="prefetch" href="/docs/assets/js/147.1ed7371c.js"><link rel="prefetch" href="/docs/assets/js/148.ce09dc09.js"><link rel="prefetch" href="/docs/assets/js/149.b3c1dba2.js"><link rel="prefetch" href="/docs/assets/js/15.72cd9a74.js"><link rel="prefetch" href="/docs/assets/js/150.a96d815b.js"><link rel="prefetch" href="/docs/assets/js/151.f54d89f7.js"><link rel="prefetch" href="/docs/assets/js/152.bbb62b3d.js"><link rel="prefetch" href="/docs/assets/js/153.167eecc2.js"><link rel="prefetch" href="/docs/assets/js/154.987adccf.js"><link rel="prefetch" href="/docs/assets/js/155.b67c4b8e.js"><link rel="prefetch" href="/docs/assets/js/156.655f433e.js"><link rel="prefetch" href="/docs/assets/js/157.fd38ff2b.js"><link rel="prefetch" href="/docs/assets/js/158.909aa497.js"><link rel="prefetch" href="/docs/assets/js/159.baae26f7.js"><link rel="prefetch" href="/docs/assets/js/16.ffe4935d.js"><link rel="prefetch" href="/docs/assets/js/160.7406dd6c.js"><link rel="prefetch" href="/docs/assets/js/161.4304cc52.js"><link rel="prefetch" href="/docs/assets/js/162.50963f20.js"><link rel="prefetch" href="/docs/assets/js/163.a48ff350.js"><link rel="prefetch" href="/docs/assets/js/164.eb81efb7.js"><link rel="prefetch" href="/docs/assets/js/165.f2850d95.js"><link rel="prefetch" href="/docs/assets/js/166.1eb06892.js"><link rel="prefetch" href="/docs/assets/js/167.6ec325f8.js"><link rel="prefetch" href="/docs/assets/js/168.012c07ac.js"><link rel="prefetch" href="/docs/assets/js/169.c5b3744a.js"><link rel="prefetch" href="/docs/assets/js/17.dc82c265.js"><link rel="prefetch" href="/docs/assets/js/170.ff907ec6.js"><link rel="prefetch" href="/docs/assets/js/171.c7bd1783.js"><link rel="prefetch" href="/docs/assets/js/172.fd2fb69c.js"><link rel="prefetch" href="/docs/assets/js/173.024169d5.js"><link rel="prefetch" href="/docs/assets/js/174.614f2438.js"><link rel="prefetch" href="/docs/assets/js/175.d4bc907c.js"><link rel="prefetch" href="/docs/assets/js/176.ef8fb936.js"><link rel="prefetch" href="/docs/assets/js/177.5590efd7.js"><link rel="prefetch" href="/docs/assets/js/178.6ea955ae.js"><link rel="prefetch" href="/docs/assets/js/179.22f9569b.js"><link rel="prefetch" href="/docs/assets/js/18.e890f802.js"><link rel="prefetch" href="/docs/assets/js/180.f7c3047f.js"><link rel="prefetch" href="/docs/assets/js/181.ad5af3ce.js"><link rel="prefetch" href="/docs/assets/js/182.57f68ebf.js"><link rel="prefetch" href="/docs/assets/js/183.f7d7f06c.js"><link rel="prefetch" href="/docs/assets/js/184.06fe92ef.js"><link rel="prefetch" href="/docs/assets/js/185.551aedef.js"><link rel="prefetch" href="/docs/assets/js/186.f67464d2.js"><link rel="prefetch" href="/docs/assets/js/187.e1247936.js"><link rel="prefetch" href="/docs/assets/js/188.48a85b1f.js"><link rel="prefetch" href="/docs/assets/js/189.9ec8d93f.js"><link rel="prefetch" href="/docs/assets/js/19.7f0f8a4e.js"><link rel="prefetch" href="/docs/assets/js/190.b3df1b65.js"><link rel="prefetch" href="/docs/assets/js/191.bb58b03c.js"><link rel="prefetch" href="/docs/assets/js/192.22c1aa05.js"><link rel="prefetch" href="/docs/assets/js/193.5d561e26.js"><link rel="prefetch" href="/docs/assets/js/194.6b32f705.js"><link rel="prefetch" href="/docs/assets/js/195.6ad09e7d.js"><link rel="prefetch" href="/docs/assets/js/196.61a27da3.js"><link rel="prefetch" href="/docs/assets/js/197.2d753c4f.js"><link rel="prefetch" href="/docs/assets/js/198.9848e91e.js"><link rel="prefetch" href="/docs/assets/js/199.c5f69dd4.js"><link rel="prefetch" href="/docs/assets/js/20.a43ffd60.js"><link rel="prefetch" href="/docs/assets/js/200.b56a9e67.js"><link rel="prefetch" href="/docs/assets/js/201.e60809cb.js"><link rel="prefetch" href="/docs/assets/js/202.8738c814.js"><link rel="prefetch" href="/docs/assets/js/203.4afb0b44.js"><link rel="prefetch" href="/docs/assets/js/204.18921616.js"><link rel="prefetch" href="/docs/assets/js/205.0a2441c7.js"><link rel="prefetch" href="/docs/assets/js/206.ee8ecc30.js"><link rel="prefetch" href="/docs/assets/js/207.95023456.js"><link rel="prefetch" href="/docs/assets/js/208.8d1ab10f.js"><link rel="prefetch" href="/docs/assets/js/209.e9330fc0.js"><link rel="prefetch" href="/docs/assets/js/21.097c797d.js"><link rel="prefetch" href="/docs/assets/js/210.06b82d2e.js"><link rel="prefetch" href="/docs/assets/js/211.7405c188.js"><link rel="prefetch" href="/docs/assets/js/212.b34e7db7.js"><link rel="prefetch" href="/docs/assets/js/213.e88794f5.js"><link rel="prefetch" href="/docs/assets/js/214.648b7add.js"><link rel="prefetch" href="/docs/assets/js/215.75fba159.js"><link rel="prefetch" href="/docs/assets/js/216.acfb13c5.js"><link rel="prefetch" href="/docs/assets/js/217.3261970a.js"><link rel="prefetch" href="/docs/assets/js/218.0e894be6.js"><link rel="prefetch" href="/docs/assets/js/219.245e7ca6.js"><link rel="prefetch" href="/docs/assets/js/22.abe187a5.js"><link rel="prefetch" href="/docs/assets/js/220.b8965724.js"><link rel="prefetch" href="/docs/assets/js/221.3d701dfe.js"><link rel="prefetch" href="/docs/assets/js/222.4eaef226.js"><link rel="prefetch" href="/docs/assets/js/223.3bd19fa1.js"><link rel="prefetch" href="/docs/assets/js/224.b58dda67.js"><link rel="prefetch" href="/docs/assets/js/225.6810fe63.js"><link rel="prefetch" href="/docs/assets/js/226.5c254981.js"><link rel="prefetch" href="/docs/assets/js/227.c9153b96.js"><link rel="prefetch" href="/docs/assets/js/228.9cdbdc56.js"><link rel="prefetch" href="/docs/assets/js/229.f9fb75f1.js"><link rel="prefetch" href="/docs/assets/js/23.d91edde4.js"><link rel="prefetch" href="/docs/assets/js/230.db634776.js"><link rel="prefetch" href="/docs/assets/js/231.f7f0839e.js"><link rel="prefetch" href="/docs/assets/js/232.a3de1801.js"><link rel="prefetch" href="/docs/assets/js/233.b6f0d62b.js"><link rel="prefetch" href="/docs/assets/js/234.e39143e1.js"><link rel="prefetch" href="/docs/assets/js/235.3fd57840.js"><link rel="prefetch" href="/docs/assets/js/236.10a65e3e.js"><link rel="prefetch" href="/docs/assets/js/237.b0542607.js"><link rel="prefetch" href="/docs/assets/js/238.abb69abd.js"><link rel="prefetch" href="/docs/assets/js/239.efc90d70.js"><link rel="prefetch" href="/docs/assets/js/24.6e1eeeef.js"><link rel="prefetch" href="/docs/assets/js/240.8b76e84b.js"><link rel="prefetch" href="/docs/assets/js/241.72678af4.js"><link rel="prefetch" href="/docs/assets/js/242.48314013.js"><link rel="prefetch" href="/docs/assets/js/243.41a283f5.js"><link rel="prefetch" href="/docs/assets/js/244.da29d1e7.js"><link rel="prefetch" href="/docs/assets/js/245.5f5d0708.js"><link rel="prefetch" href="/docs/assets/js/246.a044c7ac.js"><link rel="prefetch" href="/docs/assets/js/247.c689d1e7.js"><link rel="prefetch" href="/docs/assets/js/248.49caaed1.js"><link rel="prefetch" href="/docs/assets/js/249.4306f169.js"><link rel="prefetch" href="/docs/assets/js/25.b0162179.js"><link rel="prefetch" href="/docs/assets/js/250.ae37da4e.js"><link rel="prefetch" href="/docs/assets/js/251.88abc2a7.js"><link rel="prefetch" href="/docs/assets/js/252.66c01a5f.js"><link rel="prefetch" href="/docs/assets/js/253.8ffa9a7d.js"><link rel="prefetch" href="/docs/assets/js/254.bb046418.js"><link rel="prefetch" href="/docs/assets/js/255.90ed6432.js"><link rel="prefetch" href="/docs/assets/js/256.f3538c09.js"><link rel="prefetch" href="/docs/assets/js/257.827b9462.js"><link rel="prefetch" href="/docs/assets/js/258.940f6f58.js"><link rel="prefetch" href="/docs/assets/js/259.840005c6.js"><link rel="prefetch" href="/docs/assets/js/26.9758bc0c.js"><link rel="prefetch" href="/docs/assets/js/260.e4affc0a.js"><link rel="prefetch" href="/docs/assets/js/261.a792b443.js"><link rel="prefetch" href="/docs/assets/js/262.d41c806e.js"><link rel="prefetch" href="/docs/assets/js/263.30b46414.js"><link rel="prefetch" href="/docs/assets/js/264.04c181c2.js"><link rel="prefetch" href="/docs/assets/js/265.82b0ee0c.js"><link rel="prefetch" href="/docs/assets/js/266.5e1b8cdd.js"><link rel="prefetch" href="/docs/assets/js/267.d208bf00.js"><link rel="prefetch" href="/docs/assets/js/268.4798a1d9.js"><link rel="prefetch" href="/docs/assets/js/269.42d859e2.js"><link rel="prefetch" href="/docs/assets/js/27.eee67a0e.js"><link rel="prefetch" href="/docs/assets/js/270.85b537a2.js"><link rel="prefetch" href="/docs/assets/js/271.ca7892bc.js"><link rel="prefetch" href="/docs/assets/js/272.ce31b803.js"><link rel="prefetch" href="/docs/assets/js/273.7c974069.js"><link rel="prefetch" href="/docs/assets/js/274.2b66d512.js"><link rel="prefetch" href="/docs/assets/js/275.b56f8dbf.js"><link rel="prefetch" href="/docs/assets/js/276.f736bbeb.js"><link rel="prefetch" href="/docs/assets/js/277.4d0d30e2.js"><link rel="prefetch" href="/docs/assets/js/278.a76d64f4.js"><link rel="prefetch" href="/docs/assets/js/279.6329ea87.js"><link rel="prefetch" href="/docs/assets/js/28.5ff9aa71.js"><link rel="prefetch" href="/docs/assets/js/280.bbbff55d.js"><link rel="prefetch" href="/docs/assets/js/281.873571fa.js"><link rel="prefetch" href="/docs/assets/js/282.70d9e100.js"><link rel="prefetch" href="/docs/assets/js/283.afec2842.js"><link rel="prefetch" href="/docs/assets/js/284.2bab80ac.js"><link rel="prefetch" href="/docs/assets/js/285.991c3c08.js"><link rel="prefetch" href="/docs/assets/js/286.78bbc48a.js"><link rel="prefetch" href="/docs/assets/js/287.f454621e.js"><link rel="prefetch" href="/docs/assets/js/288.cd5be37d.js"><link rel="prefetch" href="/docs/assets/js/289.71438313.js"><link rel="prefetch" href="/docs/assets/js/29.dd745bcb.js"><link rel="prefetch" href="/docs/assets/js/290.f29653b2.js"><link rel="prefetch" href="/docs/assets/js/291.6399dfc2.js"><link rel="prefetch" href="/docs/assets/js/292.c171e57a.js"><link rel="prefetch" href="/docs/assets/js/293.c18953d7.js"><link rel="prefetch" href="/docs/assets/js/294.41a4080d.js"><link rel="prefetch" href="/docs/assets/js/295.3364b4dc.js"><link rel="prefetch" href="/docs/assets/js/296.928d11b2.js"><link rel="prefetch" href="/docs/assets/js/297.efe026f9.js"><link rel="prefetch" href="/docs/assets/js/298.809663f2.js"><link rel="prefetch" href="/docs/assets/js/299.a325235c.js"><link rel="prefetch" href="/docs/assets/js/3.3f8ad60b.js"><link rel="prefetch" href="/docs/assets/js/30.c7d994d4.js"><link rel="prefetch" href="/docs/assets/js/300.66e0f3ec.js"><link rel="prefetch" href="/docs/assets/js/301.6920607d.js"><link rel="prefetch" href="/docs/assets/js/302.e287bca5.js"><link rel="prefetch" href="/docs/assets/js/303.e83a4b2a.js"><link rel="prefetch" href="/docs/assets/js/304.ccbcd03b.js"><link rel="prefetch" href="/docs/assets/js/305.ba24b055.js"><link rel="prefetch" href="/docs/assets/js/306.c22c5ef9.js"><link rel="prefetch" href="/docs/assets/js/307.6d01b8c4.js"><link rel="prefetch" href="/docs/assets/js/308.1f373231.js"><link rel="prefetch" href="/docs/assets/js/309.c8634bce.js"><link rel="prefetch" href="/docs/assets/js/31.1e7ec389.js"><link rel="prefetch" href="/docs/assets/js/310.64fd4b2b.js"><link rel="prefetch" href="/docs/assets/js/311.b038303d.js"><link rel="prefetch" href="/docs/assets/js/312.0283c934.js"><link rel="prefetch" href="/docs/assets/js/313.9146a338.js"><link rel="prefetch" href="/docs/assets/js/314.35d29d78.js"><link rel="prefetch" href="/docs/assets/js/315.8e12d8a2.js"><link rel="prefetch" href="/docs/assets/js/316.72400924.js"><link rel="prefetch" href="/docs/assets/js/317.68fa70e3.js"><link rel="prefetch" href="/docs/assets/js/318.4f8cf838.js"><link rel="prefetch" href="/docs/assets/js/319.39adbc67.js"><link rel="prefetch" href="/docs/assets/js/32.79f38acf.js"><link rel="prefetch" href="/docs/assets/js/320.78693505.js"><link rel="prefetch" href="/docs/assets/js/321.c463f785.js"><link rel="prefetch" href="/docs/assets/js/322.ddcd1f48.js"><link rel="prefetch" href="/docs/assets/js/323.a9732bb5.js"><link rel="prefetch" href="/docs/assets/js/324.07bdf48b.js"><link rel="prefetch" href="/docs/assets/js/325.4d231616.js"><link rel="prefetch" href="/docs/assets/js/326.7034f1ff.js"><link rel="prefetch" href="/docs/assets/js/327.76dead9e.js"><link rel="prefetch" href="/docs/assets/js/328.483fc547.js"><link rel="prefetch" href="/docs/assets/js/329.c5d51c5c.js"><link rel="prefetch" href="/docs/assets/js/33.83e1eb8f.js"><link rel="prefetch" href="/docs/assets/js/330.7d0a6ecb.js"><link rel="prefetch" href="/docs/assets/js/331.bc7e192b.js"><link rel="prefetch" href="/docs/assets/js/332.73716274.js"><link rel="prefetch" href="/docs/assets/js/333.fae343b2.js"><link rel="prefetch" href="/docs/assets/js/334.f63d9707.js"><link rel="prefetch" href="/docs/assets/js/335.7ed5f4aa.js"><link rel="prefetch" href="/docs/assets/js/336.883e1a61.js"><link rel="prefetch" href="/docs/assets/js/337.4b8327db.js"><link rel="prefetch" href="/docs/assets/js/338.e9891384.js"><link rel="prefetch" href="/docs/assets/js/339.6754ab40.js"><link rel="prefetch" href="/docs/assets/js/34.4494808c.js"><link rel="prefetch" href="/docs/assets/js/340.6da062ac.js"><link rel="prefetch" href="/docs/assets/js/341.b806fa90.js"><link rel="prefetch" href="/docs/assets/js/342.3690f428.js"><link rel="prefetch" href="/docs/assets/js/343.bdf11a70.js"><link rel="prefetch" href="/docs/assets/js/344.5f593fdc.js"><link rel="prefetch" href="/docs/assets/js/345.1ee8bf93.js"><link rel="prefetch" href="/docs/assets/js/346.4a7aec3d.js"><link rel="prefetch" href="/docs/assets/js/347.728b8225.js"><link rel="prefetch" href="/docs/assets/js/348.8465db0d.js"><link rel="prefetch" href="/docs/assets/js/349.65f8931b.js"><link rel="prefetch" href="/docs/assets/js/35.9ed61737.js"><link rel="prefetch" href="/docs/assets/js/350.df812715.js"><link rel="prefetch" href="/docs/assets/js/351.06c30c8a.js"><link rel="prefetch" href="/docs/assets/js/352.03d6f77a.js"><link rel="prefetch" href="/docs/assets/js/353.2115517d.js"><link rel="prefetch" href="/docs/assets/js/354.7e43582c.js"><link rel="prefetch" href="/docs/assets/js/355.79d98c52.js"><link rel="prefetch" href="/docs/assets/js/356.d9ced2c8.js"><link rel="prefetch" href="/docs/assets/js/357.50380c85.js"><link rel="prefetch" href="/docs/assets/js/358.b33d3a79.js"><link rel="prefetch" href="/docs/assets/js/359.78c254f2.js"><link rel="prefetch" href="/docs/assets/js/36.2d29308d.js"><link rel="prefetch" href="/docs/assets/js/360.3fbff7fe.js"><link rel="prefetch" href="/docs/assets/js/361.03942ef1.js"><link rel="prefetch" href="/docs/assets/js/362.08b44bd1.js"><link rel="prefetch" href="/docs/assets/js/363.d63f9abe.js"><link rel="prefetch" href="/docs/assets/js/364.5d682b2a.js"><link rel="prefetch" href="/docs/assets/js/365.e065d70b.js"><link rel="prefetch" href="/docs/assets/js/366.18cd3d90.js"><link rel="prefetch" href="/docs/assets/js/367.c69571cc.js"><link rel="prefetch" href="/docs/assets/js/368.20fbd544.js"><link rel="prefetch" href="/docs/assets/js/369.6e84249d.js"><link rel="prefetch" href="/docs/assets/js/37.317313c1.js"><link rel="prefetch" href="/docs/assets/js/370.9d05e5d0.js"><link rel="prefetch" href="/docs/assets/js/371.10fac3df.js"><link rel="prefetch" href="/docs/assets/js/372.e669050b.js"><link rel="prefetch" href="/docs/assets/js/373.91b58bf5.js"><link rel="prefetch" href="/docs/assets/js/374.2a6e8bc3.js"><link rel="prefetch" href="/docs/assets/js/375.4ce7ec5d.js"><link rel="prefetch" href="/docs/assets/js/376.6b8f3d48.js"><link rel="prefetch" href="/docs/assets/js/377.c987f829.js"><link rel="prefetch" href="/docs/assets/js/378.db47e519.js"><link rel="prefetch" href="/docs/assets/js/379.8557bbdc.js"><link rel="prefetch" href="/docs/assets/js/38.0db090e3.js"><link rel="prefetch" href="/docs/assets/js/380.3565b4bb.js"><link rel="prefetch" href="/docs/assets/js/381.40e0a3e6.js"><link rel="prefetch" href="/docs/assets/js/382.e3c1c7f0.js"><link rel="prefetch" href="/docs/assets/js/383.e095015f.js"><link rel="prefetch" href="/docs/assets/js/384.b9bec300.js"><link rel="prefetch" href="/docs/assets/js/385.71b582db.js"><link rel="prefetch" href="/docs/assets/js/386.c157ec67.js"><link rel="prefetch" href="/docs/assets/js/387.980ab87f.js"><link rel="prefetch" href="/docs/assets/js/388.454366e4.js"><link rel="prefetch" href="/docs/assets/js/389.65d723e5.js"><link rel="prefetch" href="/docs/assets/js/39.9d8bbaac.js"><link rel="prefetch" href="/docs/assets/js/390.41811900.js"><link rel="prefetch" href="/docs/assets/js/391.af530b22.js"><link rel="prefetch" href="/docs/assets/js/392.1e7ee6a5.js"><link rel="prefetch" href="/docs/assets/js/393.a9fc353a.js"><link rel="prefetch" href="/docs/assets/js/394.5e16aeec.js"><link rel="prefetch" href="/docs/assets/js/395.7c735d94.js"><link rel="prefetch" href="/docs/assets/js/396.492f3ee1.js"><link rel="prefetch" href="/docs/assets/js/397.61dab734.js"><link rel="prefetch" href="/docs/assets/js/398.d7eeafe1.js"><link rel="prefetch" href="/docs/assets/js/399.ad141543.js"><link rel="prefetch" href="/docs/assets/js/4.05a0e996.js"><link rel="prefetch" href="/docs/assets/js/40.1cd5b880.js"><link rel="prefetch" href="/docs/assets/js/400.2c07454b.js"><link rel="prefetch" href="/docs/assets/js/401.95e1ead0.js"><link rel="prefetch" href="/docs/assets/js/402.635d6c10.js"><link rel="prefetch" href="/docs/assets/js/403.cb161756.js"><link rel="prefetch" href="/docs/assets/js/404.83508bd7.js"><link rel="prefetch" href="/docs/assets/js/405.a4b541bd.js"><link rel="prefetch" href="/docs/assets/js/406.6ccb6323.js"><link rel="prefetch" href="/docs/assets/js/407.a8c991f5.js"><link rel="prefetch" href="/docs/assets/js/408.12d453f4.js"><link rel="prefetch" href="/docs/assets/js/409.dfce6116.js"><link rel="prefetch" href="/docs/assets/js/41.969602b9.js"><link rel="prefetch" href="/docs/assets/js/410.f88e4b19.js"><link rel="prefetch" href="/docs/assets/js/411.74cf9da0.js"><link rel="prefetch" href="/docs/assets/js/412.42e44234.js"><link rel="prefetch" href="/docs/assets/js/413.38210a44.js"><link rel="prefetch" href="/docs/assets/js/414.e656f1e5.js"><link rel="prefetch" href="/docs/assets/js/415.b467a960.js"><link rel="prefetch" href="/docs/assets/js/416.bb476fd3.js"><link rel="prefetch" href="/docs/assets/js/417.e0f91b7b.js"><link rel="prefetch" href="/docs/assets/js/418.aba4b6ec.js"><link rel="prefetch" href="/docs/assets/js/419.49918b9e.js"><link rel="prefetch" href="/docs/assets/js/42.f1b7827e.js"><link rel="prefetch" href="/docs/assets/js/420.6e5a816c.js"><link rel="prefetch" href="/docs/assets/js/421.688de877.js"><link rel="prefetch" href="/docs/assets/js/422.daf26434.js"><link rel="prefetch" href="/docs/assets/js/423.b2bc2119.js"><link rel="prefetch" href="/docs/assets/js/424.ebe77f62.js"><link rel="prefetch" href="/docs/assets/js/425.6d3dd0fa.js"><link rel="prefetch" href="/docs/assets/js/426.bd14af3f.js"><link rel="prefetch" href="/docs/assets/js/427.d9e8a757.js"><link rel="prefetch" href="/docs/assets/js/428.0e7b269a.js"><link rel="prefetch" href="/docs/assets/js/429.e52e9f70.js"><link rel="prefetch" href="/docs/assets/js/43.b5678246.js"><link rel="prefetch" href="/docs/assets/js/430.173fa749.js"><link rel="prefetch" href="/docs/assets/js/431.b1ff872d.js"><link rel="prefetch" href="/docs/assets/js/432.6e0606e6.js"><link rel="prefetch" href="/docs/assets/js/433.8266abf9.js"><link rel="prefetch" href="/docs/assets/js/434.665d209e.js"><link rel="prefetch" href="/docs/assets/js/435.cd8a0747.js"><link rel="prefetch" href="/docs/assets/js/436.846e2c9e.js"><link rel="prefetch" href="/docs/assets/js/437.30b7feca.js"><link rel="prefetch" href="/docs/assets/js/438.b8aff525.js"><link rel="prefetch" href="/docs/assets/js/439.18b9578d.js"><link rel="prefetch" href="/docs/assets/js/44.2370c860.js"><link rel="prefetch" href="/docs/assets/js/440.35c0ecce.js"><link rel="prefetch" href="/docs/assets/js/441.fed18c7d.js"><link rel="prefetch" href="/docs/assets/js/442.e5f35def.js"><link rel="prefetch" href="/docs/assets/js/443.b866c184.js"><link rel="prefetch" href="/docs/assets/js/444.0d37b6c8.js"><link rel="prefetch" href="/docs/assets/js/445.a97f647a.js"><link rel="prefetch" href="/docs/assets/js/446.50439f15.js"><link rel="prefetch" href="/docs/assets/js/447.8aa63064.js"><link rel="prefetch" href="/docs/assets/js/448.e96148eb.js"><link rel="prefetch" href="/docs/assets/js/449.931533fa.js"><link rel="prefetch" href="/docs/assets/js/45.edff6b3b.js"><link rel="prefetch" href="/docs/assets/js/450.ce8783ef.js"><link rel="prefetch" href="/docs/assets/js/451.bdff0992.js"><link rel="prefetch" href="/docs/assets/js/452.584574a8.js"><link rel="prefetch" href="/docs/assets/js/453.100c0fa5.js"><link rel="prefetch" href="/docs/assets/js/454.8fbcb294.js"><link rel="prefetch" href="/docs/assets/js/455.e4c0a5eb.js"><link rel="prefetch" href="/docs/assets/js/456.e6538525.js"><link rel="prefetch" href="/docs/assets/js/457.70e56aed.js"><link rel="prefetch" href="/docs/assets/js/458.c345e1fe.js"><link rel="prefetch" href="/docs/assets/js/459.1c4028f9.js"><link rel="prefetch" href="/docs/assets/js/46.2e44dd91.js"><link rel="prefetch" href="/docs/assets/js/460.24415075.js"><link rel="prefetch" href="/docs/assets/js/461.b35cfcfc.js"><link rel="prefetch" href="/docs/assets/js/462.7a838eaf.js"><link rel="prefetch" href="/docs/assets/js/463.b304008d.js"><link rel="prefetch" href="/docs/assets/js/464.4014c3ff.js"><link rel="prefetch" href="/docs/assets/js/465.7adbb8ec.js"><link rel="prefetch" href="/docs/assets/js/466.b09eb366.js"><link rel="prefetch" href="/docs/assets/js/467.e7ef5b96.js"><link rel="prefetch" href="/docs/assets/js/468.4f88c5f7.js"><link rel="prefetch" href="/docs/assets/js/469.ddd61303.js"><link rel="prefetch" href="/docs/assets/js/47.6cd3583f.js"><link rel="prefetch" href="/docs/assets/js/470.8e8e15bd.js"><link rel="prefetch" href="/docs/assets/js/471.4832167e.js"><link rel="prefetch" href="/docs/assets/js/472.ead02266.js"><link rel="prefetch" href="/docs/assets/js/473.492b0731.js"><link rel="prefetch" href="/docs/assets/js/474.28f0f878.js"><link rel="prefetch" href="/docs/assets/js/475.4aad059e.js"><link rel="prefetch" href="/docs/assets/js/476.c386ab53.js"><link rel="prefetch" href="/docs/assets/js/477.37b88d9d.js"><link rel="prefetch" href="/docs/assets/js/478.b06b99ce.js"><link rel="prefetch" href="/docs/assets/js/479.10400d91.js"><link rel="prefetch" href="/docs/assets/js/48.5a8aaad3.js"><link rel="prefetch" href="/docs/assets/js/480.45590106.js"><link rel="prefetch" href="/docs/assets/js/481.42c17f14.js"><link rel="prefetch" href="/docs/assets/js/482.1ac14080.js"><link rel="prefetch" href="/docs/assets/js/483.0d711788.js"><link rel="prefetch" href="/docs/assets/js/484.a5e826d1.js"><link rel="prefetch" href="/docs/assets/js/485.9b54f359.js"><link rel="prefetch" href="/docs/assets/js/486.8beea3f2.js"><link rel="prefetch" href="/docs/assets/js/487.656ddcda.js"><link rel="prefetch" href="/docs/assets/js/488.6430f0bc.js"><link rel="prefetch" href="/docs/assets/js/489.d602f9c1.js"><link rel="prefetch" href="/docs/assets/js/490.82c82352.js"><link rel="prefetch" href="/docs/assets/js/491.6cdc7999.js"><link rel="prefetch" href="/docs/assets/js/492.c060a5a7.js"><link rel="prefetch" href="/docs/assets/js/493.d159b068.js"><link rel="prefetch" href="/docs/assets/js/494.a1a9eea6.js"><link rel="prefetch" href="/docs/assets/js/495.6212b859.js"><link rel="prefetch" href="/docs/assets/js/496.974a061c.js"><link rel="prefetch" href="/docs/assets/js/497.ebe65913.js"><link rel="prefetch" href="/docs/assets/js/498.c51fdcb1.js"><link rel="prefetch" href="/docs/assets/js/499.14555742.js"><link rel="prefetch" href="/docs/assets/js/5.81dbdc4c.js"><link rel="prefetch" href="/docs/assets/js/50.d492e421.js"><link rel="prefetch" href="/docs/assets/js/500.9839a9a0.js"><link rel="prefetch" href="/docs/assets/js/501.28d6437f.js"><link rel="prefetch" href="/docs/assets/js/502.48a77d68.js"><link rel="prefetch" href="/docs/assets/js/503.ab50ac14.js"><link rel="prefetch" href="/docs/assets/js/504.c92f4a12.js"><link rel="prefetch" href="/docs/assets/js/505.f610852b.js"><link rel="prefetch" href="/docs/assets/js/506.920a4f62.js"><link rel="prefetch" href="/docs/assets/js/507.0710f221.js"><link rel="prefetch" href="/docs/assets/js/508.e38d6ba0.js"><link rel="prefetch" href="/docs/assets/js/509.892cdf08.js"><link rel="prefetch" href="/docs/assets/js/51.9245fc13.js"><link rel="prefetch" href="/docs/assets/js/510.1d576cd3.js"><link rel="prefetch" href="/docs/assets/js/52.cd408bf8.js"><link rel="prefetch" href="/docs/assets/js/53.ba331d3b.js"><link rel="prefetch" href="/docs/assets/js/54.45b035f8.js"><link rel="prefetch" href="/docs/assets/js/55.bcb2d972.js"><link rel="prefetch" href="/docs/assets/js/56.a27853e9.js"><link rel="prefetch" href="/docs/assets/js/57.702eaf37.js"><link rel="prefetch" href="/docs/assets/js/58.b4578034.js"><link rel="prefetch" href="/docs/assets/js/59.e9f5fa24.js"><link rel="prefetch" href="/docs/assets/js/6.088945ac.js"><link rel="prefetch" href="/docs/assets/js/60.a71b54c8.js"><link rel="prefetch" href="/docs/assets/js/61.825cc390.js"><link rel="prefetch" href="/docs/assets/js/62.9d69331e.js"><link rel="prefetch" href="/docs/assets/js/63.1722db1b.js"><link rel="prefetch" href="/docs/assets/js/64.1fef8784.js"><link rel="prefetch" href="/docs/assets/js/65.466f155b.js"><link rel="prefetch" href="/docs/assets/js/66.0ce57293.js"><link rel="prefetch" href="/docs/assets/js/67.8dda9c6b.js"><link rel="prefetch" href="/docs/assets/js/68.f7b8dadd.js"><link rel="prefetch" href="/docs/assets/js/69.0201cb17.js"><link rel="prefetch" href="/docs/assets/js/7.9def39df.js"><link rel="prefetch" href="/docs/assets/js/70.ac66aa6e.js"><link rel="prefetch" href="/docs/assets/js/71.40d5f36e.js"><link rel="prefetch" href="/docs/assets/js/73.0501a825.js"><link rel="prefetch" href="/docs/assets/js/74.c760dc7c.js"><link rel="prefetch" href="/docs/assets/js/75.0aa54a1e.js"><link rel="prefetch" href="/docs/assets/js/76.1f43241f.js"><link rel="prefetch" href="/docs/assets/js/77.592d2fe7.js"><link rel="prefetch" href="/docs/assets/js/78.bea013ac.js"><link rel="prefetch" href="/docs/assets/js/79.66eea525.js"><link rel="prefetch" href="/docs/assets/js/8.9a92554c.js"><link rel="prefetch" href="/docs/assets/js/80.3ab2b0f3.js"><link rel="prefetch" href="/docs/assets/js/81.a9417d25.js"><link rel="prefetch" href="/docs/assets/js/82.39c6874e.js"><link rel="prefetch" href="/docs/assets/js/83.a8afe116.js"><link rel="prefetch" href="/docs/assets/js/84.45431186.js"><link rel="prefetch" href="/docs/assets/js/85.76d8e4f9.js"><link rel="prefetch" href="/docs/assets/js/86.4c9eb60b.js"><link rel="prefetch" href="/docs/assets/js/87.85630776.js"><link rel="prefetch" href="/docs/assets/js/88.fb2b709f.js"><link rel="prefetch" href="/docs/assets/js/89.8f87b25d.js"><link rel="prefetch" href="/docs/assets/js/9.084f8180.js"><link rel="prefetch" href="/docs/assets/js/90.e1426327.js"><link rel="prefetch" href="/docs/assets/js/91.a5a60f6d.js"><link rel="prefetch" href="/docs/assets/js/92.c1014338.js"><link rel="prefetch" href="/docs/assets/js/93.9dfd684d.js"><link rel="prefetch" href="/docs/assets/js/94.8c54a9c8.js"><link rel="prefetch" href="/docs/assets/js/95.9bc5b198.js"><link rel="prefetch" href="/docs/assets/js/96.de99969f.js"><link rel="prefetch" href="/docs/assets/js/97.aec10758.js"><link rel="prefetch" href="/docs/assets/js/98.994a5e0c.js"><link rel="prefetch" href="/docs/assets/js/99.a8274f1a.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.13bbcd8a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">Nguyễn Khánk's Wiki</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/architect/" class="nav-link">
  Architecture
</a></div><div class="nav-item"><a href="https://nguyenngockhank.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/architect/" class="nav-link">
  Architecture
</a></div><div class="nav-item"><a href="https://nguyenngockhank.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>System Design Case Studies</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/kungfu/case-study/notification/" class="sidebar-link">Design a notification system</a></li><li><a href="/docs/kungfu/case-study/metrics/" class="sidebar-link">Metrics Monitoring &amp; Alerting System</a></li><li><a href="/docs/kungfu/case-study/hotel/" class="sidebar-link">Hotel Reservation Sytem</a></li><li><a href="/docs/kungfu/case-study/ticket-master/" class="sidebar-link">Design Ticketmaster</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Online tools</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>FinTech</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>Social Network</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/kungfu/case-study/instagram/" aria-current="page" class="sidebar-link">Design Instagram</a></li><li><a href="/docs/kungfu/case-study/instagram/part2/" class="sidebar-link">Design Instagram (2nd)</a></li><li><a href="/docs/kungfu/case-study/instagram/part3/" aria-current="page" class="active sidebar-link">Design Instagram (3rd)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/kungfu/case-study/instagram/part3/#_1-what-is-instagram" class="sidebar-link">1. What is Instagram?</a></li><li class="sidebar-sub-header"><a href="/docs/kungfu/case-study/instagram/part3/#_2-requirements-and-goals-of-the-system" class="sidebar-link">2. Requirements and Goals of the System</a></li><li class="sidebar-sub-header"><a href="/docs/kungfu/case-study/instagram/part3/#_3-some-design-considerations" class="sidebar-link">3. Some Design Considerations</a></li><li class="sidebar-sub-header"><a href="/docs/kungfu/case-study/instagram/part3/#_4-capacity-estimation-and-constraints" class="sidebar-link">4. Capacity Estimation and Constraints</a></li><li class="sidebar-sub-header"><a href="/docs/kungfu/case-study/instagram/part3/#_5-high-level-system-design" class="sidebar-link">5. High Level System Design</a></li><li class="sidebar-sub-header"><a href="/docs/kungfu/case-study/instagram/part3/#_6-database-schema" class="sidebar-link">6. Database Schema</a></li><li class="sidebar-sub-header"><a href="/docs/kungfu/case-study/instagram/part3/#_7-data-size-estimation" class="sidebar-link">7. Data Size Estimation</a></li><li class="sidebar-sub-header"><a href="/docs/kungfu/case-study/instagram/part3/#_8-component-design" class="sidebar-link">8. Component Design</a></li><li class="sidebar-sub-header"><a href="/docs/kungfu/case-study/instagram/part3/#_9-reliability-and-redundancy" class="sidebar-link">9. Reliability and Redundancy</a></li><li class="sidebar-sub-header"><a href="/docs/kungfu/case-study/instagram/part3/#_10-data-sharding" class="sidebar-link">10. Data Sharding</a></li><li class="sidebar-sub-header"><a href="/docs/kungfu/case-study/instagram/part3/#_11-ranking-and-news-feed-generation" class="sidebar-link">11. Ranking and News Feed Generation</a></li><li class="sidebar-sub-header"><a href="/docs/kungfu/case-study/instagram/part3/#_12-news-feed-creation-with-sharded-data" class="sidebar-link">12. News Feed Creation with Sharded Data</a></li><li class="sidebar-sub-header"><a href="/docs/kungfu/case-study/instagram/part3/#_13-cache-and-load-balancing" class="sidebar-link">13. Cache and Load balancing</a></li></ul></li><li><a href="/docs/kungfu/case-study/tinder/" class="sidebar-link">Design Tinder</a></li><li><a href="/docs/kungfu/case-study/twitter/" class="sidebar-link">Design Twitter</a></li><li><a href="/docs/kungfu/case-study/new-feed/" class="sidebar-link">Design new feed system</a></li><li><a href="/docs/kungfu/case-study/new-feed/part2/" class="sidebar-link">Design Fb Newsfeed (2nd)</a></li><li><a href="/docs/kungfu/case-study/twitter/twitter-search/" class="sidebar-link">Designing Twitter Search</a></li><li><a href="/docs/kungfu/case-study/search-autocomplete/" class="sidebar-link">Design a search autocomplete system</a></li><li><a href="/docs/kungfu/case-study/search-autocomplete/part2/" class="sidebar-link">Design Typeahead Suggestion</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Location</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Video</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Chat system</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>The Art of Readable Code</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>A Philosophy of Software Design</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Building Microservices</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>97 Things Every Programmer Should Know</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>NoSql Distilled</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Go</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Others</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="design-instagram-3rd"><a href="#design-instagram-3rd" class="header-anchor">#</a> Design Instagram (3rd)</h1> <p>Let's design a photo-sharing service like Instagram, where users can upload photos to share them with
other users. Similar Services: Flickr, Picasa</p> <p>Difficulty Level: Medium</p> <h2 id="_1-what-is-instagram"><a href="#_1-what-is-instagram" class="header-anchor">#</a> 1. What is Instagram?</h2> <p>Instagram is a social networking service which enables its users to upload and share their photos and
videos with other users. Instagram users can choose to share information either publicly or privately.
Anything shared publicly can be seen by any other user, whereas privately shared content can only be
accessed by a specified set of people. Instagram also enables its users to share through many other
social networking platforms, such as Facebook, Twitter, Flickr, and Tumblr.</p> <p>For the sake of this exercise, we plan to design a simpler version of Instagram, where a user can share
photos and can also follow other users. The ‘News Feed’ for each user will consist of top photos of all
the people the user follows.</p> <h2 id="_2-requirements-and-goals-of-the-system"><a href="#_2-requirements-and-goals-of-the-system" class="header-anchor">#</a> 2. Requirements and Goals of the System</h2> <p>We’ll focus on the following set of requirements while designing the Instagram:</p> <h3 id="functional-requirements"><a href="#functional-requirements" class="header-anchor">#</a> Functional Requirements</h3> <ol><li>Users should be able to upload/download/view photos.</li> <li>Users can perform searches based on photo/video titles.</li> <li>Users can follow other users.</li> <li>The system should be able to generate and display a user’s News Feed consisting of top photos
from all the people the user follows.</li></ol> <h3 id="non-functional-requirements"><a href="#non-functional-requirements" class="header-anchor">#</a> Non-functional Requirements</h3> <ol><li>Our service needs to be highly available.</li> <li>The acceptable latency of the system is 200ms for News Feed generation.</li> <li>Consistency can take a hit (in the interest of availability), if a user doesn’t see a photo for a
while; it should be fine.</li> <li>The system should be highly reliable; any uploaded photo or video should never be lost.
Not in scope: Adding tags to photos, searching photos on tags, commenting on photos, tagging users to
photos, who to follow, etc.</li></ol> <h2 id="_3-some-design-considerations"><a href="#_3-some-design-considerations" class="header-anchor">#</a> 3. Some Design Considerations</h2> <p>The system would be read-heavy, so we will focus on building a system that can retrieve photos
quickly.</p> <ol><li>Practically, users can upload as many photos as they like. Efficient management of storage
should be a crucial factor while designing this system.</li> <li>Low latency is expected while viewing photos.</li> <li>Data should be 100% reliable. If a user uploads a photo, the system will guarantee that it will
never be lost.</li></ol> <h2 id="_4-capacity-estimation-and-constraints"><a href="#_4-capacity-estimation-and-constraints" class="header-anchor">#</a> 4. Capacity Estimation and Constraints</h2> <ul><li>Let’s assume we have 500M total users, with 1M daily active users.</li> <li>2M new photos every day, 23 new photos every second.</li> <li>Average photo file size =&gt; 200KB</li> <li>Total space required for 1 day of photos</li></ul> <div class="language- extra-class"><pre class="language-text"><code>2M * 200KB =&gt; 400 GB
</code></pre></div><ul><li>Total space required for 10 years:</li></ul> <div class="language- extra-class"><pre class="language-text"><code>400GB * 365 (days a year) * 10 (years) ~= 1425TB 
</code></pre></div><h2 id="_5-high-level-system-design"><a href="#_5-high-level-system-design" class="header-anchor">#</a> 5. High Level System Design</h2> <p>At a high-level, we need to support two scenarios, one to upload photos and the other to view/search
photos. Our service would need some object storage servers to store photos and also some database
servers to store metadata information about the photos.</p> <p><img src="/docs/assets/img/f1.375b48c4.png" alt="Figure 1"></p> <h2 id="_6-database-schema"><a href="#_6-database-schema" class="header-anchor">#</a> 6. Database Schema</h2> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Defining the DB schema in the early stages of the interview would help to understand the data
flow among various components and later would guide towards data partitioning.</p> <p>We need to store data about users, their uploaded photos, and people they follow. Photo table will store
all data related to a photo; we need to have an index on (PhotoID, CreationDate) since we need to fetch
recent photos first.</p></div> <p><img src="/docs/assets/img/f2.85c3518b.png" alt="Figure 2"></p> <p>A straightforward approach for storing the above schema would be to use an RDBMS like MySQL
since we require joins. But relational databases come with their challenges, especially when we need to
scale them.</p> <p>We can store photos in a distributed file storage like <a href="https://en.wikipedia.org/wiki/Apache_Hadoop" target="_blank" rel="noopener noreferrer">HDFS<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> or <a href="https://en.wikipedia.org/wiki/Amazon_S3" target="_blank" rel="noopener noreferrer">S3<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>We can store the above schema in a distributed key-value store to enjoy the benefits offered by NoSQL.
All the metadata related to photos can go to a table where the ‘key’ would be the ‘PhotoID’ and the
‘value’ would be an object containing PhotoLocation, UserLocation, CreationTimestamp, etc.</p> <p>We need to store relationships between users and photos, to know who owns which photo. We also
need to store the list of people a user follows. For both of these tables, we can use a wide-column
datastore like Cassandra. For the ‘UserPhoto’ table, the ‘key’ would be ‘UserID’ and the ‘value’ would
be the list of ‘PhotoIDs’ the user owns, stored in different columns. We will have a similar scheme for
the ‘UserFollow’ table.</p> <p>Cassandra or key-value stores in general, always maintain a certain number of replicas to offer
reliability. Also, in such data stores, deletes don’t get applied instantly, data is retained for certain days (to support undeleting) before getting removed from the system permanently.</p> <h2 id="_7-data-size-estimation"><a href="#_7-data-size-estimation" class="header-anchor">#</a> 7. Data Size Estimation</h2> <p>Let’s estimate how much data will be going into each table and how much total storage we will need
for 10 years.</p> <p>User: Assuming each “int” and “dateTime” is four bytes, each row in the User’s table will be of 68
bytes:</p> <div class="language- extra-class"><pre class="language-text"><code>UserID (4 bytes) + Name (20 bytes) + Email (32 bytes) 
    + DateOfBirth (4 bytes) + CreationDate (4bytes) 
    + LastLogin (4 bytes) = 68 bytes
</code></pre></div><p>If we have 500 million users, we will need 32GB of total storage.</p> <div class="language- extra-class"><pre class="language-text"><code>500 million * 68 ~= 32GB 
</code></pre></div><p><strong>Photo</strong>: Each row in Photo’s table will be of 284 bytes:</p> <div class="language- extra-class"><pre class="language-text"><code>PhotoID (4 bytes) + UserID (4 bytes) + PhotoPath (256 bytes) 
    + PhotoLatitude (4 bytes) +  PhotLongitude(4 bytes) + UserLatitude (4 bytes) 
    + UserLongitude (4 bytes) + CreationDate (4 bytes) = 284 bytes
</code></pre></div><p>If 2M new photos get uploaded every day, we will need 0.5GB of storage for one day:</p> <p>2M * 284 bytes ~= 0.5GB per day</p> <p>For 10 years we will need 1.88TB of storage.</p> <p><strong>UserFollow</strong>: Each row in the UserFollow table will consist of 8 bytes. If we have 500 million users and on average each user follows 500 users. We would need 1.82TB of storage for the UserFollow table:</p> <div class="language- extra-class"><pre class="language-text"><code>500 million users * 500 followers * 8 bytes ~= 1.82TB
</code></pre></div><p>Total space required for all tables for 10 years will be 3.7TB:</p> <div class="language- extra-class"><pre class="language-text"><code>32GB + 1.88TB + 1.82TB ~= 3.7TB
</code></pre></div><h2 id="_8-component-design"><a href="#_8-component-design" class="header-anchor">#</a> 8. Component Design</h2> <p>Photo uploads (or writes) can be slow as they have to go to the disk, whereas reads will be faster,
especially if they are being served from cache.</p> <p>Uploading users can consume all the available connections, as uploading is a slow process. This means
that ‘reads’ cannot be served if the system gets busy with all the write requests. We should keep in mind
that web servers have a connection limit before designing our system. If we assume that a web server
can have a maximum of 500 connections at any time, then it can’t have more than 500 concurrent
uploads or reads. To handle this bottleneck we can split reads and writes into separate services. We will
have dedicated servers for reads and different servers for writes to ensure that uploads don’t hog the
system.</p> <p>Separating photos’ read and write requests will also allow us to scale and optimize each of these
operations independently</p> <p><img src="/docs/assets/img/f3.a1ef0cfa.png" alt="Figure 3"></p> <h2 id="_9-reliability-and-redundancy"><a href="#_9-reliability-and-redundancy" class="header-anchor">#</a> 9. Reliability and Redundancy</h2> <p>Losing files is not an option for our service. Therefore, we will store multiple copies of each file so that
if one storage server dies we can retrieve the photo from the other copy present on a different storage
server.</p> <p>This same principle also applies to other components of the system. If we want to have high availability
of the system, we need to have multiple replicas of services running in the system, so that if a few
services die down the system still remains available and running. Redundancy removes the single point
of failure in the system.</p> <p>If only one instance of a service is required to run at any point, we can run a redundant secondary copy
of the service that is not serving any traffic, but it can take control after the failover when primary has a
problem.</p> <p>Creating redundancy in a system can remove single points of failure and provide a backup or spare
functionality if needed in a crisis. For example, if there are two instances of the same service running in
production and one fails or degrades, the system can failover to the healthy copy. Failover can happen
automatically or require manual intervention.</p> <p><img src="/docs/assets/img/f4.3bc3184e.png" alt="Figure 4"></p> <h2 id="_10-data-sharding"><a href="#_10-data-sharding" class="header-anchor">#</a> 10. Data Sharding</h2> <p>Let’s discuss different schemes for metadata sharding:</p> <p><strong>a. Partitioning based on UserID</strong> Let’s assume we shard based on the ‘UserID’ so that we can keep all
photos of a user on the same shard. If one DB shard is 1TB, we will need four shards to store 3.7TB of
data. Let’s assume for better performance and scalability we keep 10 shards.</p> <p>So we’ll find the shard number by UserID % 10 and then store the data there. To uniquely identify any
photo in our system, we can append shard number with each PhotoID.</p> <p><strong>How can we generate PhotoIDs?</strong> Each DB shard can have its own auto-increment sequence for PhotoIDs and since we will append ShardID with each PhotoID, it will make it unique throughout our
system.</p> <p><strong>What are the different issues with this partitioning scheme?</strong></p> <ol><li>How would we handle hot users? Several people follow such hot users and a lot of other people
see any photo they upload.</li> <li>Some users will have a lot of photos compared to others, thus making a non-uniform
distribution of storage.</li> <li>What if we cannot store all pictures of a user on one shard? If we distribute photos of a user
onto multiple shards will it cause higher latencies?</li> <li>Storing all photos of a user on one shard can cause issues like unavailability of all of the user’s
data if that shard is down or higher latency if it is serving high load etc.</li></ol> <p><strong>b. Partitioning based on PhotoID</strong> If we can generate unique PhotoIDs first and then find a shard
number through “<code>PhotoID % 10</code>”, the above problems will have been solved. We would not need to
append ShardID with PhotoID in this case as PhotoID will itself be unique throughout the system.</p> <p><strong>How can we generate PhotoIDs?</strong> Here we cannot have an auto-incrementing sequence in each shard
to define PhotoID because we need to know PhotoID first to find the shard where it will be stored. One
solution could be that we dedicate a separate database instance to generate auto-incrementing IDs. If
our PhotoID can fit into 64 bits, we can define a table containing only a 64 bit ID field. So whenever
we would like to add a photo in our system, we can insert a new row in this table and take that ID to be
our PhotoID of the new photo.</p> <p><strong>Wouldn’t this key generating DB be a single point of failure?</strong> Yes, it would be. A workaround for
that could be defining two such databases with one generating even numbered IDs and the other odd
numbered. For the MySQL, the following script can define such sequences:</p> <div class="language- extra-class"><pre class="language-text"><code>KeyGeneratingServer1:
auto-increment-increment = 2
auto-increment-offset = 1

KeyGeneratingServer2:
auto-increment-increment = 2
auto-increment-offset = 2
</code></pre></div><p>We can put a load balancer in front of both of these databases to round robin between them and to deal
with downtime. Both these servers could be out of sync with one generating more keys than the other,
but this will not cause any issue in our system. We can extend this design by defining separate ID tables
for Users, Photo-Comments, or other objects present in our system.</p> <p><strong>Alternately</strong>, we can implement a ‘key’ generation scheme similar to what we have discussed in
Designing a URL Shortening service like TinyURL.</p> <p><strong>How can we plan for the future growth of our system?</strong> We can have a large number of logical
partitions to accommodate future data growth, such that in the beginning, multiple logical partitions
reside on a single physical database server. Since each database server can have multiple database
instances on it, we can have separate databases for each logical partition on any server. So whenever
we feel that a particular database server has a lot of data, we can migrate some logical partitions from it
to another server. We can maintain a config file (or a separate database) that can map our logical
partitions to database servers; this will enable us to move partitions around easily. Whenever we want
to move a partition, we only have to update the config file to announce the change.</p> <h2 id="_11-ranking-and-news-feed-generation"><a href="#_11-ranking-and-news-feed-generation" class="header-anchor">#</a> 11. Ranking and News Feed Generation</h2> <p>To create the News Feed for any given user, we need to fetch the latest, most popular and relevant
photos of the people the user follows.</p> <p>For simplicity, let’s assume we need to fetch top 100 photos for a user’s News Feed. Our application
server will first get a list of people the user follows and then fetch metadata info of latest 100 photos
from each user. In the final step, the server will submit all these photos to our ranking algorithm which
will determine the top 100 photos (based on recency, likeness, etc.) and return them to the user. A
possible problem with this approach would be higher latency as we have to query multiple tables and
perform sorting/merging/ranking on the results. To improve the efficiency, we can pre-generate the
News Feed and store it in a separate table.</p> <p>Pre-generating the News Feed: We can have dedicated servers that are continuously generating users’
News Feeds and storing them in a ‘UserNewsFeed’ table. So whenever any user needs the latest photos
for their News Feed, we will simply query this table and return the results to the user.
Whenever these servers need to generate the News Feed of a user, they will first query the
UserNewsFeed table to find the last time the News Feed was generated for that user. Then, new News
Feed data will be generated from that time onwards (following the steps mentioned above).
What are the different approaches for sending News Feed contents to the users?</p> <ol><li><strong>Pull</strong>: Clients can pull the News Feed contents from the server on a regular basis or manually whenever they need it. Possible problems with this approach are
<ul><li>a) New data might not be shown to the users until clients issue a pull request</li> <li>b) Most of the time pull requests will result in an empty response if there is no new data.</li></ul></li> <li><strong>Push</strong>: Servers can push new data to the users as soon as it is available. To efficiently manage this,
users have to maintain a Long Poll request with the server for receiving the updates. A possible
problem with this approach is, a user who follows a lot of people or a celebrity user who has millions
of followers; in this case, the server has to push updates quite frequently.</li> <li><strong>Hybrid</strong>: We can adopt a hybrid approach. We can move all the users who have a high number of
follows to a pull-based model and only push data to those users who have a few hundred (or thousand)
follows. Another approach could be that the server pushes updates to all the users not more than a
certain frequency, letting users with a lot of follows/updates to regularly pull data.
For a detailed discussion about News Feed generation, take a look at Designing Facebook’s Newsfeed.</li></ol> <h2 id="_12-news-feed-creation-with-sharded-data"><a href="#_12-news-feed-creation-with-sharded-data" class="header-anchor">#</a> 12. News Feed Creation with Sharded Data</h2> <p>One of the most important requirement to create the News Feed for any given user is to fetch the latest
photos from all people the user follows. For this, we need to have a mechanism to sort photos on their
time of creation. To efficiently do this, we can make photo creation time part of the PhotoID. As we
will have a primary index on PhotoID, it will be quite quick to find the latest PhotoIDs.</p> <p>We can use epoch time for this. Let’s say our PhotoID will have two parts; the first part will be
representing epoch time and the second part will be an auto-incrementing sequence. So to make a new
PhotoID, we can take the current epoch time and append an auto-incrementing ID from our keygenerating DB. We can figure out shard number from this PhotoID ( <code>PhotoID % 10</code>) and store the photo there.</p> <p><strong>What could be the size of our PhotoID?</strong> Let’s say our epoch time starts today, how many bits we
would need to store the number of seconds for next 50 years?</p> <div class="language- extra-class"><pre class="language-text"><code>86400 sec/day * 365 (days a year) * 50 (years) =&gt; 1.6 billion seconds 
</code></pre></div><p>We would need 31 bits to store this number. Since on the average, we are expecting 23 new photos per second; we can allocate 9 bits to store auto incremented sequence. So every second we can store (<code>2^9 =&gt; 512</code>) new photos. We can reset our auto incrementing sequence every second.</p> <h2 id="_13-cache-and-load-balancing"><a href="#_13-cache-and-load-balancing" class="header-anchor">#</a> 13. Cache and Load balancing</h2> <p>Our service would need a massive-scale photo delivery system to serve the globally distributed users.
Our service should push its content closer to the user using a large number of geographically
distributed photo cache servers and use CDNs</p> <p>We can introduce a cache for metadata servers to cache hot database rows. We can use Memcache to
cache the data and Application servers before hitting database can quickly check if the cache has
desired rows. Least Recently Used (LRU) can be a reasonable cache eviction policy for our system.
Under this policy, we discard the least recently viewed row first.</p> <p><strong>How can we build more intelligent cache?</strong> If we go with 80-20 rule, i.e., 20% of daily read volume
for photos is generating 80% of traffic which means that certain photos are so popular that the majority
of people read them. This dictates that we can try caching 20% of daily read volume of photos and
metadata.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/kungfu/case-study/instagram/part2/" class="prev">
        Design Instagram (2nd)
      </a></span> <span class="next"><a href="/docs/kungfu/case-study/tinder/">
        Design Tinder
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----><!----></div></div>
    <script src="/docs/assets/js/app.2639b5bd.js" defer></script><script src="/docs/assets/js/2.275e5570.js" defer></script><script src="/docs/assets/js/49.f7084fd0.js" defer></script><script src="/docs/assets/js/72.79427537.js" defer></script>
  </body>
</html>
