<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>5.  Information Hiding (and Leakage) | Nguyễn Khánk&#39;s Wiki</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="apple-touch-icon" sizes="180x180" href="../public/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../public/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../public/favicons/favicon-16x16.png">
    <link rel="manifest" href="../public/favicons/manifest.json">
    <link rel="mask-icon" href="../public/favicons/safari-pinned-tab.svg" color="#3a0839">
    <link rel="shortcut icon" href="../public/favicons/favicon.ico">
    <meta name="description" content="Wikipedia của tui">
    <meta name="msapplication-TileColor" content="#3a0839">
    <meta name="msapplication-config" content="../public/favicons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    
    <link rel="preload" href="/docs/assets/css/0.styles.0558eedd.css" as="style"><link rel="preload" href="/docs/assets/js/app.ed218ff4.js" as="script"><link rel="preload" href="/docs/assets/js/2.de1d5c77.js" as="script"><link rel="preload" href="/docs/assets/js/72.3fcd17e2.js" as="script"><link rel="preload" href="/docs/assets/js/33.5733d073.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.5023c493.js"><link rel="prefetch" href="/docs/assets/js/100.284a981f.js"><link rel="prefetch" href="/docs/assets/js/101.bd8bcb48.js"><link rel="prefetch" href="/docs/assets/js/102.482ff64f.js"><link rel="prefetch" href="/docs/assets/js/103.13336080.js"><link rel="prefetch" href="/docs/assets/js/104.78c8ba0b.js"><link rel="prefetch" href="/docs/assets/js/105.106fff09.js"><link rel="prefetch" href="/docs/assets/js/106.f9f0a8b7.js"><link rel="prefetch" href="/docs/assets/js/107.835564b8.js"><link rel="prefetch" href="/docs/assets/js/108.2eff01a1.js"><link rel="prefetch" href="/docs/assets/js/109.4966e4a5.js"><link rel="prefetch" href="/docs/assets/js/11.f47a5c98.js"><link rel="prefetch" href="/docs/assets/js/110.73d2c6e6.js"><link rel="prefetch" href="/docs/assets/js/111.92fffb03.js"><link rel="prefetch" href="/docs/assets/js/112.fd20c3c6.js"><link rel="prefetch" href="/docs/assets/js/113.c8655eb5.js"><link rel="prefetch" href="/docs/assets/js/114.14138359.js"><link rel="prefetch" href="/docs/assets/js/115.c736f983.js"><link rel="prefetch" href="/docs/assets/js/116.1f006b3a.js"><link rel="prefetch" href="/docs/assets/js/117.e3a9d496.js"><link rel="prefetch" href="/docs/assets/js/118.81a595ef.js"><link rel="prefetch" href="/docs/assets/js/119.7e381904.js"><link rel="prefetch" href="/docs/assets/js/12.f307c195.js"><link rel="prefetch" href="/docs/assets/js/120.22879100.js"><link rel="prefetch" href="/docs/assets/js/121.57012466.js"><link rel="prefetch" href="/docs/assets/js/122.c6c4cdb1.js"><link rel="prefetch" href="/docs/assets/js/123.f2131bbb.js"><link rel="prefetch" href="/docs/assets/js/124.39b9af6f.js"><link rel="prefetch" href="/docs/assets/js/125.efb5921e.js"><link rel="prefetch" href="/docs/assets/js/126.ef25b1f2.js"><link rel="prefetch" href="/docs/assets/js/127.65ef0044.js"><link rel="prefetch" href="/docs/assets/js/128.381c574c.js"><link rel="prefetch" href="/docs/assets/js/129.0bc9eb99.js"><link rel="prefetch" href="/docs/assets/js/13.dd6ab06d.js"><link rel="prefetch" href="/docs/assets/js/130.e13a98e6.js"><link rel="prefetch" href="/docs/assets/js/131.3ee7c5b9.js"><link rel="prefetch" href="/docs/assets/js/132.55caabc9.js"><link rel="prefetch" href="/docs/assets/js/133.714e6d14.js"><link rel="prefetch" href="/docs/assets/js/134.333503ce.js"><link rel="prefetch" href="/docs/assets/js/135.438ec9e1.js"><link rel="prefetch" href="/docs/assets/js/136.22d22116.js"><link rel="prefetch" href="/docs/assets/js/137.1ea3c2bf.js"><link rel="prefetch" href="/docs/assets/js/138.cf10f8f2.js"><link rel="prefetch" href="/docs/assets/js/139.bfa498ce.js"><link rel="prefetch" href="/docs/assets/js/14.934dd6a1.js"><link rel="prefetch" href="/docs/assets/js/140.1330e75a.js"><link rel="prefetch" href="/docs/assets/js/141.cd638896.js"><link rel="prefetch" href="/docs/assets/js/142.a5dd51d2.js"><link rel="prefetch" href="/docs/assets/js/143.e2aca1b6.js"><link rel="prefetch" href="/docs/assets/js/144.28aecb0c.js"><link rel="prefetch" href="/docs/assets/js/145.5d9cfb0f.js"><link rel="prefetch" href="/docs/assets/js/146.31b921ad.js"><link rel="prefetch" href="/docs/assets/js/147.929ca0f1.js"><link rel="prefetch" href="/docs/assets/js/148.eb2238e6.js"><link rel="prefetch" href="/docs/assets/js/149.e2a2ef57.js"><link rel="prefetch" href="/docs/assets/js/15.ba146d8d.js"><link rel="prefetch" href="/docs/assets/js/150.69701526.js"><link rel="prefetch" href="/docs/assets/js/151.8c8bf959.js"><link rel="prefetch" href="/docs/assets/js/152.faabc959.js"><link rel="prefetch" href="/docs/assets/js/153.7f9bb591.js"><link rel="prefetch" href="/docs/assets/js/154.0b2385bb.js"><link rel="prefetch" href="/docs/assets/js/155.1a770cd3.js"><link rel="prefetch" href="/docs/assets/js/156.ba81b7ee.js"><link rel="prefetch" href="/docs/assets/js/157.33f72c1f.js"><link rel="prefetch" href="/docs/assets/js/158.189a0e14.js"><link rel="prefetch" href="/docs/assets/js/159.d2393949.js"><link rel="prefetch" href="/docs/assets/js/16.fbc0e33c.js"><link rel="prefetch" href="/docs/assets/js/160.f16a8efd.js"><link rel="prefetch" href="/docs/assets/js/161.8351bc9e.js"><link rel="prefetch" href="/docs/assets/js/162.c8f8d515.js"><link rel="prefetch" href="/docs/assets/js/163.05f11963.js"><link rel="prefetch" href="/docs/assets/js/164.30dd077a.js"><link rel="prefetch" href="/docs/assets/js/165.a84ae891.js"><link rel="prefetch" href="/docs/assets/js/166.296952ef.js"><link rel="prefetch" href="/docs/assets/js/167.c5978c49.js"><link rel="prefetch" href="/docs/assets/js/168.e02ee7ff.js"><link rel="prefetch" href="/docs/assets/js/169.5bf5cd48.js"><link rel="prefetch" href="/docs/assets/js/17.ac45b0d9.js"><link rel="prefetch" href="/docs/assets/js/170.b8908ae9.js"><link rel="prefetch" href="/docs/assets/js/171.bf6e66a1.js"><link rel="prefetch" href="/docs/assets/js/172.f1ccdde6.js"><link rel="prefetch" href="/docs/assets/js/173.7b7ab2e8.js"><link rel="prefetch" href="/docs/assets/js/174.cb532ca5.js"><link rel="prefetch" href="/docs/assets/js/175.ac29e746.js"><link rel="prefetch" href="/docs/assets/js/176.650233f1.js"><link rel="prefetch" href="/docs/assets/js/177.a771ee5b.js"><link rel="prefetch" href="/docs/assets/js/178.5010c3a0.js"><link rel="prefetch" href="/docs/assets/js/179.ece519fc.js"><link rel="prefetch" href="/docs/assets/js/18.0f9655d5.js"><link rel="prefetch" href="/docs/assets/js/180.abef5f22.js"><link rel="prefetch" href="/docs/assets/js/181.64a28d38.js"><link rel="prefetch" href="/docs/assets/js/182.63909734.js"><link rel="prefetch" href="/docs/assets/js/183.9310dd5d.js"><link rel="prefetch" href="/docs/assets/js/184.44b63ca0.js"><link rel="prefetch" href="/docs/assets/js/185.a1645c38.js"><link rel="prefetch" href="/docs/assets/js/186.9e70827f.js"><link rel="prefetch" href="/docs/assets/js/187.3b40d84e.js"><link rel="prefetch" href="/docs/assets/js/188.afa48289.js"><link rel="prefetch" href="/docs/assets/js/189.e891e567.js"><link rel="prefetch" href="/docs/assets/js/19.8a639b7d.js"><link rel="prefetch" href="/docs/assets/js/190.83e8bba7.js"><link rel="prefetch" href="/docs/assets/js/191.90f7bb80.js"><link rel="prefetch" href="/docs/assets/js/192.222e5cdd.js"><link rel="prefetch" href="/docs/assets/js/193.a6d159ea.js"><link rel="prefetch" href="/docs/assets/js/194.563cfecb.js"><link rel="prefetch" href="/docs/assets/js/195.d2897b3b.js"><link rel="prefetch" href="/docs/assets/js/196.5ddfdec2.js"><link rel="prefetch" href="/docs/assets/js/197.e4bc2354.js"><link rel="prefetch" href="/docs/assets/js/198.260a922a.js"><link rel="prefetch" href="/docs/assets/js/199.8ff33dbe.js"><link rel="prefetch" href="/docs/assets/js/20.34b7e349.js"><link rel="prefetch" href="/docs/assets/js/200.fe8cf14f.js"><link rel="prefetch" href="/docs/assets/js/201.a1972b93.js"><link rel="prefetch" href="/docs/assets/js/202.3e8a4959.js"><link rel="prefetch" href="/docs/assets/js/203.1aa267b3.js"><link rel="prefetch" href="/docs/assets/js/204.6d03fc54.js"><link rel="prefetch" href="/docs/assets/js/205.c94c0957.js"><link rel="prefetch" href="/docs/assets/js/206.4aaea647.js"><link rel="prefetch" href="/docs/assets/js/207.53432dde.js"><link rel="prefetch" href="/docs/assets/js/208.2e2685d4.js"><link rel="prefetch" href="/docs/assets/js/209.e44362a3.js"><link rel="prefetch" href="/docs/assets/js/21.c59e0e98.js"><link rel="prefetch" href="/docs/assets/js/210.11dc1c0f.js"><link rel="prefetch" href="/docs/assets/js/211.38928593.js"><link rel="prefetch" href="/docs/assets/js/212.19c32eeb.js"><link rel="prefetch" href="/docs/assets/js/213.6bb90207.js"><link rel="prefetch" href="/docs/assets/js/214.ef46c11c.js"><link rel="prefetch" href="/docs/assets/js/215.87ebbaa1.js"><link rel="prefetch" href="/docs/assets/js/216.3e0b9647.js"><link rel="prefetch" href="/docs/assets/js/217.bd724dcc.js"><link rel="prefetch" href="/docs/assets/js/218.7dd31ae5.js"><link rel="prefetch" href="/docs/assets/js/219.fd005e52.js"><link rel="prefetch" href="/docs/assets/js/22.f9821b9b.js"><link rel="prefetch" href="/docs/assets/js/220.666e4005.js"><link rel="prefetch" href="/docs/assets/js/221.a8dd5ae3.js"><link rel="prefetch" href="/docs/assets/js/222.874715bc.js"><link rel="prefetch" href="/docs/assets/js/223.8ba1487c.js"><link rel="prefetch" href="/docs/assets/js/224.6a86e41d.js"><link rel="prefetch" href="/docs/assets/js/225.92d34f6c.js"><link rel="prefetch" href="/docs/assets/js/226.4003aa80.js"><link rel="prefetch" href="/docs/assets/js/227.4a90fe5e.js"><link rel="prefetch" href="/docs/assets/js/228.f96aa744.js"><link rel="prefetch" href="/docs/assets/js/229.0bb9d718.js"><link rel="prefetch" href="/docs/assets/js/23.7f8c26e7.js"><link rel="prefetch" href="/docs/assets/js/230.3abadf74.js"><link rel="prefetch" href="/docs/assets/js/231.f481c052.js"><link rel="prefetch" href="/docs/assets/js/232.1ab6c50c.js"><link rel="prefetch" href="/docs/assets/js/233.79bd4f9d.js"><link rel="prefetch" href="/docs/assets/js/234.0920aa15.js"><link rel="prefetch" href="/docs/assets/js/235.cc7c94cf.js"><link rel="prefetch" href="/docs/assets/js/236.e96ebfd6.js"><link rel="prefetch" href="/docs/assets/js/237.8072e640.js"><link rel="prefetch" href="/docs/assets/js/238.3da34ec8.js"><link rel="prefetch" href="/docs/assets/js/239.f95e07b0.js"><link rel="prefetch" href="/docs/assets/js/24.3338bd23.js"><link rel="prefetch" href="/docs/assets/js/240.3b721888.js"><link rel="prefetch" href="/docs/assets/js/241.14ad8beb.js"><link rel="prefetch" href="/docs/assets/js/242.53903205.js"><link rel="prefetch" href="/docs/assets/js/243.39960f42.js"><link rel="prefetch" href="/docs/assets/js/244.4d638c11.js"><link rel="prefetch" href="/docs/assets/js/245.04dd8a3c.js"><link rel="prefetch" href="/docs/assets/js/246.a37c142d.js"><link rel="prefetch" href="/docs/assets/js/247.9e8fb79c.js"><link rel="prefetch" href="/docs/assets/js/248.dba561a4.js"><link rel="prefetch" href="/docs/assets/js/249.f211299b.js"><link rel="prefetch" href="/docs/assets/js/25.468a3b2e.js"><link rel="prefetch" href="/docs/assets/js/250.b3c6759c.js"><link rel="prefetch" href="/docs/assets/js/251.0db82277.js"><link rel="prefetch" href="/docs/assets/js/252.8679430e.js"><link rel="prefetch" href="/docs/assets/js/253.faefbc64.js"><link rel="prefetch" href="/docs/assets/js/254.aed93289.js"><link rel="prefetch" href="/docs/assets/js/255.5ecb3a43.js"><link rel="prefetch" href="/docs/assets/js/256.cc3e9853.js"><link rel="prefetch" href="/docs/assets/js/257.b7846464.js"><link rel="prefetch" href="/docs/assets/js/258.ca0e33b0.js"><link rel="prefetch" href="/docs/assets/js/259.b7bf4388.js"><link rel="prefetch" href="/docs/assets/js/26.e421c065.js"><link rel="prefetch" href="/docs/assets/js/260.5231851d.js"><link rel="prefetch" href="/docs/assets/js/261.933a4915.js"><link rel="prefetch" href="/docs/assets/js/262.382bdc60.js"><link rel="prefetch" href="/docs/assets/js/263.e3c2ccdc.js"><link rel="prefetch" href="/docs/assets/js/264.26400404.js"><link rel="prefetch" href="/docs/assets/js/265.91af8d06.js"><link rel="prefetch" href="/docs/assets/js/266.797f8075.js"><link rel="prefetch" href="/docs/assets/js/267.7263c1c9.js"><link rel="prefetch" href="/docs/assets/js/268.9557f12f.js"><link rel="prefetch" href="/docs/assets/js/269.829ddaae.js"><link rel="prefetch" href="/docs/assets/js/27.70b852e1.js"><link rel="prefetch" href="/docs/assets/js/270.4e213479.js"><link rel="prefetch" href="/docs/assets/js/271.16b02057.js"><link rel="prefetch" href="/docs/assets/js/272.9e60b1c3.js"><link rel="prefetch" href="/docs/assets/js/273.4a6e548a.js"><link rel="prefetch" href="/docs/assets/js/274.8888e585.js"><link rel="prefetch" href="/docs/assets/js/275.ee0e6094.js"><link rel="prefetch" href="/docs/assets/js/276.aa39f70f.js"><link rel="prefetch" href="/docs/assets/js/277.53a44a06.js"><link rel="prefetch" href="/docs/assets/js/278.eeed994d.js"><link rel="prefetch" href="/docs/assets/js/279.75063327.js"><link rel="prefetch" href="/docs/assets/js/28.109d4d82.js"><link rel="prefetch" href="/docs/assets/js/280.0e47e49a.js"><link rel="prefetch" href="/docs/assets/js/281.d011de44.js"><link rel="prefetch" href="/docs/assets/js/282.84bd9472.js"><link rel="prefetch" href="/docs/assets/js/283.93328ae1.js"><link rel="prefetch" href="/docs/assets/js/284.7ebedfbc.js"><link rel="prefetch" href="/docs/assets/js/285.4cc7cf0b.js"><link rel="prefetch" href="/docs/assets/js/286.fa87b3dc.js"><link rel="prefetch" href="/docs/assets/js/287.f518fced.js"><link rel="prefetch" href="/docs/assets/js/288.db51c51c.js"><link rel="prefetch" href="/docs/assets/js/289.d2dbad36.js"><link rel="prefetch" href="/docs/assets/js/29.a56dcea8.js"><link rel="prefetch" href="/docs/assets/js/290.776ae1cf.js"><link rel="prefetch" href="/docs/assets/js/291.ca47e99a.js"><link rel="prefetch" href="/docs/assets/js/292.a7c4eb50.js"><link rel="prefetch" href="/docs/assets/js/293.4ceab510.js"><link rel="prefetch" href="/docs/assets/js/294.300353f6.js"><link rel="prefetch" href="/docs/assets/js/295.90280d20.js"><link rel="prefetch" href="/docs/assets/js/296.6f7ee40b.js"><link rel="prefetch" href="/docs/assets/js/297.eefa3f58.js"><link rel="prefetch" href="/docs/assets/js/298.fe7172c7.js"><link rel="prefetch" href="/docs/assets/js/299.fd101421.js"><link rel="prefetch" href="/docs/assets/js/3.dd80ddf0.js"><link rel="prefetch" href="/docs/assets/js/30.f2adb12a.js"><link rel="prefetch" href="/docs/assets/js/300.eda2553b.js"><link rel="prefetch" href="/docs/assets/js/301.9e5b43f6.js"><link rel="prefetch" href="/docs/assets/js/302.adb69546.js"><link rel="prefetch" href="/docs/assets/js/303.281c1793.js"><link rel="prefetch" href="/docs/assets/js/304.d7bb4674.js"><link rel="prefetch" href="/docs/assets/js/305.bd7289f2.js"><link rel="prefetch" href="/docs/assets/js/306.4fef0539.js"><link rel="prefetch" href="/docs/assets/js/307.94e50767.js"><link rel="prefetch" href="/docs/assets/js/308.43377094.js"><link rel="prefetch" href="/docs/assets/js/309.7415a250.js"><link rel="prefetch" href="/docs/assets/js/31.b7e926b6.js"><link rel="prefetch" href="/docs/assets/js/310.87aa2a29.js"><link rel="prefetch" href="/docs/assets/js/311.da3b491e.js"><link rel="prefetch" href="/docs/assets/js/312.54e77b21.js"><link rel="prefetch" href="/docs/assets/js/313.3c58a0c3.js"><link rel="prefetch" href="/docs/assets/js/314.e2061a51.js"><link rel="prefetch" href="/docs/assets/js/315.93cfea1c.js"><link rel="prefetch" href="/docs/assets/js/316.842421f9.js"><link rel="prefetch" href="/docs/assets/js/317.0ba13b07.js"><link rel="prefetch" href="/docs/assets/js/318.0c4306e0.js"><link rel="prefetch" href="/docs/assets/js/319.5fcc15ec.js"><link rel="prefetch" href="/docs/assets/js/32.9bbab342.js"><link rel="prefetch" href="/docs/assets/js/320.3597bdec.js"><link rel="prefetch" href="/docs/assets/js/321.4778ca3c.js"><link rel="prefetch" href="/docs/assets/js/322.f54fa539.js"><link rel="prefetch" href="/docs/assets/js/323.026494b0.js"><link rel="prefetch" href="/docs/assets/js/324.e9266218.js"><link rel="prefetch" href="/docs/assets/js/325.99e3174d.js"><link rel="prefetch" href="/docs/assets/js/326.65730777.js"><link rel="prefetch" href="/docs/assets/js/327.1e37ca3a.js"><link rel="prefetch" href="/docs/assets/js/328.992b3dba.js"><link rel="prefetch" href="/docs/assets/js/329.864ecdf8.js"><link rel="prefetch" href="/docs/assets/js/330.ed4734fc.js"><link rel="prefetch" href="/docs/assets/js/331.28e39d8a.js"><link rel="prefetch" href="/docs/assets/js/332.cf2ca297.js"><link rel="prefetch" href="/docs/assets/js/333.163bffad.js"><link rel="prefetch" href="/docs/assets/js/334.a181370f.js"><link rel="prefetch" href="/docs/assets/js/335.c38d01fe.js"><link rel="prefetch" href="/docs/assets/js/336.402dea5a.js"><link rel="prefetch" href="/docs/assets/js/337.3b1a8f77.js"><link rel="prefetch" href="/docs/assets/js/338.26b3cd16.js"><link rel="prefetch" href="/docs/assets/js/339.923469ca.js"><link rel="prefetch" href="/docs/assets/js/34.d9e94fda.js"><link rel="prefetch" href="/docs/assets/js/340.a9e98b7c.js"><link rel="prefetch" href="/docs/assets/js/341.be674afa.js"><link rel="prefetch" href="/docs/assets/js/342.012129a7.js"><link rel="prefetch" href="/docs/assets/js/343.6d193363.js"><link rel="prefetch" href="/docs/assets/js/344.8394b181.js"><link rel="prefetch" href="/docs/assets/js/345.029df7c9.js"><link rel="prefetch" href="/docs/assets/js/346.5c57ea75.js"><link rel="prefetch" href="/docs/assets/js/347.a9b67716.js"><link rel="prefetch" href="/docs/assets/js/348.6d25b058.js"><link rel="prefetch" href="/docs/assets/js/349.9861a215.js"><link rel="prefetch" href="/docs/assets/js/35.00e09993.js"><link rel="prefetch" href="/docs/assets/js/350.184590e0.js"><link rel="prefetch" href="/docs/assets/js/351.f1beda9e.js"><link rel="prefetch" href="/docs/assets/js/352.06ae7593.js"><link rel="prefetch" href="/docs/assets/js/353.bff6cbd6.js"><link rel="prefetch" href="/docs/assets/js/354.d58f5973.js"><link rel="prefetch" href="/docs/assets/js/355.07628851.js"><link rel="prefetch" href="/docs/assets/js/356.a9ede5bf.js"><link rel="prefetch" href="/docs/assets/js/357.42a466e9.js"><link rel="prefetch" href="/docs/assets/js/358.0639a64f.js"><link rel="prefetch" href="/docs/assets/js/359.f47609df.js"><link rel="prefetch" href="/docs/assets/js/36.663b3246.js"><link rel="prefetch" href="/docs/assets/js/360.ac97596e.js"><link rel="prefetch" href="/docs/assets/js/361.c212bd2d.js"><link rel="prefetch" href="/docs/assets/js/362.58e219dd.js"><link rel="prefetch" href="/docs/assets/js/363.618c5d85.js"><link rel="prefetch" href="/docs/assets/js/364.57836c00.js"><link rel="prefetch" href="/docs/assets/js/365.57dc1639.js"><link rel="prefetch" href="/docs/assets/js/366.f4ab7b0a.js"><link rel="prefetch" href="/docs/assets/js/367.b00210f0.js"><link rel="prefetch" href="/docs/assets/js/368.799ffaa3.js"><link rel="prefetch" href="/docs/assets/js/369.6bf5a56e.js"><link rel="prefetch" href="/docs/assets/js/37.d8307e1b.js"><link rel="prefetch" href="/docs/assets/js/370.9bcdc35d.js"><link rel="prefetch" href="/docs/assets/js/371.78dc5c93.js"><link rel="prefetch" href="/docs/assets/js/372.1c8743dd.js"><link rel="prefetch" href="/docs/assets/js/373.cb1020cb.js"><link rel="prefetch" href="/docs/assets/js/374.60be3ad6.js"><link rel="prefetch" href="/docs/assets/js/375.f340ecfc.js"><link rel="prefetch" href="/docs/assets/js/376.b461221a.js"><link rel="prefetch" href="/docs/assets/js/377.b2a297c5.js"><link rel="prefetch" href="/docs/assets/js/378.b7cfc6a0.js"><link rel="prefetch" href="/docs/assets/js/379.78eda6c2.js"><link rel="prefetch" href="/docs/assets/js/38.a500a09e.js"><link rel="prefetch" href="/docs/assets/js/380.0d83ba2d.js"><link rel="prefetch" href="/docs/assets/js/381.5dc998b9.js"><link rel="prefetch" href="/docs/assets/js/382.54d228e5.js"><link rel="prefetch" href="/docs/assets/js/383.6bb87bf8.js"><link rel="prefetch" href="/docs/assets/js/384.44c44007.js"><link rel="prefetch" href="/docs/assets/js/385.21be5d2b.js"><link rel="prefetch" href="/docs/assets/js/386.8b806102.js"><link rel="prefetch" href="/docs/assets/js/387.6e7fe6e4.js"><link rel="prefetch" href="/docs/assets/js/388.8507f77d.js"><link rel="prefetch" href="/docs/assets/js/389.43d08259.js"><link rel="prefetch" href="/docs/assets/js/39.eb4517d8.js"><link rel="prefetch" href="/docs/assets/js/390.9f2c5338.js"><link rel="prefetch" href="/docs/assets/js/391.702f5acd.js"><link rel="prefetch" href="/docs/assets/js/392.ecbd8f80.js"><link rel="prefetch" href="/docs/assets/js/393.c03f11ee.js"><link rel="prefetch" href="/docs/assets/js/394.c24eadd7.js"><link rel="prefetch" href="/docs/assets/js/395.81e0a915.js"><link rel="prefetch" href="/docs/assets/js/396.f8b12342.js"><link rel="prefetch" href="/docs/assets/js/397.f82ddde5.js"><link rel="prefetch" href="/docs/assets/js/398.6534415a.js"><link rel="prefetch" href="/docs/assets/js/399.97654893.js"><link rel="prefetch" href="/docs/assets/js/4.fb88f924.js"><link rel="prefetch" href="/docs/assets/js/40.2928b57e.js"><link rel="prefetch" href="/docs/assets/js/400.a91a16d7.js"><link rel="prefetch" href="/docs/assets/js/401.9cdb26bc.js"><link rel="prefetch" href="/docs/assets/js/402.64abba29.js"><link rel="prefetch" href="/docs/assets/js/403.15bbaf7a.js"><link rel="prefetch" href="/docs/assets/js/404.f1f3a339.js"><link rel="prefetch" href="/docs/assets/js/405.c395b66b.js"><link rel="prefetch" href="/docs/assets/js/406.542537fa.js"><link rel="prefetch" href="/docs/assets/js/407.3b823a63.js"><link rel="prefetch" href="/docs/assets/js/408.fd5547b8.js"><link rel="prefetch" href="/docs/assets/js/41.5ec0c493.js"><link rel="prefetch" href="/docs/assets/js/42.79acb748.js"><link rel="prefetch" href="/docs/assets/js/43.7c93d37b.js"><link rel="prefetch" href="/docs/assets/js/44.b0ccd5af.js"><link rel="prefetch" href="/docs/assets/js/45.8db38bc2.js"><link rel="prefetch" href="/docs/assets/js/46.77abd87f.js"><link rel="prefetch" href="/docs/assets/js/47.76142be2.js"><link rel="prefetch" href="/docs/assets/js/48.fb05cc09.js"><link rel="prefetch" href="/docs/assets/js/49.fcddae31.js"><link rel="prefetch" href="/docs/assets/js/5.f7cfc7c2.js"><link rel="prefetch" href="/docs/assets/js/50.b611f75c.js"><link rel="prefetch" href="/docs/assets/js/51.4b96725b.js"><link rel="prefetch" href="/docs/assets/js/52.fcbf2b11.js"><link rel="prefetch" href="/docs/assets/js/53.349e18a0.js"><link rel="prefetch" href="/docs/assets/js/54.c44149cc.js"><link rel="prefetch" href="/docs/assets/js/55.95dfdcdd.js"><link rel="prefetch" href="/docs/assets/js/56.c86aaa7b.js"><link rel="prefetch" href="/docs/assets/js/57.e7741ec4.js"><link rel="prefetch" href="/docs/assets/js/58.2a8944bf.js"><link rel="prefetch" href="/docs/assets/js/59.f139962c.js"><link rel="prefetch" href="/docs/assets/js/6.64f902c9.js"><link rel="prefetch" href="/docs/assets/js/60.64268da2.js"><link rel="prefetch" href="/docs/assets/js/61.2d7472e1.js"><link rel="prefetch" href="/docs/assets/js/62.7c40b969.js"><link rel="prefetch" href="/docs/assets/js/63.c8f49f0a.js"><link rel="prefetch" href="/docs/assets/js/64.0c5a4304.js"><link rel="prefetch" href="/docs/assets/js/65.02fe6f12.js"><link rel="prefetch" href="/docs/assets/js/66.b38c6c7c.js"><link rel="prefetch" href="/docs/assets/js/67.53619ab1.js"><link rel="prefetch" href="/docs/assets/js/68.dbde5dd2.js"><link rel="prefetch" href="/docs/assets/js/69.f1ceea03.js"><link rel="prefetch" href="/docs/assets/js/7.c45dc450.js"><link rel="prefetch" href="/docs/assets/js/70.e8101f4b.js"><link rel="prefetch" href="/docs/assets/js/71.66ec1fb5.js"><link rel="prefetch" href="/docs/assets/js/73.f6f3d102.js"><link rel="prefetch" href="/docs/assets/js/74.8e81a6ce.js"><link rel="prefetch" href="/docs/assets/js/75.f730cc7e.js"><link rel="prefetch" href="/docs/assets/js/76.4412982e.js"><link rel="prefetch" href="/docs/assets/js/77.b05e96f3.js"><link rel="prefetch" href="/docs/assets/js/78.d0ae109a.js"><link rel="prefetch" href="/docs/assets/js/79.60ef8a47.js"><link rel="prefetch" href="/docs/assets/js/8.d903e613.js"><link rel="prefetch" href="/docs/assets/js/80.1d34311b.js"><link rel="prefetch" href="/docs/assets/js/81.194f91af.js"><link rel="prefetch" href="/docs/assets/js/82.7b60cb7d.js"><link rel="prefetch" href="/docs/assets/js/83.cc7c0ea6.js"><link rel="prefetch" href="/docs/assets/js/84.798fff8e.js"><link rel="prefetch" href="/docs/assets/js/85.5fbd88f7.js"><link rel="prefetch" href="/docs/assets/js/86.959d409b.js"><link rel="prefetch" href="/docs/assets/js/87.8d9c23ed.js"><link rel="prefetch" href="/docs/assets/js/88.f99e1fda.js"><link rel="prefetch" href="/docs/assets/js/89.6d9fbb83.js"><link rel="prefetch" href="/docs/assets/js/9.28675f80.js"><link rel="prefetch" href="/docs/assets/js/90.a9f09836.js"><link rel="prefetch" href="/docs/assets/js/91.3d6ce3ab.js"><link rel="prefetch" href="/docs/assets/js/92.1e80cb6b.js"><link rel="prefetch" href="/docs/assets/js/93.17f0e365.js"><link rel="prefetch" href="/docs/assets/js/94.16b6e22c.js"><link rel="prefetch" href="/docs/assets/js/95.69e7df35.js"><link rel="prefetch" href="/docs/assets/js/96.0f73f75d.js"><link rel="prefetch" href="/docs/assets/js/97.30980d48.js"><link rel="prefetch" href="/docs/assets/js/98.d98fab0e.js"><link rel="prefetch" href="/docs/assets/js/99.531097f3.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.0558eedd.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">Nguyễn Khánk's Wiki</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/architect/" class="nav-link">
  Architecture
</a></div><div class="nav-item"><a href="/docs/kungfu/letsgo.html" class="nav-link">
  Kungfu
</a></div><div class="nav-item"><a href="https://nguyenngockhank.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/architect/" class="nav-link">
  Architecture
</a></div><div class="nav-item"><a href="/docs/kungfu/letsgo.html" class="nav-link">
  Kungfu
</a></div><div class="nav-item"><a href="https://nguyenngockhank.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>The Art of Readable Code</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>A Philosophy of Software Design</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/kungfu/philosophy/c1.html" class="sidebar-link">1. Introduction</a></li><li><a href="/docs/kungfu/philosophy/c2.html" class="sidebar-link">2. The Nature of Complexity</a></li><li><a href="/docs/kungfu/philosophy/c3.html" class="sidebar-link">3. Working Code Isn’t Enough</a></li><li><a href="/docs/kungfu/philosophy/c4.html" class="sidebar-link">4. Modules Should Be Deep</a></li><li><a href="/docs/kungfu/philosophy/c5.html" aria-current="page" class="active sidebar-link">5.  Information Hiding (and Leakage)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/kungfu/philosophy/c5.html#_5-1-information-hiding" class="sidebar-link">5.1    Information hiding</a></li><li class="sidebar-sub-header"><a href="/docs/kungfu/philosophy/c5.html#_5-2-information-leakage" class="sidebar-link">5.2    Information leakage</a></li><li class="sidebar-sub-header"><a href="/docs/kungfu/philosophy/c5.html#_5-3-temporal-decomposition" class="sidebar-link">5.3    Temporal decomposition</a></li><li class="sidebar-sub-header"><a href="/docs/kungfu/philosophy/c5.html#_5-4-example-http-server" class="sidebar-link">5.4    Example: HTTP server</a></li><li class="sidebar-sub-header"><a href="/docs/kungfu/philosophy/c5.html#_5-5-example-too-many-classes" class="sidebar-link">5.5    Example: too many classes</a></li><li class="sidebar-sub-header"><a href="/docs/kungfu/philosophy/c5.html#_5-6-example-http-parameter-handling" class="sidebar-link">5.6    Example: HTTP parameter handling</a></li><li class="sidebar-sub-header"><a href="/docs/kungfu/philosophy/c5.html#_5-7-example-defaults-in-http-responses" class="sidebar-link">5.7    Example: defaults in HTTP responses</a></li><li class="sidebar-sub-header"><a href="/docs/kungfu/philosophy/c5.html#_5-8-information-hiding-within-a-class" class="sidebar-link">5.8    Information hiding within a class</a></li><li class="sidebar-sub-header"><a href="/docs/kungfu/philosophy/c5.html#_5-9-taking-it-too-far" class="sidebar-link">5.9    Taking it too far</a></li><li class="sidebar-sub-header"><a href="/docs/kungfu/philosophy/c5.html#_5-10-conclusion" class="sidebar-link">5.10     Conclusion</a></li></ul></li><li><a href="/docs/kungfu/philosophy/c6.html" class="sidebar-link">6.  General-Purpose Modules are Deeper</a></li><li><a href="/docs/kungfu/philosophy/c7.html" class="sidebar-link">7.  Dierent Layer, Dierent Abstraction</a></li><li><a href="/docs/kungfu/philosophy/c8.html" class="sidebar-link">8.  Pull Complexity Downwards</a></li><li><a href="/docs/kungfu/philosophy/c9.html" class="sidebar-link">9.  Better Together Or Better Apart?</a></li><li><a href="/docs/kungfu/philosophy/c10.html" class="sidebar-link">10.  Dene Errors Out Of Existence</a></li><li><a href="/docs/kungfu/philosophy/c11.html" class="sidebar-link">11.  Design it Twice</a></li><li><a href="/docs/kungfu/philosophy/c12.html" class="sidebar-link">12. Why Write Comments? The Four Excuses</a></li><li><a href="/docs/kungfu/philosophy/c13.html" class="sidebar-link">13. Comments Should Describe Things that aren’t Obvious from the Code</a></li><li><a href="/docs/kungfu/philosophy/c14.html" class="sidebar-link">14. Choosing Names</a></li><li><a href="/docs/kungfu/philosophy/c15.html" class="sidebar-link">15.  Write The Comments First</a></li><li><a href="/docs/kungfu/philosophy/c16.html" class="sidebar-link">16. Modifying Existing Code</a></li><li><a href="/docs/kungfu/philosophy/c17.html" class="sidebar-link">17. Consistency</a></li><li><a href="/docs/kungfu/philosophy/c18.html" class="sidebar-link">18. Code Should be Obvious</a></li><li><a href="/docs/kungfu/philosophy/c19.html" class="sidebar-link">19. Software Trends</a></li><li><a href="/docs/kungfu/philosophy/c20.html" class="sidebar-link">20. Designing for Performance</a></li><li><a href="/docs/kungfu/philosophy/c21.html" class="sidebar-link">21. Conclusion</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Building Microservices</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>97 Things Every Programmer Should Know</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>NoSql Distilled</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Go</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Others</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_5-information-hiding-and-leakage"><a href="#_5-information-hiding-and-leakage" class="header-anchor">#</a> 5.  Information Hiding (and Leakage)</h1> <p>Chapter 4 argued that modules should be deep. This chapter, and the next
few that follow, discuss techniques for creating deep modules.</p> <h2 id="_5-1-information-hiding"><a href="#_5-1-information-hiding" class="header-anchor">#</a> 5.1    Information hiding</h2> <p>The most important technique for achieving deep modules is information</p> <p>hiding. This technique was first described by David Parnas^1. The basic
idea is that each module should encapsulate a few pieces of knowledge,
which represent design decisions. The knowledge is embedded in the
module’s implementation but does not appear in its interface, so it is not
visible to other modules.</p> <p>The information hidden within a module usually consists of details
about how to implement some mechanism. Here are some examples of
information that might be hidden within a module:
How to store information in a B-tree, and how to access it efficiently.
How to identify the physical disk block corresponding to each logical
block within a file.
How to implement the TCP network protocol.
How to schedule threads on a multi-core processor.
How to parse JSON documents.</p> <p>The hidden information includes data structures and algorithms related to
the mechanism. It can also include lower-level details such as the size of a
page, and it can include higher-level concepts that are more abstract, such
as an assumption that most files are small.</p> <p>Information hiding reduces complexity in two ways. First, it simplifies
the interface to a module. The interface reflects a simpler, more abstract
view of the module’s functionality and hides the details; this reduces the</p> <p>cognitive load on developers who use the module. For instance, a
developer using a B-tree class need not worry about the ideal fanout for
nodes in the tree or how to keep the tree balanced. Second, information
hiding makes it easier to evolve the system. If a piece of information is
hidden, there are no dependencies on that information outside the module
containing the information, so a design change related to that information
will affect only the one module. For example, if the TCP protocol changes
(to introduce a new mechanism for congestion control, for instance), the
protocol’s implementation will have to be modified, but no changes should
be needed in higher-level code that uses TCP to send and receive data.</p> <p>When designing a new module, you should think carefully about what
information can be hidden in that module. If you can hide more
information, you should also be able to simplify the module’s interface,
and this makes the module deeper.</p> <p>Note: hiding variables and methods in a class by declaring them
private isn’t the same thing as information hiding. Private elements can</p> <p>help with information hiding, since they make it impossible for the items
to be accessed directly from outside the class. However, information about
the private items can still be exposed through public methods such as
getter and setter methods. When this happens the nature and usage of the
variables are just as exposed as if the variables were public.</p> <p>The best form of information hiding is when information is totally
hidden within a module, so that it is irrelevant and invisible to users of the
module. However, partial information hiding also has value. For example,
if a particular feature or piece of information is only needed by a few of a
class’s users, and it is accessed through separate methods so that it isn’t
visible in the most common use cases, then that information is mostly
hidden. Such information will create fewer dependencies than information
that is visible to every user of the class.</p> <h2 id="_5-2-information-leakage"><a href="#_5-2-information-leakage" class="header-anchor">#</a> 5.2    Information leakage</h2> <p>The opposite of information hiding is information leakage. Information
leakage occurs when a design decision is reflected in multiple modules.
This creates a dependency between the modules: any change to that design</p> <p>decision will require changes to all of the involved modules. If a piece of
information is reflected in the interface for a module, then by definition it
has been leaked; thus, simpler interfaces tend to correlate with better
information hiding. However, information can be leaked even if it doesn’t
appear in a module’s interface. Suppose two classes both have knowledge
of a particular file format (perhaps one class reads files in that format and
the other class writes them). Even if neither class exposes that information
in its interface, they both depend on the file format: if the format changes,
both classes will need to be modified. Back-door leakage like this is more
pernicious than leakage through an interface, because it isn’t obvious.</p> <p>Information leakage is one of the most important red flags in software
design. One of the best skills you can learn as a software designer is a high
level of sensitivity to information leakage. If you encounter information
leakage between classes, ask yourself “How can I reorganize these classes
so that this particular piece of knowledge only affects a single class?” If
the affected classes are relatively small and closely tied to the leaked
information, it may make sense to merge them into a single class. Another
possible approach is to pull the information out of all of the affected
classes and create a new class that encapsulates just that information.
However, this approach will be effective only if you can find a simple
interface that abstracts away from the details; if the new class exposes
most of the knowledge through its interface, then it won’t provide much
value (you’ve simply replaced back-door leakage with leakage through an
interface).</p> <div class="custom-block danger"><p class="custom-block-title">Information Leakage</p> <p>Information leakage occurs when the same knowledge is used in multiple places, such as two different classes that both understand the format of a particular type of file.</p></div> <h2 id="_5-3-temporal-decomposition"><a href="#_5-3-temporal-decomposition" class="header-anchor">#</a> 5.3    Temporal decomposition</h2> <p>One common cause of information leakage is a design style I call temporal
decomposition. In temporal decomposition, the structure of a system
corresponds to the time order in which operations will occur. Consider an
application that reads a file in a particular format, modifies the contents of
the file, and then writes the file out again. With temporal decomposition,
this application might be broken into three classes: one to read the file,
another to perform the modifications, and a third to write out the new
version. Both the file reading and file writing steps have knowledge about
the file format, which results in information leakage. The solution is to
combine the core mechanisms for reading and writing files into a single
class. This class will get used during both the reading and writing phases
of the application. It’s easy to fall into the trap of temporal decomposition,
because the order in which operations must occur is often on your mind
when you code. However, most design decisions manifest themselves at
several different times over the life of the application; as a result, temporal
decomposition often results in information leakage.</p> <p>Order usually does matter, so it will be reflected somewhere in the
application. However, it shouldn’t be reflected in the module structure
unless that structure is consistent with information hiding (perhaps the
different stages use totally different information). When designing
modules, focus on the knowledge that’s needed to perform each task,
not the order in which tasks occur.</p> <div class="custom-block danger"><p class="custom-block-title">Temporal Decomposition</p> <p>In temporal decomposition, execution order is reflected in the code structure: operations that happen at different times are in different methods or classes. If the same knowledge is used at different points in execution, it gets encoded in multiple places, resulting in information leakage.</p></div> <h2 id="_5-4-example-http-server"><a href="#_5-4-example-http-server" class="header-anchor">#</a> 5.4    Example: HTTP server</h2> <p>To illustrate the issues in information hiding, let’s consider the design
decisions made by students implementing the HTTP protocol in a software
design course. It’s useful to see both the things they did well and they
areas where they had problems.</p> <p>HTTP is a mechanism used by Web browsers to communicate with
Web servers. When a user clicks on a link in a Web browser or submits a
form, the browser uses HTTP to send a request over the network to a Web
server. Once the server has processed the request, it sends a response back
to the browser; the response normally contains a new Web page to display.
The HTTP protocol specifies the format of requests and responses, both of
which are represented textually. Figure 5.1 shows a sample HTTP request
describing a form submission. The students in the course were asked to
implement one or more classes to make it easy for Web servers to receive
incoming HTTP requests and send responses.</p> <p><img src="/docs/assets/img/image--011.980c080f.png" alt="image--011.png"></p> <p><strong>Figure 5.1</strong>: <em>A POST request in the HTTP protocol consists of text sent over a TCP socket. Each request contains an initial line, a collection of headers terminated by an empty line, and an optional body. The initial line contains the request type (POST is used for submitting form data), a URL indicating an operation (/comments/create) and optional parameters (photo_id has the value 246), and the HTTP protocol version used by the sender. Each header line consists of a name such as Content-Length followed by its value. For this request, the body contains additional parameters (comment and priority).</em></p> <h2 id="_5-5-example-too-many-classes"><a href="#_5-5-example-too-many-classes" class="header-anchor">#</a> 5.5    Example: too many classes</h2> <p>The most common mistake made by students was to divide their code into
a large number of shallow classes, which led to information leakage
between the classes. One team used two different classes for receiving
HTTP requests; the first class read the request from the network
connection into a string, and the second class parsed the string. This is an
example of a temporal decomposition (“first we read the request, then we</p> <p>parse it”). Information leakage occurred because an HTTP request can’t be
read without parsing much of the message; for example, the Content-</p> <p>Length header specifies the length of the request body, so the headers must
be parsed in order to compute the total request length. As a result, both
classes needed to understand most of the structure of HTTP requests, and
parsing code was duplicated in both classes. This approach also created
extra complexity for callers, who had to invoke two methods in different
classes, in a particular order, to receive a request.</p> <p>Because the classes shared so much information, it would have been
better to merge them into a single class that handles both request reading
and parsing. This provides better information hiding, since it isolates all
knowledge of the request format in one class, and it also provides a
simpler interface to callers (just one method to invoke).</p> <p>This example illustrates a general theme in software design:
information hiding can often be improved by making a class slightly
larger. One reason for doing this is to bring together all of the code
related to a particular capability (such as parsing an HTTP request), so that
the resulting class contains everything related to that capability. A second
reason for increasing the size of a class is to raise the level of the
interface; for example, rather than having separate methods for each of
three steps of a computation, have a single method that performs the entire
computation. This can result in a simpler interface. Both of these benefits
apply in the example of the previous paragraph: combining the classes
brings together all of the code related to parsing an HTTP request, and it
replaces two externally-visible methods with one. The combined class is
deeper than the original classes.</p> <p>Of course, it is possible to take the notion of larger classes too far
(such as a single class for the entire application). Chapter 9 will discuss
conditions under which it makes sense to separate code into multiple
smaller classes.</p> <h2 id="_5-6-example-http-parameter-handling"><a href="#_5-6-example-http-parameter-handling" class="header-anchor">#</a> 5.6    Example: HTTP parameter handling</h2> <p>After an HTTP request has been received by a server, the server needs to
access some of the information from the request. The code that handles the</p> <p>request in Figure 5.1 might need to know the value of the photo_id</p> <p>parameter. Parameters can be specified in the first line of the request
(photo_id in Figure 5.1) or, sometimes, in the body (comment and priority
in Figure 5.1). Each parameter has a name and a value. The values of
parameters use a special encoding called URL encoding; for example, in
the value for comment in Figure 5.1, “+” is used to represent a space</p> <p>character, and “%21” is used instead of “!”. In order to process a request,
the server will need the values for some of the parameters, and it will want
them in unencoded form.</p> <p>Most of the student projects made two good choices with respect to
parameter handling. First, they recognized that server applications don’t
care whether a parameter is specified in the header line or the body of the
request, so they hid this distinction from callers and merged the
parameters from both locations together. Second, they hid knowledge of
URL encoding: the HTTP parser decodes parameter values before
returning them to the Web server, so that the value of the comment
parameter in Figure 5.1 will be returned as “What a cute baby!”, not
“What+a+cute+baby%21”). In both of these cases, information hiding
resulted in simpler APIs for the code using the HTTP module.</p> <p>However, most of the students used an interface for returning
parameters that was too shallow, and this resulted in lost opportunities for
information hiding. Most projects used an object of type HTTPRequest to</p> <p>hold the parsed HTTP request, and the HTTPRequest class had a single
method like the following one to return parameters:
public Map&lt;String, String&gt; getParams() {
return this.params;
}</p> <p>Rather than returning a single parameter, the method returns a reference to
the Map used internally to store all of the parameters. This method is
shallow, and it exposes the internal representation used by the HTTPRequest</p> <p>class to store parameters. Any change to that representation will result in a
change to the interface, which will require modifications to all callers.
When implementations are modified, the changes often involve changes in
the representation of key data structures (to improve performance, for</p> <p>example). Thus, it’s important to avoid exposing internal data structures as
much as possible. This approach also makes more work for callers: a
caller must first invoke getParams, then it must call another method to</p> <p>retrieve a specific parameter from the Map. Finally, callers must realize that
they should not modify the Map returned by getParams, since that will</p> <p>affect the internal state of the HTTPRequest.</p> <p>Here is a better interface for retrieving parameter values:
public String getParameter(String name) { ... }
public int getIntParameter(String name) { ... }</p> <p>getParameter returns a parameter value as a string. It provides a slightly</p> <p>deeper interface than getParams above; more importantly, it hides the
internal representation of parameters. getIntParameter converts the value</p> <p>of a parameter from its string form in the HTTP request to an integer (e.g.,
the photo_id parameter in Figure 5.1). This saves the caller from having to
request string-to-integer conversion separately, and hides that mechanism
from the caller. Additional methods for other data types, such as
getDoubleParameter, could be defined if needed. (All of these methods will</p> <p>throw exceptions if the desired parameter doesn’t exist, or if it can’t be
converted to the requested type; the exception declarations have been
omitted in the code above).</p> <h2 id="_5-7-example-defaults-in-http-responses"><a href="#_5-7-example-defaults-in-http-responses" class="header-anchor">#</a> 5.7    Example: defaults in HTTP responses</h2> <p>The HTTP projects also had to provide support for generating HTTP
responses. The most common mistake students made in this area was
inadequate defaults. Each HTTP response must specify an HTTP protocol
version; one team required callers to specify this version explicitly when
creating a response object. However, the response version must correspond
to that in the request object, and the request must already be passed as an
argument when sending the response (it indicates where to send the
response). Thus, it makes more sense for the HTTP classes to provide the
response version automatically. The caller is unlikely to know what
version to specify, and if the caller does specify a value, it probably results
in information leakage between the HTTP library and the caller. HTTP
responses also include a Date header specifying the time when the</p> <p>response was sent; the HTTP library should provide a sensible default for
this as well.</p> <p>Defaults illustrate the principle that interfaces should be designed to
make the common case as simple as possible. They are also an example of
partial information hiding: in the normal case, the caller need not be aware
of the existence of the defaulted item. In the rare cases where a caller
needs to override a default, it will have to know about the value, and it can
invoke a special method to modify it.</p> <p>Whenever possible, classes should “do the right thing” without being
explicitly asked. Defaults are an example of this. The Java I/O example on
page 26 illustrates this point in a negative way. Buffering in file I/O is so
universally desirable that noone should ever have to ask explicitly for it, or
even be aware of its existence; the I/O classes should do the right thing and
provide it automatically. The best features are the ones you get without
even knowing they exist.</p> <div class="custom-block danger"><p class="custom-block-title">Overexposure</p> <p>If the API for a commonly used feature forces users to learn about other
features that are rarely used, this increases the cognitive load on users
who don’t need the rarely used features.</p></div> <h2 id="_5-8-information-hiding-within-a-class"><a href="#_5-8-information-hiding-within-a-class" class="header-anchor">#</a> 5.8    Information hiding within a class</h2> <p>The examples in this chapter focused on information hiding as it relates to
the externally visible APIs for classes, but information hiding can also be
applied at other levels in the system, such as within a class. Try to design
the private methods within a class so that each method encapsulates some
information or capability and hides it from the rest of the class. In
addition, try to minimize the number of places where each instance
variable is used. Some variables may need to be accessed widely across
the class, but others may be needed in only a few places; if you can reduce
the number of places where a variable is used, you will eliminate
dependencies within the class and reduce its complexity.</p> <h2 id="_5-9-taking-it-too-far"><a href="#_5-9-taking-it-too-far" class="header-anchor">#</a> 5.9    Taking it too far</h2> <p>Information hiding only makes sense when the information being hidden
is not needed outside its module. If the information is needed outside the
module, then you must not hide it. Suppose that the performance of a
module is affected by certain configuration parameters, and that different
uses of the module will require different settings of the parameters. In this
case it is important that the parameters are exposed in the interface of the
module, so that they can be turned appropriately. As a software designer,
your goal should be to minimize the amount of information needed outside
a module; for example, if a module can automatically adjust its
configuration, that is better than exposing configuration parameters. But,
it’s important to recognize which information is needed outside a module
and make sure it is exposed.</p> <h2 id="_5-10-conclusion"><a href="#_5-10-conclusion" class="header-anchor">#</a> 5.10     Conclusion</h2> <p>Information hiding and deep modules are closely related. If a module
hides a lot of information, that tends to increase the amount of
functionality provided by the module while also reducing its interface.
This makes the module deeper. Conversely, if a module doesn’t hide much
information, then either it doesn’t have much functionality, or it has a
complex interface; either way, the module is shallow.</p> <p>When decomposing a system into modules, try not to be influenced by
the order in which operations will occur at runtime; that will lead you
down the path of temporal decomposition, which will result in information
leakage and shallow modules. Instead, think about the different pieces of
knowledge that are needed to carry out the tasks of your application, and
design each module to encapsulate one or a few of those pieces of
knowledge. This will produce a clean and simple design with deep
modules.</p> <p>(^1) David Parnas, “On the Criteria to be Used in Decomposing Systems into Modules,”
Communications of the ACM, December 1972.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/kungfu/philosophy/c4.html" class="prev">
        4. Modules Should Be Deep
      </a></span> <span class="next"><a href="/docs/kungfu/philosophy/c6.html">
        6.  General-Purpose Modules are Deeper
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----><!----></div></div>
    <script src="/docs/assets/js/app.ed218ff4.js" defer></script><script src="/docs/assets/js/2.de1d5c77.js" defer></script><script src="/docs/assets/js/72.3fcd17e2.js" defer></script><script src="/docs/assets/js/33.5733d073.js" defer></script>
  </body>
</html>
