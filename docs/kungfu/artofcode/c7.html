<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>C H A P T E R S E V E N | Nguyễn Khánk&#39;s Wiki</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="apple-touch-icon" sizes="180x180" href="../public/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../public/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../public/favicons/favicon-16x16.png">
    <link rel="manifest" href="../public/favicons/manifest.json">
    <link rel="mask-icon" href="../public/favicons/safari-pinned-tab.svg" color="#3a0839">
    <link rel="shortcut icon" href="../public/favicons/favicon.ico">
    <meta name="description" content="Wikipedia của tui">
    <meta name="msapplication-TileColor" content="#3a0839">
    <meta name="msapplication-config" content="../public/favicons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    
    <link rel="preload" href="/docs/assets/css/0.styles.5d974432.css" as="style"><link rel="preload" href="/docs/assets/js/app.cfeb973c.js" as="script"><link rel="preload" href="/docs/assets/js/2.f326a5a1.js" as="script"><link rel="preload" href="/docs/assets/js/219.085798af.js" as="script"><link rel="preload" href="/docs/assets/js/24.55a1e86e.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.26061223.js"><link rel="prefetch" href="/docs/assets/js/100.98d61af1.js"><link rel="prefetch" href="/docs/assets/js/101.467adbe0.js"><link rel="prefetch" href="/docs/assets/js/102.e3c324e4.js"><link rel="prefetch" href="/docs/assets/js/103.ef60821d.js"><link rel="prefetch" href="/docs/assets/js/104.6430587c.js"><link rel="prefetch" href="/docs/assets/js/105.5ba00055.js"><link rel="prefetch" href="/docs/assets/js/106.3b8fac3d.js"><link rel="prefetch" href="/docs/assets/js/107.0fc73763.js"><link rel="prefetch" href="/docs/assets/js/108.967d0626.js"><link rel="prefetch" href="/docs/assets/js/109.1971c566.js"><link rel="prefetch" href="/docs/assets/js/11.77deee8b.js"><link rel="prefetch" href="/docs/assets/js/110.f9e049ca.js"><link rel="prefetch" href="/docs/assets/js/111.12d96319.js"><link rel="prefetch" href="/docs/assets/js/112.2d3c24f9.js"><link rel="prefetch" href="/docs/assets/js/113.dbc6a613.js"><link rel="prefetch" href="/docs/assets/js/114.170655a9.js"><link rel="prefetch" href="/docs/assets/js/115.1dba6e94.js"><link rel="prefetch" href="/docs/assets/js/116.094c1d9e.js"><link rel="prefetch" href="/docs/assets/js/117.1ee610d9.js"><link rel="prefetch" href="/docs/assets/js/118.d01e1925.js"><link rel="prefetch" href="/docs/assets/js/119.72bf1e29.js"><link rel="prefetch" href="/docs/assets/js/12.906e451b.js"><link rel="prefetch" href="/docs/assets/js/120.e9401329.js"><link rel="prefetch" href="/docs/assets/js/121.c85e95b3.js"><link rel="prefetch" href="/docs/assets/js/122.34027061.js"><link rel="prefetch" href="/docs/assets/js/123.61000a76.js"><link rel="prefetch" href="/docs/assets/js/124.0baa56ec.js"><link rel="prefetch" href="/docs/assets/js/125.d2585c2b.js"><link rel="prefetch" href="/docs/assets/js/126.79304cb4.js"><link rel="prefetch" href="/docs/assets/js/127.39737726.js"><link rel="prefetch" href="/docs/assets/js/128.b3aad8ba.js"><link rel="prefetch" href="/docs/assets/js/129.d4d1448c.js"><link rel="prefetch" href="/docs/assets/js/13.bbcdea6e.js"><link rel="prefetch" href="/docs/assets/js/130.fb2979fa.js"><link rel="prefetch" href="/docs/assets/js/131.e370221b.js"><link rel="prefetch" href="/docs/assets/js/132.4951e028.js"><link rel="prefetch" href="/docs/assets/js/133.d2f7c10f.js"><link rel="prefetch" href="/docs/assets/js/134.d9cfc686.js"><link rel="prefetch" href="/docs/assets/js/135.d057acbe.js"><link rel="prefetch" href="/docs/assets/js/136.c687767e.js"><link rel="prefetch" href="/docs/assets/js/137.be30c396.js"><link rel="prefetch" href="/docs/assets/js/138.56ba7065.js"><link rel="prefetch" href="/docs/assets/js/139.cf3424f8.js"><link rel="prefetch" href="/docs/assets/js/14.ec0c9f2a.js"><link rel="prefetch" href="/docs/assets/js/140.76b03d38.js"><link rel="prefetch" href="/docs/assets/js/141.0e1f735c.js"><link rel="prefetch" href="/docs/assets/js/142.941468d7.js"><link rel="prefetch" href="/docs/assets/js/143.5575c3e7.js"><link rel="prefetch" href="/docs/assets/js/144.2237340a.js"><link rel="prefetch" href="/docs/assets/js/145.ec1cd31e.js"><link rel="prefetch" href="/docs/assets/js/146.f5dbce22.js"><link rel="prefetch" href="/docs/assets/js/147.db512707.js"><link rel="prefetch" href="/docs/assets/js/148.707767ea.js"><link rel="prefetch" href="/docs/assets/js/149.ba85aa70.js"><link rel="prefetch" href="/docs/assets/js/15.ca6c1ecb.js"><link rel="prefetch" href="/docs/assets/js/150.43631c19.js"><link rel="prefetch" href="/docs/assets/js/151.6259affc.js"><link rel="prefetch" href="/docs/assets/js/152.8f6292a4.js"><link rel="prefetch" href="/docs/assets/js/153.b542378b.js"><link rel="prefetch" href="/docs/assets/js/154.b97b2dfa.js"><link rel="prefetch" href="/docs/assets/js/155.c5453c61.js"><link rel="prefetch" href="/docs/assets/js/156.6b6bd56a.js"><link rel="prefetch" href="/docs/assets/js/157.57c0c50f.js"><link rel="prefetch" href="/docs/assets/js/158.7f5c32db.js"><link rel="prefetch" href="/docs/assets/js/159.de7feef8.js"><link rel="prefetch" href="/docs/assets/js/16.6b251b34.js"><link rel="prefetch" href="/docs/assets/js/160.cfd09325.js"><link rel="prefetch" href="/docs/assets/js/161.5829d639.js"><link rel="prefetch" href="/docs/assets/js/162.290e613e.js"><link rel="prefetch" href="/docs/assets/js/163.265b73c4.js"><link rel="prefetch" href="/docs/assets/js/164.eecaf782.js"><link rel="prefetch" href="/docs/assets/js/165.14241fa5.js"><link rel="prefetch" href="/docs/assets/js/166.7f41b2c2.js"><link rel="prefetch" href="/docs/assets/js/167.ee6c9131.js"><link rel="prefetch" href="/docs/assets/js/168.27d6e1bf.js"><link rel="prefetch" href="/docs/assets/js/169.37251ea9.js"><link rel="prefetch" href="/docs/assets/js/17.ea44095a.js"><link rel="prefetch" href="/docs/assets/js/170.7e36e65b.js"><link rel="prefetch" href="/docs/assets/js/171.cc3567ec.js"><link rel="prefetch" href="/docs/assets/js/172.a5437497.js"><link rel="prefetch" href="/docs/assets/js/173.66192cff.js"><link rel="prefetch" href="/docs/assets/js/174.811c99f5.js"><link rel="prefetch" href="/docs/assets/js/175.50ffea8f.js"><link rel="prefetch" href="/docs/assets/js/176.426932b3.js"><link rel="prefetch" href="/docs/assets/js/177.15081840.js"><link rel="prefetch" href="/docs/assets/js/178.b1f8feef.js"><link rel="prefetch" href="/docs/assets/js/179.7d4b31ad.js"><link rel="prefetch" href="/docs/assets/js/18.acc5d9c2.js"><link rel="prefetch" href="/docs/assets/js/180.84e0d185.js"><link rel="prefetch" href="/docs/assets/js/181.4732cba6.js"><link rel="prefetch" href="/docs/assets/js/182.f702b2c2.js"><link rel="prefetch" href="/docs/assets/js/183.76a90979.js"><link rel="prefetch" href="/docs/assets/js/184.e1e608b8.js"><link rel="prefetch" href="/docs/assets/js/185.d0fe3154.js"><link rel="prefetch" href="/docs/assets/js/186.91a411ac.js"><link rel="prefetch" href="/docs/assets/js/187.533be626.js"><link rel="prefetch" href="/docs/assets/js/188.e1fca7ef.js"><link rel="prefetch" href="/docs/assets/js/189.ae3a302e.js"><link rel="prefetch" href="/docs/assets/js/19.ba7d6376.js"><link rel="prefetch" href="/docs/assets/js/190.5e7002db.js"><link rel="prefetch" href="/docs/assets/js/191.df357bf8.js"><link rel="prefetch" href="/docs/assets/js/192.0b97ee31.js"><link rel="prefetch" href="/docs/assets/js/193.50ba3277.js"><link rel="prefetch" href="/docs/assets/js/194.32612f6c.js"><link rel="prefetch" href="/docs/assets/js/195.8c781f71.js"><link rel="prefetch" href="/docs/assets/js/196.3a2160dd.js"><link rel="prefetch" href="/docs/assets/js/197.eb541326.js"><link rel="prefetch" href="/docs/assets/js/198.c9fecc0f.js"><link rel="prefetch" href="/docs/assets/js/199.65d541c8.js"><link rel="prefetch" href="/docs/assets/js/20.c92f6c88.js"><link rel="prefetch" href="/docs/assets/js/200.0b09fedf.js"><link rel="prefetch" href="/docs/assets/js/201.fda0c313.js"><link rel="prefetch" href="/docs/assets/js/202.80dee678.js"><link rel="prefetch" href="/docs/assets/js/203.2339cfe8.js"><link rel="prefetch" href="/docs/assets/js/204.d5a3133a.js"><link rel="prefetch" href="/docs/assets/js/205.69d4c87d.js"><link rel="prefetch" href="/docs/assets/js/206.113ee0fb.js"><link rel="prefetch" href="/docs/assets/js/207.2c798380.js"><link rel="prefetch" href="/docs/assets/js/208.4adc67f1.js"><link rel="prefetch" href="/docs/assets/js/209.d954284a.js"><link rel="prefetch" href="/docs/assets/js/21.b711ed39.js"><link rel="prefetch" href="/docs/assets/js/210.50539f5f.js"><link rel="prefetch" href="/docs/assets/js/211.c306544f.js"><link rel="prefetch" href="/docs/assets/js/212.3f274ff8.js"><link rel="prefetch" href="/docs/assets/js/213.d42486d0.js"><link rel="prefetch" href="/docs/assets/js/214.bf3d27d9.js"><link rel="prefetch" href="/docs/assets/js/215.ef9618f4.js"><link rel="prefetch" href="/docs/assets/js/216.fa821f34.js"><link rel="prefetch" href="/docs/assets/js/217.c1e19a4f.js"><link rel="prefetch" href="/docs/assets/js/218.2a8015d5.js"><link rel="prefetch" href="/docs/assets/js/22.181d85f8.js"><link rel="prefetch" href="/docs/assets/js/220.3d0cafbf.js"><link rel="prefetch" href="/docs/assets/js/221.baa327fa.js"><link rel="prefetch" href="/docs/assets/js/222.3997462a.js"><link rel="prefetch" href="/docs/assets/js/223.96b1a33e.js"><link rel="prefetch" href="/docs/assets/js/224.6c9f07ed.js"><link rel="prefetch" href="/docs/assets/js/225.1d0bb56b.js"><link rel="prefetch" href="/docs/assets/js/226.b4fa6400.js"><link rel="prefetch" href="/docs/assets/js/227.7bf0ff4e.js"><link rel="prefetch" href="/docs/assets/js/228.15460699.js"><link rel="prefetch" href="/docs/assets/js/229.8f751a33.js"><link rel="prefetch" href="/docs/assets/js/23.f7b31a47.js"><link rel="prefetch" href="/docs/assets/js/230.cb64f83c.js"><link rel="prefetch" href="/docs/assets/js/231.0278c4a1.js"><link rel="prefetch" href="/docs/assets/js/232.96ae6247.js"><link rel="prefetch" href="/docs/assets/js/233.38d9f352.js"><link rel="prefetch" href="/docs/assets/js/234.ebdd297b.js"><link rel="prefetch" href="/docs/assets/js/235.3a932006.js"><link rel="prefetch" href="/docs/assets/js/236.c79c76c4.js"><link rel="prefetch" href="/docs/assets/js/237.88760d4c.js"><link rel="prefetch" href="/docs/assets/js/238.788a3c42.js"><link rel="prefetch" href="/docs/assets/js/239.7dd70067.js"><link rel="prefetch" href="/docs/assets/js/240.24df5553.js"><link rel="prefetch" href="/docs/assets/js/241.abc3e36f.js"><link rel="prefetch" href="/docs/assets/js/242.41ab2a8f.js"><link rel="prefetch" href="/docs/assets/js/243.d22b009a.js"><link rel="prefetch" href="/docs/assets/js/244.ae592bf1.js"><link rel="prefetch" href="/docs/assets/js/245.2cf65af7.js"><link rel="prefetch" href="/docs/assets/js/246.696c0de7.js"><link rel="prefetch" href="/docs/assets/js/247.3fca7ab2.js"><link rel="prefetch" href="/docs/assets/js/248.c4841e40.js"><link rel="prefetch" href="/docs/assets/js/249.d414bbe7.js"><link rel="prefetch" href="/docs/assets/js/25.e76c3cbf.js"><link rel="prefetch" href="/docs/assets/js/250.2b5d345d.js"><link rel="prefetch" href="/docs/assets/js/251.d8d1573b.js"><link rel="prefetch" href="/docs/assets/js/252.8c86c98d.js"><link rel="prefetch" href="/docs/assets/js/253.fc5bf589.js"><link rel="prefetch" href="/docs/assets/js/254.bedfc26a.js"><link rel="prefetch" href="/docs/assets/js/255.b341b73b.js"><link rel="prefetch" href="/docs/assets/js/256.b92fe8fb.js"><link rel="prefetch" href="/docs/assets/js/257.39da1358.js"><link rel="prefetch" href="/docs/assets/js/258.8ed616c4.js"><link rel="prefetch" href="/docs/assets/js/259.f1670e18.js"><link rel="prefetch" href="/docs/assets/js/26.7bedb575.js"><link rel="prefetch" href="/docs/assets/js/260.062c9633.js"><link rel="prefetch" href="/docs/assets/js/261.840ab9d5.js"><link rel="prefetch" href="/docs/assets/js/262.79cc5b41.js"><link rel="prefetch" href="/docs/assets/js/263.ae7ae1d8.js"><link rel="prefetch" href="/docs/assets/js/264.afa7c2ed.js"><link rel="prefetch" href="/docs/assets/js/265.213997e6.js"><link rel="prefetch" href="/docs/assets/js/266.82e7551c.js"><link rel="prefetch" href="/docs/assets/js/267.0d7ff0b7.js"><link rel="prefetch" href="/docs/assets/js/268.afa0cac4.js"><link rel="prefetch" href="/docs/assets/js/269.f6337830.js"><link rel="prefetch" href="/docs/assets/js/27.5a7c3b47.js"><link rel="prefetch" href="/docs/assets/js/270.1e1d8938.js"><link rel="prefetch" href="/docs/assets/js/271.1c93a73a.js"><link rel="prefetch" href="/docs/assets/js/272.2475faaa.js"><link rel="prefetch" href="/docs/assets/js/273.9470e5eb.js"><link rel="prefetch" href="/docs/assets/js/274.72916804.js"><link rel="prefetch" href="/docs/assets/js/275.73ab1b26.js"><link rel="prefetch" href="/docs/assets/js/276.aae33db9.js"><link rel="prefetch" href="/docs/assets/js/277.dd364cad.js"><link rel="prefetch" href="/docs/assets/js/278.4284d05b.js"><link rel="prefetch" href="/docs/assets/js/279.ca84182c.js"><link rel="prefetch" href="/docs/assets/js/28.374a14f9.js"><link rel="prefetch" href="/docs/assets/js/280.1991a29d.js"><link rel="prefetch" href="/docs/assets/js/281.1b987a11.js"><link rel="prefetch" href="/docs/assets/js/282.9decbc7a.js"><link rel="prefetch" href="/docs/assets/js/283.3dd972c1.js"><link rel="prefetch" href="/docs/assets/js/284.ef21f511.js"><link rel="prefetch" href="/docs/assets/js/285.dd78caf2.js"><link rel="prefetch" href="/docs/assets/js/286.2ec6dec2.js"><link rel="prefetch" href="/docs/assets/js/287.cd370e07.js"><link rel="prefetch" href="/docs/assets/js/288.c233ca38.js"><link rel="prefetch" href="/docs/assets/js/289.0965d4a2.js"><link rel="prefetch" href="/docs/assets/js/29.e0e875ac.js"><link rel="prefetch" href="/docs/assets/js/290.1baac16e.js"><link rel="prefetch" href="/docs/assets/js/291.43780d4c.js"><link rel="prefetch" href="/docs/assets/js/292.c4614f33.js"><link rel="prefetch" href="/docs/assets/js/293.4c0e14a0.js"><link rel="prefetch" href="/docs/assets/js/294.fff197b0.js"><link rel="prefetch" href="/docs/assets/js/295.38d46d8a.js"><link rel="prefetch" href="/docs/assets/js/296.4510efc8.js"><link rel="prefetch" href="/docs/assets/js/297.15012f13.js"><link rel="prefetch" href="/docs/assets/js/298.12827341.js"><link rel="prefetch" href="/docs/assets/js/299.102e6787.js"><link rel="prefetch" href="/docs/assets/js/3.80e7fbda.js"><link rel="prefetch" href="/docs/assets/js/30.b05f78f6.js"><link rel="prefetch" href="/docs/assets/js/300.910d11b8.js"><link rel="prefetch" href="/docs/assets/js/301.2500a83a.js"><link rel="prefetch" href="/docs/assets/js/302.c95d18c5.js"><link rel="prefetch" href="/docs/assets/js/303.a4e076e6.js"><link rel="prefetch" href="/docs/assets/js/304.59df7e30.js"><link rel="prefetch" href="/docs/assets/js/305.44586a68.js"><link rel="prefetch" href="/docs/assets/js/31.a8cddb1d.js"><link rel="prefetch" href="/docs/assets/js/32.e11d08d4.js"><link rel="prefetch" href="/docs/assets/js/33.30631df4.js"><link rel="prefetch" href="/docs/assets/js/34.17d1eef9.js"><link rel="prefetch" href="/docs/assets/js/35.d03bc804.js"><link rel="prefetch" href="/docs/assets/js/36.e407a3f9.js"><link rel="prefetch" href="/docs/assets/js/37.0138deec.js"><link rel="prefetch" href="/docs/assets/js/38.79c85dc4.js"><link rel="prefetch" href="/docs/assets/js/39.c3671a78.js"><link rel="prefetch" href="/docs/assets/js/4.11f7c27c.js"><link rel="prefetch" href="/docs/assets/js/40.bbe9cc67.js"><link rel="prefetch" href="/docs/assets/js/41.e4514ebe.js"><link rel="prefetch" href="/docs/assets/js/42.acca95db.js"><link rel="prefetch" href="/docs/assets/js/43.eaf692c8.js"><link rel="prefetch" href="/docs/assets/js/44.b2d50082.js"><link rel="prefetch" href="/docs/assets/js/45.c3e5eba0.js"><link rel="prefetch" href="/docs/assets/js/46.a049d85b.js"><link rel="prefetch" href="/docs/assets/js/47.f67d726f.js"><link rel="prefetch" href="/docs/assets/js/48.ed4fc310.js"><link rel="prefetch" href="/docs/assets/js/49.112da9d1.js"><link rel="prefetch" href="/docs/assets/js/5.d6345207.js"><link rel="prefetch" href="/docs/assets/js/50.829c211c.js"><link rel="prefetch" href="/docs/assets/js/51.53f5171b.js"><link rel="prefetch" href="/docs/assets/js/52.48f9164d.js"><link rel="prefetch" href="/docs/assets/js/53.f11a069c.js"><link rel="prefetch" href="/docs/assets/js/54.1e86b7a3.js"><link rel="prefetch" href="/docs/assets/js/55.9b97a2a7.js"><link rel="prefetch" href="/docs/assets/js/56.49042f5d.js"><link rel="prefetch" href="/docs/assets/js/57.fd3564b6.js"><link rel="prefetch" href="/docs/assets/js/58.bf82d3b7.js"><link rel="prefetch" href="/docs/assets/js/59.233a4681.js"><link rel="prefetch" href="/docs/assets/js/6.a0c01dea.js"><link rel="prefetch" href="/docs/assets/js/60.712f07a1.js"><link rel="prefetch" href="/docs/assets/js/61.60360262.js"><link rel="prefetch" href="/docs/assets/js/62.5975afbd.js"><link rel="prefetch" href="/docs/assets/js/63.fa2cbe4d.js"><link rel="prefetch" href="/docs/assets/js/64.48d02cd4.js"><link rel="prefetch" href="/docs/assets/js/65.deef4b99.js"><link rel="prefetch" href="/docs/assets/js/66.1b9a9ab3.js"><link rel="prefetch" href="/docs/assets/js/67.d5c80293.js"><link rel="prefetch" href="/docs/assets/js/68.95d020a0.js"><link rel="prefetch" href="/docs/assets/js/69.46226238.js"><link rel="prefetch" href="/docs/assets/js/7.6990d186.js"><link rel="prefetch" href="/docs/assets/js/70.83d2a4b3.js"><link rel="prefetch" href="/docs/assets/js/71.26c89b11.js"><link rel="prefetch" href="/docs/assets/js/72.3d70acda.js"><link rel="prefetch" href="/docs/assets/js/73.be21fa76.js"><link rel="prefetch" href="/docs/assets/js/74.4da89d30.js"><link rel="prefetch" href="/docs/assets/js/75.8ef62711.js"><link rel="prefetch" href="/docs/assets/js/76.1eaa5d35.js"><link rel="prefetch" href="/docs/assets/js/77.9f8f19ed.js"><link rel="prefetch" href="/docs/assets/js/78.6bf7ee7d.js"><link rel="prefetch" href="/docs/assets/js/79.607e0fcd.js"><link rel="prefetch" href="/docs/assets/js/8.de8128a3.js"><link rel="prefetch" href="/docs/assets/js/80.97e1d0d7.js"><link rel="prefetch" href="/docs/assets/js/81.7518d250.js"><link rel="prefetch" href="/docs/assets/js/82.f13d1ead.js"><link rel="prefetch" href="/docs/assets/js/83.a626643a.js"><link rel="prefetch" href="/docs/assets/js/84.8a852da7.js"><link rel="prefetch" href="/docs/assets/js/85.b7a999d1.js"><link rel="prefetch" href="/docs/assets/js/86.628e88af.js"><link rel="prefetch" href="/docs/assets/js/87.3fd8f634.js"><link rel="prefetch" href="/docs/assets/js/88.de00a005.js"><link rel="prefetch" href="/docs/assets/js/89.ed3fde5d.js"><link rel="prefetch" href="/docs/assets/js/9.051f6c42.js"><link rel="prefetch" href="/docs/assets/js/90.84b6d855.js"><link rel="prefetch" href="/docs/assets/js/91.44cea406.js"><link rel="prefetch" href="/docs/assets/js/92.81cc9fb4.js"><link rel="prefetch" href="/docs/assets/js/93.946980f6.js"><link rel="prefetch" href="/docs/assets/js/94.d9029cc8.js"><link rel="prefetch" href="/docs/assets/js/95.b90fb9a0.js"><link rel="prefetch" href="/docs/assets/js/96.8febe93d.js"><link rel="prefetch" href="/docs/assets/js/97.002963f9.js"><link rel="prefetch" href="/docs/assets/js/98.91580ef9.js"><link rel="prefetch" href="/docs/assets/js/99.edcb198a.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.5d974432.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">Nguyễn Khánk's Wiki</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/architect/" class="nav-link">
  Architecture
</a></div><div class="nav-item"><a href="/docs/kungfu/letsgo.html" class="nav-link">
  Kungfu
</a></div><div class="nav-item"><a href="https://nguyenngockhank.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/architect/" class="nav-link">
  Architecture
</a></div><div class="nav-item"><a href="/docs/kungfu/letsgo.html" class="nav-link">
  Kungfu
</a></div><div class="nav-item"><a href="https://nguyenngockhank.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>NoSql Distilled</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>97 Things Every Programmer Should Know</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>The Art of Readable Code</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/kungfu/artofcode/c0.html" class="sidebar-link">The Art of Readable Code</a></li><li><a href="/docs/kungfu/artofcode/c1.html" class="sidebar-link">C H A P T E R 1</a></li><li><a href="/docs/kungfu/artofcode/c2.html" class="sidebar-link">Packing Information into Names (C2 - I)</a></li><li><a href="/docs/kungfu/artofcode/c3.html" class="sidebar-link">Names That Can’t Be Misconstrued</a></li><li><a href="/docs/kungfu/artofcode/c4.html" class="sidebar-link">C H A P T E R F O U R</a></li><li><a href="/docs/kungfu/artofcode/c5.html" class="sidebar-link">C H A P T E R F I V E</a></li><li><a href="/docs/kungfu/artofcode/c6.html" class="sidebar-link">C H A P T E R S I X</a></li><li><a href="/docs/kungfu/artofcode/c7.html" aria-current="page" class="active sidebar-link">C H A P T E R S E V E N</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/kungfu/artofcode/c8.html" class="sidebar-link">C H A P T E R E I G H T</a></li><li><a href="/docs/kungfu/artofcode/c9.html" class="sidebar-link">Variables and Readability (C9 - III)</a></li><li><a href="/docs/kungfu/artofcode/c10.html" class="sidebar-link">C H A P T E R T E N</a></li><li><a href="/docs/kungfu/artofcode/c11.html" class="sidebar-link">C H A P T E R E L E V E N</a></li><li><a href="/docs/kungfu/artofcode/c12.html" class="sidebar-link">C H A P T E R T W E L V E</a></li><li><a href="/docs/kungfu/artofcode/c13.html" class="sidebar-link">C H A P T E R T H I R T E E N</a></li><li><a href="/docs/kungfu/artofcode/c14.html" class="sidebar-link">Testing and Readability (C14 - IV)</a></li><li><a href="/docs/kungfu/artofcode/c15.html" class="sidebar-link">C H A P T E R F I F T E E N</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="c-h-a-p-t-e-r-s-e-v-e-n"><a href="#c-h-a-p-t-e-r-s-e-v-e-n" class="header-anchor">#</a> C H A P T E R S E V E N</h1> <p><strong>Making Control Flow Easy to Read</strong></p> <div class="language- extra-class"><pre class="language-text"><code>69
</code></pre></div><p>If code had no conditionals, loops, or any other <em>control flow</em> statements, it would be very easy</p> <p>to read. These jumps and branches are the hard stuff, where code can get confusing quickly.</p> <p>This chapter is about making the control flow in your code easy to read.</p> <div class="custom-block tip"><p class="custom-block-title">K E Y I D E A</p> <p>Make all your conditionals, loops, and other changes to control flow as “natural”
as possible—written in a way that doesn’t make the reader stop and reread your
code.</p></div> <h3 id="the-order-of-arguments-in-conditionals"><a href="#the-order-of-arguments-in-conditionals" class="header-anchor">#</a> The Order of Arguments in Conditionals</h3> <p>Which of these two pieces of code is more readable:</p> <div class="language- extra-class"><pre class="language-text"><code>if (length &gt;= 10)
</code></pre></div><p>or</p> <div class="language- extra-class"><pre class="language-text"><code>if (10 &lt;= length)
</code></pre></div><p>To most programmers, the first is much more readable. But what about the next two:</p> <div class="language- extra-class"><pre class="language-text"><code>while (bytes_received &lt; bytes_expected)
</code></pre></div><p>or</p> <div class="language- extra-class"><pre class="language-text"><code>while (bytes_expected &gt; bytes_received)
</code></pre></div><p>Again, the first version is more readable. But why? What’s the general rule? How do you decide</p> <p>whether it’s better to write a &lt; b or b &gt; a?</p> <p>Here’s a guideline we’ve found useful:</p> <div class="language- extra-class"><pre class="language-text"><code>Left-hand side Right-hand side
The expression “being interrogated,” whose value is more in
flux.
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>The expression being compared against, whose value is
more constant.
</code></pre></div><p>This guideline matches English usage—it’s pretty natural to say, “if you make at least</p> <p>$100K/year” or “if you are at least 18 years old.” It’s unnatural to say, “if 18 years is less than</p> <p>or equal to your age.”</p> <p>This explains why while (bytes_received &lt; bytes_expected) is more readable. bytes_received is</p> <p>the value that we’re checking up on, and it’s increasing as the loop executes. bytes_expected is</p> <p>the more “stable” value being compared against.</p> <p><strong>70</strong> CHAPTER SEVEN</p> <p>“YODA NOTATION”: STILL USEFUL?</p> <div class="language- extra-class"><pre class="language-text"><code>In some languages (including C and C++, but not Java), it’s legal to put an assignment inside an if
condition:
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>if (obj = NULL) ...
</code></pre></div><p>Most likely this is a bug, and the programmer actually meant:</p> <div class="language- extra-class"><pre class="language-text"><code>if (obj == NULL) ...
</code></pre></div><p>To prevent bugs like this, many programmers <strong>switch the order of arguments</strong> :</p> <div class="language- extra-class"><pre class="language-text"><code>if (NULL == obj) ...
</code></pre></div><p>This way, if == is accidentally written as =, the expression if (NULL = obj) won’t even compile.</p> <div class="language- extra-class"><pre class="language-text"><code>Unfortunately, switching the order makes the code a bit unnatural to read. (As Yoda would say, “Not
if anything to say about it I have.”) Thankfully, modern compilers warn against code like if (obj =
NULL), so “Yoda Notation” is becoming a thing of the past.
</code></pre></div><h3 id="the-order-of-if-else-blocks"><a href="#the-order-of-if-else-blocks" class="header-anchor">#</a> The Order of if/else Blocks</h3> <div class="language- extra-class"><pre class="language-text"><code>MAKING CONTROL FLOW EASY TO READ 71
</code></pre></div><p>When writing an if/else statement, you usually have the freedom to swap the order of the</p> <p>blocks. For instance, you can either write it like:</p> <div class="language- extra-class"><pre class="language-text"><code>if (a == b) {
// Case One ...
} else {
// Case Two ...
}
</code></pre></div><p>or as:</p> <div class="language- extra-class"><pre class="language-text"><code>if ( a != b ) {
// Case Two ...
} else {
// Case One ...
}
</code></pre></div><p>You may not have given much thought about this before, but in some cases there are good</p> <p>reasons to prefer one order over the other:</p> <ul><li>Prefer dealing with the <em>positive</em> case first instead of the negative—e.g., if (debug) instead
of if (!debug).</li> <li>Prefer dealing with the <em>simpler</em> case first to get it out of the way. This approach might also
allow both the if and the else to be visible on the screen at the same time, which is nice.</li> <li>Prefer dealing with the more <em>interesting</em> or conspicuous case first.</li></ul> <p>Sometimes these preferences conflict, and you have to make a judgment call. But in many</p> <p>cases, there is a clear winner.</p> <p>For example, suppose you have a web server that’s building a response based on whether the</p> <p>URL contains the query parameter expand_all:</p> <div class="language- extra-class"><pre class="language-text"><code>if (!url.HasQueryParameter(&quot;expand_all&quot;)) {
response.Render(items);
...
} else {
for (int i = 0; i &lt; items.size(); i++) {
items[i].Expand();
}
...
}
</code></pre></div><p>When the reader glances at the first line, her brain immediately thinks about the expand_all</p> <p>case. It’s like when someone says, “Don’t think of a pink elephant.” You can’t help but think</p> <p>about it—the “don’t” is drowned out by the more unusual “pink elephant.”</p> <p>Here, expand_all is our pink elephant. Because it’s the more interesting case (and it’s the</p> <p>positive case, too), let’s deal with it first:</p> <div class="language- extra-class"><pre class="language-text"><code>if (url.HasQueryParameter(&quot;expand_all&quot;)) {
for (int i = 0; i &lt; items.size(); i++) {
items[i].Expand();
}
</code></pre></div><p><strong>72</strong> CHAPTER SEVEN</p> <div class="language- extra-class"><pre class="language-text"><code>} else {
response.Render(items);
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>}
</code></pre></div><p>On the other hand, here’s a situation where the negative case <em>is</em> the simpler and more</p> <p>interesting/dangerous one, so we deal with it first:</p> <div class="language- extra-class"><pre class="language-text"><code>if not file:
# Log the error ...
else:
# ...
</code></pre></div><p>Again, depending on the details, this may be a judgment call.</p> <p>To summarize, our advice is simply to pay attention to these factors and watch out for cases</p> <p>where your if/else is in an awkward order.</p> <h3 id="the-conditional-expression-a-k-a-ternary-operator"><a href="#the-conditional-expression-a-k-a-ternary-operator" class="header-anchor">#</a> The ?: Conditional Expression (a.k.a. “Ternary Operator”)</h3> <p>In C-like languages, you can write a conditional expression as cond? a : b, which is essentially</p> <p>a compact way to write if (cond) { a } else { b }.</p> <p>Its effect on readability is controversial. Proponents think it’s a nice way to write something in</p> <p>one line that would otherwise require multiple lines. Opponents argue that it can be confusing</p> <p>to read and difficult to step through in a debugger.</p> <p>Here’s a case where the ternary operator is readable and compact:</p> <div class="language- extra-class"><pre class="language-text"><code>time_str += (hour &gt;= 12)? &quot;pm&quot; : &quot;am&quot;;
</code></pre></div><p>Avoiding the ternary operator, you might write:</p> <div class="language- extra-class"><pre class="language-text"><code>if (hour &gt;= 12) {
time_str += &quot;pm&quot;;
} else {
time_str += &quot;am&quot;;
}
</code></pre></div><p>which is a bit drawn out and redundant. In this case, a conditional expression seems reasonable.</p> <p>However, these expressions can quickly become difficult to read:</p> <div class="language- extra-class"><pre class="language-text"><code>return exponent &gt;= 0? mantissa * (1 &lt;&lt; exponent) : mantissa / (1 &lt;&lt; -exponent);
</code></pre></div><p>Here, the ternary operator is no longer just choosing between two simple values. The</p> <p>motivation for writing code like this is usually to “squeeze everything on one line.”</p> <div class="custom-block tip"><p class="custom-block-title">K E Y I D E A</p> <p>Instead of minimizing the number of lines, a better metric is to minimize the time
needed for someone to understand it.</p></div> <div class="language- extra-class"><pre class="language-text"><code>MAKING CONTROL FLOW EASY TO READ 73
</code></pre></div><p>Spelling out the logic with an if/else statement makes the code more natural:</p> <div class="language- extra-class"><pre class="language-text"><code>if (exponent &gt;= 0) {
return mantissa * (1 &lt;&lt; exponent);
} else {
return mantissa / (1 &lt;&lt; -exponent);
}
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>A D VI C E
By default, use an if/else. The ternary ?: should be used only for the simplest cases.
</code></pre></div><h3 id="avoid-do-while-loops"><a href="#avoid-do-while-loops" class="header-anchor">#</a> Avoid do/while Loops</h3> <p>Many respected programming languages, as well as Perl, have a do { expression } while</p> <p>(condition) loop. The expression is executed at least once. Here’s an example:</p> <div class="language- extra-class"><pre class="language-text"><code>// Search through the list, starting at 'node', for the given 'name'.
// Don't consider more than 'max_length' nodes.
public boolean ListHasNode(Node node, String name, int max_length) {
do {
if (node.name().equals(name))
return true;
node = node.next();
} while (node != null &amp;&amp; --max_length &gt; 0);
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>return false;
}
</code></pre></div><p><strong>74</strong> CHAPTER SEVEN</p> <p>What’s weird about a do/while loop is that a block of code may or may not be reexecuted based</p> <p>on a condition <em>underneath</em> it. Typically, logical conditions are <em>above</em> the code they guard—this</p> <p>is the way it works with if, while, and for statements. Because you typically read code from</p> <p>top to bottom, this makes do/while a bit unnatural. Many readers end up reading the code twice.</p> <p>while loops are easier to read because you know the condition for all iterations before you read</p> <p>the block of code inside. But it would be silly to duplicate code just to remove a do/while:</p> <div class="language- extra-class"><pre class="language-text"><code>// Imitating a do/while — DON'T DO THIS!
body
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>while ( condition ) {
body (again)
}
</code></pre></div><p>Fortunately, we’ve found that in practice most do/while loops could have been written as</p> <p>while loops to begin with:</p> <div class="language- extra-class"><pre class="language-text"><code>public boolean ListHasNode(Node node, String name, int max_length) {
while (node != null &amp;&amp; max_length-- &gt; 0) {
if (node.name().equals(name)) return true;
node = node.next();
}
return false;
}
</code></pre></div><p>This version also has the benefit that it still works if max_length is 0 or if node is null.</p> <p>Another reason to avoid do/while is that the continue statement can be confusing inside it. For</p> <p>instance, what does this code do?</p> <div class="language- extra-class"><pre class="language-text"><code>do {
continue;
} while (false);
</code></pre></div><p>Does it loop forever or just once? Most programmers have to stop and think about it. (It should</p> <p>loop just once.)</p> <p>Overall, Bjarne Stroustrup, the creator of C++, says it best (in <em>The C++ Programming Language</em> ):</p> <div class="language- extra-class"><pre class="language-text"><code>In my experience, the do-statement is a source of errors and confusion. ... I prefer the condition
“up front where I can see it.” Consequently, I tend to avoid do-statements.
</code></pre></div><h3 id="returning-early-from-a-function"><a href="#returning-early-from-a-function" class="header-anchor">#</a> Returning Early from a Function</h3> <p>Some coders believe that functions should never have multiple return statements. This is</p> <p>nonsense. Returning early from a function is perfectly fine—and often desirable. For example:</p> <div class="language- extra-class"><pre class="language-text"><code>public boolean Contains(String str, String substr) {
if (str == null || substr == null) return false;
if (substr.equals(&quot;&quot;)) return true;
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>MAKING CONTROL FLOW EASY TO READ 75
</code></pre></div><h4 id=""><a href="#" class="header-anchor">#</a> }</h4> <p>Implementing this function without these “guard clauses” would be very unnatural.</p> <p>One of the motivations for wanting a single exit point is so that all the cleanup code at the</p> <p>bottom of the function is guaranteed to be called. But modern languages offer more</p> <p>sophisticated ways to achieve this guarantee:</p> <div class="language- extra-class"><pre class="language-text"><code>Language Structured idiom for cleanup code
C++ destructors
Java, Python try finally
Python with
C# using
</code></pre></div><p>In pure C, there is no mechanism to trigger specific code when a function exits. So if there’s a</p> <p>large function with a lot of cleanup code, returning early may be difficult to do correctly. In</p> <p>this case, other options include refactoring the function or even judicious use of goto cleanup;.</p> <h3 id="the-infamous-goto"><a href="#the-infamous-goto" class="header-anchor">#</a> The Infamous goto</h3> <p>In languages other than C, there is little need for goto because there are so many better ways</p> <p>to get the job done. gotos are also notorious for getting out of hand quickly and making code</p> <p>difficult to follow.</p> <p>But you can still see goto used in various C projects—most notably the Linux kernel. Before</p> <p>you dismiss all use of goto as blasphemy, it’s useful to dissect why some uses of goto are better</p> <p>than others.</p> <p>The simplest, most innocent use of goto is with a single exit at the bottom of a function:</p> <div class="language- extra-class"><pre class="language-text"><code>if (p == NULL) goto exit ;
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>...
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>exit :
fclose(file1);
fclose(file2);
...
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>return;
</code></pre></div><p>If this were the only form of goto allowed, goto wouldn’t be much of a problem.</p> <p>The problems can come when there are <em>multiple</em> goto targets, especially when their paths cross.</p> <p>In particular, gotos that go <em>upward</em> can make for real spaghetti code, and they can surely be</p> <p>replaced with structured loops. Most of the time, goto should be avoided.</p> <p><strong>76</strong> CHAPTER SEVEN</p> <h3 id="minimize-nesting"><a href="#minimize-nesting" class="header-anchor">#</a> Minimize Nesting</h3> <p>Deeply nested code is hard to understand. Each level of nesting pushes an extra condition onto</p> <p>the reader’s “mental stack.” When the reader sees a closing brace (}) it can be hard to “pop”</p> <p>the stack and remember what condition is underneath.</p> <p>Here is a relatively simple example of this—see if you notice yourself looking back up to double-</p> <p>check which block conditions you’re in:</p> <div class="language- extra-class"><pre class="language-text"><code>if (user_result == SUCCESS) {
if (permission_result != SUCCESS) {
reply.WriteErrors(&quot;error reading permissions&quot;);
reply.Done();
return;
}
reply.WriteErrors(&quot;&quot;);
} else {
reply.WriteErrors(user_result);
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>}
reply.Done();
</code></pre></div><p>When you see that first closing brace, you have to think to yourself, <em>Oh,</em> permission_result !=</p> <p>SUCCESS <em>has just ended, so now</em> permission_result == SUCCESS <em>, and this is still inside the block where</em></p> <p>user_result == SUCCESS_._</p> <p>Overall, you have to keep the values of user_result and permission_result in your head at all</p> <p>times. And as each if { } block closes, you have to toggle the corresponding value in your mind.</p> <p>This particular code is even worse because it keeps alternating between the SUCCESS and non-</p> <p>SUCCESS situations.</p> <p><strong>How Nesting Accumulates</strong></p> <p>Before we try to fix the previous example code, let’s talk about how it ended up the way it did.</p> <p>Originally, the code was simple:</p> <div class="language- extra-class"><pre class="language-text"><code>if (user_result == SUCCESS) {
reply.WriteErrors(&quot;&quot;);
} else {
reply.WriteErrors(user_result);
}
reply.Done();
</code></pre></div><p>This code is perfectly understandable—it figures out what error string to write, and then it’s</p> <p>done with the reply.</p> <p>But then the programmer added a second operation:</p> <div class="language- extra-class"><pre class="language-text"><code>if (user_result == SUCCESS) {
if (permission_result != SUCCESS) {
reply.WriteErrors(&quot;error reading permissions&quot;);
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>MAKING CONTROL FLOW EASY TO READ 77
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>reply.Done();
return;
}
reply.WriteErrors(&quot;&quot;);
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>...
</code></pre></div><p>This change makes sense—the programmer had a new chunk of code to insert, and she found</p> <p>the easiest place to insert it. This new code was fresh and mentally “bolded” in her mind. And</p> <p>the “diff” of this change is very clean—it looks like a simple change.</p> <p>But when someone else comes across the code later, all that context is gone. This is the way it</p> <p>was for you when you first read the code at the beginning of this section—you had to take it</p> <p>in all at once.</p> <div class="custom-block tip"><p class="custom-block-title">K E Y I D E A</p> <p>Look at your code from a fresh perspective when you’re making changes. Step back
and look at it as a whole.</p></div> <p><strong>Removing Nesting by Returning Early</strong></p> <p>Okay, so let’s improve the code. Nesting like this can be removed by handling the “failure cases”</p> <p>as soon as possible and returning early from the function:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>user_result <span class="token operator">!=</span> SUCCESS<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    reply<span class="token punctuation">.</span><span class="token function">WriteErrors</span><span class="token punctuation">(</span>user_result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    reply<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>permission_result <span class="token operator">!=</span> SUCCESS<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    reply<span class="token punctuation">.</span><span class="token function">WriteErrors</span><span class="token punctuation">(</span>permission_result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    reply<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-cpp extra-class"><pre class="language-cpp"><code>reply<span class="token punctuation">.</span><span class="token function">WriteErrors</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
reply<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>This code only has one level of nesting, instead of two. But more importantly, the reader never</p> <p>has to “pop” anything from his mental stack—every if block ends in a return.</p> <p><strong>Removing Nesting Inside Loops</strong></p> <p>The technique of returning early isn’t always applicable. For example, here’s a case of code</p> <p>nested in a loop:</p> <div class="language- extra-class"><pre class="language-text"><code>for (int i = 0; i &lt; results.size(); i++) {
if (results[i] != NULL) {
non_null_count++;
</code></pre></div><p><strong>78</strong> CHAPTER SEVEN</p> <div class="language- extra-class"><pre class="language-text"><code>if (results[i]-&gt;name != &quot;&quot;) {
cout &lt;&lt; &quot;Considering candidate...&quot; &lt;&lt; endl;
</code></pre></div><h4 id="-2"><a href="#-2" class="header-anchor">#</a> }</h4> <h4 id="-3"><a href="#-3" class="header-anchor">#</a> }</h4> <h4 id="-4"><a href="#-4" class="header-anchor">#</a> }</h4> <p>Inside a loop, the analogous technique to returning early is to continue:</p> <div class="language- extra-class"><pre class="language-text"><code>for (int i = 0; i &lt; results.size(); i++) {
if (results[i] == NULL) continue ;
non_null_count++;
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>if (results[i]-&gt;name == &quot;&quot;) continue ;
cout &lt;&lt; &quot;Considering candidate...&quot; &lt;&lt; endl;
</code></pre></div><h4 id="-5"><a href="#-5" class="header-anchor">#</a> }</h4> <p>In the same way that an if (...) return; acts as a guard clause for a function, these if (...)</p> <p>continue; statements act as guard clauses for the loop.</p> <p>In general, the continue statement can be confusing, because it bounces the reader around, like</p> <p>a goto inside the loop. But in this case, each iteration of the loop is independent (the loop is a</p> <p>“for each”), so the reader can easily see that continue just means “skip over this item.”</p> <h3 id="can-you-follow-the-flow-of-execution"><a href="#can-you-follow-the-flow-of-execution" class="header-anchor">#</a> Can You Follow the Flow of Execution?</h3> <div class="language- extra-class"><pre class="language-text"><code>MAKING CONTROL FLOW EASY TO READ 79
</code></pre></div><p>This chapter has been about low-level control flow: how to make loops, conditionals, and other</p> <p>jumps easy to read. But you should also think about the “flow” of your program at a high level.</p> <p>Ideally, it would be easy to follow the entire execution path of your program—you’d start at</p> <p>main() and mentally step through the code, as one function calls another, until the program</p> <p>exits.</p> <p>In practice, however, programming languages and libraries have constructs that let code</p> <p>execute “behind the scenes” or make it difficult to follow. Here are some examples:</p> <div class="language- extra-class"><pre class="language-text"><code>Programming construct How high-level program flow gets obscured
threading It’s unclear what code is executed when.
signal/interrupt handlers Certain code might be executed at any time.
exceptions Execution can bubble up through multiple function calls.
function pointers &amp; anonymous functions It’s hard to know exactly what code is going to run because that isn’t known
at compile time.
virtual methods object.virtualMethod() might invoke code of an unknown subclass.
</code></pre></div><p>Some of these constructs are very useful, and they can even make your code more readable</p> <p>and less redundant. But as programmers, sometimes we get carried away and use them</p> <p>excessively without realizing how difficult it will be for readers to understand the code later.</p> <p>Also, these constructs make bugs much harder to track down.</p> <p>The key is to not let too large a percentage of your code use these constructs. If you abuse these</p> <p>features, it can make tracing through your code like a game of Three-Card Monte (as in the</p> <p>cartoon).</p> <h3 id="summary"><a href="#summary" class="header-anchor">#</a> Summary</h3> <p>There are a number of things you can do to make your code’s control flow easier to read.</p> <p>When writing a comparison (while (bytes_expected &gt; bytes_received)), it’s better to put the</p> <p>changing value on the left and the more stable value on the right (while (bytes_received &lt;</p> <p>bytes_expected)).</p> <p>You can also reorder the blocks of an if/else statement. Generally, try to handle the positive/</p> <p>easier/interesting case first. Sometimes these criteria conflict, but when they don’t, it’s a good</p> <p>rule of thumb to follow.</p> <p>Certain programming constructs, like the ternary operator (: ?), the do/while loop, and goto</p> <p>often result in unreadable code. It’s usually best not to use them, as clearer alternatives almost</p> <p>always exist.</p> <p><strong>80</strong> CHAPTER SEVEN</p> <p>Nested code blocks require more concentration to follow along. Each new nesting requires</p> <p>more context to be “pushed onto the stack” of the reader. Instead, opt for more “linear” code</p> <p>to avoid deep nesting.</p> <p>Returning early can remove nesting and clean up code in general. “Guard statements”</p> <p>(handling simple cases at the top of the function) are especially useful.</p> <div class="language- extra-class"><pre class="language-text"><code>MAKING CONTROL FLOW EASY TO READ 81
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/kungfu/artofcode/c6.html" class="prev">
        C H A P T E R S I X
      </a></span> <span class="next"><a href="/docs/kungfu/artofcode/c8.html">
        C H A P T E R E I G H T
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----><!----></div></div>
    <script src="/docs/assets/js/app.cfeb973c.js" defer></script><script src="/docs/assets/js/2.f326a5a1.js" defer></script><script src="/docs/assets/js/219.085798af.js" defer></script><script src="/docs/assets/js/24.55a1e86e.js" defer></script>
  </body>
</html>
