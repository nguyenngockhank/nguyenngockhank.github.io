<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>C H A P T E R E L E V E N | Nguyễn Khánk&#39;s Wiki</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="apple-touch-icon" sizes="180x180" href="../public/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../public/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../public/favicons/favicon-16x16.png">
    <link rel="manifest" href="../public/favicons/manifest.json">
    <link rel="mask-icon" href="../public/favicons/safari-pinned-tab.svg" color="#3a0839">
    <link rel="shortcut icon" href="../public/favicons/favicon.ico">
    <meta name="description" content="Wikipedia của tui">
    <meta name="msapplication-TileColor" content="#3a0839">
    <meta name="msapplication-config" content="../public/favicons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    
    <link rel="preload" href="/docs/assets/css/0.styles.5d974432.css" as="style"><link rel="preload" href="/docs/assets/js/app.feff3dbb.js" as="script"><link rel="preload" href="/docs/assets/js/2.aca46d71.js" as="script"><link rel="preload" href="/docs/assets/js/218.66e0082a.js" as="script"><link rel="preload" href="/docs/assets/js/27.5ed2ce18.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.e2dac1de.js"><link rel="prefetch" href="/docs/assets/js/100.072f86f4.js"><link rel="prefetch" href="/docs/assets/js/101.fc0bc918.js"><link rel="prefetch" href="/docs/assets/js/102.ddeddef2.js"><link rel="prefetch" href="/docs/assets/js/103.a299e414.js"><link rel="prefetch" href="/docs/assets/js/104.29aa9c20.js"><link rel="prefetch" href="/docs/assets/js/105.5211965b.js"><link rel="prefetch" href="/docs/assets/js/106.f091e57b.js"><link rel="prefetch" href="/docs/assets/js/107.80acce0d.js"><link rel="prefetch" href="/docs/assets/js/108.b0108b40.js"><link rel="prefetch" href="/docs/assets/js/109.7953f94a.js"><link rel="prefetch" href="/docs/assets/js/11.34f9e1bc.js"><link rel="prefetch" href="/docs/assets/js/110.59b888f8.js"><link rel="prefetch" href="/docs/assets/js/111.5b11b553.js"><link rel="prefetch" href="/docs/assets/js/112.8a857b53.js"><link rel="prefetch" href="/docs/assets/js/113.5aab77e8.js"><link rel="prefetch" href="/docs/assets/js/114.aef8a2f2.js"><link rel="prefetch" href="/docs/assets/js/115.777be1e9.js"><link rel="prefetch" href="/docs/assets/js/116.3092451f.js"><link rel="prefetch" href="/docs/assets/js/117.3345c37e.js"><link rel="prefetch" href="/docs/assets/js/118.be055f62.js"><link rel="prefetch" href="/docs/assets/js/119.77b121e6.js"><link rel="prefetch" href="/docs/assets/js/12.a704c651.js"><link rel="prefetch" href="/docs/assets/js/120.2d64d4ae.js"><link rel="prefetch" href="/docs/assets/js/121.954a3ba9.js"><link rel="prefetch" href="/docs/assets/js/122.f8032cd6.js"><link rel="prefetch" href="/docs/assets/js/123.96d7858b.js"><link rel="prefetch" href="/docs/assets/js/124.f12d4c00.js"><link rel="prefetch" href="/docs/assets/js/125.47b679a8.js"><link rel="prefetch" href="/docs/assets/js/126.725c596d.js"><link rel="prefetch" href="/docs/assets/js/127.75f3139f.js"><link rel="prefetch" href="/docs/assets/js/128.9862473f.js"><link rel="prefetch" href="/docs/assets/js/129.0f09cf34.js"><link rel="prefetch" href="/docs/assets/js/13.66fe2f7e.js"><link rel="prefetch" href="/docs/assets/js/130.d20c4272.js"><link rel="prefetch" href="/docs/assets/js/131.771cb92a.js"><link rel="prefetch" href="/docs/assets/js/132.308ce22e.js"><link rel="prefetch" href="/docs/assets/js/133.99780c7f.js"><link rel="prefetch" href="/docs/assets/js/134.c8bb3739.js"><link rel="prefetch" href="/docs/assets/js/135.d22b8cd4.js"><link rel="prefetch" href="/docs/assets/js/136.0f7f2732.js"><link rel="prefetch" href="/docs/assets/js/137.66315d8b.js"><link rel="prefetch" href="/docs/assets/js/138.bc1e4151.js"><link rel="prefetch" href="/docs/assets/js/139.4bf7c284.js"><link rel="prefetch" href="/docs/assets/js/14.57825f78.js"><link rel="prefetch" href="/docs/assets/js/140.023cb781.js"><link rel="prefetch" href="/docs/assets/js/141.3ed2d77a.js"><link rel="prefetch" href="/docs/assets/js/142.97feece5.js"><link rel="prefetch" href="/docs/assets/js/143.22b3a1b2.js"><link rel="prefetch" href="/docs/assets/js/144.3b8c0d53.js"><link rel="prefetch" href="/docs/assets/js/145.c187e405.js"><link rel="prefetch" href="/docs/assets/js/146.02e7dc46.js"><link rel="prefetch" href="/docs/assets/js/147.1ea04230.js"><link rel="prefetch" href="/docs/assets/js/148.eceb141f.js"><link rel="prefetch" href="/docs/assets/js/149.7bc98406.js"><link rel="prefetch" href="/docs/assets/js/15.cbcf56bd.js"><link rel="prefetch" href="/docs/assets/js/150.345f53e1.js"><link rel="prefetch" href="/docs/assets/js/151.97fd5643.js"><link rel="prefetch" href="/docs/assets/js/152.0f0ace62.js"><link rel="prefetch" href="/docs/assets/js/153.5ae906c9.js"><link rel="prefetch" href="/docs/assets/js/154.4524d48f.js"><link rel="prefetch" href="/docs/assets/js/155.d7cbb04b.js"><link rel="prefetch" href="/docs/assets/js/156.51743cf0.js"><link rel="prefetch" href="/docs/assets/js/157.12aa1a8a.js"><link rel="prefetch" href="/docs/assets/js/158.04757c69.js"><link rel="prefetch" href="/docs/assets/js/159.7a8588a6.js"><link rel="prefetch" href="/docs/assets/js/16.b9864c9c.js"><link rel="prefetch" href="/docs/assets/js/160.79ec6015.js"><link rel="prefetch" href="/docs/assets/js/161.4f0b5cd9.js"><link rel="prefetch" href="/docs/assets/js/162.6cc1f3af.js"><link rel="prefetch" href="/docs/assets/js/163.187c5335.js"><link rel="prefetch" href="/docs/assets/js/164.556dc6d8.js"><link rel="prefetch" href="/docs/assets/js/165.6c6e1f75.js"><link rel="prefetch" href="/docs/assets/js/166.afe12552.js"><link rel="prefetch" href="/docs/assets/js/167.bd3dd81a.js"><link rel="prefetch" href="/docs/assets/js/168.b5e90a8d.js"><link rel="prefetch" href="/docs/assets/js/169.80b477b3.js"><link rel="prefetch" href="/docs/assets/js/17.8983ce9d.js"><link rel="prefetch" href="/docs/assets/js/170.4fcbc9a3.js"><link rel="prefetch" href="/docs/assets/js/171.6c7ccd83.js"><link rel="prefetch" href="/docs/assets/js/172.e02d80ea.js"><link rel="prefetch" href="/docs/assets/js/173.66fb904a.js"><link rel="prefetch" href="/docs/assets/js/174.4f18cc78.js"><link rel="prefetch" href="/docs/assets/js/175.b1c5644a.js"><link rel="prefetch" href="/docs/assets/js/176.bd684253.js"><link rel="prefetch" href="/docs/assets/js/177.c62f362d.js"><link rel="prefetch" href="/docs/assets/js/178.f953855f.js"><link rel="prefetch" href="/docs/assets/js/179.10404ee2.js"><link rel="prefetch" href="/docs/assets/js/18.5efe21b3.js"><link rel="prefetch" href="/docs/assets/js/180.c4330ec2.js"><link rel="prefetch" href="/docs/assets/js/181.02c26c33.js"><link rel="prefetch" href="/docs/assets/js/182.773ba280.js"><link rel="prefetch" href="/docs/assets/js/183.064d5ae1.js"><link rel="prefetch" href="/docs/assets/js/184.2c64e798.js"><link rel="prefetch" href="/docs/assets/js/185.38c7b6e9.js"><link rel="prefetch" href="/docs/assets/js/186.d95e2e7a.js"><link rel="prefetch" href="/docs/assets/js/187.8aad3033.js"><link rel="prefetch" href="/docs/assets/js/188.7f201e8d.js"><link rel="prefetch" href="/docs/assets/js/189.6cefdb59.js"><link rel="prefetch" href="/docs/assets/js/19.58823304.js"><link rel="prefetch" href="/docs/assets/js/190.90e5aa35.js"><link rel="prefetch" href="/docs/assets/js/191.3e1cf065.js"><link rel="prefetch" href="/docs/assets/js/192.a2c49267.js"><link rel="prefetch" href="/docs/assets/js/193.cd7650f2.js"><link rel="prefetch" href="/docs/assets/js/194.1d2ca753.js"><link rel="prefetch" href="/docs/assets/js/195.e29ca5e1.js"><link rel="prefetch" href="/docs/assets/js/196.ff519f9d.js"><link rel="prefetch" href="/docs/assets/js/197.d7c7a2c2.js"><link rel="prefetch" href="/docs/assets/js/198.77259c6a.js"><link rel="prefetch" href="/docs/assets/js/199.7983bd3b.js"><link rel="prefetch" href="/docs/assets/js/20.3b486daa.js"><link rel="prefetch" href="/docs/assets/js/200.e9a796d0.js"><link rel="prefetch" href="/docs/assets/js/201.b4449da8.js"><link rel="prefetch" href="/docs/assets/js/202.ab520617.js"><link rel="prefetch" href="/docs/assets/js/203.1944c871.js"><link rel="prefetch" href="/docs/assets/js/204.2ddfe4db.js"><link rel="prefetch" href="/docs/assets/js/205.3a4a5484.js"><link rel="prefetch" href="/docs/assets/js/206.9eaec970.js"><link rel="prefetch" href="/docs/assets/js/207.ca2acd17.js"><link rel="prefetch" href="/docs/assets/js/208.bc4e3070.js"><link rel="prefetch" href="/docs/assets/js/209.8194c212.js"><link rel="prefetch" href="/docs/assets/js/21.1e77a313.js"><link rel="prefetch" href="/docs/assets/js/210.473ccc45.js"><link rel="prefetch" href="/docs/assets/js/211.623b4033.js"><link rel="prefetch" href="/docs/assets/js/212.0f85a611.js"><link rel="prefetch" href="/docs/assets/js/213.191977aa.js"><link rel="prefetch" href="/docs/assets/js/214.a23c6dcc.js"><link rel="prefetch" href="/docs/assets/js/215.25321a42.js"><link rel="prefetch" href="/docs/assets/js/216.e450a05c.js"><link rel="prefetch" href="/docs/assets/js/217.abab04ca.js"><link rel="prefetch" href="/docs/assets/js/219.5f4ee9fd.js"><link rel="prefetch" href="/docs/assets/js/22.1c51f113.js"><link rel="prefetch" href="/docs/assets/js/220.bbb5df8d.js"><link rel="prefetch" href="/docs/assets/js/221.0d3dfd46.js"><link rel="prefetch" href="/docs/assets/js/222.8e68bdb2.js"><link rel="prefetch" href="/docs/assets/js/223.6c582cd9.js"><link rel="prefetch" href="/docs/assets/js/224.f570e175.js"><link rel="prefetch" href="/docs/assets/js/225.b249063b.js"><link rel="prefetch" href="/docs/assets/js/226.48576d77.js"><link rel="prefetch" href="/docs/assets/js/227.8346e855.js"><link rel="prefetch" href="/docs/assets/js/228.8e3e6ca7.js"><link rel="prefetch" href="/docs/assets/js/229.faed0af8.js"><link rel="prefetch" href="/docs/assets/js/23.dc13f196.js"><link rel="prefetch" href="/docs/assets/js/230.dcc8e04d.js"><link rel="prefetch" href="/docs/assets/js/231.611372c2.js"><link rel="prefetch" href="/docs/assets/js/232.aaaeb300.js"><link rel="prefetch" href="/docs/assets/js/233.819d8911.js"><link rel="prefetch" href="/docs/assets/js/234.41eb70ca.js"><link rel="prefetch" href="/docs/assets/js/235.acedc064.js"><link rel="prefetch" href="/docs/assets/js/236.fbc4b8f7.js"><link rel="prefetch" href="/docs/assets/js/237.7b217482.js"><link rel="prefetch" href="/docs/assets/js/238.6b2400f7.js"><link rel="prefetch" href="/docs/assets/js/239.570754bf.js"><link rel="prefetch" href="/docs/assets/js/24.d1deb976.js"><link rel="prefetch" href="/docs/assets/js/240.30c365e9.js"><link rel="prefetch" href="/docs/assets/js/241.aebbd7aa.js"><link rel="prefetch" href="/docs/assets/js/242.5df1a85a.js"><link rel="prefetch" href="/docs/assets/js/243.704fb61f.js"><link rel="prefetch" href="/docs/assets/js/244.9bc98748.js"><link rel="prefetch" href="/docs/assets/js/245.38e733b7.js"><link rel="prefetch" href="/docs/assets/js/246.b81c0b24.js"><link rel="prefetch" href="/docs/assets/js/247.c0a84943.js"><link rel="prefetch" href="/docs/assets/js/248.47e7f09b.js"><link rel="prefetch" href="/docs/assets/js/249.29294a64.js"><link rel="prefetch" href="/docs/assets/js/25.ddba0ef8.js"><link rel="prefetch" href="/docs/assets/js/250.7b97771f.js"><link rel="prefetch" href="/docs/assets/js/251.af134ede.js"><link rel="prefetch" href="/docs/assets/js/252.996a9add.js"><link rel="prefetch" href="/docs/assets/js/253.6b08af88.js"><link rel="prefetch" href="/docs/assets/js/254.a14372bd.js"><link rel="prefetch" href="/docs/assets/js/255.868fb43f.js"><link rel="prefetch" href="/docs/assets/js/256.606c2f81.js"><link rel="prefetch" href="/docs/assets/js/257.9c34c318.js"><link rel="prefetch" href="/docs/assets/js/258.236c65be.js"><link rel="prefetch" href="/docs/assets/js/259.dc9c78fd.js"><link rel="prefetch" href="/docs/assets/js/26.23be3024.js"><link rel="prefetch" href="/docs/assets/js/260.228e0898.js"><link rel="prefetch" href="/docs/assets/js/261.7dd0cc1f.js"><link rel="prefetch" href="/docs/assets/js/262.7c674375.js"><link rel="prefetch" href="/docs/assets/js/263.0d61e50b.js"><link rel="prefetch" href="/docs/assets/js/264.0595e5d9.js"><link rel="prefetch" href="/docs/assets/js/265.4f8cb07b.js"><link rel="prefetch" href="/docs/assets/js/266.fe3edb0f.js"><link rel="prefetch" href="/docs/assets/js/267.8942e793.js"><link rel="prefetch" href="/docs/assets/js/268.86eb0eb9.js"><link rel="prefetch" href="/docs/assets/js/269.03f58dca.js"><link rel="prefetch" href="/docs/assets/js/270.90b7be1d.js"><link rel="prefetch" href="/docs/assets/js/271.b556bf53.js"><link rel="prefetch" href="/docs/assets/js/272.0b7f4823.js"><link rel="prefetch" href="/docs/assets/js/273.d311f5f5.js"><link rel="prefetch" href="/docs/assets/js/274.06fb099b.js"><link rel="prefetch" href="/docs/assets/js/275.e40667a2.js"><link rel="prefetch" href="/docs/assets/js/276.d3ab71c4.js"><link rel="prefetch" href="/docs/assets/js/277.5feda584.js"><link rel="prefetch" href="/docs/assets/js/278.beaf14c2.js"><link rel="prefetch" href="/docs/assets/js/279.f7073aaf.js"><link rel="prefetch" href="/docs/assets/js/28.f7b1175c.js"><link rel="prefetch" href="/docs/assets/js/280.72c464b5.js"><link rel="prefetch" href="/docs/assets/js/281.1fc9c7ce.js"><link rel="prefetch" href="/docs/assets/js/282.4e16e559.js"><link rel="prefetch" href="/docs/assets/js/283.4fb4b1a6.js"><link rel="prefetch" href="/docs/assets/js/284.c3baaf64.js"><link rel="prefetch" href="/docs/assets/js/285.a7a948cc.js"><link rel="prefetch" href="/docs/assets/js/286.73a344a9.js"><link rel="prefetch" href="/docs/assets/js/287.6035b91a.js"><link rel="prefetch" href="/docs/assets/js/288.bb0dbdf9.js"><link rel="prefetch" href="/docs/assets/js/289.10918ad5.js"><link rel="prefetch" href="/docs/assets/js/29.d0e3b179.js"><link rel="prefetch" href="/docs/assets/js/290.20c7bcd8.js"><link rel="prefetch" href="/docs/assets/js/291.ee116400.js"><link rel="prefetch" href="/docs/assets/js/292.dfc2e949.js"><link rel="prefetch" href="/docs/assets/js/293.8a851721.js"><link rel="prefetch" href="/docs/assets/js/294.1f4a08e0.js"><link rel="prefetch" href="/docs/assets/js/295.7ba75a19.js"><link rel="prefetch" href="/docs/assets/js/296.b251d4cf.js"><link rel="prefetch" href="/docs/assets/js/297.d56d6d59.js"><link rel="prefetch" href="/docs/assets/js/298.2e259f4b.js"><link rel="prefetch" href="/docs/assets/js/299.7fed62ba.js"><link rel="prefetch" href="/docs/assets/js/3.054cc2ec.js"><link rel="prefetch" href="/docs/assets/js/30.b554c761.js"><link rel="prefetch" href="/docs/assets/js/300.1f947cef.js"><link rel="prefetch" href="/docs/assets/js/301.f708dd5e.js"><link rel="prefetch" href="/docs/assets/js/302.161104b1.js"><link rel="prefetch" href="/docs/assets/js/303.e23692dd.js"><link rel="prefetch" href="/docs/assets/js/304.05659027.js"><link rel="prefetch" href="/docs/assets/js/305.9bf971c9.js"><link rel="prefetch" href="/docs/assets/js/306.ca8deeea.js"><link rel="prefetch" href="/docs/assets/js/307.97a6667e.js"><link rel="prefetch" href="/docs/assets/js/308.693ca743.js"><link rel="prefetch" href="/docs/assets/js/309.fffb02db.js"><link rel="prefetch" href="/docs/assets/js/31.370bb99a.js"><link rel="prefetch" href="/docs/assets/js/310.2bc665a7.js"><link rel="prefetch" href="/docs/assets/js/311.7953e1c2.js"><link rel="prefetch" href="/docs/assets/js/312.fa9bc367.js"><link rel="prefetch" href="/docs/assets/js/313.ac895eeb.js"><link rel="prefetch" href="/docs/assets/js/314.3631b719.js"><link rel="prefetch" href="/docs/assets/js/315.74ff42ab.js"><link rel="prefetch" href="/docs/assets/js/316.3e76797f.js"><link rel="prefetch" href="/docs/assets/js/317.6fb15d7c.js"><link rel="prefetch" href="/docs/assets/js/318.79e44dca.js"><link rel="prefetch" href="/docs/assets/js/319.bc94de5a.js"><link rel="prefetch" href="/docs/assets/js/32.78d1f1eb.js"><link rel="prefetch" href="/docs/assets/js/320.50cf4d33.js"><link rel="prefetch" href="/docs/assets/js/321.92c73aef.js"><link rel="prefetch" href="/docs/assets/js/322.4b083d48.js"><link rel="prefetch" href="/docs/assets/js/323.26c3a0ab.js"><link rel="prefetch" href="/docs/assets/js/324.fcb79d62.js"><link rel="prefetch" href="/docs/assets/js/325.45cede6b.js"><link rel="prefetch" href="/docs/assets/js/326.199b7195.js"><link rel="prefetch" href="/docs/assets/js/327.c396bfb7.js"><link rel="prefetch" href="/docs/assets/js/328.988a3de9.js"><link rel="prefetch" href="/docs/assets/js/329.fe8358a3.js"><link rel="prefetch" href="/docs/assets/js/33.6b9b4e96.js"><link rel="prefetch" href="/docs/assets/js/34.76d3700c.js"><link rel="prefetch" href="/docs/assets/js/35.b61bf772.js"><link rel="prefetch" href="/docs/assets/js/36.7f32760f.js"><link rel="prefetch" href="/docs/assets/js/37.4079c117.js"><link rel="prefetch" href="/docs/assets/js/38.1ac45a99.js"><link rel="prefetch" href="/docs/assets/js/39.0b98297f.js"><link rel="prefetch" href="/docs/assets/js/4.98818668.js"><link rel="prefetch" href="/docs/assets/js/40.bc044ad5.js"><link rel="prefetch" href="/docs/assets/js/41.de0fe499.js"><link rel="prefetch" href="/docs/assets/js/42.e225df72.js"><link rel="prefetch" href="/docs/assets/js/43.5e38f722.js"><link rel="prefetch" href="/docs/assets/js/44.c7251ae2.js"><link rel="prefetch" href="/docs/assets/js/45.47147150.js"><link rel="prefetch" href="/docs/assets/js/46.b91db25b.js"><link rel="prefetch" href="/docs/assets/js/47.40a11e04.js"><link rel="prefetch" href="/docs/assets/js/48.02effbc8.js"><link rel="prefetch" href="/docs/assets/js/49.0daadd89.js"><link rel="prefetch" href="/docs/assets/js/5.c3703f1d.js"><link rel="prefetch" href="/docs/assets/js/50.821b5322.js"><link rel="prefetch" href="/docs/assets/js/51.907927f0.js"><link rel="prefetch" href="/docs/assets/js/52.fbd6f4cb.js"><link rel="prefetch" href="/docs/assets/js/53.f1a0dc32.js"><link rel="prefetch" href="/docs/assets/js/54.8b66e487.js"><link rel="prefetch" href="/docs/assets/js/55.07cf4188.js"><link rel="prefetch" href="/docs/assets/js/56.ba320d44.js"><link rel="prefetch" href="/docs/assets/js/57.13a27667.js"><link rel="prefetch" href="/docs/assets/js/58.ef5d7e10.js"><link rel="prefetch" href="/docs/assets/js/59.dd726a42.js"><link rel="prefetch" href="/docs/assets/js/6.a764175d.js"><link rel="prefetch" href="/docs/assets/js/60.77ab395a.js"><link rel="prefetch" href="/docs/assets/js/61.3634b93f.js"><link rel="prefetch" href="/docs/assets/js/62.4c2d18ec.js"><link rel="prefetch" href="/docs/assets/js/63.57de2c82.js"><link rel="prefetch" href="/docs/assets/js/64.7b6639a9.js"><link rel="prefetch" href="/docs/assets/js/65.563fdeff.js"><link rel="prefetch" href="/docs/assets/js/66.81bd4cf2.js"><link rel="prefetch" href="/docs/assets/js/67.7fa4933d.js"><link rel="prefetch" href="/docs/assets/js/68.beebaf3f.js"><link rel="prefetch" href="/docs/assets/js/69.64313c8f.js"><link rel="prefetch" href="/docs/assets/js/7.2960bb58.js"><link rel="prefetch" href="/docs/assets/js/70.96160c4a.js"><link rel="prefetch" href="/docs/assets/js/71.ddaef725.js"><link rel="prefetch" href="/docs/assets/js/72.96fd17ad.js"><link rel="prefetch" href="/docs/assets/js/73.7ccc2f65.js"><link rel="prefetch" href="/docs/assets/js/74.3198ebf4.js"><link rel="prefetch" href="/docs/assets/js/75.4886a68c.js"><link rel="prefetch" href="/docs/assets/js/76.8d13e16c.js"><link rel="prefetch" href="/docs/assets/js/77.adc7359e.js"><link rel="prefetch" href="/docs/assets/js/78.2e03c285.js"><link rel="prefetch" href="/docs/assets/js/79.7d0ac9a1.js"><link rel="prefetch" href="/docs/assets/js/8.4c0568fd.js"><link rel="prefetch" href="/docs/assets/js/80.0e2710e5.js"><link rel="prefetch" href="/docs/assets/js/81.cdf404cc.js"><link rel="prefetch" href="/docs/assets/js/82.01e97e1f.js"><link rel="prefetch" href="/docs/assets/js/83.90c08f77.js"><link rel="prefetch" href="/docs/assets/js/84.2225a6dc.js"><link rel="prefetch" href="/docs/assets/js/85.49171e3b.js"><link rel="prefetch" href="/docs/assets/js/86.b18603ac.js"><link rel="prefetch" href="/docs/assets/js/87.772b6e3a.js"><link rel="prefetch" href="/docs/assets/js/88.82fdaa52.js"><link rel="prefetch" href="/docs/assets/js/89.bfcd0e62.js"><link rel="prefetch" href="/docs/assets/js/9.c7f05dcb.js"><link rel="prefetch" href="/docs/assets/js/90.ebe887ad.js"><link rel="prefetch" href="/docs/assets/js/91.7006ce28.js"><link rel="prefetch" href="/docs/assets/js/92.e662a7e6.js"><link rel="prefetch" href="/docs/assets/js/93.b97b9d2a.js"><link rel="prefetch" href="/docs/assets/js/94.36f8f62e.js"><link rel="prefetch" href="/docs/assets/js/95.b7192aed.js"><link rel="prefetch" href="/docs/assets/js/96.f0bc5b58.js"><link rel="prefetch" href="/docs/assets/js/97.59dcee0b.js"><link rel="prefetch" href="/docs/assets/js/98.e16eec31.js"><link rel="prefetch" href="/docs/assets/js/99.26ea8045.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.5d974432.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">Nguyễn Khánk's Wiki</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/architect/" class="nav-link">
  Architecture
</a></div><div class="nav-item"><a href="/docs/kungfu/letsgo.html" class="nav-link">
  Kungfu
</a></div><div class="nav-item"><a href="https://nguyenngockhank.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/architect/" class="nav-link">
  Architecture
</a></div><div class="nav-item"><a href="/docs/kungfu/letsgo.html" class="nav-link">
  Kungfu
</a></div><div class="nav-item"><a href="https://nguyenngockhank.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>NoSql Distilled</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>A Philosophy of Software Design</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>97 Things Every Programmer Should Know</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>The Art of Readable Code</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/kungfu/artofcode/c0.html" class="sidebar-link">The Art of Readable Code</a></li><li><a href="/docs/kungfu/artofcode/c1.html" class="sidebar-link">C H A P T E R 1</a></li><li><a href="/docs/kungfu/artofcode/c2.html" class="sidebar-link">Packing Information into Names (C2 - I)</a></li><li><a href="/docs/kungfu/artofcode/c3.html" class="sidebar-link">Names That Can’t Be Misconstrued</a></li><li><a href="/docs/kungfu/artofcode/c4.html" class="sidebar-link">C H A P T E R F O U R</a></li><li><a href="/docs/kungfu/artofcode/c5.html" class="sidebar-link">C H A P T E R F I V E</a></li><li><a href="/docs/kungfu/artofcode/c6.html" class="sidebar-link">C H A P T E R S I X</a></li><li><a href="/docs/kungfu/artofcode/c7.html" class="sidebar-link">C H A P T E R 7</a></li><li><a href="/docs/kungfu/artofcode/c8.html" class="sidebar-link">C H A P T E R 8</a></li><li><a href="/docs/kungfu/artofcode/c9.html" class="sidebar-link">C H A P T E R 9</a></li><li><a href="/docs/kungfu/artofcode/c10.html" class="sidebar-link">C H A P T E R T E N</a></li><li><a href="/docs/kungfu/artofcode/c11.html" aria-current="page" class="active sidebar-link">C H A P T E R E L E V E N</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/kungfu/artofcode/c12.html" class="sidebar-link">C H A P T E R T W E L V E</a></li><li><a href="/docs/kungfu/artofcode/c13.html" class="sidebar-link">C H A P T E R T H I R T E E N</a></li><li><a href="/docs/kungfu/artofcode/c14.html" class="sidebar-link">Testing and Readability (C14 - IV)</a></li><li><a href="/docs/kungfu/artofcode/c15.html" class="sidebar-link">C H A P T E R F I F T E E N</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="c-h-a-p-t-e-r-e-l-e-v-e-n"><a href="#c-h-a-p-t-e-r-e-l-e-v-e-n" class="header-anchor">#</a> C H A P T E R E L E V E N</h3> <p><strong>One Task at a Time</strong></p> <div class="language- extra-class"><pre class="language-text"><code>121
</code></pre></div><p>Code that does multiple things at once is harder to understand. A single block of code might</p> <p>be initializing new objects, cleansing data, parsing inputs, and applying business logic, all at</p> <p>the same time. If all that code is woven together, it will be harder to understand than if each</p> <p>“task” is started and completed on its own.</p> <div class="custom-block tip"><p class="custom-block-title">K E Y I D E A</p> <p>Code should be organized so that it’s doing only one task at a time.</p></div> <p>Said another way, this chapter is about “defragmenting” your code. The following diagram</p> <p>illustrates this process: the left side shows the various tasks a piece of code is doing, and the</p> <p>right side shows that same code after it’s been organized to do one task at a time.</p> <p>You might have heard the advice that “functions should do only one thing.” Our advice is</p> <p>similar, but isn’t always about function boundaries. Sure, breaking a large function into</p> <p>multiple smaller functions can be good. But even if you don’t do this, you can still organize</p> <p>the code inside that large function so it feels like there are separate logical sections.</p> <p>Here’s the process we use to make code do “one task at a time”:</p> <ol><li>List out all the “tasks” your code is doing. We use the word “task” very loosely—it could
be as small as “make sure this object is valid” or as vague as “iterate through every node
in the tree.”</li></ol> <div class="language- extra-class"><pre class="language-text"><code>2.Try to separate those tasks as much as you can into different functions or at least different
sections of code.
</code></pre></div><p>In this chapter, we’ll show you a number of examples of how to do this.</p> <p><strong>122</strong> CHAPTER ELEVEN</p> <h3 id="tasks-can-be-small"><a href="#tasks-can-be-small" class="header-anchor">#</a> Tasks Can Be Small</h3> <p>Suppose there’s a voting widget on a blog where a user can vote a comment “Up” or “Down.”</p> <p>The total score of a comment is the sum over all votes: +1 for each “Up” vote, –1 for each</p> <p>“Down” vote.</p> <p>Here are the three states a user’s vote can be in, and how it would affect the total score:</p> <p>When the user clicks one of the buttons (to make/change her vote), the following JavaScript</p> <p>is called:</p> <div class="language- extra-class"><pre class="language-text"><code>vote_changed(old_vote, new_vote); // each vote is &quot;Up&quot;, &quot;Down&quot;, or &quot;&quot;
</code></pre></div><p>This function updates the total score and works for all combinations of old_vote/new_vote:</p> <div class="language- extra-class"><pre class="language-text"><code>var vote_changed = function (old_vote, new_vote) {
var score = get_score();
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>if (new_vote !== old_vote) {
if (new_vote === 'Up') {
score += (old_vote === 'Down'? 2 : 1);
} else if (new_vote === 'Down') {
score -= (old_vote === 'Up'? 2 : 1);
} else if (new_vote === '') {
score += (old_vote === 'Up'? -1 : 1);
}
}
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>set_score(score);
};
</code></pre></div><p>Even though the code is pretty short, it’s doing a lot. There are lots of intricate details, and it’s</p> <p>hard to tell at a glance whether there are any off-by-one errors, typos, or other bugs.</p> <p>The code may seem to be doing only one thing (updating the score), but there are actually</p> <p><em>two</em> tasks being performed at once:</p> <div class="language- extra-class"><pre class="language-text"><code>1.old_vote and new_vote are being “parsed” into numerical values.
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>2.score is being updated.
</code></pre></div><p>We can make the code easier to read by solving each task separately. The following code solves</p> <p>the first task, of parsing the vote into a numerical value:</p> <div class="language- extra-class"><pre class="language-text"><code>var vote_value = function (vote) {
if (vote === 'Up') {
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>ONE TASK AT A TIME 123
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>return +1;
}
if (vote === 'Down') {
return -1;
}
return 0;
};
</code></pre></div><p>Now the rest of the code can solve the second task, updating score:</p> <div class="language- extra-class"><pre class="language-text"><code>var vote_changed = function (old_vote, new_vote) {
var score = get_score();
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>score -= vote_value(old_vote); // remove the old vote
score += vote_value(new_vote); // add the new vote
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>set_score(score);
};
</code></pre></div><p>As you can see, this version of the code takes a lot less mental effort to convince yourself that</p> <p>it works. That’s a big part of what makes code “easy to understand.”</p> <h3 id="extracting-values-from-an-object"><a href="#extracting-values-from-an-object" class="header-anchor">#</a> Extracting Values from an Object</h3> <p>We once had some JavaScript that formatted a user’s location into a friendly string of <em>“City,</em></p> <p><em>Country”</em> like “Santa Monica, USA” or “Paris, France.” We were given a location_info dictionary</p> <p>with plenty of structured information. All we had to do was pick a “ <em>City</em> ” and a “ <em>Country</em> ” from</p> <p>all the fields and concatenate them together.</p> <p>The following illustration shows example input/output:</p> <p>It seems easy so far, but the tricky part is that <em>any or all of these four values might be missing</em>. Here’s</p> <p>how we dealt with that:</p> <ul><li>When choosing the “City,” we preferred to use the “LocalityName” (city/town) if
available, then the “SubAdministrativeAreaName” (larger city/county), then the
“AdministrativeAreaName” (state/territory).</li></ul> <p><strong>124</strong> CHAPTER ELEVEN</p> <ul><li>If all three were missing, the “City” was affectionately given the default “Middle-of-
Nowhere.”</li> <li>If the “CountryName” was missing, “Planet Earth” was used as a default.</li></ul> <p>The following figure shows two examples of handling missing values.</p> <p>Here is the code we wrote to implement this task:</p> <div class="language- extra-class"><pre class="language-text"><code>var place = location_info[&quot;LocalityName&quot;]; // e.g. &quot;Santa Monica&quot;
if (!place) {
place = location_info[&quot;SubAdministrativeAreaName&quot;]; // e.g. &quot;Los Angeles&quot;
}
if (!place) {
place = location_info[&quot;AdministrativeAreaName&quot;]; // e.g. &quot;California&quot;
}
if (!place) {
place = &quot;Middle-of-Nowhere&quot;;
}
if (location_info[&quot;CountryName&quot;]) {
place += &quot;, &quot; + location_info[&quot;CountryName&quot;]; // e.g. &quot;USA&quot;
} else {
place += &quot;, Planet Earth&quot;;
}
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>return place;
</code></pre></div><p>Sure, it's a little messy, but it got the job done.</p> <p>But a few days later, we needed to improve the functionality: for locations in the United States,</p> <p>we wanted to display the <em>state</em> instead of the country (if possible). So instead of “Santa Monica,</p> <p>USA” it would return “Santa Monica, California.”</p> <p>Adding this feature to the previous code would have made it much uglier.</p> <p><strong>Applying “One Task at a Time”</strong></p> <p>Rather than bend this code to our will, we stopped and realized that it was already doing</p> <p>multiple tasks at the same time:</p> <div class="language- extra-class"><pre class="language-text"><code>ONE TASK AT A TIME 125
</code></pre></div><ol><li>Extracting values from the dictionary location_info</li> <li>Going through a preference order for “City,” defaulting to “Middle-of-Nowhere” if it
couldn’t find anything</li> <li>Getting the “Country,” and using “Planet Earth” if there wasn’t one</li></ol> <div class="language- extra-class"><pre class="language-text"><code>4.Updating place
</code></pre></div><p>So instead, we rewrote the original code to solve each of these tasks independently.</p> <p>The first task (extracting values from location_info) was easy to solve on its own:</p> <div class="language- extra-class"><pre class="language-text"><code>var town = location_info[&quot;LocalityName&quot;]; // e.g. &quot;Santa Monica&quot;
var city = location_info[&quot;SubAdministrativeAreaName&quot;]; // e.g. &quot;Los Angeles&quot;
var state = location_info[&quot;AdministrativeAreaName&quot;]; // e.g. &quot;CA&quot;
var country = location_info[&quot;CountryName&quot;]; // e.g. &quot;USA&quot;
</code></pre></div><p>At this point, we were done using location_info and didn’t have to remember those long and</p> <p>unintuitive keys. Instead, we had four simple variables to work with.</p> <p>Next, we had to figure out what the “second half” of the return value would be:</p> <div class="language- extra-class"><pre class="language-text"><code>// Start with the default, and keep overwriting with the most specific value.
var second_half = &quot;Planet Earth&quot;;
if (country) {
second_half = country;
}
if (state &amp;&amp; country === &quot;USA&quot;) {
second_half = state;
}
</code></pre></div><p>Similarly, we could figure out the “first half”:</p> <div class="language- extra-class"><pre class="language-text"><code>var first_half = &quot;Middle-of-Nowhere&quot;;
if (state &amp;&amp; country !== &quot;USA&quot;) {
first_half = state;
}
if (city) {
first_half = city;
}
if (town) {
first_half = town;
}
</code></pre></div><p>Finally, we pieced the information together:</p> <div class="language- extra-class"><pre class="language-text"><code>return first_half + &quot;, &quot; + second_half ;
</code></pre></div><p>The “defragmentation” illustration at the beginning of this chapter was actually a</p> <p>representation of the original solution and this new version. Here’s that same illustration,</p> <p>with more details filled in:</p> <p><strong>126</strong> CHAPTER ELEVEN</p> <p>As you can see, the four tasks in the second solution have been defragmented into distinct</p> <p>regions.</p> <p><strong>Another Approach</strong></p> <p>When refactoring code, there are often multiple ways to do it, and this case is no exception.</p> <p>Once you’ve separated some of the tasks, the code gets easier to think about, and you might</p> <p>come up with even better ways to refactor it.</p> <p>For instance, that earlier series of if statements requires some careful reading to know if every</p> <p>case works correctly. There are actually two subtasks going on simultaneously in that code:</p> <div class="language- extra-class"><pre class="language-text"><code>1.Go through a list of variables, and pick the most preferred one that’s available.
2.Use a different list, depending on whether the country is “USA”.
</code></pre></div><p>Looking back, you can see that the earlier code has the “if USA” logic interwoven with the rest</p> <p>of the logic. Instead, we can handle the USA and non-USA cases separately:</p> <div class="language- extra-class"><pre class="language-text"><code>var first_half, second_half;
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>if (country === &quot;USA&quot;) {
first_half = town || city || &quot;Middle-of-Nowhere&quot;;
second_half = state || &quot;USA&quot;;
} else {
first_half = town || city || state || &quot;Middle-of-Nowhere&quot;;
second_half = country || &quot;Planet Earth&quot;;
}
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>return first_half + &quot;, &quot; + second_half;
</code></pre></div><p>In case you aren’t familiar with JavaScript, a || b || c is idiomatic and evaluates to the first</p> <p>“truthy” value (in this case, a defined, nonempty string). This code has the benefit that it’s very</p> <div class="language- extra-class"><pre class="language-text"><code>ONE TASK AT A TIME 127
</code></pre></div><p>easy to inspect the preference list and update it. Most of the if statements have been swept</p> <p>away, and the business logic is represented by fewer lines of code.</p> <h3 id="a-larger-example"><a href="#a-larger-example" class="header-anchor">#</a> A Larger Example</h3> <p>In a web-crawling system we built, a function named UpdateCounts() was called to increment</p> <p>various statistics after each web page was downloaded:</p> <div class="language- extra-class"><pre class="language-text"><code>void UpdateCounts(HttpDownload hd) {
counts[&quot;Exit State&quot; ][ hd.exit_state() ]++; // e.g. &quot;SUCCESS&quot; or &quot;FAILURE&quot;
counts[&quot;Http Response&quot;][ hd.http_response() ]++; // e.g. &quot;404 NOT FOUND&quot;
counts[&quot;Content-Type&quot; ][ hd.content_type() ]++; // e.g. &quot;text/html&quot;
}
</code></pre></div><p>Well, that’s how we <em>wish</em> the code looked!</p> <p>In actuality, the HttpDownload object had none of the methods shown here. Instead,</p> <p>HttpDownload was a very large and complex class, with many nested classes, and we had to fish</p> <p>out those values ourselves. To make matters worse, sometimes those values were missing</p> <p>altogether—in which case we just used &quot;unknown&quot; as the default value.</p> <p>Because of all this, the real code was quite a mess:</p> <div class="language- extra-class"><pre class="language-text"><code>// WARNING: DO NOT STARE DIRECTLY AT THIS CODE FOR EXTENDED PERIODS OF TIME.
void UpdateCounts(HttpDownload hd) {
// Figure out the Exit State, if available.
if (!hd.has_event_log() || !hd.event_log().has_exit_state()) {
counts[&quot;Exit State&quot;][&quot;unknown&quot;]++;
} else {
string state_str = ExitStateTypeName(hd.event_log().exit_state());
counts[&quot;Exit State&quot;][state_str]++;
}
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>// If there are no HTTP headers at all, use &quot;unknown&quot; for the remaining elements.
if (!hd.has_http_headers()) {
counts[&quot;Http Response&quot;][&quot;unknown&quot;]++;
counts[&quot;Content-Type&quot;][&quot;unknown&quot;]++;
return;
}
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>HttpHeaders headers = hd.http_headers();
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>// Log the HTTP response, if known, otherwise log &quot;unknown&quot;
if (!headers.has_response_code()) {
counts[&quot;Http Response&quot;][&quot;unknown&quot;]++;
} else {
string code = StringPrintf(&quot;%d&quot;, headers.response_code());
counts[&quot;Http Response&quot;][code]++;
}
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>// Log the Content-Type if known, otherwise log &quot;unknown&quot;
if (!headers.has_content_type()) {
counts[&quot;Content-Type&quot;][&quot;unknown&quot;]++;
</code></pre></div><p><strong>128</strong> CHAPTER ELEVEN</p> <div class="language- extra-class"><pre class="language-text"><code>} else {
string content_type = ContentTypeMime(headers.content_type());
counts[&quot;Content-Type&quot;][content_type]++;
}
}
</code></pre></div><p>As you can see, there’s a lot of code, and a lot of logic, and even a few repeated lines of code.</p> <p>This code is not fun to read.</p> <p>In particular, this code switches back and forth between different tasks. Here are the different</p> <p>tasks interleaved throughout the code:</p> <ol><li>Using &quot;unknown&quot; as the default value for each key</li> <li>Detecting whether members of HttpDownload are missing</li> <li>Extracting the value and converting it to a string</li> <li>Updating counts[]</li></ol> <p>We can improve the code by separating some of these tasks into distinct regions in the code:</p> <div class="language- extra-class"><pre class="language-text"><code>void UpdateCounts(HttpDownload hd) {
// Task: define default values for each of the values we want to extract
string exit_state = &quot;unknown&quot;;
string http_response = &quot;unknown&quot;;
string content_type = &quot;unknown&quot;;
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>// Task: try to extract each value from HttpDownload, one by one
if (hd.has_event_log() &amp;&amp; hd.event_log().has_exit_state()) {
exit_state = ExitStateTypeName(hd.event_log().exit_state());
}
if (hd.has_http_headers() &amp;&amp; hd.http_headers().has_response_code()) {
http_response = StringPrintf(&quot;%d&quot;, hd.http_headers().response_code());
}
if (hd.has_http_headers() &amp;&amp; hd.http_headers().has_content_type()) {
content_type = ContentTypeMime(hd.http_headers().content_type());
}
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>// Task: update counts[]
counts[&quot;Exit State&quot;][exit_state]++;
counts[&quot;Http Response&quot;][http_response]++;
counts[&quot;Content-Type&quot;][content_type]++;
}
</code></pre></div><p>As you can see, the code has three separate regions with the following aims:</p> <ol><li>Define defaults for the three keys we are interested in.</li> <li>Extract the values, if available, for each of these keys, and convert them to strings.</li> <li>Update counts[] for each key/value.</li></ol> <p>What’s good about these regions is that they’re <em>isolated</em> from one another—while you’re reading</p> <p>one region, you don’t need to think about the other regions.</p> <div class="language- extra-class"><pre class="language-text"><code>ONE TASK AT A TIME 129
</code></pre></div><p>Note that although we listed four tasks, we were able to separate only three of them. That’s</p> <p>perfectly fine: the tasks you list initially are just a starting point. Even separating <em>some</em> of them</p> <p>can help things a lot, as it did here.</p> <p><strong>Further Improvements</strong></p> <p>This new version of the code is a marked improvement from the original monstrosity. And</p> <p>notice that we didn’t even have to create other functions to perform this cleanup. As we</p> <p>mentioned before, the idea of “one task at a time” can help you clean up code regardless of</p> <p>function boundaries.</p> <p>However, we could also have improved this code another way, by introducing three helper</p> <p>functions:</p> <div class="language- extra-class"><pre class="language-text"><code>void UpdateCounts(HttpDownload hd) {
counts[&quot;Exit State&quot;][ ExitState(hd) ]++;
counts[&quot;Http Response&quot;][ HttpResponse(hd) ]++;
counts[&quot;Content-Type&quot;][ ContentType(hd) ]++;
}
</code></pre></div><p>These functions would extract the corresponding value, or return “unknown”. For example:</p> <div class="language- extra-class"><pre class="language-text"><code>string ExitState (HttpDownload hd) {
if (hd.has_event_log() &amp;&amp; hd.event_log().has_exit_state()) {
return ExitStateTypeName(hd.event_log().exit_state());
} else {
return &quot;unknown&quot;;
}
}
</code></pre></div><p>Notice that this alternative solution doesn’t even define any variables! As we mentioned in</p> <p>Chapter 9, <em>Variables and Readability</em> , variables that hold intermediate results can often be</p> <p>eliminated entirely.</p> <p>In this solution, we’ve simply “sliced” the problem in a different direction. Both solutions are</p> <p>highly readable, as they require the reader to think about only one task at a time.</p> <h3 id="summary"><a href="#summary" class="header-anchor">#</a> Summary</h3> <p>This chapter illustrates a simple technique for organizing your code: <strong>do only one task at a</strong></p> <p><strong>time</strong>.</p> <p>If you have code that’s difficult to read, try to list all of the tasks it’s doing. Some of these tasks</p> <p>might easily become separate functions (or classes). Others might just become logical</p> <p>“paragraphs” within a single function. The exact details of how you separate these tasks isn’t</p> <p>as important as the fact that they’re separated. The hard part is accurately describing all the</p> <p>little things your program is doing.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/kungfu/artofcode/c10.html" class="prev">
        C H A P T E R T E N
      </a></span> <span class="next"><a href="/docs/kungfu/artofcode/c12.html">
        C H A P T E R T W E L V E
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----><!----></div></div>
    <script src="/docs/assets/js/app.feff3dbb.js" defer></script><script src="/docs/assets/js/2.aca46d71.js" defer></script><script src="/docs/assets/js/218.66e0082a.js" defer></script><script src="/docs/assets/js/27.5ed2ce18.js" defer></script>
  </body>
</html>
