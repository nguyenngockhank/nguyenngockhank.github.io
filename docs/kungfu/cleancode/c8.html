<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>8. Boundaries | Nguyễn Khánk&#39;s Wiki</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="apple-touch-icon" sizes="180x180" href="../public/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../public/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../public/favicons/favicon-16x16.png">
    <link rel="manifest" href="../public/favicons/manifest.json">
    <link rel="mask-icon" href="../public/favicons/safari-pinned-tab.svg" color="#3a0839">
    <link rel="shortcut icon" href="../public/favicons/favicon.ico">
    <meta name="description" content="Wikipedia của tui">
    <meta name="msapplication-TileColor" content="#3a0839">
    <meta name="msapplication-config" content="../public/favicons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    
    <link rel="preload" href="/docs/assets/css/0.styles.07ea931f.css" as="style"><link rel="preload" href="/docs/assets/js/app.8c794ba6.js" as="script"><link rel="preload" href="/docs/assets/js/2.0f395514.js" as="script"><link rel="preload" href="/docs/assets/js/63.7e6d5904.js" as="script"><link rel="preload" href="/docs/assets/js/30.2d8940f4.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.aec15513.js"><link rel="prefetch" href="/docs/assets/js/100.211a4787.js"><link rel="prefetch" href="/docs/assets/js/101.f617671b.js"><link rel="prefetch" href="/docs/assets/js/102.fd49a24f.js"><link rel="prefetch" href="/docs/assets/js/103.bb90ced6.js"><link rel="prefetch" href="/docs/assets/js/104.60172d40.js"><link rel="prefetch" href="/docs/assets/js/105.174b62e7.js"><link rel="prefetch" href="/docs/assets/js/106.80310e8d.js"><link rel="prefetch" href="/docs/assets/js/107.898aa334.js"><link rel="prefetch" href="/docs/assets/js/108.54d231d0.js"><link rel="prefetch" href="/docs/assets/js/109.de6f6cde.js"><link rel="prefetch" href="/docs/assets/js/11.abe3a920.js"><link rel="prefetch" href="/docs/assets/js/110.325b1a0f.js"><link rel="prefetch" href="/docs/assets/js/111.d053948b.js"><link rel="prefetch" href="/docs/assets/js/112.513f8c76.js"><link rel="prefetch" href="/docs/assets/js/113.1f66dbc7.js"><link rel="prefetch" href="/docs/assets/js/114.c50b7402.js"><link rel="prefetch" href="/docs/assets/js/115.bdc403fc.js"><link rel="prefetch" href="/docs/assets/js/116.2e0b43a3.js"><link rel="prefetch" href="/docs/assets/js/117.d1d1886b.js"><link rel="prefetch" href="/docs/assets/js/118.1e680f0a.js"><link rel="prefetch" href="/docs/assets/js/119.a596dbed.js"><link rel="prefetch" href="/docs/assets/js/12.35b69438.js"><link rel="prefetch" href="/docs/assets/js/120.d045028c.js"><link rel="prefetch" href="/docs/assets/js/121.ae87b34b.js"><link rel="prefetch" href="/docs/assets/js/122.7c2cfeec.js"><link rel="prefetch" href="/docs/assets/js/123.fe8078e1.js"><link rel="prefetch" href="/docs/assets/js/124.bddb1559.js"><link rel="prefetch" href="/docs/assets/js/125.22d78513.js"><link rel="prefetch" href="/docs/assets/js/126.fb76bd96.js"><link rel="prefetch" href="/docs/assets/js/127.9357f29b.js"><link rel="prefetch" href="/docs/assets/js/128.e7c141e5.js"><link rel="prefetch" href="/docs/assets/js/129.df2422fd.js"><link rel="prefetch" href="/docs/assets/js/13.dec752ba.js"><link rel="prefetch" href="/docs/assets/js/130.9365bc12.js"><link rel="prefetch" href="/docs/assets/js/131.7e8038d9.js"><link rel="prefetch" href="/docs/assets/js/132.d03f0265.js"><link rel="prefetch" href="/docs/assets/js/133.eef58bf7.js"><link rel="prefetch" href="/docs/assets/js/134.dd427947.js"><link rel="prefetch" href="/docs/assets/js/135.04a5be64.js"><link rel="prefetch" href="/docs/assets/js/136.a25afb18.js"><link rel="prefetch" href="/docs/assets/js/137.48e18bc6.js"><link rel="prefetch" href="/docs/assets/js/138.2d857f94.js"><link rel="prefetch" href="/docs/assets/js/139.1b047fd0.js"><link rel="prefetch" href="/docs/assets/js/14.02b10443.js"><link rel="prefetch" href="/docs/assets/js/140.e1c5df67.js"><link rel="prefetch" href="/docs/assets/js/141.2c318a37.js"><link rel="prefetch" href="/docs/assets/js/142.9fe17700.js"><link rel="prefetch" href="/docs/assets/js/143.c1500db7.js"><link rel="prefetch" href="/docs/assets/js/144.b6e84745.js"><link rel="prefetch" href="/docs/assets/js/145.31471978.js"><link rel="prefetch" href="/docs/assets/js/146.7ae80ecd.js"><link rel="prefetch" href="/docs/assets/js/147.cc757284.js"><link rel="prefetch" href="/docs/assets/js/148.b8b7ce82.js"><link rel="prefetch" href="/docs/assets/js/149.d1c97bb6.js"><link rel="prefetch" href="/docs/assets/js/15.4e26d321.js"><link rel="prefetch" href="/docs/assets/js/150.a39bcb6a.js"><link rel="prefetch" href="/docs/assets/js/151.ecb90b1a.js"><link rel="prefetch" href="/docs/assets/js/152.9b514414.js"><link rel="prefetch" href="/docs/assets/js/153.58f5f37b.js"><link rel="prefetch" href="/docs/assets/js/154.06084434.js"><link rel="prefetch" href="/docs/assets/js/155.da0cc7fa.js"><link rel="prefetch" href="/docs/assets/js/156.931f0673.js"><link rel="prefetch" href="/docs/assets/js/157.ecedfadb.js"><link rel="prefetch" href="/docs/assets/js/158.ca2e8dc2.js"><link rel="prefetch" href="/docs/assets/js/159.81df6e62.js"><link rel="prefetch" href="/docs/assets/js/16.6eefcf10.js"><link rel="prefetch" href="/docs/assets/js/160.22146e1c.js"><link rel="prefetch" href="/docs/assets/js/161.2faa9bba.js"><link rel="prefetch" href="/docs/assets/js/162.ce8ee724.js"><link rel="prefetch" href="/docs/assets/js/163.34f79eae.js"><link rel="prefetch" href="/docs/assets/js/164.5fd37329.js"><link rel="prefetch" href="/docs/assets/js/165.14be66b2.js"><link rel="prefetch" href="/docs/assets/js/166.e60688ef.js"><link rel="prefetch" href="/docs/assets/js/167.66a555c6.js"><link rel="prefetch" href="/docs/assets/js/168.a8314f8e.js"><link rel="prefetch" href="/docs/assets/js/169.f9a53622.js"><link rel="prefetch" href="/docs/assets/js/17.b70cf31f.js"><link rel="prefetch" href="/docs/assets/js/170.13d25ae3.js"><link rel="prefetch" href="/docs/assets/js/171.1d2eb1f5.js"><link rel="prefetch" href="/docs/assets/js/172.977adf66.js"><link rel="prefetch" href="/docs/assets/js/173.092d091c.js"><link rel="prefetch" href="/docs/assets/js/174.2752f604.js"><link rel="prefetch" href="/docs/assets/js/175.c639638a.js"><link rel="prefetch" href="/docs/assets/js/176.715658ef.js"><link rel="prefetch" href="/docs/assets/js/177.4fb67f73.js"><link rel="prefetch" href="/docs/assets/js/178.ac98bc5b.js"><link rel="prefetch" href="/docs/assets/js/179.4b7d8612.js"><link rel="prefetch" href="/docs/assets/js/18.02259d22.js"><link rel="prefetch" href="/docs/assets/js/180.bd5acc8a.js"><link rel="prefetch" href="/docs/assets/js/181.96b9c621.js"><link rel="prefetch" href="/docs/assets/js/182.7f07385c.js"><link rel="prefetch" href="/docs/assets/js/183.1ff0278d.js"><link rel="prefetch" href="/docs/assets/js/184.6bfdb8b4.js"><link rel="prefetch" href="/docs/assets/js/185.fc49ee8e.js"><link rel="prefetch" href="/docs/assets/js/186.8c8309ff.js"><link rel="prefetch" href="/docs/assets/js/187.8ddd9bd9.js"><link rel="prefetch" href="/docs/assets/js/188.a849257a.js"><link rel="prefetch" href="/docs/assets/js/189.588b6fc8.js"><link rel="prefetch" href="/docs/assets/js/19.ad3adcc1.js"><link rel="prefetch" href="/docs/assets/js/190.a5552a87.js"><link rel="prefetch" href="/docs/assets/js/191.d46fb169.js"><link rel="prefetch" href="/docs/assets/js/192.4a1d5cbb.js"><link rel="prefetch" href="/docs/assets/js/193.c6efc9fb.js"><link rel="prefetch" href="/docs/assets/js/194.b706c551.js"><link rel="prefetch" href="/docs/assets/js/195.9d2a41be.js"><link rel="prefetch" href="/docs/assets/js/196.44826610.js"><link rel="prefetch" href="/docs/assets/js/197.d7ef7b41.js"><link rel="prefetch" href="/docs/assets/js/198.b3a10293.js"><link rel="prefetch" href="/docs/assets/js/199.ce10c24d.js"><link rel="prefetch" href="/docs/assets/js/20.4e07d53e.js"><link rel="prefetch" href="/docs/assets/js/200.e5603a19.js"><link rel="prefetch" href="/docs/assets/js/201.dc307f43.js"><link rel="prefetch" href="/docs/assets/js/202.08ed5cce.js"><link rel="prefetch" href="/docs/assets/js/203.7b2f33a5.js"><link rel="prefetch" href="/docs/assets/js/204.30913a25.js"><link rel="prefetch" href="/docs/assets/js/205.8f83ec95.js"><link rel="prefetch" href="/docs/assets/js/206.d8f0c675.js"><link rel="prefetch" href="/docs/assets/js/207.67770ff5.js"><link rel="prefetch" href="/docs/assets/js/208.c64ef1fa.js"><link rel="prefetch" href="/docs/assets/js/209.b0f97a13.js"><link rel="prefetch" href="/docs/assets/js/21.04c7a1ce.js"><link rel="prefetch" href="/docs/assets/js/210.98459f3a.js"><link rel="prefetch" href="/docs/assets/js/211.e64850bd.js"><link rel="prefetch" href="/docs/assets/js/212.8038387d.js"><link rel="prefetch" href="/docs/assets/js/213.0fb60db5.js"><link rel="prefetch" href="/docs/assets/js/214.15e588e9.js"><link rel="prefetch" href="/docs/assets/js/215.cb234c1f.js"><link rel="prefetch" href="/docs/assets/js/216.7640fd12.js"><link rel="prefetch" href="/docs/assets/js/217.13478d61.js"><link rel="prefetch" href="/docs/assets/js/218.18a06ca8.js"><link rel="prefetch" href="/docs/assets/js/219.8769bb6b.js"><link rel="prefetch" href="/docs/assets/js/22.356ac1f3.js"><link rel="prefetch" href="/docs/assets/js/220.33637099.js"><link rel="prefetch" href="/docs/assets/js/221.702abc3a.js"><link rel="prefetch" href="/docs/assets/js/222.45b9f54b.js"><link rel="prefetch" href="/docs/assets/js/223.e7ae28e6.js"><link rel="prefetch" href="/docs/assets/js/224.71b28fbe.js"><link rel="prefetch" href="/docs/assets/js/225.c4218320.js"><link rel="prefetch" href="/docs/assets/js/226.ba1f9dcc.js"><link rel="prefetch" href="/docs/assets/js/227.2380a410.js"><link rel="prefetch" href="/docs/assets/js/228.14fb50c1.js"><link rel="prefetch" href="/docs/assets/js/229.b41a89df.js"><link rel="prefetch" href="/docs/assets/js/23.f4cd2176.js"><link rel="prefetch" href="/docs/assets/js/230.9e818ffe.js"><link rel="prefetch" href="/docs/assets/js/231.a590876e.js"><link rel="prefetch" href="/docs/assets/js/232.1106d20d.js"><link rel="prefetch" href="/docs/assets/js/233.f0822e62.js"><link rel="prefetch" href="/docs/assets/js/234.149d649c.js"><link rel="prefetch" href="/docs/assets/js/235.a0d3ff2c.js"><link rel="prefetch" href="/docs/assets/js/236.afada5b4.js"><link rel="prefetch" href="/docs/assets/js/237.1fec082d.js"><link rel="prefetch" href="/docs/assets/js/238.b6096161.js"><link rel="prefetch" href="/docs/assets/js/239.9615f5e2.js"><link rel="prefetch" href="/docs/assets/js/24.118e5ad6.js"><link rel="prefetch" href="/docs/assets/js/240.6d49ecfe.js"><link rel="prefetch" href="/docs/assets/js/241.25569c0e.js"><link rel="prefetch" href="/docs/assets/js/242.d558d734.js"><link rel="prefetch" href="/docs/assets/js/243.99789ae9.js"><link rel="prefetch" href="/docs/assets/js/244.6305f851.js"><link rel="prefetch" href="/docs/assets/js/245.9db25343.js"><link rel="prefetch" href="/docs/assets/js/246.8fa51d04.js"><link rel="prefetch" href="/docs/assets/js/247.73f427f8.js"><link rel="prefetch" href="/docs/assets/js/248.d2d9480b.js"><link rel="prefetch" href="/docs/assets/js/249.ce12a3d5.js"><link rel="prefetch" href="/docs/assets/js/25.29dc5fb9.js"><link rel="prefetch" href="/docs/assets/js/250.e2f16dce.js"><link rel="prefetch" href="/docs/assets/js/251.172b64d6.js"><link rel="prefetch" href="/docs/assets/js/252.f07e0162.js"><link rel="prefetch" href="/docs/assets/js/253.a694ac53.js"><link rel="prefetch" href="/docs/assets/js/254.0b139cda.js"><link rel="prefetch" href="/docs/assets/js/255.79067df0.js"><link rel="prefetch" href="/docs/assets/js/256.691ec792.js"><link rel="prefetch" href="/docs/assets/js/257.030e2b1e.js"><link rel="prefetch" href="/docs/assets/js/258.00c03aa6.js"><link rel="prefetch" href="/docs/assets/js/259.67c3145f.js"><link rel="prefetch" href="/docs/assets/js/26.27700730.js"><link rel="prefetch" href="/docs/assets/js/260.30c3d53a.js"><link rel="prefetch" href="/docs/assets/js/261.08386b47.js"><link rel="prefetch" href="/docs/assets/js/262.507f28ea.js"><link rel="prefetch" href="/docs/assets/js/263.f5154330.js"><link rel="prefetch" href="/docs/assets/js/264.572b6bca.js"><link rel="prefetch" href="/docs/assets/js/265.67ab7e13.js"><link rel="prefetch" href="/docs/assets/js/266.eece72af.js"><link rel="prefetch" href="/docs/assets/js/267.18ef691b.js"><link rel="prefetch" href="/docs/assets/js/268.da4ad512.js"><link rel="prefetch" href="/docs/assets/js/269.d1911415.js"><link rel="prefetch" href="/docs/assets/js/27.48dc6d53.js"><link rel="prefetch" href="/docs/assets/js/270.6f0c6c7c.js"><link rel="prefetch" href="/docs/assets/js/271.b0d6abd4.js"><link rel="prefetch" href="/docs/assets/js/272.0e53d18a.js"><link rel="prefetch" href="/docs/assets/js/273.f8118ddd.js"><link rel="prefetch" href="/docs/assets/js/274.20255038.js"><link rel="prefetch" href="/docs/assets/js/275.c2bc90f1.js"><link rel="prefetch" href="/docs/assets/js/276.fe55fb3b.js"><link rel="prefetch" href="/docs/assets/js/277.1828a718.js"><link rel="prefetch" href="/docs/assets/js/278.c76e5dd4.js"><link rel="prefetch" href="/docs/assets/js/279.209bbd3f.js"><link rel="prefetch" href="/docs/assets/js/28.b93e8434.js"><link rel="prefetch" href="/docs/assets/js/280.bc06f683.js"><link rel="prefetch" href="/docs/assets/js/281.ae8e7d09.js"><link rel="prefetch" href="/docs/assets/js/282.2c1a6f8f.js"><link rel="prefetch" href="/docs/assets/js/283.4ba6e6ea.js"><link rel="prefetch" href="/docs/assets/js/284.498de6f2.js"><link rel="prefetch" href="/docs/assets/js/285.4f8a6d63.js"><link rel="prefetch" href="/docs/assets/js/286.c6c9b585.js"><link rel="prefetch" href="/docs/assets/js/287.17aef707.js"><link rel="prefetch" href="/docs/assets/js/288.1621ee06.js"><link rel="prefetch" href="/docs/assets/js/289.afd5143f.js"><link rel="prefetch" href="/docs/assets/js/29.075c7819.js"><link rel="prefetch" href="/docs/assets/js/290.01a72af0.js"><link rel="prefetch" href="/docs/assets/js/291.b7b116bc.js"><link rel="prefetch" href="/docs/assets/js/292.eea0603d.js"><link rel="prefetch" href="/docs/assets/js/293.df093ed1.js"><link rel="prefetch" href="/docs/assets/js/294.ac384011.js"><link rel="prefetch" href="/docs/assets/js/295.07d72291.js"><link rel="prefetch" href="/docs/assets/js/296.572edbe4.js"><link rel="prefetch" href="/docs/assets/js/297.096011e4.js"><link rel="prefetch" href="/docs/assets/js/298.1d2147e2.js"><link rel="prefetch" href="/docs/assets/js/299.dc6891cd.js"><link rel="prefetch" href="/docs/assets/js/3.27cf3a28.js"><link rel="prefetch" href="/docs/assets/js/300.be9dee66.js"><link rel="prefetch" href="/docs/assets/js/301.8ba27b8a.js"><link rel="prefetch" href="/docs/assets/js/302.6e5568aa.js"><link rel="prefetch" href="/docs/assets/js/303.1a16526f.js"><link rel="prefetch" href="/docs/assets/js/304.715802c0.js"><link rel="prefetch" href="/docs/assets/js/305.668fc151.js"><link rel="prefetch" href="/docs/assets/js/306.569644f7.js"><link rel="prefetch" href="/docs/assets/js/307.85120683.js"><link rel="prefetch" href="/docs/assets/js/308.a41161ff.js"><link rel="prefetch" href="/docs/assets/js/309.e1db3ce9.js"><link rel="prefetch" href="/docs/assets/js/31.17a51b25.js"><link rel="prefetch" href="/docs/assets/js/310.92219e0c.js"><link rel="prefetch" href="/docs/assets/js/311.151f70fa.js"><link rel="prefetch" href="/docs/assets/js/312.1eb76349.js"><link rel="prefetch" href="/docs/assets/js/313.3b1a2c97.js"><link rel="prefetch" href="/docs/assets/js/314.a4375b28.js"><link rel="prefetch" href="/docs/assets/js/315.cabae850.js"><link rel="prefetch" href="/docs/assets/js/316.5ea854cb.js"><link rel="prefetch" href="/docs/assets/js/317.fb8ba002.js"><link rel="prefetch" href="/docs/assets/js/318.c63ff716.js"><link rel="prefetch" href="/docs/assets/js/319.174672a1.js"><link rel="prefetch" href="/docs/assets/js/32.1e9ee70a.js"><link rel="prefetch" href="/docs/assets/js/320.897c2a68.js"><link rel="prefetch" href="/docs/assets/js/321.fc3fc4b2.js"><link rel="prefetch" href="/docs/assets/js/322.fd2d7c84.js"><link rel="prefetch" href="/docs/assets/js/323.9b06d402.js"><link rel="prefetch" href="/docs/assets/js/324.263cf95d.js"><link rel="prefetch" href="/docs/assets/js/325.fd203db5.js"><link rel="prefetch" href="/docs/assets/js/326.b40a7f76.js"><link rel="prefetch" href="/docs/assets/js/327.17299a1e.js"><link rel="prefetch" href="/docs/assets/js/328.93d6c01b.js"><link rel="prefetch" href="/docs/assets/js/329.a29459fa.js"><link rel="prefetch" href="/docs/assets/js/33.4e397016.js"><link rel="prefetch" href="/docs/assets/js/330.6b4ddd3f.js"><link rel="prefetch" href="/docs/assets/js/331.7c4b2b9a.js"><link rel="prefetch" href="/docs/assets/js/332.a2b1ab47.js"><link rel="prefetch" href="/docs/assets/js/333.fa4dba07.js"><link rel="prefetch" href="/docs/assets/js/334.440d2bf3.js"><link rel="prefetch" href="/docs/assets/js/335.71fd522e.js"><link rel="prefetch" href="/docs/assets/js/336.e4332932.js"><link rel="prefetch" href="/docs/assets/js/337.3c0d98bb.js"><link rel="prefetch" href="/docs/assets/js/338.4d3ba8b1.js"><link rel="prefetch" href="/docs/assets/js/339.ad10c7a7.js"><link rel="prefetch" href="/docs/assets/js/34.230e8423.js"><link rel="prefetch" href="/docs/assets/js/340.f97f0e2d.js"><link rel="prefetch" href="/docs/assets/js/341.5ed9359e.js"><link rel="prefetch" href="/docs/assets/js/342.7ccaddef.js"><link rel="prefetch" href="/docs/assets/js/343.caaa366a.js"><link rel="prefetch" href="/docs/assets/js/344.a4667e51.js"><link rel="prefetch" href="/docs/assets/js/345.b433a36b.js"><link rel="prefetch" href="/docs/assets/js/346.ca4021f1.js"><link rel="prefetch" href="/docs/assets/js/347.6beabbea.js"><link rel="prefetch" href="/docs/assets/js/348.6e6f1131.js"><link rel="prefetch" href="/docs/assets/js/349.829856f5.js"><link rel="prefetch" href="/docs/assets/js/35.e4b4e781.js"><link rel="prefetch" href="/docs/assets/js/350.a36e2653.js"><link rel="prefetch" href="/docs/assets/js/351.01345c97.js"><link rel="prefetch" href="/docs/assets/js/352.057fd8c4.js"><link rel="prefetch" href="/docs/assets/js/353.eccf31b7.js"><link rel="prefetch" href="/docs/assets/js/354.2e0695f7.js"><link rel="prefetch" href="/docs/assets/js/355.79ce0d7a.js"><link rel="prefetch" href="/docs/assets/js/356.4cec6b50.js"><link rel="prefetch" href="/docs/assets/js/357.6491e6c0.js"><link rel="prefetch" href="/docs/assets/js/358.600956bc.js"><link rel="prefetch" href="/docs/assets/js/359.3d68132f.js"><link rel="prefetch" href="/docs/assets/js/36.404e6242.js"><link rel="prefetch" href="/docs/assets/js/360.fb3ee539.js"><link rel="prefetch" href="/docs/assets/js/361.97fca81e.js"><link rel="prefetch" href="/docs/assets/js/362.a1116aee.js"><link rel="prefetch" href="/docs/assets/js/363.39568426.js"><link rel="prefetch" href="/docs/assets/js/364.1b485316.js"><link rel="prefetch" href="/docs/assets/js/365.40ce218c.js"><link rel="prefetch" href="/docs/assets/js/366.bb17c892.js"><link rel="prefetch" href="/docs/assets/js/367.35e61f63.js"><link rel="prefetch" href="/docs/assets/js/368.b3e00ca7.js"><link rel="prefetch" href="/docs/assets/js/369.6e142b51.js"><link rel="prefetch" href="/docs/assets/js/37.ae3c0298.js"><link rel="prefetch" href="/docs/assets/js/370.11952f41.js"><link rel="prefetch" href="/docs/assets/js/371.5fb256fc.js"><link rel="prefetch" href="/docs/assets/js/372.1c9ca581.js"><link rel="prefetch" href="/docs/assets/js/373.9de35871.js"><link rel="prefetch" href="/docs/assets/js/374.a9bf346d.js"><link rel="prefetch" href="/docs/assets/js/375.94531f1f.js"><link rel="prefetch" href="/docs/assets/js/376.2653501a.js"><link rel="prefetch" href="/docs/assets/js/377.ff686990.js"><link rel="prefetch" href="/docs/assets/js/378.08a987b1.js"><link rel="prefetch" href="/docs/assets/js/379.1da969b1.js"><link rel="prefetch" href="/docs/assets/js/38.41ecfeaa.js"><link rel="prefetch" href="/docs/assets/js/380.27d8e2fb.js"><link rel="prefetch" href="/docs/assets/js/381.24ba1503.js"><link rel="prefetch" href="/docs/assets/js/382.ad5e822b.js"><link rel="prefetch" href="/docs/assets/js/383.9fd5aa42.js"><link rel="prefetch" href="/docs/assets/js/384.dc2bd720.js"><link rel="prefetch" href="/docs/assets/js/39.6690d71c.js"><link rel="prefetch" href="/docs/assets/js/4.e7ce03ac.js"><link rel="prefetch" href="/docs/assets/js/40.08c05bd1.js"><link rel="prefetch" href="/docs/assets/js/41.d115252b.js"><link rel="prefetch" href="/docs/assets/js/42.ea08601e.js"><link rel="prefetch" href="/docs/assets/js/43.f8961b1d.js"><link rel="prefetch" href="/docs/assets/js/44.40059162.js"><link rel="prefetch" href="/docs/assets/js/45.fa7e1ae9.js"><link rel="prefetch" href="/docs/assets/js/46.5b5b274a.js"><link rel="prefetch" href="/docs/assets/js/47.2f7eaad2.js"><link rel="prefetch" href="/docs/assets/js/48.255318f0.js"><link rel="prefetch" href="/docs/assets/js/49.2044043e.js"><link rel="prefetch" href="/docs/assets/js/5.80e5af34.js"><link rel="prefetch" href="/docs/assets/js/50.b7da1bc9.js"><link rel="prefetch" href="/docs/assets/js/51.63fb627f.js"><link rel="prefetch" href="/docs/assets/js/52.ad09f1ab.js"><link rel="prefetch" href="/docs/assets/js/53.d8108ac5.js"><link rel="prefetch" href="/docs/assets/js/54.e1b2cabb.js"><link rel="prefetch" href="/docs/assets/js/55.5e623f68.js"><link rel="prefetch" href="/docs/assets/js/56.88685e6d.js"><link rel="prefetch" href="/docs/assets/js/57.bf135b11.js"><link rel="prefetch" href="/docs/assets/js/58.0c0844fa.js"><link rel="prefetch" href="/docs/assets/js/59.0d1ff39b.js"><link rel="prefetch" href="/docs/assets/js/6.d3014027.js"><link rel="prefetch" href="/docs/assets/js/60.0c492cb7.js"><link rel="prefetch" href="/docs/assets/js/61.56ec1d29.js"><link rel="prefetch" href="/docs/assets/js/62.58e88655.js"><link rel="prefetch" href="/docs/assets/js/64.99d9ba47.js"><link rel="prefetch" href="/docs/assets/js/65.81f849a6.js"><link rel="prefetch" href="/docs/assets/js/66.9db8692e.js"><link rel="prefetch" href="/docs/assets/js/67.08db8aae.js"><link rel="prefetch" href="/docs/assets/js/68.0c343f96.js"><link rel="prefetch" href="/docs/assets/js/69.142800a1.js"><link rel="prefetch" href="/docs/assets/js/7.799d6223.js"><link rel="prefetch" href="/docs/assets/js/70.84e1f058.js"><link rel="prefetch" href="/docs/assets/js/71.ce59e8bc.js"><link rel="prefetch" href="/docs/assets/js/72.191ab81c.js"><link rel="prefetch" href="/docs/assets/js/73.de505c04.js"><link rel="prefetch" href="/docs/assets/js/74.17df7634.js"><link rel="prefetch" href="/docs/assets/js/75.b9877556.js"><link rel="prefetch" href="/docs/assets/js/76.5df70200.js"><link rel="prefetch" href="/docs/assets/js/77.0fe6858c.js"><link rel="prefetch" href="/docs/assets/js/78.612d2dc8.js"><link rel="prefetch" href="/docs/assets/js/79.65b18c9b.js"><link rel="prefetch" href="/docs/assets/js/8.27e787db.js"><link rel="prefetch" href="/docs/assets/js/80.4081a861.js"><link rel="prefetch" href="/docs/assets/js/81.7708622c.js"><link rel="prefetch" href="/docs/assets/js/82.195be369.js"><link rel="prefetch" href="/docs/assets/js/83.48e02f5d.js"><link rel="prefetch" href="/docs/assets/js/84.71120dd7.js"><link rel="prefetch" href="/docs/assets/js/85.90217014.js"><link rel="prefetch" href="/docs/assets/js/86.b5522a50.js"><link rel="prefetch" href="/docs/assets/js/87.2bc413f1.js"><link rel="prefetch" href="/docs/assets/js/88.86ebf87a.js"><link rel="prefetch" href="/docs/assets/js/89.e8883d3f.js"><link rel="prefetch" href="/docs/assets/js/9.a2f4c00e.js"><link rel="prefetch" href="/docs/assets/js/90.2fa9a9e7.js"><link rel="prefetch" href="/docs/assets/js/91.a29ecf1c.js"><link rel="prefetch" href="/docs/assets/js/92.f371b5dd.js"><link rel="prefetch" href="/docs/assets/js/93.4f8cfda4.js"><link rel="prefetch" href="/docs/assets/js/94.32d7c43c.js"><link rel="prefetch" href="/docs/assets/js/95.169d71ff.js"><link rel="prefetch" href="/docs/assets/js/96.39562cea.js"><link rel="prefetch" href="/docs/assets/js/97.df643733.js"><link rel="prefetch" href="/docs/assets/js/98.22ab773b.js"><link rel="prefetch" href="/docs/assets/js/99.aa8ba038.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.07ea931f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">Nguyễn Khánk's Wiki</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/architect/" class="nav-link">
  Architecture
</a></div><div class="nav-item"><a href="/docs/kungfu/letsgo.html" class="nav-link">
  Kungfu
</a></div><div class="nav-item"><a href="https://nguyenngockhank.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/architect/" class="nav-link">
  Architecture
</a></div><div class="nav-item"><a href="/docs/kungfu/letsgo.html" class="nav-link">
  Kungfu
</a></div><div class="nav-item"><a href="https://nguyenngockhank.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>The Art of Readable Code</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/kungfu/artofcode/c1.html" class="sidebar-link">1. Code Should Be Easy to Understand</a></li><li><a href="/docs/kungfu/artofcode/c2.html" class="sidebar-link">2. Packing Information into Names</a></li><li><a href="/docs/kungfu/artofcode/c3.html" class="sidebar-link">3. Names That Can’t Be Misconstrued</a></li><li><a href="/docs/kungfu/artofcode/c4.html" class="sidebar-link">4. Aesthetics</a></li><li><a href="/docs/kungfu/artofcode/c5.html" class="sidebar-link">5. Knowing What to Comment</a></li><li><a href="/docs/kungfu/artofcode/c6.html" class="sidebar-link">6. Making Comments Precise and Compact</a></li><li><a href="/docs/kungfu/artofcode/c7.html" class="sidebar-link">7. Making Control Flow Easy to Read</a></li><li><a href="/docs/kungfu/artofcode/c8.html" class="sidebar-link">8. Breaking Down Giant Expressions</a></li><li><a href="/docs/kungfu/artofcode/c9.html" class="sidebar-link">9. Variables and Readability</a></li><li><a href="/docs/kungfu/artofcode/c10.html" class="sidebar-link">10. Extracting Unrelated Subproblems</a></li><li><a href="/docs/kungfu/artofcode/c11.html" class="sidebar-link">11. One Task at a Time</a></li><li><a href="/docs/kungfu/artofcode/c12.html" class="sidebar-link">12. Turning Thoughts into Code</a></li><li><a href="/docs/kungfu/artofcode/c13.html" class="sidebar-link">13. Writing Less Code</a></li><li><a href="/docs/kungfu/artofcode/c14.html" class="sidebar-link">14. Testing and Readability</a></li><li><a href="/docs/kungfu/artofcode/c15.html" class="sidebar-link">15. Designing and Implementing a “Minute/Hour Counter”</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>A Philosophy of Software Design</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Building Microservices</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>97 Things Every Programmer Should Know</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>NoSql Distilled</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Go</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Others</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_8-boundaries"><a href="#_8-boundaries" class="header-anchor">#</a> 8. Boundaries</h1> <p>We seldom control all the software in our systems. Sometimes we buy third-party packages or use open source. Other times we depend on teams in our own company to produce components or subsystems for us. Somehow we must cleanly integrate this foreign code</p> <p>with our own. In this chapter we look at practices and techniques to keep the boundaries of our software clean.</p> <h2 id="using-third-party-code"><a href="#using-third-party-code" class="header-anchor">#</a> Using Third-Party Code</h2> <p>There is a natural tension between the provider of an interface and the user of an interface. Providers of third-party packages and frameworks strive for broad applicability so they can work in many environments and appeal to a wide audience. Users, on the other hand, want an interface that is focused on their particular needs. This tension can cause problems at the boundaries of our systems.</p> <p>Let’s look at <code>java.util.Map</code> as an example. As you can see by examining Figure 8-1,
Maps have a very broad interface with plenty of capabilities. Certainly this power and flexibility is useful, but it can also be a liability. For instance, our application might build up a <code>Map</code> and pass it around. Our intention might be that none of the recipients of our <code>Map</code> delete anything in the map. But right there at the top of the list is the <code>clear()</code> method. Any user of the <code>Map</code> has the power to clear it. Or maybe our design convention is that only particular types of objects can be stored in the <code>Map</code>, but Maps do not reliably constrain the types of objects placed within them. Any determined user can add items of any type to any <code>Map</code>.</p> <h4 id="figure-8-1"><a href="#figure-8-1" class="header-anchor">#</a> Figure 8-1</h4> <p><em>The methods of Map</em></p> <div class="language- extra-class"><pre class="language-text"><code>- clear() void – Map
- containsKey(Object key) boolean – Map
- containsValue(Object value) boolean – Map
- entrySet() Set – Map
- equals(Object o) boolean – Map
- get(Object key) Object – Map
- getClass() Class&lt;? extends Object&gt; – Object
- hashCode() int – Map
- isEmpty() boolean – Map
- keySet() Set – Map
- notify() void – Object
- notifyAll() void – Object
- put(Object key, Object value) Object – Map
- putAll(Map t) void – Map
- remove(Object key) Object – Map
- size() int – Map
- toString() String – Object
- values() Collection – Map
- wait() void – Object
- wait(long timeout) void – Object
- wait(long timeout, int nanos) void – Object
</code></pre></div><p>If our application needs a <code>Map</code> of <code>Sensor</code>s, you might find the sensors set up like this:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Map</span> sensors <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Then, when some other part of the code needs to access the sensor, you see this code:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Sensor</span> s <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Sensor</span><span class="token punctuation">)</span>sensors<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>sensorId <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>We don’t just see it once, but over and over again throughout the code. The client of this code carries the responsibility of getting an Objectfrom the Mapand casting it to the right type. This works, but it’s not clean code. Also, this code does not tell its story as well as it could. The readability of this code can be greatly improved by using generics, as shown below:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Sensor</span><span class="token punctuation">&gt;</span></span> sensors <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Sensor</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ...</span>
<span class="token class-name">Sensor</span> s <span class="token operator">=</span> sensors<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>sensorId <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>However, this doesn’t solve the problem that <code>Map&lt;Sensor&gt;</code> provides more capability than we need or want.</p> <p>Passing an instance of <code>Map&lt;Sensor&gt;</code> liberally around the system means that there will
be a lot of places to fix if the interface to <code>Map</code> ever changes. You might think such a change to be unlikely, but remember that it changed when generics support was added in Java 5.
Indeed, we’ve seen systems that are inhibited from using generics because of the sheer
magnitude of changes needed to make up for the liberal use of <code>Map</code>s.</p> <p>A cleaner way to use <code>Map</code> might look like the following. No user of <code>Sensors</code> would care
one bit if generics were used or not. That choice has become (and always should be) an
implementation detail.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Sensors</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Map</span> sensors <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token class-name">Sensor</span> <span class="token function">getById</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Sensor</span><span class="token punctuation">)</span> sensors<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//snip</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The interface at the boundary (<code>Map</code>) is hidden. It is able to evolve with very little impact on the rest of the application. The use of generics is no longer a big issue because the casting and type management is handled inside the <code>Sensors</code> class.</p> <p>This interface is also tailored and constrained to meet the needs of the application. It results in code that is easier to understand and harder to misuse. The <code>Sensors</code> class can
enforce design and business rules.</p> <p>We are not suggesting that every use of Mapbe encapsulated in this form. Rather, we are advising you not to pass <code>Map</code>s (or any other interface at a boundary) around your system. If you use a boundary interface like <code>Map</code>, keep it inside the class, or close family of classes, where it is used. Avoid returning it from, or accepting it as an argument to, public APIs.</p> <h2 id="exploring-and-learning-boundaries"><a href="#exploring-and-learning-boundaries" class="header-anchor">#</a> Exploring and Learning Boundaries</h2> <p>Third-party code helps us get more functionality delivered in less time. Where do we start when we want to utilize some third-party package? It’s not our job to test the third-party code, but it may be in our best interest to write tests for the third-party code we use.</p> <p>Suppose it is not clear how to use our third-party library. We might spend a day or two (or more) reading the documentation and deciding how we are going to use it. Then we might write our code to use the third-party code and see whether it does what we think. We would not be surprised to find ourselves bogged down in long debugging sessions trying to figure out whether the bugs we are experiencing are in our code or theirs.</p> <p>Learning the third-party code is hard. Integrating the third-party code is hard too.
Doing both at the same time is doubly hard. What if we took a different approach? Instead of experimenting and trying out the new stuff in our production code, we could write some tests to explore our understanding of the third-party code. Jim Newkirk calls such tests <em>learning tests.</em></p> <p>In learning tests we call the third-party API, as we expect to use it in our application.
We’re essentially doing controlled experiments that check our understanding of that API.
The tests focus on what we want out of the API.</p> <h2 id="learning-log4j"><a href="#learning-log4j" class="header-anchor">#</a> Learning log4j</h2> <p>Let’s say we want to use the apache <code>log4j</code> package rather than our own custom-built logger. We download it and open the introductory documentation page. Without too much reading we write our first test case, expecting it to write “hello” to the console.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testLogCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">Logger</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token string">&quot;MyLogger&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>When we run it, the logger produces an error that tells us we need something called an <code>Appender</code>. After a little more reading we find that there is a <code>ConsoleAppender</code>. So we create a <code>ConsoleAppender</code> and see whether we have unlocked the secrets of logging to the console.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testLogAddAppender</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">Logger</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token string">&quot;MyLogger&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ConsoleAppender</span> appender <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConsoleAppender</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    logger<span class="token punctuation">.</span><span class="token function">addAppender</span><span class="token punctuation">(</span>appender<span class="token punctuation">)</span><span class="token punctuation">;</span>
    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This time we find that the <code>Appender</code> has no output stream. Odd—it seems logical that it’d have one. After a little help from Google, we try the following:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testLogAddAppender</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">Logger</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token string">&quot;MyLogger&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    logger<span class="token punctuation">.</span><span class="token function">removeAllAppenders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    logger<span class="token punctuation">.</span><span class="token function">addAppender</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ConsoleAppender</span><span class="token punctuation">(</span>
        <span class="token keyword">new</span> <span class="token class-name">PatternLayout</span><span class="token punctuation">(</span><span class="token string">&quot;%p %t %m%n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token class-name">ConsoleAppender</span><span class="token punctuation">.</span>SYSTEM_OUT<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>That worked; a log message that includes “hello” came out on the console! It seems odd
that we have to tell the ConsoleAppender that it writes to the console.</p> <p>Interestingly enough, when we remove the <code>ConsoleAppender.SystemOut</code> argument, we see that “hello” is still printed. But when we take out the <code>PatternLayout</code>, it once again complains about the lack of an output stream. This is very strange behavior.</p> <p>Looking a little more carefully at the documentation, we see that the default <code>ConsoleAppender</code> constructor is “unconfigured,” which does not seem too obvious or useful.
This feels like a bug, or at least an inconsistency, in <code>log4j</code>.</p> <p>A bit more googling, reading, and testing, and we eventually wind up with Listing 8-1.
We’ve discovered a great deal about the way that <code>log4j</code> works, and we’ve encoded that
knowledge into a set of simple unit tests.</p> <h4 id="listing-8-1"><a href="#listing-8-1" class="header-anchor">#</a> Listing 8-1</h4> <p><strong>LogTest.java</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LogTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Logger</span> logger<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Before</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        logger <span class="token operator">=</span> <span class="token class-name">Logger</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token string">&quot;logger&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">removeAllAppenders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Logger</span><span class="token punctuation">.</span><span class="token function">getRootLogger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeAllAppenders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">basicLogger</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">BasicConfigurator</span><span class="token punctuation">.</span><span class="token function">configure</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;basicLogger&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addAppenderWithStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        logger<span class="token punctuation">.</span><span class="token function">addAppender</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ConsoleAppender</span><span class="token punctuation">(</span>
            <span class="token keyword">new</span> <span class="token class-name">PatternLayout</span><span class="token punctuation">(</span><span class="token string">&quot;%p %t %m%n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token class-name">ConsoleAppender</span><span class="token punctuation">.</span>SYSTEM_OUT<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;addAppenderWithStream&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addAppenderWithoutStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        logger<span class="token punctuation">.</span><span class="token function">addAppender</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ConsoleAppender</span><span class="token punctuation">(</span>
        <span class="token keyword">new</span> <span class="token class-name">PatternLayout</span><span class="token punctuation">(</span><span class="token string">&quot;%p %t %m%n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;addAppenderWithoutStream&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Now we know how to get a simple console logger initialized, and we can encapsulate that knowledge into our own logger class so that the rest of our application is isolated from the <code>log4j</code> boundary interface.</p> <h2 id="learning-tests-are-better-than-free"><a href="#learning-tests-are-better-than-free" class="header-anchor">#</a> Learning Tests Are Better Than Free</h2> <p>The learning tests end up costing nothing. We had to learn the API anyway, and writing those tests was an easy and isolated way to get that knowledge. The learning tests were precise experiments that helped increase our understanding.</p> <p>Not only are learning tests free, they have a positive return on investment. When there are new releases of the third-party package, we run the learning tests to see whether  there are behavioral differences.</p> <p>Learning tests verify that the third-party packages we are using work the way we expect them to. Once integrated, there are no guarantees that the third-party code will stay compatible with our needs. The original authors will have pressures to change their code to meet new needs of their own. They will fix bugs and add new capabilities. With each
release comes new risk. If the third-party package changes in some way incompatible with
our tests, we will find out right away.</p> <p>Whether you need the learning provided by the learning tests or not, a clean boundary
should be supported by a set of outbound tests that exercise the interface the same way the production code does. Without these <em>boundary tests</em> to ease the migration, we might be tempted to stay with the old version longer than we should.</p> <h2 id="using-code-that-does-not-yet-exist"><a href="#using-code-that-does-not-yet-exist" class="header-anchor">#</a> Using Code That Does Not Yet Exist</h2> <p>There is another kind of boundary, one that separates the known from the unknown. There
are often places in the code where our knowledge seems to drop off the edge. Sometimes
what is on the other side of the boundary is unknowable (at least right now). Sometimes
we choose to look no farther than the boundary.</p> <p>A number of years back I was part of a team developing software for a radio communications system. There was a subsystem, the “Transmitter,” that we knew little about, and the people responsible for the subsystem had not gotten to the point of defining their interface. We did not want to be blocked, so we started our work far away from the unknown part of the code.</p> <p>We had a pretty good idea of where our world ended and the new world began. As we
worked, we sometimes bumped up against this boundary. Though mists and clouds of
ignorance obscured our view beyond the boundary, our work made us aware of what we
<em>wanted</em> the boundary interface to be. We wanted to tell the transmitter something like this:</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Key the transmitter on the provided frequency and emit an analog representation of the data coming from this stream.</p></div> <p>We had no idea how that would be done because the API had not been designed yet.
So we decided to work out the details later.</p> <p>To keep from being blocked, we defined our own interface. We called it something
catchy, like <code>Transmitter</code>. We gave it a method called <code>transmit</code> that took a frequency and a data stream. This was the interface we <em>wished</em> we had.</p> <p>One good thing about writing the interface we wish we had is that it’s under our
control. This helps keep client code more readable and focused on what it is trying to
accomplish.</p> <p>In Figure 8-2, you can see that we insulated the <code>CommunicationsController</code> classes from the transmitter API (which was out of our control and undefined). By using our own application specific interface, we kept our <code>CommunicationsController</code> code clean and
expressive. Once the transmitter API was defined, we wrote the <code>TransmitterAdapter</code> to
bridge the gap. The <code>ADAPTER</code>^2 encapsulated the interaction with the API and provides a
single place to change when the API evolves.</p> <h4 id="figure-8-2"><a href="#figure-8-2" class="header-anchor">#</a> Figure 8-2</h4> <p><em>Predicting the transmitter</em></p> <p><img src="data:image/png;base64,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" alt="figure82"></p> <p>This design also gives us a very convenient seam^3 in the code for  testing. Using a suitable <code>FakeTransmitter</code>, we can test the  <code>CommunicationsController</code> classes. We can also create boundary tests once we have the <code>TransmitterAPI</code> that make sure we are using the API correctly.</p> <h2 id="clean-boundaries"><a href="#clean-boundaries" class="header-anchor">#</a> Clean Boundaries</h2> <p>Interesting things happen at boundaries. Change is one of those things. Good software designs accommodate change without huge investments and rework. When we use code that is out of our control, special care must be taken to protect our investment and make sure future change is not too costly.</p> <p>Code at the boundaries needs clear separation and tests that define expectations. We should avoid letting too much of our code know about the third-party particulars. It’s better to depend on something <em>you</em> control than on something you don’t control, lest it end up controlling you.</p> <p>We manage third-party boundaries by having very few places in the code that refer to
them. We may wrap them as we did with <code>Map</code>, or we may use an <code>ADAPTER</code> to convert from
our perfect interface to the provided interface. Either way our code speaks to us better,
promotes internally consistent usage across the boundary, and has fewer maintenance
points when the third-party code changes.</p> <h2 id="bibliography"><a href="#bibliography" class="header-anchor">#</a> Bibliography</h2> <p><strong>[BeckTDD]:</strong> <em>Test Driven Development,</em> Kent Beck, Addison-Wesley, 2003.</p> <p><strong>[GOF]:</strong> <em>Design Patterns: Elements of Reusable Object Oriented Software,</em> Gamma et al.,
Addison-Wesley, 1996.</p> <p><strong>[WELC]:</strong> <em>Working Effectively with Legacy Code,</em> Addison-Wesley, 2004.</p> <p><em>2. See the Adapter pattern in [GOF].</em> <em>3. See more about seams in [WELC].</em></p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----><!----><!----></div></div>
    <script src="/docs/assets/js/app.8c794ba6.js" defer></script><script src="/docs/assets/js/2.0f395514.js" defer></script><script src="/docs/assets/js/63.7e6d5904.js" defer></script><script src="/docs/assets/js/30.2d8940f4.js" defer></script>
  </body>
</html>
