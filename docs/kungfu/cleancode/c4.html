<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>4. Comments | Nguyễn Khánk&#39;s Wiki</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="apple-touch-icon" sizes="180x180" href="../public/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../public/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../public/favicons/favicon-16x16.png">
    <link rel="manifest" href="../public/favicons/manifest.json">
    <link rel="mask-icon" href="../public/favicons/safari-pinned-tab.svg" color="#3a0839">
    <link rel="shortcut icon" href="../public/favicons/favicon.ico">
    <meta name="description" content="Wikipedia của tui">
    <meta name="msapplication-TileColor" content="#3a0839">
    <meta name="msapplication-config" content="../public/favicons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    
    <link rel="preload" href="/docs/assets/css/0.styles.416feb4e.css" as="style"><link rel="preload" href="/docs/assets/js/app.72e120a4.js" as="script"><link rel="preload" href="/docs/assets/js/2.063f64f2.js" as="script"><link rel="preload" href="/docs/assets/js/436.fd176ab7.js" as="script"><link rel="preload" href="/docs/assets/js/91.cee80a96.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.b1a0f134.js"><link rel="prefetch" href="/docs/assets/js/100.280b6751.js"><link rel="prefetch" href="/docs/assets/js/101.0f6a8e9c.js"><link rel="prefetch" href="/docs/assets/js/102.fd45a969.js"><link rel="prefetch" href="/docs/assets/js/103.4c68a4a7.js"><link rel="prefetch" href="/docs/assets/js/104.fdb4b47d.js"><link rel="prefetch" href="/docs/assets/js/105.4838d32a.js"><link rel="prefetch" href="/docs/assets/js/106.07707e03.js"><link rel="prefetch" href="/docs/assets/js/107.b693efbc.js"><link rel="prefetch" href="/docs/assets/js/108.708e0a64.js"><link rel="prefetch" href="/docs/assets/js/109.3379dadf.js"><link rel="prefetch" href="/docs/assets/js/11.f0b19e6a.js"><link rel="prefetch" href="/docs/assets/js/110.9a120aa1.js"><link rel="prefetch" href="/docs/assets/js/111.979383ec.js"><link rel="prefetch" href="/docs/assets/js/112.d3eb1b7d.js"><link rel="prefetch" href="/docs/assets/js/113.7ca9b094.js"><link rel="prefetch" href="/docs/assets/js/114.89d85ae2.js"><link rel="prefetch" href="/docs/assets/js/115.bc128c23.js"><link rel="prefetch" href="/docs/assets/js/116.59aa125b.js"><link rel="prefetch" href="/docs/assets/js/117.1b87b09a.js"><link rel="prefetch" href="/docs/assets/js/118.705b37ec.js"><link rel="prefetch" href="/docs/assets/js/119.ae49c8ea.js"><link rel="prefetch" href="/docs/assets/js/12.5012f344.js"><link rel="prefetch" href="/docs/assets/js/120.a41a6ed7.js"><link rel="prefetch" href="/docs/assets/js/121.5217bda3.js"><link rel="prefetch" href="/docs/assets/js/122.9e0332c5.js"><link rel="prefetch" href="/docs/assets/js/123.3e6e471a.js"><link rel="prefetch" href="/docs/assets/js/124.7ece1cea.js"><link rel="prefetch" href="/docs/assets/js/125.6958c610.js"><link rel="prefetch" href="/docs/assets/js/126.75c6c8d8.js"><link rel="prefetch" href="/docs/assets/js/127.d9c321c1.js"><link rel="prefetch" href="/docs/assets/js/128.ae93a447.js"><link rel="prefetch" href="/docs/assets/js/129.79319de1.js"><link rel="prefetch" href="/docs/assets/js/13.cfe29fbf.js"><link rel="prefetch" href="/docs/assets/js/130.539551b5.js"><link rel="prefetch" href="/docs/assets/js/131.d8805fad.js"><link rel="prefetch" href="/docs/assets/js/132.e97ab052.js"><link rel="prefetch" href="/docs/assets/js/133.e4f8cd24.js"><link rel="prefetch" href="/docs/assets/js/134.a93ecb43.js"><link rel="prefetch" href="/docs/assets/js/135.4dcb4eb1.js"><link rel="prefetch" href="/docs/assets/js/136.70ba9b37.js"><link rel="prefetch" href="/docs/assets/js/137.f1b1cc31.js"><link rel="prefetch" href="/docs/assets/js/138.10bf9357.js"><link rel="prefetch" href="/docs/assets/js/139.a4659ede.js"><link rel="prefetch" href="/docs/assets/js/14.97ae6044.js"><link rel="prefetch" href="/docs/assets/js/140.4bcc835f.js"><link rel="prefetch" href="/docs/assets/js/141.d750398c.js"><link rel="prefetch" href="/docs/assets/js/142.247a96d3.js"><link rel="prefetch" href="/docs/assets/js/143.be0b8730.js"><link rel="prefetch" href="/docs/assets/js/144.b5507c76.js"><link rel="prefetch" href="/docs/assets/js/145.b511595e.js"><link rel="prefetch" href="/docs/assets/js/146.7311a8cb.js"><link rel="prefetch" href="/docs/assets/js/147.b0f8d33b.js"><link rel="prefetch" href="/docs/assets/js/148.e5cb1382.js"><link rel="prefetch" href="/docs/assets/js/149.df296bcf.js"><link rel="prefetch" href="/docs/assets/js/15.1e64aa20.js"><link rel="prefetch" href="/docs/assets/js/150.8696339a.js"><link rel="prefetch" href="/docs/assets/js/151.7f8e07db.js"><link rel="prefetch" href="/docs/assets/js/152.732b6b9c.js"><link rel="prefetch" href="/docs/assets/js/153.6f5643a1.js"><link rel="prefetch" href="/docs/assets/js/154.254915cf.js"><link rel="prefetch" href="/docs/assets/js/155.56e84273.js"><link rel="prefetch" href="/docs/assets/js/156.f1f4f23e.js"><link rel="prefetch" href="/docs/assets/js/157.80058301.js"><link rel="prefetch" href="/docs/assets/js/158.98aae5ce.js"><link rel="prefetch" href="/docs/assets/js/159.5a49c731.js"><link rel="prefetch" href="/docs/assets/js/16.43aba07c.js"><link rel="prefetch" href="/docs/assets/js/160.c46d6037.js"><link rel="prefetch" href="/docs/assets/js/161.044915fe.js"><link rel="prefetch" href="/docs/assets/js/162.4008a392.js"><link rel="prefetch" href="/docs/assets/js/163.79f52f26.js"><link rel="prefetch" href="/docs/assets/js/164.5ea6eccf.js"><link rel="prefetch" href="/docs/assets/js/165.04fc916e.js"><link rel="prefetch" href="/docs/assets/js/166.5e133106.js"><link rel="prefetch" href="/docs/assets/js/167.5c39d6c8.js"><link rel="prefetch" href="/docs/assets/js/168.168f38f0.js"><link rel="prefetch" href="/docs/assets/js/169.aa2aaab1.js"><link rel="prefetch" href="/docs/assets/js/17.a5a98d3a.js"><link rel="prefetch" href="/docs/assets/js/170.47df91d5.js"><link rel="prefetch" href="/docs/assets/js/171.0b3152f5.js"><link rel="prefetch" href="/docs/assets/js/172.571892bd.js"><link rel="prefetch" href="/docs/assets/js/173.fefd3ed4.js"><link rel="prefetch" href="/docs/assets/js/174.896fafce.js"><link rel="prefetch" href="/docs/assets/js/175.62b41c04.js"><link rel="prefetch" href="/docs/assets/js/176.74b475ab.js"><link rel="prefetch" href="/docs/assets/js/177.9999c420.js"><link rel="prefetch" href="/docs/assets/js/178.2b6e61e8.js"><link rel="prefetch" href="/docs/assets/js/179.6adcd574.js"><link rel="prefetch" href="/docs/assets/js/18.6c16eedc.js"><link rel="prefetch" href="/docs/assets/js/180.3257fa80.js"><link rel="prefetch" href="/docs/assets/js/181.9419dc39.js"><link rel="prefetch" href="/docs/assets/js/182.1c4efea5.js"><link rel="prefetch" href="/docs/assets/js/183.f3468d84.js"><link rel="prefetch" href="/docs/assets/js/184.e3dc5a42.js"><link rel="prefetch" href="/docs/assets/js/185.3cfa03d8.js"><link rel="prefetch" href="/docs/assets/js/186.17549903.js"><link rel="prefetch" href="/docs/assets/js/187.684f08bb.js"><link rel="prefetch" href="/docs/assets/js/188.60296f9b.js"><link rel="prefetch" href="/docs/assets/js/189.27085ed8.js"><link rel="prefetch" href="/docs/assets/js/19.7b99ed54.js"><link rel="prefetch" href="/docs/assets/js/190.577684f5.js"><link rel="prefetch" href="/docs/assets/js/191.0357a40d.js"><link rel="prefetch" href="/docs/assets/js/192.aaac3bdf.js"><link rel="prefetch" href="/docs/assets/js/193.c65152b9.js"><link rel="prefetch" href="/docs/assets/js/194.a4c5ed1b.js"><link rel="prefetch" href="/docs/assets/js/195.692a5e0c.js"><link rel="prefetch" href="/docs/assets/js/196.43477ae9.js"><link rel="prefetch" href="/docs/assets/js/197.0256cd08.js"><link rel="prefetch" href="/docs/assets/js/198.34e3f8e9.js"><link rel="prefetch" href="/docs/assets/js/199.47f4251e.js"><link rel="prefetch" href="/docs/assets/js/20.8a340028.js"><link rel="prefetch" href="/docs/assets/js/200.6bcc000d.js"><link rel="prefetch" href="/docs/assets/js/201.acce123a.js"><link rel="prefetch" href="/docs/assets/js/202.c4d70995.js"><link rel="prefetch" href="/docs/assets/js/203.f1cebc29.js"><link rel="prefetch" href="/docs/assets/js/204.2435c0d0.js"><link rel="prefetch" href="/docs/assets/js/205.75835ef2.js"><link rel="prefetch" href="/docs/assets/js/206.8c299727.js"><link rel="prefetch" href="/docs/assets/js/207.99a4552e.js"><link rel="prefetch" href="/docs/assets/js/208.400f751f.js"><link rel="prefetch" href="/docs/assets/js/209.7298827f.js"><link rel="prefetch" href="/docs/assets/js/21.5e190285.js"><link rel="prefetch" href="/docs/assets/js/210.0596ea73.js"><link rel="prefetch" href="/docs/assets/js/211.cbf586e4.js"><link rel="prefetch" href="/docs/assets/js/212.b5906f59.js"><link rel="prefetch" href="/docs/assets/js/213.b5f981b1.js"><link rel="prefetch" href="/docs/assets/js/214.633fcc59.js"><link rel="prefetch" href="/docs/assets/js/215.f436ff7d.js"><link rel="prefetch" href="/docs/assets/js/216.fb8c636a.js"><link rel="prefetch" href="/docs/assets/js/217.b76709cb.js"><link rel="prefetch" href="/docs/assets/js/218.0fb7c4aa.js"><link rel="prefetch" href="/docs/assets/js/219.183c6f8f.js"><link rel="prefetch" href="/docs/assets/js/22.f4e3a032.js"><link rel="prefetch" href="/docs/assets/js/220.b38892ef.js"><link rel="prefetch" href="/docs/assets/js/221.3191e55a.js"><link rel="prefetch" href="/docs/assets/js/222.771eec8c.js"><link rel="prefetch" href="/docs/assets/js/223.9bdd69a1.js"><link rel="prefetch" href="/docs/assets/js/224.22847491.js"><link rel="prefetch" href="/docs/assets/js/225.c8d2191d.js"><link rel="prefetch" href="/docs/assets/js/226.b067f9b9.js"><link rel="prefetch" href="/docs/assets/js/227.128c32eb.js"><link rel="prefetch" href="/docs/assets/js/228.cde15646.js"><link rel="prefetch" href="/docs/assets/js/229.527d3b9a.js"><link rel="prefetch" href="/docs/assets/js/23.607090bc.js"><link rel="prefetch" href="/docs/assets/js/230.8fc69047.js"><link rel="prefetch" href="/docs/assets/js/231.a865e6f3.js"><link rel="prefetch" href="/docs/assets/js/232.272a2d2e.js"><link rel="prefetch" href="/docs/assets/js/233.0c4b25ab.js"><link rel="prefetch" href="/docs/assets/js/234.a22c5083.js"><link rel="prefetch" href="/docs/assets/js/235.e2466ac7.js"><link rel="prefetch" href="/docs/assets/js/236.7943c825.js"><link rel="prefetch" href="/docs/assets/js/237.58b165e0.js"><link rel="prefetch" href="/docs/assets/js/238.4eb85d29.js"><link rel="prefetch" href="/docs/assets/js/239.32eabec9.js"><link rel="prefetch" href="/docs/assets/js/24.406ccf4d.js"><link rel="prefetch" href="/docs/assets/js/240.72483110.js"><link rel="prefetch" href="/docs/assets/js/241.1fb0b914.js"><link rel="prefetch" href="/docs/assets/js/242.ae52cc30.js"><link rel="prefetch" href="/docs/assets/js/243.e0a0f405.js"><link rel="prefetch" href="/docs/assets/js/244.a687a36f.js"><link rel="prefetch" href="/docs/assets/js/245.9e1c6699.js"><link rel="prefetch" href="/docs/assets/js/246.9f0f7dee.js"><link rel="prefetch" href="/docs/assets/js/247.8fd32ff4.js"><link rel="prefetch" href="/docs/assets/js/248.d342a9c1.js"><link rel="prefetch" href="/docs/assets/js/249.f63ca6ab.js"><link rel="prefetch" href="/docs/assets/js/25.9b365520.js"><link rel="prefetch" href="/docs/assets/js/250.5028461e.js"><link rel="prefetch" href="/docs/assets/js/251.700a9ad2.js"><link rel="prefetch" href="/docs/assets/js/252.65863493.js"><link rel="prefetch" href="/docs/assets/js/253.c7f1408a.js"><link rel="prefetch" href="/docs/assets/js/254.e80beaaa.js"><link rel="prefetch" href="/docs/assets/js/255.f45d3357.js"><link rel="prefetch" href="/docs/assets/js/256.d042d44a.js"><link rel="prefetch" href="/docs/assets/js/257.7c75a92f.js"><link rel="prefetch" href="/docs/assets/js/258.c146c4a3.js"><link rel="prefetch" href="/docs/assets/js/259.de0af5eb.js"><link rel="prefetch" href="/docs/assets/js/26.30abc32c.js"><link rel="prefetch" href="/docs/assets/js/260.839e11e8.js"><link rel="prefetch" href="/docs/assets/js/261.97bb0ed0.js"><link rel="prefetch" href="/docs/assets/js/262.070934e7.js"><link rel="prefetch" href="/docs/assets/js/263.adc423b4.js"><link rel="prefetch" href="/docs/assets/js/264.9b8a39d8.js"><link rel="prefetch" href="/docs/assets/js/265.df06214b.js"><link rel="prefetch" href="/docs/assets/js/266.eae70f27.js"><link rel="prefetch" href="/docs/assets/js/267.aa6494db.js"><link rel="prefetch" href="/docs/assets/js/268.8992dea6.js"><link rel="prefetch" href="/docs/assets/js/269.8f7df18f.js"><link rel="prefetch" href="/docs/assets/js/27.24fa1cc9.js"><link rel="prefetch" href="/docs/assets/js/270.7121293a.js"><link rel="prefetch" href="/docs/assets/js/271.d6adf116.js"><link rel="prefetch" href="/docs/assets/js/272.2b9157fb.js"><link rel="prefetch" href="/docs/assets/js/273.f40dbb86.js"><link rel="prefetch" href="/docs/assets/js/274.2b389e67.js"><link rel="prefetch" href="/docs/assets/js/275.227f5ac1.js"><link rel="prefetch" href="/docs/assets/js/276.21fdff2c.js"><link rel="prefetch" href="/docs/assets/js/277.29078436.js"><link rel="prefetch" href="/docs/assets/js/278.dc8182d4.js"><link rel="prefetch" href="/docs/assets/js/279.5f9b2ec0.js"><link rel="prefetch" href="/docs/assets/js/28.ca336578.js"><link rel="prefetch" href="/docs/assets/js/280.de8e5ebd.js"><link rel="prefetch" href="/docs/assets/js/281.16c7b05c.js"><link rel="prefetch" href="/docs/assets/js/282.be2a917f.js"><link rel="prefetch" href="/docs/assets/js/283.220947c2.js"><link rel="prefetch" href="/docs/assets/js/284.da9160df.js"><link rel="prefetch" href="/docs/assets/js/285.fa7630a9.js"><link rel="prefetch" href="/docs/assets/js/286.43812755.js"><link rel="prefetch" href="/docs/assets/js/287.7baefd3a.js"><link rel="prefetch" href="/docs/assets/js/288.fb454a1e.js"><link rel="prefetch" href="/docs/assets/js/289.d36a6be4.js"><link rel="prefetch" href="/docs/assets/js/29.b1a6618d.js"><link rel="prefetch" href="/docs/assets/js/290.d1aad767.js"><link rel="prefetch" href="/docs/assets/js/291.50f9a3bb.js"><link rel="prefetch" href="/docs/assets/js/292.e1e6afc2.js"><link rel="prefetch" href="/docs/assets/js/293.99027ef7.js"><link rel="prefetch" href="/docs/assets/js/294.2ef9fa48.js"><link rel="prefetch" href="/docs/assets/js/295.0fcb2629.js"><link rel="prefetch" href="/docs/assets/js/296.c52ba386.js"><link rel="prefetch" href="/docs/assets/js/297.0230dbd3.js"><link rel="prefetch" href="/docs/assets/js/298.716f388d.js"><link rel="prefetch" href="/docs/assets/js/299.61961772.js"><link rel="prefetch" href="/docs/assets/js/3.be60361a.js"><link rel="prefetch" href="/docs/assets/js/30.9781de99.js"><link rel="prefetch" href="/docs/assets/js/300.cde52e12.js"><link rel="prefetch" href="/docs/assets/js/301.076db9ab.js"><link rel="prefetch" href="/docs/assets/js/302.72c04a84.js"><link rel="prefetch" href="/docs/assets/js/303.214320de.js"><link rel="prefetch" href="/docs/assets/js/304.54f665b0.js"><link rel="prefetch" href="/docs/assets/js/305.a55bb868.js"><link rel="prefetch" href="/docs/assets/js/306.fdc90b88.js"><link rel="prefetch" href="/docs/assets/js/307.00058bbe.js"><link rel="prefetch" href="/docs/assets/js/308.94d8ea34.js"><link rel="prefetch" href="/docs/assets/js/309.13e2971e.js"><link rel="prefetch" href="/docs/assets/js/31.fa77e7a5.js"><link rel="prefetch" href="/docs/assets/js/310.c2aa274b.js"><link rel="prefetch" href="/docs/assets/js/311.e269e39b.js"><link rel="prefetch" href="/docs/assets/js/312.5332a8cc.js"><link rel="prefetch" href="/docs/assets/js/313.60d58d5b.js"><link rel="prefetch" href="/docs/assets/js/314.2ad98766.js"><link rel="prefetch" href="/docs/assets/js/315.9925c28b.js"><link rel="prefetch" href="/docs/assets/js/316.26d689cc.js"><link rel="prefetch" href="/docs/assets/js/317.baa47f7b.js"><link rel="prefetch" href="/docs/assets/js/318.644969f2.js"><link rel="prefetch" href="/docs/assets/js/319.a586db0e.js"><link rel="prefetch" href="/docs/assets/js/32.9359f992.js"><link rel="prefetch" href="/docs/assets/js/320.e6e9a67a.js"><link rel="prefetch" href="/docs/assets/js/321.10cb3143.js"><link rel="prefetch" href="/docs/assets/js/322.74095545.js"><link rel="prefetch" href="/docs/assets/js/323.cd41b7d8.js"><link rel="prefetch" href="/docs/assets/js/324.129d09b1.js"><link rel="prefetch" href="/docs/assets/js/325.ac12a297.js"><link rel="prefetch" href="/docs/assets/js/326.9c1e0be9.js"><link rel="prefetch" href="/docs/assets/js/327.25337a79.js"><link rel="prefetch" href="/docs/assets/js/328.79c1fee0.js"><link rel="prefetch" href="/docs/assets/js/329.12a3dc34.js"><link rel="prefetch" href="/docs/assets/js/33.606454a1.js"><link rel="prefetch" href="/docs/assets/js/330.efb6b149.js"><link rel="prefetch" href="/docs/assets/js/331.e5bec2ce.js"><link rel="prefetch" href="/docs/assets/js/332.203cc3cc.js"><link rel="prefetch" href="/docs/assets/js/333.7866c0d2.js"><link rel="prefetch" href="/docs/assets/js/334.0082e5c2.js"><link rel="prefetch" href="/docs/assets/js/335.b5f83fcc.js"><link rel="prefetch" href="/docs/assets/js/336.8ac6864b.js"><link rel="prefetch" href="/docs/assets/js/337.63cb9a74.js"><link rel="prefetch" href="/docs/assets/js/338.d994c327.js"><link rel="prefetch" href="/docs/assets/js/339.bb074452.js"><link rel="prefetch" href="/docs/assets/js/34.ebb0a999.js"><link rel="prefetch" href="/docs/assets/js/340.974af885.js"><link rel="prefetch" href="/docs/assets/js/341.5e43e84a.js"><link rel="prefetch" href="/docs/assets/js/342.fcac6682.js"><link rel="prefetch" href="/docs/assets/js/343.0e1f7ee1.js"><link rel="prefetch" href="/docs/assets/js/344.6b3cb9c4.js"><link rel="prefetch" href="/docs/assets/js/345.49b44c83.js"><link rel="prefetch" href="/docs/assets/js/346.995f3a4d.js"><link rel="prefetch" href="/docs/assets/js/347.96d7f280.js"><link rel="prefetch" href="/docs/assets/js/348.d709bd24.js"><link rel="prefetch" href="/docs/assets/js/349.c8f4b79f.js"><link rel="prefetch" href="/docs/assets/js/35.cf0c5cff.js"><link rel="prefetch" href="/docs/assets/js/350.c7b0fabe.js"><link rel="prefetch" href="/docs/assets/js/351.750b865a.js"><link rel="prefetch" href="/docs/assets/js/352.43378d4e.js"><link rel="prefetch" href="/docs/assets/js/353.f2925ad9.js"><link rel="prefetch" href="/docs/assets/js/354.3bd82fc0.js"><link rel="prefetch" href="/docs/assets/js/355.b6d2159b.js"><link rel="prefetch" href="/docs/assets/js/356.6982032f.js"><link rel="prefetch" href="/docs/assets/js/357.4c49d091.js"><link rel="prefetch" href="/docs/assets/js/358.58778375.js"><link rel="prefetch" href="/docs/assets/js/359.d7a3eed7.js"><link rel="prefetch" href="/docs/assets/js/36.ea4496fb.js"><link rel="prefetch" href="/docs/assets/js/360.2bb18f61.js"><link rel="prefetch" href="/docs/assets/js/361.0527c11f.js"><link rel="prefetch" href="/docs/assets/js/362.759f2caf.js"><link rel="prefetch" href="/docs/assets/js/363.5c7bd2e3.js"><link rel="prefetch" href="/docs/assets/js/364.6d60739f.js"><link rel="prefetch" href="/docs/assets/js/365.e1ed33cd.js"><link rel="prefetch" href="/docs/assets/js/366.e26ed3b5.js"><link rel="prefetch" href="/docs/assets/js/367.387c8b29.js"><link rel="prefetch" href="/docs/assets/js/368.2e90639c.js"><link rel="prefetch" href="/docs/assets/js/369.c8a7d6e9.js"><link rel="prefetch" href="/docs/assets/js/37.76126470.js"><link rel="prefetch" href="/docs/assets/js/370.3861cb69.js"><link rel="prefetch" href="/docs/assets/js/371.bd160e8c.js"><link rel="prefetch" href="/docs/assets/js/372.b0bfa093.js"><link rel="prefetch" href="/docs/assets/js/373.0c1d5af5.js"><link rel="prefetch" href="/docs/assets/js/374.f962cac0.js"><link rel="prefetch" href="/docs/assets/js/375.b8528c15.js"><link rel="prefetch" href="/docs/assets/js/376.968e8efe.js"><link rel="prefetch" href="/docs/assets/js/377.74cad1ce.js"><link rel="prefetch" href="/docs/assets/js/378.01fcaa4a.js"><link rel="prefetch" href="/docs/assets/js/379.3ceb63b2.js"><link rel="prefetch" href="/docs/assets/js/38.4f63d6d6.js"><link rel="prefetch" href="/docs/assets/js/380.baeec066.js"><link rel="prefetch" href="/docs/assets/js/381.3858acf9.js"><link rel="prefetch" href="/docs/assets/js/382.d567c6e5.js"><link rel="prefetch" href="/docs/assets/js/383.1b2d5203.js"><link rel="prefetch" href="/docs/assets/js/384.68b6d85a.js"><link rel="prefetch" href="/docs/assets/js/385.3039bbac.js"><link rel="prefetch" href="/docs/assets/js/386.39cc596b.js"><link rel="prefetch" href="/docs/assets/js/387.3eb0f07d.js"><link rel="prefetch" href="/docs/assets/js/388.def7dfa2.js"><link rel="prefetch" href="/docs/assets/js/389.a62affc9.js"><link rel="prefetch" href="/docs/assets/js/39.b2ea3bdb.js"><link rel="prefetch" href="/docs/assets/js/390.89bc6ba7.js"><link rel="prefetch" href="/docs/assets/js/391.534e2707.js"><link rel="prefetch" href="/docs/assets/js/392.46f48644.js"><link rel="prefetch" href="/docs/assets/js/393.290cee2e.js"><link rel="prefetch" href="/docs/assets/js/394.30049985.js"><link rel="prefetch" href="/docs/assets/js/395.db1c1d4d.js"><link rel="prefetch" href="/docs/assets/js/396.1ece0725.js"><link rel="prefetch" href="/docs/assets/js/397.f9eac505.js"><link rel="prefetch" href="/docs/assets/js/398.aec783b3.js"><link rel="prefetch" href="/docs/assets/js/399.41ce8c01.js"><link rel="prefetch" href="/docs/assets/js/4.d8227897.js"><link rel="prefetch" href="/docs/assets/js/40.359c4485.js"><link rel="prefetch" href="/docs/assets/js/400.27bcbcf0.js"><link rel="prefetch" href="/docs/assets/js/401.8cc920f4.js"><link rel="prefetch" href="/docs/assets/js/402.5797bd89.js"><link rel="prefetch" href="/docs/assets/js/403.d6c32d9d.js"><link rel="prefetch" href="/docs/assets/js/404.a0e2e7a6.js"><link rel="prefetch" href="/docs/assets/js/405.db6e7674.js"><link rel="prefetch" href="/docs/assets/js/406.3490c772.js"><link rel="prefetch" href="/docs/assets/js/407.eafb5264.js"><link rel="prefetch" href="/docs/assets/js/408.341c0ecf.js"><link rel="prefetch" href="/docs/assets/js/409.8c1a841c.js"><link rel="prefetch" href="/docs/assets/js/41.68e9c340.js"><link rel="prefetch" href="/docs/assets/js/410.c16acdec.js"><link rel="prefetch" href="/docs/assets/js/411.2c93d669.js"><link rel="prefetch" href="/docs/assets/js/412.219c76d4.js"><link rel="prefetch" href="/docs/assets/js/413.cf027e0d.js"><link rel="prefetch" href="/docs/assets/js/414.874c42fd.js"><link rel="prefetch" href="/docs/assets/js/415.623a3981.js"><link rel="prefetch" href="/docs/assets/js/416.f9b40ea6.js"><link rel="prefetch" href="/docs/assets/js/417.ff4a6a2d.js"><link rel="prefetch" href="/docs/assets/js/418.32c3807a.js"><link rel="prefetch" href="/docs/assets/js/419.4ce53817.js"><link rel="prefetch" href="/docs/assets/js/42.cfe25c3c.js"><link rel="prefetch" href="/docs/assets/js/420.b3b70070.js"><link rel="prefetch" href="/docs/assets/js/421.6330ee35.js"><link rel="prefetch" href="/docs/assets/js/422.562e743d.js"><link rel="prefetch" href="/docs/assets/js/423.2a1035d0.js"><link rel="prefetch" href="/docs/assets/js/424.fd04f069.js"><link rel="prefetch" href="/docs/assets/js/425.cac74778.js"><link rel="prefetch" href="/docs/assets/js/426.3825ff36.js"><link rel="prefetch" href="/docs/assets/js/427.369a6b99.js"><link rel="prefetch" href="/docs/assets/js/428.6e428064.js"><link rel="prefetch" href="/docs/assets/js/429.413554b2.js"><link rel="prefetch" href="/docs/assets/js/43.86b59091.js"><link rel="prefetch" href="/docs/assets/js/430.3802272b.js"><link rel="prefetch" href="/docs/assets/js/431.589cae88.js"><link rel="prefetch" href="/docs/assets/js/432.afda281d.js"><link rel="prefetch" href="/docs/assets/js/433.3c9efc65.js"><link rel="prefetch" href="/docs/assets/js/434.bfb13128.js"><link rel="prefetch" href="/docs/assets/js/435.3d01ee7a.js"><link rel="prefetch" href="/docs/assets/js/437.fa7245e1.js"><link rel="prefetch" href="/docs/assets/js/438.f14bcf01.js"><link rel="prefetch" href="/docs/assets/js/439.4eb77264.js"><link rel="prefetch" href="/docs/assets/js/44.624efc6b.js"><link rel="prefetch" href="/docs/assets/js/440.7af8642a.js"><link rel="prefetch" href="/docs/assets/js/441.909a3106.js"><link rel="prefetch" href="/docs/assets/js/442.996aeac2.js"><link rel="prefetch" href="/docs/assets/js/443.286ce6c2.js"><link rel="prefetch" href="/docs/assets/js/444.0630cbd6.js"><link rel="prefetch" href="/docs/assets/js/445.dc45c015.js"><link rel="prefetch" href="/docs/assets/js/446.2b253d6b.js"><link rel="prefetch" href="/docs/assets/js/447.8ca5b29d.js"><link rel="prefetch" href="/docs/assets/js/448.dde0b8eb.js"><link rel="prefetch" href="/docs/assets/js/449.f4b0646b.js"><link rel="prefetch" href="/docs/assets/js/45.874a37c3.js"><link rel="prefetch" href="/docs/assets/js/450.244ddbac.js"><link rel="prefetch" href="/docs/assets/js/451.318d3652.js"><link rel="prefetch" href="/docs/assets/js/452.146bcf07.js"><link rel="prefetch" href="/docs/assets/js/453.b8bb9c3b.js"><link rel="prefetch" href="/docs/assets/js/454.9917399f.js"><link rel="prefetch" href="/docs/assets/js/455.319d0dd2.js"><link rel="prefetch" href="/docs/assets/js/456.a3dd7e9c.js"><link rel="prefetch" href="/docs/assets/js/457.e4a278c5.js"><link rel="prefetch" href="/docs/assets/js/458.c44d9c30.js"><link rel="prefetch" href="/docs/assets/js/459.c8e7f474.js"><link rel="prefetch" href="/docs/assets/js/46.543ef7b2.js"><link rel="prefetch" href="/docs/assets/js/460.3c331d43.js"><link rel="prefetch" href="/docs/assets/js/461.98aa839f.js"><link rel="prefetch" href="/docs/assets/js/462.6c1a456a.js"><link rel="prefetch" href="/docs/assets/js/463.9e40bb6c.js"><link rel="prefetch" href="/docs/assets/js/464.b3da2f37.js"><link rel="prefetch" href="/docs/assets/js/465.8e0950b9.js"><link rel="prefetch" href="/docs/assets/js/466.9d0d3a80.js"><link rel="prefetch" href="/docs/assets/js/467.4dc0ad20.js"><link rel="prefetch" href="/docs/assets/js/468.313f98f7.js"><link rel="prefetch" href="/docs/assets/js/469.f01a81c9.js"><link rel="prefetch" href="/docs/assets/js/47.b543ba1a.js"><link rel="prefetch" href="/docs/assets/js/470.5b2c9790.js"><link rel="prefetch" href="/docs/assets/js/471.294e32d5.js"><link rel="prefetch" href="/docs/assets/js/472.ca84e7ee.js"><link rel="prefetch" href="/docs/assets/js/473.2ca381b3.js"><link rel="prefetch" href="/docs/assets/js/474.d4e6e34f.js"><link rel="prefetch" href="/docs/assets/js/475.72c6a47a.js"><link rel="prefetch" href="/docs/assets/js/476.520ea89d.js"><link rel="prefetch" href="/docs/assets/js/477.ae15e407.js"><link rel="prefetch" href="/docs/assets/js/478.cbd34cd4.js"><link rel="prefetch" href="/docs/assets/js/479.e4b0785b.js"><link rel="prefetch" href="/docs/assets/js/48.57bcc163.js"><link rel="prefetch" href="/docs/assets/js/480.5fc9f42a.js"><link rel="prefetch" href="/docs/assets/js/481.bbb57ae2.js"><link rel="prefetch" href="/docs/assets/js/482.aac47e34.js"><link rel="prefetch" href="/docs/assets/js/483.abbd7f87.js"><link rel="prefetch" href="/docs/assets/js/484.379f8f09.js"><link rel="prefetch" href="/docs/assets/js/485.9b9639f2.js"><link rel="prefetch" href="/docs/assets/js/486.62d77015.js"><link rel="prefetch" href="/docs/assets/js/487.7bb8530a.js"><link rel="prefetch" href="/docs/assets/js/488.fc9acf37.js"><link rel="prefetch" href="/docs/assets/js/489.c3ed95ab.js"><link rel="prefetch" href="/docs/assets/js/49.d31bfb36.js"><link rel="prefetch" href="/docs/assets/js/490.687dcb20.js"><link rel="prefetch" href="/docs/assets/js/491.b266dae9.js"><link rel="prefetch" href="/docs/assets/js/492.97ee2fd5.js"><link rel="prefetch" href="/docs/assets/js/493.b389a038.js"><link rel="prefetch" href="/docs/assets/js/494.aed73152.js"><link rel="prefetch" href="/docs/assets/js/495.381ffed8.js"><link rel="prefetch" href="/docs/assets/js/496.d3b8b785.js"><link rel="prefetch" href="/docs/assets/js/497.68af20e7.js"><link rel="prefetch" href="/docs/assets/js/498.6fde3a10.js"><link rel="prefetch" href="/docs/assets/js/499.b0a62b12.js"><link rel="prefetch" href="/docs/assets/js/5.f0a3497b.js"><link rel="prefetch" href="/docs/assets/js/50.0197c73e.js"><link rel="prefetch" href="/docs/assets/js/500.d94cb147.js"><link rel="prefetch" href="/docs/assets/js/501.944b0099.js"><link rel="prefetch" href="/docs/assets/js/502.6cc3ee8b.js"><link rel="prefetch" href="/docs/assets/js/503.93521879.js"><link rel="prefetch" href="/docs/assets/js/504.ec9ee580.js"><link rel="prefetch" href="/docs/assets/js/505.aeb39883.js"><link rel="prefetch" href="/docs/assets/js/506.44a03e2b.js"><link rel="prefetch" href="/docs/assets/js/507.1b855e7e.js"><link rel="prefetch" href="/docs/assets/js/508.95983f7f.js"><link rel="prefetch" href="/docs/assets/js/509.5dc95e22.js"><link rel="prefetch" href="/docs/assets/js/51.76f4d363.js"><link rel="prefetch" href="/docs/assets/js/510.7f4b53c7.js"><link rel="prefetch" href="/docs/assets/js/511.53274dc8.js"><link rel="prefetch" href="/docs/assets/js/512.12fdcbb1.js"><link rel="prefetch" href="/docs/assets/js/513.028b2379.js"><link rel="prefetch" href="/docs/assets/js/514.8b5be113.js"><link rel="prefetch" href="/docs/assets/js/515.c16f12d2.js"><link rel="prefetch" href="/docs/assets/js/516.a65fe14d.js"><link rel="prefetch" href="/docs/assets/js/517.3e07c036.js"><link rel="prefetch" href="/docs/assets/js/518.340fe4f4.js"><link rel="prefetch" href="/docs/assets/js/519.a76f58e2.js"><link rel="prefetch" href="/docs/assets/js/52.6d462fbc.js"><link rel="prefetch" href="/docs/assets/js/520.5acb294c.js"><link rel="prefetch" href="/docs/assets/js/521.ac06cfc3.js"><link rel="prefetch" href="/docs/assets/js/522.805f7538.js"><link rel="prefetch" href="/docs/assets/js/523.bdbb3cc9.js"><link rel="prefetch" href="/docs/assets/js/524.900f16f5.js"><link rel="prefetch" href="/docs/assets/js/525.1095b729.js"><link rel="prefetch" href="/docs/assets/js/526.42300468.js"><link rel="prefetch" href="/docs/assets/js/527.87dc4b4c.js"><link rel="prefetch" href="/docs/assets/js/528.2e5a63db.js"><link rel="prefetch" href="/docs/assets/js/529.f8e071a4.js"><link rel="prefetch" href="/docs/assets/js/53.5f084480.js"><link rel="prefetch" href="/docs/assets/js/530.150e3ec1.js"><link rel="prefetch" href="/docs/assets/js/531.031cb643.js"><link rel="prefetch" href="/docs/assets/js/532.7c52b538.js"><link rel="prefetch" href="/docs/assets/js/533.eac8007f.js"><link rel="prefetch" href="/docs/assets/js/534.846c79c4.js"><link rel="prefetch" href="/docs/assets/js/535.b0b99199.js"><link rel="prefetch" href="/docs/assets/js/536.622d324e.js"><link rel="prefetch" href="/docs/assets/js/537.75e129bd.js"><link rel="prefetch" href="/docs/assets/js/538.924d38d5.js"><link rel="prefetch" href="/docs/assets/js/539.d97da478.js"><link rel="prefetch" href="/docs/assets/js/54.3f8cc9cb.js"><link rel="prefetch" href="/docs/assets/js/540.16a748ca.js"><link rel="prefetch" href="/docs/assets/js/541.232eadea.js"><link rel="prefetch" href="/docs/assets/js/542.bf4f1be8.js"><link rel="prefetch" href="/docs/assets/js/543.c5439a80.js"><link rel="prefetch" href="/docs/assets/js/544.006a61fb.js"><link rel="prefetch" href="/docs/assets/js/545.21faa340.js"><link rel="prefetch" href="/docs/assets/js/546.a0ab563a.js"><link rel="prefetch" href="/docs/assets/js/547.b67d0bf7.js"><link rel="prefetch" href="/docs/assets/js/548.a4fd9f76.js"><link rel="prefetch" href="/docs/assets/js/549.b0b3c894.js"><link rel="prefetch" href="/docs/assets/js/55.d4d19fe5.js"><link rel="prefetch" href="/docs/assets/js/550.7e9dac5a.js"><link rel="prefetch" href="/docs/assets/js/551.641ee0d8.js"><link rel="prefetch" href="/docs/assets/js/552.9681c8e4.js"><link rel="prefetch" href="/docs/assets/js/553.4a1f3561.js"><link rel="prefetch" href="/docs/assets/js/554.1dc4e5b2.js"><link rel="prefetch" href="/docs/assets/js/555.cf1fdc10.js"><link rel="prefetch" href="/docs/assets/js/556.510722d5.js"><link rel="prefetch" href="/docs/assets/js/56.84133045.js"><link rel="prefetch" href="/docs/assets/js/57.d92f4603.js"><link rel="prefetch" href="/docs/assets/js/58.cee2292c.js"><link rel="prefetch" href="/docs/assets/js/59.3e6d4050.js"><link rel="prefetch" href="/docs/assets/js/6.b278dc4e.js"><link rel="prefetch" href="/docs/assets/js/60.0a263946.js"><link rel="prefetch" href="/docs/assets/js/61.09554251.js"><link rel="prefetch" href="/docs/assets/js/62.a31a5b5c.js"><link rel="prefetch" href="/docs/assets/js/63.63f30ba7.js"><link rel="prefetch" href="/docs/assets/js/64.74bb8806.js"><link rel="prefetch" href="/docs/assets/js/65.0b512734.js"><link rel="prefetch" href="/docs/assets/js/66.7491621a.js"><link rel="prefetch" href="/docs/assets/js/67.5c9e0c40.js"><link rel="prefetch" href="/docs/assets/js/68.72f27108.js"><link rel="prefetch" href="/docs/assets/js/69.4815a4b2.js"><link rel="prefetch" href="/docs/assets/js/7.61e764e7.js"><link rel="prefetch" href="/docs/assets/js/70.dfbfacdc.js"><link rel="prefetch" href="/docs/assets/js/71.a204ef42.js"><link rel="prefetch" href="/docs/assets/js/72.e04aa20b.js"><link rel="prefetch" href="/docs/assets/js/73.107d0242.js"><link rel="prefetch" href="/docs/assets/js/74.5527d3bc.js"><link rel="prefetch" href="/docs/assets/js/75.40a24a9f.js"><link rel="prefetch" href="/docs/assets/js/76.5ec731d3.js"><link rel="prefetch" href="/docs/assets/js/77.24ff2df4.js"><link rel="prefetch" href="/docs/assets/js/78.03089db1.js"><link rel="prefetch" href="/docs/assets/js/79.d427479a.js"><link rel="prefetch" href="/docs/assets/js/8.f178db4a.js"><link rel="prefetch" href="/docs/assets/js/80.363d68e8.js"><link rel="prefetch" href="/docs/assets/js/81.aa0725b9.js"><link rel="prefetch" href="/docs/assets/js/82.cdfba134.js"><link rel="prefetch" href="/docs/assets/js/83.23196e5b.js"><link rel="prefetch" href="/docs/assets/js/84.61bb29e0.js"><link rel="prefetch" href="/docs/assets/js/85.9232f841.js"><link rel="prefetch" href="/docs/assets/js/86.2fa9acd8.js"><link rel="prefetch" href="/docs/assets/js/87.8335ebb8.js"><link rel="prefetch" href="/docs/assets/js/88.78c7a070.js"><link rel="prefetch" href="/docs/assets/js/89.54035c9e.js"><link rel="prefetch" href="/docs/assets/js/9.1156f888.js"><link rel="prefetch" href="/docs/assets/js/90.b03591be.js"><link rel="prefetch" href="/docs/assets/js/92.a50938d8.js"><link rel="prefetch" href="/docs/assets/js/93.283832d8.js"><link rel="prefetch" href="/docs/assets/js/94.04378600.js"><link rel="prefetch" href="/docs/assets/js/95.f2c3d6df.js"><link rel="prefetch" href="/docs/assets/js/96.87b7bafe.js"><link rel="prefetch" href="/docs/assets/js/97.2a8dde9a.js"><link rel="prefetch" href="/docs/assets/js/98.0e912f54.js"><link rel="prefetch" href="/docs/assets/js/99.a00b3686.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.416feb4e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">Nguyễn Khánk's Wiki</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/architect/" class="nav-link">
  Architecture
</a></div><div class="nav-item"><a href="https://nguyenngockhank.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/architect/" class="nav-link">
  Architecture
</a></div><div class="nav-item"><a href="https://nguyenngockhank.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>System Design Case Studies</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/kungfu/case-study/notification/" class="sidebar-link">Design a notification system</a></li><li><a href="/docs/kungfu/case-study/metrics/" class="sidebar-link">Metrics Monitoring &amp; Alerting System</a></li><li><a href="/docs/kungfu/case-study/ad-click/" class="sidebar-link">Ad Click Event Aggregation</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Data storage</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Online tools</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Booking System</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Social Network</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Location-based</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Video</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Chat system</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>The Art of Readable Code</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>A Philosophy of Software Design</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Building Microservices</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>97 Things Every Programmer Should Know</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>NoSql Distilled</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Go</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Others</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_4-comments"><a href="#_4-comments" class="header-anchor">#</a> 4. Comments</h1> <blockquote><p>Don’t comment bad code—rewrite it. — Brian W. Kernighan and P. J. Plaugher</p></blockquote> <p>Nothing can be quite so helpful as a well-placed comment. Nothing can clutter up a module more than frivolous dogmatic comments. Nothing can be quite so damaging as an old crufty comment that propagates lies and misinformation.</p> <p>Comments are not like Schindler’s List. They are not “pure good.” Indeed, comments are, at best, a necessary evil. If our programming languages were expressive enough, or if we had the talent to subtly wield those languages to express our intent, we would not need comments very much—perhaps not at all.</p> <p>The proper use of comments is to compensate for our failure to express ourself in code. Note that I used the word <em>failure</em>. I meant it. Comments are always failures. We must have them because we cannot always figure out how to express ourselves without them, but their use is not a cause for celebration.</p> <p>So when you find yourself in a position where you need to write a comment, think it through and see whether there isn’t some way to turn the tables and express yourself in
code. Every time you express yourself in code, you should pat yourself on the back. Every
time you write a comment, you should grimace and feel the failure of your ability of
expression.</p> <p>Why am I so down on comments? Because they lie. Not always, and not intentionally, but too often. The older a comment is, and the farther away it is from the code it describes, the more likely it is to be just plain wrong. The reason is simple. Programmers can’t realistically maintain them.</p> <p>Code changes and evolves. Chunks of it move from here to there. Those chunks bifurcate and reproduce and come together again to form chimeras. Unfortunately the comments don’t always follow them— <em>can’t</em> always follow them. And all too often the comments get separated from the code they describe and become orphaned blurbs of ever-decreasing accuracy. For example, look what has happened to this comment and the line it was intended to describe:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">MockRequest</span> request<span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> HTTP_DATE_REGEXP <span class="token operator">=</span>
<span class="token string">&quot;[SMTWF][a-z]{2}\\,\\s[0-9]{2}\\s[JFMASOND][a-z]{2}\\s&quot;</span><span class="token operator">+</span>
<span class="token string">&quot;[0-9]{4}\\s[0-9]{2}\\:[0-9]{2}\\:[0-9]{2}\\sGMT&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token class-name">Response</span> response<span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token class-name">FitNesseContext</span> context<span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token class-name">FileResponder</span> responder<span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token class-name">Locale</span> saveLocale<span class="token punctuation">;</span>
<span class="token comment">// Example: &quot;Tue, 02 Apr 2003 22:18:49 GMT&quot;</span>
</code></pre></div><p>Other instance variables that were probably added later were interposed between the <code>HTTP_DATE_REGEXP</code> constant and it’s explanatory comment.</p> <p>It is possible to make the point that programmers should be disciplined enough to keep the comments in a high state of repair, relevance, and accuracy. I agree, they should.
But I would rather that energy go toward making the code so clear and expressive that it does not need the comments in the first place.</p> <p>Inaccurate comments are far worse than no comments at all. They delude and mislead.
They set expectations that will never be fulfilled. They lay down old rules that need not, or should not, be followed any longer.</p> <p>Truth can only be found in one place: the code. Only the code can truly tell you what it does. It is the only source of truly accurate information. Therefore, though comments are sometimes necessary, we will expend significant energy to minimize them.</p> <h2 id="comments-do-not-make-up-for-bad-code"><a href="#comments-do-not-make-up-for-bad-code" class="header-anchor">#</a> Comments Do Not Make Up for Bad Code</h2> <p>One of the more common motivations for writing comments is bad code. We write a module and we know it is confusing and disorganized. We know it’s a mess. So we say to ourselves, “Ooh, I’d better comment that!” No! You’d better clean it!</p> <p>Clear and expressive code with few comments is far superior to cluttered and complex code with lots of comments. Rather than spend your time writing the comments that explain the mess you’ve made, spend it cleaning that mess.</p> <h2 id="explain-yourself-in-code"><a href="#explain-yourself-in-code" class="header-anchor">#</a> Explain Yourself in Code</h2> <p>There are certainly times when code makes a poor vehicle for explanation. Unfortunately,
many programmers have taken this to mean that code is seldom, if ever, a good means for
explanation. This is patently false. Which would you rather see? This:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// Check to see if the employee is eligible for full benefits</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>employee<span class="token punctuation">.</span>flags <span class="token operator">&amp;</span> HOURLY_FLAG<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
<span class="token punctuation">(</span>employee<span class="token punctuation">.</span>age <span class="token operator">&gt;</span> <span class="token number">65</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>Or this?</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>employee<span class="token punctuation">.</span><span class="token function">isEligibleForFullBenefits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>It takes only a few seconds of thought to explain most of your intent in code. In many cases it’s simply a matter of creating a function that says the same thing as the comment you want to write.</p> <h2 id="good-comments"><a href="#good-comments" class="header-anchor">#</a> Good Comments</h2> <p>Some comments are necessary or beneficial. We’ll look at a few that I consider worthy of the bits they consume. Keep in mind, however, that the only truly good comment is the comment you found a way not to write.</p> <h3 id="legal-comments"><a href="#legal-comments" class="header-anchor">#</a> Legal Comments</h3> <p>Sometimes our corporate coding standards force us to write certain comments for legal
reasons. For example, copyright and authorship statements are necessary and reasonable
things to put into a comment at the start of each source file.</p> <p>Here, for example, is the standard comment header that we put at the beginning of
every source file in FitNesse. I am happy to say that our IDE hides this comment from act-
ing as clutter by automatically collapsing it.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// Copyright (C) 2003,2004,2005 by Object Mentor, Inc. All rights reserved.</span>
<span class="token comment">// Released under the terms of the GNU General Public License version 2 or later.</span>
</code></pre></div><p>Comments like this should not be contracts or legal tomes. Where possible, refer to a standard license or other external document rather than putting all the terms and conditions
into the comment.</p> <h3 id="informative-comments"><a href="#informative-comments" class="header-anchor">#</a> Informative Comments.</h3> <p>It is sometimes useful to provide basic information with a comment. For example, consider this comment that explains the return value of an abstract method:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// Returns an instance of the Responder being tested.</span>
<span class="token keyword">protected</span> <span class="token keyword">abstract</span> <span class="token class-name">Responder</span> <span class="token function">responderInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>A comment like this can sometimes be useful, but it is better to use the name of the function to convey the information where possible. For example, in this case the comment could be made redundant by renaming the function: <code>responderBeingTested</code>.</p> <p><strong>Here’s a case that’s a bit better:</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// format matched kk:mm:ss EEE, MMM dd, yyyy</span>
<span class="token class-name">Pattern</span> timeMatcher <span class="token operator">=</span> <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">&quot;\\d*:\\d*:\\d* \\w*, \\w* \\d*, \\d*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>In this case the comment lets us know that the regular expression is intended to match a
time and date that were formatted with the <code>SimpleDateFormat.formatfunction</code> using the specified format string. Still, it might have been better, and clearer, if this code had been moved to a special class that converted the formats of dates and times. Then the comment would likely have been superfluous.</p> <h3 id="explanation-of-intent"><a href="#explanation-of-intent" class="header-anchor">#</a> Explanation of Intent</h3> <p>Sometimes a comment goes beyond just useful information about the implementation and provides the intent behind a decision. In the following case we see an interesting decision documented by a comment. When comparing two objects, the author decided that he wanted to sort objects of his class higher than objects of any other.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>o <span class="token keyword">instanceof</span> <span class="token class-name">WikiPagePath</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name">WikiPagePath</span> p <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">WikiPagePath</span><span class="token punctuation">)</span> o<span class="token punctuation">;</span>
        <span class="token class-name">String</span> compressedName <span class="token operator">=</span> <span class="token class-name">StringUtil</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>names<span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> compressedArgumentName <span class="token operator">=</span> <span class="token class-name">StringUtil</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>names<span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> compressedName<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>compressedArgumentName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// we are greater because we are the right type.</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Here’s an even better example. You might not agree with the programmer’s solution to the problem, but at least you know what he was trying to do.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testConcurrentAddWidgets</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
<span class="token class-name">WidgetBuilder</span> widgetBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WidgetBuilder</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token class-name">BoldWidget</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span> text <span class="token operator">=</span> <span class="token string">&quot;'''bold text'''&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">ParentWidget</span> parent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BoldWidget</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MockWidgetRoot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;'''bold text'''&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">AtomicBoolean</span> failFlag <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AtomicBoolean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    failFlag<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//This is our best attempt to get a race condition</span>
    <span class="token comment">//by creating large number of threads.</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">25000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">WidgetBuilderThread</span> widgetBuilderThread <span class="token operator">=</span>
        <span class="token keyword">new</span> <span class="token class-name">WidgetBuilderThread</span><span class="token punctuation">(</span>widgetBuilder<span class="token punctuation">,</span> text<span class="token punctuation">,</span> parent<span class="token punctuation">,</span> failFlag<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>widgetBuilderThread<span class="token punctuation">)</span><span class="token punctuation">;</span>
        thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> failFlag<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="clarification"><a href="#clarification" class="header-anchor">#</a> Clarification</h3> <p>Sometimes it is just helpful to translate the meaning of some obscure argument or return value into something that’s readable. In general it is better to find a way to make that argument or return value clear in its own right; but when its part of the standard library, or in code that you cannot alter, then a helpful clarifying comment can be useful.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testCompareTo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span>
<span class="token punctuation">{</span>
    <span class="token class-name">WikiPagePath</span> a <span class="token operator">=</span> <span class="token class-name">PathParser</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">&quot;PageA&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">WikiPagePath</span> ab <span class="token operator">=</span> <span class="token class-name">PathParser</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">&quot;PageA.PageB&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">WikiPagePath</span> b <span class="token operator">=</span> <span class="token class-name">PathParser</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">&quot;PageB&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">WikiPagePath</span> aa <span class="token operator">=</span> <span class="token class-name">PathParser</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">&quot;PageA.PageA&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">WikiPagePath</span> bb <span class="token operator">=</span> <span class="token class-name">PathParser</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">&quot;PageB.PageB&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">WikiPagePath</span> ba <span class="token operator">=</span> <span class="token class-name">PathParser</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">&quot;PageB.PageA&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">assertTrue</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// a == a</span>
    <span class="token function">assertTrue</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// a != b</span>
    <span class="token function">assertTrue</span><span class="token punctuation">(</span>ab<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>ab<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ab == ab</span>
    <span class="token function">assertTrue</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// a &lt; b</span>
    <span class="token function">assertTrue</span><span class="token punctuation">(</span>aa<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>ab<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// aa &lt; ab</span>
    <span class="token function">assertTrue</span><span class="token punctuation">(</span>ba<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>bb<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ba &lt; bb</span>
    <span class="token function">assertTrue</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// b &gt; a</span>
    <span class="token function">assertTrue</span><span class="token punctuation">(</span>ab<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>aa<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ab &gt; aa</span>
    <span class="token function">assertTrue</span><span class="token punctuation">(</span>bb<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>ba<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// bb &gt; ba</span>
<span class="token punctuation">}</span>
</code></pre></div><p>There is a substantial risk, of course, that a clarifying comment is incorrect. Go through the previous example and see how difficult it is to verify that they are correct. This explains both why the clarification is necessary and why it’s risky. So before writing comments like this, take care that there is no better way, and then take even more care that they are accurate.</p> <h3 id="warning-of-consequences"><a href="#warning-of-consequences" class="header-anchor">#</a> Warning of Consequences</h3> <p>Sometimes it is useful to warn other programmers about certain consequences. For example, here is a comment that explains why a particular test case is turned off:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// Don't run unless you</span>
<span class="token comment">// have some time to kill.</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">_testWithReallyBigFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">writeLinesToFile</span><span class="token punctuation">(</span><span class="token number">10000000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    response<span class="token punctuation">.</span><span class="token function">setBody</span><span class="token punctuation">(</span>testFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
    response<span class="token punctuation">.</span><span class="token function">readyToSend</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> responseString <span class="token operator">=</span> output<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">assertSubString</span><span class="token punctuation">(</span><span class="token string">&quot;Content-Length: 1000000000&quot;</span><span class="token punctuation">,</span> responseString<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">assertTrue</span><span class="token punctuation">(</span>bytesSent <span class="token operator">&gt;</span> <span class="token number">1000000000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Nowadays, of course, we’d turn off the test case by using the <code>@Ignore</code> attribute with an appropriate explanatory string. <code>@Ignore(&quot;Takes too long to run&quot;)</code>. But back in the days before JUnit 4, putting an underscore in front of the method name was a common convention. The comment, while flippant, makes the point pretty well.</p> <p><strong>Here’s another, more poignant example:</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">SimpleDateFormat</span> <span class="token function">makeStandardHttpDateFormat</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">//SimpleDateFormat is not thread safe,</span>
    <span class="token comment">//so we need to create each instance independently.</span>
    <span class="token class-name">SimpleDateFormat</span> df <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">&quot;EEE, dd MMM yyyy HH:mm:ss z&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    df<span class="token punctuation">.</span><span class="token function">setTimeZone</span><span class="token punctuation">(</span><span class="token class-name">TimeZone</span><span class="token punctuation">.</span><span class="token function">getTimeZone</span><span class="token punctuation">(</span><span class="token string">&quot;GMT&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> df<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>You might complain that there are better ways to solve this problem. I might agree with you. But the comment, as given here, is perfectly reasonable. It will prevent some overly eager programmer from using a static initializer in the name of efficiency.</p> <h3 id="todo-comments"><a href="#todo-comments" class="header-anchor">#</a> TODO Comments.</h3> <p>It is sometimes reasonable to leave “To do” notes in the form of <code>//TODO</code> comments. In the following case, the <code>TODO</code> comment explains why the function has a degenerate implementation and what that function’s future should be.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//TODO-MdM these are not needed</span>
<span class="token comment">// We expect this to go away when we do the checkout model</span>
<span class="token keyword">protected</span> <span class="token class-name">VersionInfo</span> <span class="token function">makeVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>TODOs are jobs that the programmer thinks should be done, but for some reason can’t do at the moment. It might be a reminder to delete a deprecated feature or a plea for someone else to look at a problem. It might be a request for someone else to think of a better name or a reminder to make a change that is dependent on a planned event. Whatever else a TODOmight be, it is <em>not</em> an excuse to leave bad code in the system.</p> <p>Nowadays, most good IDEs provide special gestures and features to locate all the <code>TODO</code> comments, so it’s not likely that they will get lost. Still, you don’t want your code to be littered with TODOs. So scan through them regularly and eliminate the ones you can.</p> <h3 id="amplification"><a href="#amplification" class="header-anchor">#</a> Amplification</h3> <p>A comment may be used to amplify the importance of something that may otherwise seem
inconsequential.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">String</span> listItemContent <span class="token operator">=</span> match<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// the trim is real important. It removes the starting</span>
<span class="token comment">// spaces that could cause the item to be recognized</span>
<span class="token comment">// as another list.</span>
<span class="token keyword">new</span> <span class="token class-name">ListItemWidget</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> listItemContent<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>level <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> <span class="token function">buildList</span><span class="token punctuation">(</span>text<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>match<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="javadocs-in-public-apis"><a href="#javadocs-in-public-apis" class="header-anchor">#</a> Javadocs in Public APIs</h3> <p>There is nothing quite so helpful and satisfying as a well-described public API. The javadocs for the standard Java library are a case in point. It would be difficult, at best, to write Java programs without them.</p> <p>If you are writing a public API, then you should certainly write good javadocs for it.
But keep in mind the rest of the advice in this chapter. Javadocs can be just as misleading, nonlocal, and dishonest as any other kind of comment.</p> <h2 id="bad-comments"><a href="#bad-comments" class="header-anchor">#</a> Bad Comments</h2> <p>Most comments fall into this category. Usually they are crutches or excuses for poor code or justifications for insufficient decisions, amounting to little more than the programmer talking to himself.</p> <h3 id="mumbling"><a href="#mumbling" class="header-anchor">#</a> Mumbling</h3> <p>Plopping in a comment just because you feel you should or because the process requires it, is a hack. If you decide to write a comment, then spend the time necessary to make sure it is the best comment you can write.</p> <p>Here, for example, is a case I found in FitNesse, where a comment might indeed have been useful. But the author was in a hurry or just not paying much attention. His mumbling left behind an enigma:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">loadProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">try</span>
    <span class="token punctuation">{</span>
        <span class="token class-name">String</span> propertiesPath <span class="token operator">=</span> propertiesLocation <span class="token operator">+</span> <span class="token string">&quot;/&quot;</span> <span class="token operator">+</span> PROPERTIES_FILE<span class="token punctuation">;</span>
        <span class="token class-name">FileInputStream</span> propertiesStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>propertiesPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
        loadedProperties<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>propertiesStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// No properties files means all defaults are loaded</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>What does that comment in the <code>catch</code> block mean? Clearly it meant something to the author, but the meaning does not come through all that well. Apparently, if we get an <code>IOException</code>, it means that there was no properties file; and in that case all the defaults are loaded. But who loads all the defaults? Were they loaded before the call to <code>loadProperties.load</code>? Or did <code>loadProperties.load</code> catch the exception, load the defaults, and then pass the exception on for us to ignore? Or did <code>loadProperties.load</code> load all the defaults before attempting to load the file? Was the author trying to comfort himself about the fact that he was leaving the catch block empty? Or — and this is the scary possibility - was the author trying to tell himself to come back here later and write the code that would load the defaults?</p> <p>Our only recourse is to examine the code in other parts of the system to find out what’s going on. Any comment that forces you to look in another module for the meaning of that comment has failed to communicate to you and is not worth the bits it consumes.</p> <h3 id="redundant-comments"><a href="#redundant-comments" class="header-anchor">#</a> Redundant Comments</h3> <p>Listing 4-1 shows a simple function with a header comment that is completely redundant.
The comment probably takes longer to read than the code itself.</p> <h4 id="listing-4-1"><a href="#listing-4-1" class="header-anchor">#</a> Listing 4-1</h4> <p><strong>waitForClose</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// Utility method that returns when this.closed is true. Throws an exception</span>
<span class="token comment">// if the timeout is reached.</span>
<span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">waitForClose</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token keyword">long</span> timeoutMillis<span class="token punctuation">)</span>
<span class="token keyword">throws</span> <span class="token class-name">Exception</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>closed<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">wait</span><span class="token punctuation">(</span>timeoutMillis<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>closed<span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token string">&quot;MockResponseSender could not be closed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>What purpose does this comment serve? It’s certainly not more informative than the code. It does not justify the code, or provide intent or rationale. It is not easier to read than the code. Indeed, it is less precise than the code and entices the reader to accept that lack of precision in lieu of true understanding. It is rather like a gladhanding used-car salesman assuring you that you don’t need to look under the hood.</p> <p>Now consider the legion of useless and redundant javadocs in Listing 4-2 taken from Tomcat. These comments serve only to clutter and obscure the code. They serve no documentary purpose at all. To make matters worse, I only showed you the first few. There are many more in this module.</p> <h4 id="listing-4-2"><a href="#listing-4-2" class="header-anchor">#</a> Listing 4-2</h4> <p><strong>ContainerBase.java (Tomcat)</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">ContainerBase</span>
<span class="token keyword">implements</span> <span class="token class-name">Container</span><span class="token punctuation">,</span> <span class="token class-name">Lifecycle</span><span class="token punctuation">,</span> <span class="token class-name">Pipeline</span><span class="token punctuation">,</span>
<span class="token class-name">MBeanRegistration</span><span class="token punctuation">,</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>
<span class="token comment">/**
* The processor delay for this component.
*/</span>
<span class="token keyword">protected</span> <span class="token keyword">int</span> backgroundProcessorDelay <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>

<span class="token comment">/**
* The lifecycle event support for this component.
*/</span>
<span class="token keyword">protected</span> <span class="token class-name">LifecycleSupport</span> lifecycle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LifecycleSupport</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
* The container event listeners for this Container.
*/</span>
<span class="token keyword">protected</span> <span class="token class-name">ArrayList</span> listeners <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
* The Loader implementation with which this Container is
* associated.
*/</span>
<span class="token keyword">protected</span> <span class="token class-name">Loader</span> loader <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

<span class="token comment">/**
* The Logger implementation with which this Container is
* associated.
*/</span>
<span class="token keyword">protected</span> <span class="token class-name">Log</span> logger <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

<span class="token comment">/**
* Associated logger name.
*/</span>
<span class="token keyword">protected</span> <span class="token class-name">String</span> logName <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

<span class="token comment">/**
* The Manager implementation with which this Container is
* associated.
*/</span>
<span class="token keyword">protected</span> <span class="token class-name">Manager</span> manager <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

<span class="token comment">/**
* The cluster with which this Container is associated.
*/</span>
<span class="token keyword">protected</span> <span class="token class-name">Cluster</span> cluster <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

<span class="token comment">/**
* The human-readable name of this Container.
*/</span>
<span class="token keyword">protected</span> <span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

<span class="token comment">/**
* The parent Container to which this Container is a child.
*/</span>
<span class="token keyword">protected</span> <span class="token class-name">Container</span> parent <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

<span class="token comment">/**
* The parent class loader to be configured when we install a
* Loader.
*/</span>
<span class="token keyword">protected</span> <span class="token class-name">ClassLoader</span> parentClassLoader <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

<span class="token comment">/**
* The Pipeline object with which this Container is
* associated.
*/</span>
<span class="token keyword">protected</span> <span class="token class-name">Pipeline</span> pipeline <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StandardPipeline</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
* The Realm with which this Container is associated.
*/</span>
<span class="token keyword">protected</span> <span class="token class-name">Realm</span> realm <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

<span class="token comment">/**
* The resources DirContext object with which this Container
* is associated.
*/</span>
<span class="token keyword">protected</span> <span class="token class-name">DirContext</span> resources <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="misleading-comments"><a href="#misleading-comments" class="header-anchor">#</a> Misleading Comments</h3> <p>Sometimes, with all the best intentions, a programmer makes a statement in his comments that isn’t precise enough to be accurate. Consider for another moment the badly redundant but also subtly misleading comment we saw in <a href="#listing-4-1">Listing 4-1</a>.</p> <p>Did you discover how the comment was misleading? The method does not return <em>when</em> this.closedbecomestrue. It returns <em>if</em> this.closedistrue; otherwise, it waits for a blind time-out and then throws an exception <em>if</em> this.closed is still not true.</p> <p>This subtle bit of misinformation, couched in a comment that is harder to read than the body of the code, could cause another programmer to blithely call this function in the expectation that it will return as soon as this.closedbecomestrue. That poor programmer would then find himself in a debugging session trying to figure out why his code executed so slowly.</p> <h3 id="mandated-comments"><a href="#mandated-comments" class="header-anchor">#</a> Mandated Comments</h3> <p>It is just plain silly to have a rule that says that every function must have a javadoc, or
every variable must have a comment. Comments like this just clutter up the code, propagate lies, and lend to general confusion and disorganization.</p> <p>For example, required javadocs for every function lead to abominations such as <a href="#listing-4-3">Listing 4-3</a>. This clutter adds nothing and serves only to obfuscate the code and create the potential for lies and misdirection.</p> <h3 id="journal-comments"><a href="#journal-comments" class="header-anchor">#</a> Journal Comments</h3> <p>Sometimes people add a comment to the start of a module every time they edit it. These comments accumulate as a kind of journal, or log, of every change that has ever been made. I have seen some modules with dozens of pages of these run-on journal entries.</p> <h4 id="listing-4-3"><a href="#listing-4-3" class="header-anchor">#</a> Listing 4-3</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
*
* @param title The title of the CD
* @param author The author of the CD
* @param tracks The number of tracks on the CD
* @param durationInMinutes The duration of the CD in minutes
*/</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addCD</span><span class="token punctuation">(</span><span class="token class-name">String</span> title<span class="token punctuation">,</span> <span class="token class-name">String</span> author<span class="token punctuation">,</span> <span class="token keyword">int</span> tracks<span class="token punctuation">,</span> <span class="token keyword">int</span> durationInMinutes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">CD</span> cd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">CD</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cd<span class="token punctuation">.</span>title <span class="token operator">=</span> title<span class="token punctuation">;</span>
    cd<span class="token punctuation">.</span>author <span class="token operator">=</span> author<span class="token punctuation">;</span>
    cd<span class="token punctuation">.</span>tracks <span class="token operator">=</span> tracks<span class="token punctuation">;</span>
    cd<span class="token punctuation">.</span>duration <span class="token operator">=</span> duration<span class="token punctuation">;</span>
    cdList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>cd<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Long ago there was a good reason to create and maintain these log entries at the start of every module. We didn’t have source code control systems that did it for us. Nowadays, however, these long journals are just more clutter to obfuscate the module. They should be completely removed.</p> <h3 id="noise-comments"><a href="#noise-comments" class="header-anchor">#</a> Noise Comments</h3> <p>Sometimes you see comments that are nothing but noise. They restate the obvious and
provide no new information.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
* Default constructor.
*/</span>
<span class="token keyword">protected</span> <span class="token class-name">AnnualDateRule</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre></div><p>No, <em>really?</em> Or how about this:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/** The day of the month. */</span>
<span class="token keyword">private</span> <span class="token keyword">int</span> dayOfMonth<span class="token punctuation">;</span>
</code></pre></div><p>And then there’s this paragon of redundancy:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
* Returns the day of the month.
*
* @return the day of the month.
*/</span>
<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDayOfMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> dayOfMonth<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
* Changes (from 11-Oct-2001)
* --------------------------
* 11-Oct-2001 : Re-organised the class and moved it to new package
* com.jrefinery.date (DG);
* 05-Nov-2001 : Added a getDescription() method, and eliminated NotableDate
* class (DG);
* 12-Nov-2001 : IBD requires setDescription() method, now that NotableDate
* class is gone (DG); Changed getPreviousDayOfWeek(),
* getFollowingDayOfWeek() and getNearestDayOfWeek() to correct
* bugs (DG);
* 05-Dec-2001 : Fixed bug in SpreadsheetDate class (DG);
* 29-May-2002 : Moved the month constants into a separate interface
* (MonthConstants) (DG);
* 27-Aug-2002 : Fixed bug in addMonths() method, thanks to N???levka Petr (DG);
* 03-Oct-2002 : Fixed errors reported by Checkstyle (DG);
* 13-Mar-2003 : Implemented Serializable (DG);
* 29-May-2003 : Fixed bug in addMonths method (DG);
* 04-Sep-2003 : Implemented Comparable. Updated the isInRange javadocs (DG);
* 05-Jan-2005 : Fixed bug in addYears() method (1096282) (DG);
</span></code></pre></div><p>These comments are so noisy that we learn to ignore them. As we read through code, our eyes simply skip over them. Eventually the comments begin to lie as the code around them changes.</p> <p>The first comment in <a href="#listing-4-4">Listing 4-4</a> seems appropriate.^2 It explains why the <code>catch</code> block is being ignored. But the second comment is pure noise. Apparently the programmer was just so frustrated with writing <code>try/catch</code> blocks in this function that he needed to vent.</p> <h4 id="listing-4-4"><a href="#listing-4-4" class="header-anchor">#</a> Listing 4-4</h4> <p><strong>startSending</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">startSending</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">try</span>
    <span class="token punctuation">{</span>
        <span class="token function">doSending</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">SocketException</span> e<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// normal. someone stopped the request.</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">try</span>
        <span class="token punctuation">{</span>
            response<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">ErrorResponder</span><span class="token punctuation">.</span><span class="token function">makeExceptionString</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            response<span class="token punctuation">.</span><span class="token function">closeAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e1<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token comment">//Give me a break!</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Rather than venting in a worthless and noisy comment, the programmer should have recognized that his frustration could be resolved by improving the structure of his code. He should have redirected his energy to extracting that last <code>try/catch</code> block into a separate function, as shown in <a href="#listing-4-5">Listing 4-5</a>.</p> <h4 id="listing-4-5"><a href="#listing-4-5" class="header-anchor">#</a> Listing 4-5</h4> <p><strong>startSending (refactored)</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">startSending</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">try</span>
    <span class="token punctuation">{</span>
        <span class="token function">doSending</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> 
    <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">SocketException</span> e<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// normal. someone stopped the request.</span>
    <span class="token punctuation">}</span> 
    <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">addExceptionAndCloseResponse</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">addExceptionAndCloseResponse</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">try</span>
    <span class="token punctuation">{</span>
        response<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">ErrorResponder</span><span class="token punctuation">.</span><span class="token function">makeExceptionString</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        response<span class="token punctuation">.</span><span class="token function">closeAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e1<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Replace the temptation to create noise with the determination to clean your code. You’ll
find it makes you a better and happier programmer.</p> <h3 id="scary-noise"><a href="#scary-noise" class="header-anchor">#</a> Scary Noise</h3> <p>Javadocs can also be noisy. What purpose do the following Javadocs (from a well-known
open-source library) serve? Answer: nothing. They are just redundant noisy comments
written out of some misplaced desire to provide documentation.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/** The name. */</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
<span class="token comment">/** The version. */</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> version<span class="token punctuation">;</span>
<span class="token comment">/** The licenceName. */</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> licenceName<span class="token punctuation">;</span>
<span class="token comment">/** The version. */</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> info<span class="token punctuation">;</span>
</code></pre></div><p>Read these comments again more carefully. Do you see the cut-paste error? If authors aren’t paying attention when comments are written (or pasted), why should readers be expected to profit from them?</p> <h3 id="don-t-use-a-comment-when-you-can-use-a-function-or-a-variable"><a href="#don-t-use-a-comment-when-you-can-use-a-function-or-a-variable" class="header-anchor">#</a> Don’t Use a Comment When You Can Use a Function or a Variable</h3> <p>Consider the following stretch of code:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// does the module from the global list &lt;mod&gt; depend on the</span>
<span class="token comment">// subsystem we are part of?</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>smodule<span class="token punctuation">.</span><span class="token function">getDependSubsystems</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>subSysMod<span class="token punctuation">.</span><span class="token function">getSubSystem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>This could be rephrased without the comment as</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">ArrayList</span> moduleDependees <span class="token operator">=</span> smodule<span class="token punctuation">.</span><span class="token function">getDependSubsystems</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> ourSubSystem <span class="token operator">=</span> subSysMod<span class="token punctuation">.</span><span class="token function">getSubSystem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>moduleDependees<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>ourSubSystem<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>The author of the original code may have written the comment first (unlikely) and then written the code to fulfill the comment. However, the author should then have refactored the code, as I did, so that the comment could be removed.</p> <h3 id="position-markers"><a href="#position-markers" class="header-anchor">#</a> Position Markers</h3> <p>Sometimes programmers like to mark a particular position in a source file. For example, I recently found this in a program I was looking through:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// Actions //////////////////////////////////</span>
</code></pre></div><p>There are rare times when it makes sense to gather certain functions together beneath a banner like this. But in general they are clutter that should be eliminated—especially the noisy train of slashes at the end.</p> <p>Think of it this way. A banner is startling and obvious if you don’t see banners very often. So use them very sparingly, and only when the benefit is significant. If you overuse banners, they’ll fall into the background noise and be ignored.</p> <h3 id="closing-brace-comments"><a href="#closing-brace-comments" class="header-anchor">#</a> Closing Brace Comments</h3> <p>Sometimes programmers will put special comments on closing braces, as in Listing 4-6.
Although this might make sense for long functions with deeply nested structures, it serves
only to clutter the kind of small and encapsulated functions that we prefer. So if you find
yourself wanting to mark your closing braces, try to shorten your functions instead.</p> <h4 id="listing-4-6"><a href="#listing-4-6" class="header-anchor">#</a> Listing 4-6</h4> <p><strong>wc.java</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> wc <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">BufferedReader</span> in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> line<span class="token punctuation">;</span>
        <span class="token keyword">int</span> lineCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> charCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> wordCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
                   
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>line <span class="token operator">=</span> in<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                lineCount<span class="token operator">++</span><span class="token punctuation">;</span>
                charCount <span class="token operator">+=</span> line<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">String</span> words<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;\\W&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                wordCount <span class="token operator">+=</span> words<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token comment">//while</span>

            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;wordCount = &quot;</span> <span class="token operator">+</span> wordCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;lineCount = &quot;</span> <span class="token operator">+</span> lineCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;charCount = &quot;</span> <span class="token operator">+</span> charCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token comment">// try</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Error:&quot;</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token comment">//catch</span>
    <span class="token punctuation">}</span> <span class="token comment">//main</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="attributions-and-bylines"><a href="#attributions-and-bylines" class="header-anchor">#</a> Attributions and Bylines</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/* Added by Rick */</span>
</code></pre></div><p>Source code control systems are very good at remembering who added what, when.</p> <p>There is no need to pollute the code with little bylines. You might think that such comments would be useful in order to help others know who to talk to about the code. But the reality is that they tend to stay around for years and years, getting less and less accurate and relevant.</p> <p>Again, the source code control system is a better place for this kind of information.</p> <h3 id="commented-out-code"><a href="#commented-out-code" class="header-anchor">#</a> Commented-Out Code</h3> <p>Few practices are as odious as commenting-out code. Don’t do this!</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">InputStreamResponse</span> response <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InputStreamResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
response<span class="token punctuation">.</span><span class="token function">setBody</span><span class="token punctuation">(</span>formatter<span class="token punctuation">.</span><span class="token function">getResultStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> formatter<span class="token punctuation">.</span><span class="token function">getByteCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// InputStream resultsStream = formatter.getResultStream();</span>
<span class="token comment">// StreamReader reader = new StreamReader(resultsStream);</span>
<span class="token comment">// response.setContent(reader.read(formatter.getByteCount()));</span>
</code></pre></div><p>Others who see that commented-out code won’t have the courage to delete it. They’ll think it is there for a reason and is too important to delete. So commented-out code gathers like dregs at the bottom of a bad bottle of wine.</p> <p><strong>Consider this from apache commons:</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">this</span><span class="token punctuation">.</span>bytePos <span class="token operator">=</span> <span class="token function">writeBytes</span><span class="token punctuation">(</span>pngIdBytes<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//hdrPos = bytePos;</span>
<span class="token function">writeHeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">writeResolution</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//dataPos = bytePos;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">writeImageData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">writeEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>pngBytes <span class="token operator">=</span> <span class="token function">resizeByteArray</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>pngBytes<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>maxPos<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>pngBytes <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>pngBytes<span class="token punctuation">;</span>
</code></pre></div><p>Why are those two lines of code commented? Are they important? Were they left as
reminders for some imminent change? Or are they just cruft that someone commented-out
years ago and has simply not bothered to clean up.</p> <p>There was a time, back in the sixties, when commenting-out code might have been
useful. But we’ve had good source code control systems for a very long time now. Those
systems will remember the code for us. We don’t have to comment it out any more. Just
delete the code. We won’t lose it. Promise.</p> <h3 id="html-comments"><a href="#html-comments" class="header-anchor">#</a> HTML Comments</h3> <p>HTML in source code comments is an abomination, as you can tell by reading the code below. It makes the comments hard to read in the one place where they should be easy to read—the editor/IDE. If comments are going to be extracted by some tool (like Javadoc) to appear in a Web  page, then it should be the responsibility of that tool, and not the programmer, to adorn the comments with appropriate HTML.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
* Task to run fit tests.
* This task runs fitnesse tests and publishes the results.
* &lt;p/&gt;
* &lt;pre&gt;
* Usage:
* &lt;taskdef name=&quot;execute-fitnesse-tests&quot;
* classname=&quot;fitnesse.ant.ExecuteFitnesseTestsTask&quot;
* classpathref=&quot;classpath&quot; /&gt;;
* OR
* &lt;taskdef classpathref=&quot;classpath&quot;
* resource=&quot;tasks.properties&quot; /&gt;;
* &lt;p/&gt;
* &lt;execute-fitnesse-tests
* suitepage=&quot;FitNesse.SuiteAcceptanceTests&quot;
* fitnesseport=&quot;8082&quot;
* resultsdir=&quot;${results.dir}&quot;
* resultshtmlpage=&quot;fit-results.html&quot;
* classpathref=&quot;classpath&quot; /&gt;;
* &lt;/pre&gt;
*/</span>
</code></pre></div><h3 id="nonlocal-information"><a href="#nonlocal-information" class="header-anchor">#</a> Nonlocal Information</h3> <p>If you must write a comment, then make sure it describes the code it appears near. Don’t offer systemwide information in the context of a local comment. Consider, for example, the javadoc comment below. Aside from the fact that it is horribly redundant, it also offers information about the default port. And yet the function has absolutely no control over
what that default is. The comment is not describing the function, but some other, far distant part of the system. Of course there is no guarantee that this comment will be changed when the code containing the default is changed.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
* Port on which fitnesse would run. Defaults to &lt;b&gt;8082&lt;/b&gt;.
*
* @param fitnessePort
*/</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFitnessePort</span><span class="token punctuation">(</span><span class="token keyword">int</span> fitnessePort<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>fitnessePort <span class="token operator">=</span> fitnessePort<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="too-much-information"><a href="#too-much-information" class="header-anchor">#</a> Too Much Information</h3> <p>Don’t put interesting historical discussions or irrelevant descriptions of details into your
comments. The comment below was extracted from a module designed to test that a func-
tion could encode and decode base64. Other than the RFC number, someone reading this
code has no need for the arcane information contained in the comment.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/*
RFC 2045 - Multipurpose Internet Mail Extensions (MIME)
Part One: Format of Internet Message Bodies
section 6.8. Base64 Content-Transfer-Encoding
The encoding process represents 24-bit groups of input bits as output
strings of 4 encoded characters. Proceeding from left to right, a
24-bit input group is formed by concatenating 3 8-bit input groups.
These 24 bits are then treated as 4 concatenated 6-bit groups, each
of which is translated into a single digit in the base64 alphabet.
When encoding a bit stream via the base64 encoding, the bit stream
must be presumed to be ordered with the most-significant-bit first.
That is, the first bit in the stream will be the high-order bit in
the first 8-bit byte, and the eighth bit will be the low-order bit in
the first 8-bit byte, and so on.
*/</span>
</code></pre></div><h3 id="inobvious-connection"><a href="#inobvious-connection" class="header-anchor">#</a> Inobvious Connection</h3> <p>The connection between a comment and the code it describes should be obvious. If you are going to the trouble to write a comment, then at least you’d like the reader to be able to look at the comment and the code and understand what the comment is talking about.</p> <p>Consider, for example, this comment drawn from apache commons:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/*
* start with an array that is big enough to hold all the pixels
* (plus filter bytes), and an extra 200 bytes for header info
*/</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>pngBytes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>height <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">200</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>What is a filter byte? Does it relate to the <code>+1</code>? Or to the <code>*3</code>? Both? Is a pixel a byte? Why <code>200</code>? The purpose of a comment is to explain code that does not explain itself. It is a pity when a comment needs its own explanation.</p> <h3 id="function-headers"><a href="#function-headers" class="header-anchor">#</a> Function Headers</h3> <p>Short functions don’t need much description. A well-chosen name for a small function that does one thing is usually better than a comment header.</p> <h3 id="javadocs-in-nonpublic-code"><a href="#javadocs-in-nonpublic-code" class="header-anchor">#</a> Javadocs in Nonpublic Code</h3> <p>As useful as javadocs are for public APIs, they are anathema to code that is not intended for public consumption. Generating javadoc pages for the classes and functions inside a system is not generally useful, and the extra formality of the javadoc comments amounts to little more than cruft and distraction.</p> <h3 id="example"><a href="#example" class="header-anchor">#</a> Example</h3> <p>I wrote the module in Listing 4-7 for the first <em>XP Immersion</em>. It was intended to be an
example of bad coding and commenting style. Kent Beck then refactored this code into a
much more pleasant form in front of several dozen enthusiastic students. Later I adapted
the example for my book <em>Agile Software Development, Principles, Patterns, and Practices</em>
and the first of my <em>Craftsman</em> articles published in <em>Software Development</em> magazine.</p> <p>What I find fascinating about this module is that there was a time when many of us
would have considered it “well documented.” Now we see it as a small mess. See how
many different comment problems you can find.</p> <h4 id="listing-4-7"><a href="#listing-4-7" class="header-anchor">#</a> Listing 4-7</h4> <p><strong>GeneratePrimes.java</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
* This class Generates prime numbers up to a user specified
* maximum. The algorithm used is the Sieve of Eratosthenes.
* &lt;p&gt;
* Eratosthenes of Cyrene, b. c. 276 BC, Cyrene, Libya --
* d. c. 194, Alexandria. The first man to calculate the
* circumference of the Earth. Also known for working on
* calendars with leap years and ran the library at Alexandria.
* &lt;p&gt;
* The algorithm is quite simple. Given an array of integers
* starting at 2. Cross out all multiples of 2. Find the next
* uncrossed integer, and cross out all of its multiples.
* Repeat untilyou have passed the square root of the maximum
* value.
*
* @author Alphonse
* @version 13 Feb 2002 atp
*/</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GeneratePrimes</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * @param maxValue is the generation limit.
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">generatePrimes</span><span class="token punctuation">(</span><span class="token keyword">int</span> maxValue<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>maxValue <span class="token operator">&gt;=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// the only valid case</span>
        <span class="token punctuation">{</span>
            <span class="token comment">// declarations</span>
            <span class="token keyword">int</span> s <span class="token operator">=</span> maxValue <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// size of array</span>
            <span class="token keyword">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">boolean</span><span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> i<span class="token punctuation">;</span>
            <span class="token comment">// initialize array to true.</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> s<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
                f<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token comment">// get rid of known non-primes</span>
            f<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> f<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token comment">// sieve</span>
            <span class="token keyword">int</span> j<span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// if i is uncrossed, cross its multiples.</span>
                <span class="token punctuation">{</span>
                    <span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> i<span class="token punctuation">;</span> j <span class="token operator">&lt;</span> s<span class="token punctuation">;</span> j <span class="token operator">+=</span> i<span class="token punctuation">)</span>
                    f<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// multiple is not prime</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// how many primes are there?</span>
            <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> s<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
                count<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token comment">// bump count.</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> primes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token comment">// move the primes into the result</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> s<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// if prime</span>
                primes<span class="token punctuation">[</span>j<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> primes<span class="token punctuation">;</span> <span class="token comment">// return the primes</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token comment">// maxValue &lt; 2</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// return null array if bad input.</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>In Listing 4-8 you can see a refactored version of the same module. Note that the use of comments is significantly restrained. There are just two comments in the whole module. Both comments are explanatory in nature.</p> <h4 id="listing-4-8"><a href="#listing-4-8" class="header-anchor">#</a> Listing 4-8</h4> <p><strong>PrimeGenerator.java (refactored)</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
* This class Generates prime numbers up to a user specified
* maximum. The algorithm used is the Sieve of Eratosthenes.
* Given an array of integers starting at 2:
* Find the first uncrossed integer, and cross out all its
* multiples. Repeat until there are no more multiples
* in the array.
*/</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PrimeGenerator</span>
<span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span> crossedOut<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> result<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">generatePrimes</span><span class="token punctuation">(</span><span class="token keyword">int</span> maxValue<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>maxValue <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span>
        <span class="token punctuation">{</span>
            <span class="token function">uncrossIntegersUpTo</span><span class="token punctuation">(</span>maxValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">crossOutMultiples</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">putUncrossedIntegersIntoResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> result<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">uncrossIntegersUpTo</span><span class="token punctuation">(</span><span class="token keyword">int</span> maxValue<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        crossedOut <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">boolean</span><span class="token punctuation">[</span>maxValue <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> crossedOut<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
            crossedOut<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">crossOutMultiples</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">int</span> limit <span class="token operator">=</span> <span class="token function">determineIterationLimit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> limit<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">notCrossed</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token function">crossOutMultiplesOf</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">determineIterationLimit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Every multiple in the array has a prime factor that</span>
        <span class="token comment">// is less than or equal to the root of the array size,</span>
        <span class="token comment">// so we don't have to cross out multiples of numbers</span>
        <span class="token comment">// larger than that root.</span>
        <span class="token keyword">double</span> iterationLimit <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span>crossedOut<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> iterationLimit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">crossOutMultiplesOf</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> multiple <span class="token operator">=</span> <span class="token number">2</span><span class="token operator">*</span>i<span class="token punctuation">;</span> multiple <span class="token operator">&lt;</span> crossedOut<span class="token punctuation">.</span>length<span class="token punctuation">;</span> multiple <span class="token operator">+=</span> i<span class="token punctuation">)</span>
            crossedOut<span class="token punctuation">[</span>multiple<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">notCrossed</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> crossedOut<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">putUncrossedIntegersIntoResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token function">numberOfUncrossedIntegers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> crossedOut<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">notCrossed</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>
               result<span class="token punctuation">[</span>j<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">numberOfUncrossedIntegers</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> crossedOut<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">notCrossed</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>
                count<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> count<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>It is easy to argue that the first comment is redundant because it reads very much like <code>thegeneratePrimes</code> function itself. Still, I think the comment serves to ease the reader into the algorithm, so I’m inclined to leave it.</p> <p>The second argument is almost certainly necessary. It explains the rationale behind the use of the square root as the loop limit. I could find no simple variable name, nor any different coding structure that made this point clear. On the other hand, the use of the square root might be a conceit. Am I really saving that much time by limiting the iteration to the square root? Could the calculation of the square root take more time than I’m saving?</p> <p>It’s worth thinking about. Using the square root as the iteration limit satisfies the old C and assembly language hacker in me, but I’m not convinced it’s worth the time and effort that everyone else will expend to understand it.</p> <h2 id="bibliography"><a href="#bibliography" class="header-anchor">#</a> Bibliography</h2> <p><strong>[KP78]:</strong> Kernighan and Plaugher, <em>The Elements of Programming Style</em> , 2d. ed., McGrawHill,1978.</p> <p><strong>Explanation</strong></p> <p><em>2. The current trend for IDEs to check spelling in comments will be a balm for those of us who read a lot of code.</em></p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----><!----><!----></div></div>
    <script src="/docs/assets/js/app.72e120a4.js" defer></script><script src="/docs/assets/js/2.063f64f2.js" defer></script><script src="/docs/assets/js/436.fd176ab7.js" defer></script><script src="/docs/assets/js/91.cee80a96.js" defer></script>
  </body>
</html>
