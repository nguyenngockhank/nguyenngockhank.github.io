<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>10. Classes | Nguyễn Khánk&#39;s Wiki</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="apple-touch-icon" sizes="180x180" href="../public/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../public/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../public/favicons/favicon-16x16.png">
    <link rel="manifest" href="../public/favicons/manifest.json">
    <link rel="mask-icon" href="../public/favicons/safari-pinned-tab.svg" color="#3a0839">
    <link rel="shortcut icon" href="../public/favicons/favicon.ico">
    <meta name="description" content="Wikipedia của tui">
    <meta name="msapplication-TileColor" content="#3a0839">
    <meta name="msapplication-config" content="../public/favicons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    
    <link rel="preload" href="/docs/assets/css/0.styles.416feb4e.css" as="style"><link rel="preload" href="/docs/assets/js/app.72e120a4.js" as="script"><link rel="preload" href="/docs/assets/js/2.063f64f2.js" as="script"><link rel="preload" href="/docs/assets/js/427.369a6b99.js" as="script"><link rel="preload" href="/docs/assets/js/91.cee80a96.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.b1a0f134.js"><link rel="prefetch" href="/docs/assets/js/100.280b6751.js"><link rel="prefetch" href="/docs/assets/js/101.0f6a8e9c.js"><link rel="prefetch" href="/docs/assets/js/102.fd45a969.js"><link rel="prefetch" href="/docs/assets/js/103.4c68a4a7.js"><link rel="prefetch" href="/docs/assets/js/104.fdb4b47d.js"><link rel="prefetch" href="/docs/assets/js/105.4838d32a.js"><link rel="prefetch" href="/docs/assets/js/106.07707e03.js"><link rel="prefetch" href="/docs/assets/js/107.b693efbc.js"><link rel="prefetch" href="/docs/assets/js/108.708e0a64.js"><link rel="prefetch" href="/docs/assets/js/109.3379dadf.js"><link rel="prefetch" href="/docs/assets/js/11.f0b19e6a.js"><link rel="prefetch" href="/docs/assets/js/110.9a120aa1.js"><link rel="prefetch" href="/docs/assets/js/111.979383ec.js"><link rel="prefetch" href="/docs/assets/js/112.d3eb1b7d.js"><link rel="prefetch" href="/docs/assets/js/113.7ca9b094.js"><link rel="prefetch" href="/docs/assets/js/114.89d85ae2.js"><link rel="prefetch" href="/docs/assets/js/115.bc128c23.js"><link rel="prefetch" href="/docs/assets/js/116.59aa125b.js"><link rel="prefetch" href="/docs/assets/js/117.1b87b09a.js"><link rel="prefetch" href="/docs/assets/js/118.705b37ec.js"><link rel="prefetch" href="/docs/assets/js/119.ae49c8ea.js"><link rel="prefetch" href="/docs/assets/js/12.5012f344.js"><link rel="prefetch" href="/docs/assets/js/120.a41a6ed7.js"><link rel="prefetch" href="/docs/assets/js/121.5217bda3.js"><link rel="prefetch" href="/docs/assets/js/122.9e0332c5.js"><link rel="prefetch" href="/docs/assets/js/123.3e6e471a.js"><link rel="prefetch" href="/docs/assets/js/124.7ece1cea.js"><link rel="prefetch" href="/docs/assets/js/125.6958c610.js"><link rel="prefetch" href="/docs/assets/js/126.75c6c8d8.js"><link rel="prefetch" href="/docs/assets/js/127.d9c321c1.js"><link rel="prefetch" href="/docs/assets/js/128.ae93a447.js"><link rel="prefetch" href="/docs/assets/js/129.79319de1.js"><link rel="prefetch" href="/docs/assets/js/13.cfe29fbf.js"><link rel="prefetch" href="/docs/assets/js/130.539551b5.js"><link rel="prefetch" href="/docs/assets/js/131.d8805fad.js"><link rel="prefetch" href="/docs/assets/js/132.e97ab052.js"><link rel="prefetch" href="/docs/assets/js/133.e4f8cd24.js"><link rel="prefetch" href="/docs/assets/js/134.a93ecb43.js"><link rel="prefetch" href="/docs/assets/js/135.4dcb4eb1.js"><link rel="prefetch" href="/docs/assets/js/136.70ba9b37.js"><link rel="prefetch" href="/docs/assets/js/137.f1b1cc31.js"><link rel="prefetch" href="/docs/assets/js/138.10bf9357.js"><link rel="prefetch" href="/docs/assets/js/139.a4659ede.js"><link rel="prefetch" href="/docs/assets/js/14.97ae6044.js"><link rel="prefetch" href="/docs/assets/js/140.4bcc835f.js"><link rel="prefetch" href="/docs/assets/js/141.d750398c.js"><link rel="prefetch" href="/docs/assets/js/142.247a96d3.js"><link rel="prefetch" href="/docs/assets/js/143.be0b8730.js"><link rel="prefetch" href="/docs/assets/js/144.b5507c76.js"><link rel="prefetch" href="/docs/assets/js/145.b511595e.js"><link rel="prefetch" href="/docs/assets/js/146.7311a8cb.js"><link rel="prefetch" href="/docs/assets/js/147.b0f8d33b.js"><link rel="prefetch" href="/docs/assets/js/148.e5cb1382.js"><link rel="prefetch" href="/docs/assets/js/149.df296bcf.js"><link rel="prefetch" href="/docs/assets/js/15.1e64aa20.js"><link rel="prefetch" href="/docs/assets/js/150.8696339a.js"><link rel="prefetch" href="/docs/assets/js/151.7f8e07db.js"><link rel="prefetch" href="/docs/assets/js/152.732b6b9c.js"><link rel="prefetch" href="/docs/assets/js/153.6f5643a1.js"><link rel="prefetch" href="/docs/assets/js/154.254915cf.js"><link rel="prefetch" href="/docs/assets/js/155.56e84273.js"><link rel="prefetch" href="/docs/assets/js/156.f1f4f23e.js"><link rel="prefetch" href="/docs/assets/js/157.80058301.js"><link rel="prefetch" href="/docs/assets/js/158.98aae5ce.js"><link rel="prefetch" href="/docs/assets/js/159.5a49c731.js"><link rel="prefetch" href="/docs/assets/js/16.43aba07c.js"><link rel="prefetch" href="/docs/assets/js/160.c46d6037.js"><link rel="prefetch" href="/docs/assets/js/161.044915fe.js"><link rel="prefetch" href="/docs/assets/js/162.4008a392.js"><link rel="prefetch" href="/docs/assets/js/163.79f52f26.js"><link rel="prefetch" href="/docs/assets/js/164.5ea6eccf.js"><link rel="prefetch" href="/docs/assets/js/165.04fc916e.js"><link rel="prefetch" href="/docs/assets/js/166.5e133106.js"><link rel="prefetch" href="/docs/assets/js/167.5c39d6c8.js"><link rel="prefetch" href="/docs/assets/js/168.168f38f0.js"><link rel="prefetch" href="/docs/assets/js/169.aa2aaab1.js"><link rel="prefetch" href="/docs/assets/js/17.a5a98d3a.js"><link rel="prefetch" href="/docs/assets/js/170.47df91d5.js"><link rel="prefetch" href="/docs/assets/js/171.0b3152f5.js"><link rel="prefetch" href="/docs/assets/js/172.571892bd.js"><link rel="prefetch" href="/docs/assets/js/173.fefd3ed4.js"><link rel="prefetch" href="/docs/assets/js/174.896fafce.js"><link rel="prefetch" href="/docs/assets/js/175.62b41c04.js"><link rel="prefetch" href="/docs/assets/js/176.74b475ab.js"><link rel="prefetch" href="/docs/assets/js/177.9999c420.js"><link rel="prefetch" href="/docs/assets/js/178.2b6e61e8.js"><link rel="prefetch" href="/docs/assets/js/179.6adcd574.js"><link rel="prefetch" href="/docs/assets/js/18.6c16eedc.js"><link rel="prefetch" href="/docs/assets/js/180.3257fa80.js"><link rel="prefetch" href="/docs/assets/js/181.9419dc39.js"><link rel="prefetch" href="/docs/assets/js/182.1c4efea5.js"><link rel="prefetch" href="/docs/assets/js/183.f3468d84.js"><link rel="prefetch" href="/docs/assets/js/184.e3dc5a42.js"><link rel="prefetch" href="/docs/assets/js/185.3cfa03d8.js"><link rel="prefetch" href="/docs/assets/js/186.17549903.js"><link rel="prefetch" href="/docs/assets/js/187.684f08bb.js"><link rel="prefetch" href="/docs/assets/js/188.60296f9b.js"><link rel="prefetch" href="/docs/assets/js/189.27085ed8.js"><link rel="prefetch" href="/docs/assets/js/19.7b99ed54.js"><link rel="prefetch" href="/docs/assets/js/190.577684f5.js"><link rel="prefetch" href="/docs/assets/js/191.0357a40d.js"><link rel="prefetch" href="/docs/assets/js/192.aaac3bdf.js"><link rel="prefetch" href="/docs/assets/js/193.c65152b9.js"><link rel="prefetch" href="/docs/assets/js/194.a4c5ed1b.js"><link rel="prefetch" href="/docs/assets/js/195.692a5e0c.js"><link rel="prefetch" href="/docs/assets/js/196.43477ae9.js"><link rel="prefetch" href="/docs/assets/js/197.0256cd08.js"><link rel="prefetch" href="/docs/assets/js/198.34e3f8e9.js"><link rel="prefetch" href="/docs/assets/js/199.47f4251e.js"><link rel="prefetch" href="/docs/assets/js/20.8a340028.js"><link rel="prefetch" href="/docs/assets/js/200.6bcc000d.js"><link rel="prefetch" href="/docs/assets/js/201.acce123a.js"><link rel="prefetch" href="/docs/assets/js/202.c4d70995.js"><link rel="prefetch" href="/docs/assets/js/203.f1cebc29.js"><link rel="prefetch" href="/docs/assets/js/204.2435c0d0.js"><link rel="prefetch" href="/docs/assets/js/205.75835ef2.js"><link rel="prefetch" href="/docs/assets/js/206.8c299727.js"><link rel="prefetch" href="/docs/assets/js/207.99a4552e.js"><link rel="prefetch" href="/docs/assets/js/208.400f751f.js"><link rel="prefetch" href="/docs/assets/js/209.7298827f.js"><link rel="prefetch" href="/docs/assets/js/21.5e190285.js"><link rel="prefetch" href="/docs/assets/js/210.0596ea73.js"><link rel="prefetch" href="/docs/assets/js/211.cbf586e4.js"><link rel="prefetch" href="/docs/assets/js/212.b5906f59.js"><link rel="prefetch" href="/docs/assets/js/213.b5f981b1.js"><link rel="prefetch" href="/docs/assets/js/214.633fcc59.js"><link rel="prefetch" href="/docs/assets/js/215.f436ff7d.js"><link rel="prefetch" href="/docs/assets/js/216.fb8c636a.js"><link rel="prefetch" href="/docs/assets/js/217.b76709cb.js"><link rel="prefetch" href="/docs/assets/js/218.0fb7c4aa.js"><link rel="prefetch" href="/docs/assets/js/219.183c6f8f.js"><link rel="prefetch" href="/docs/assets/js/22.f4e3a032.js"><link rel="prefetch" href="/docs/assets/js/220.b38892ef.js"><link rel="prefetch" href="/docs/assets/js/221.3191e55a.js"><link rel="prefetch" href="/docs/assets/js/222.771eec8c.js"><link rel="prefetch" href="/docs/assets/js/223.9bdd69a1.js"><link rel="prefetch" href="/docs/assets/js/224.22847491.js"><link rel="prefetch" href="/docs/assets/js/225.c8d2191d.js"><link rel="prefetch" href="/docs/assets/js/226.b067f9b9.js"><link rel="prefetch" href="/docs/assets/js/227.128c32eb.js"><link rel="prefetch" href="/docs/assets/js/228.cde15646.js"><link rel="prefetch" href="/docs/assets/js/229.527d3b9a.js"><link rel="prefetch" href="/docs/assets/js/23.607090bc.js"><link rel="prefetch" href="/docs/assets/js/230.8fc69047.js"><link rel="prefetch" href="/docs/assets/js/231.a865e6f3.js"><link rel="prefetch" href="/docs/assets/js/232.272a2d2e.js"><link rel="prefetch" href="/docs/assets/js/233.0c4b25ab.js"><link rel="prefetch" href="/docs/assets/js/234.a22c5083.js"><link rel="prefetch" href="/docs/assets/js/235.e2466ac7.js"><link rel="prefetch" href="/docs/assets/js/236.7943c825.js"><link rel="prefetch" href="/docs/assets/js/237.58b165e0.js"><link rel="prefetch" href="/docs/assets/js/238.4eb85d29.js"><link rel="prefetch" href="/docs/assets/js/239.32eabec9.js"><link rel="prefetch" href="/docs/assets/js/24.406ccf4d.js"><link rel="prefetch" href="/docs/assets/js/240.72483110.js"><link rel="prefetch" href="/docs/assets/js/241.1fb0b914.js"><link rel="prefetch" href="/docs/assets/js/242.ae52cc30.js"><link rel="prefetch" href="/docs/assets/js/243.e0a0f405.js"><link rel="prefetch" href="/docs/assets/js/244.a687a36f.js"><link rel="prefetch" href="/docs/assets/js/245.9e1c6699.js"><link rel="prefetch" href="/docs/assets/js/246.9f0f7dee.js"><link rel="prefetch" href="/docs/assets/js/247.8fd32ff4.js"><link rel="prefetch" href="/docs/assets/js/248.d342a9c1.js"><link rel="prefetch" href="/docs/assets/js/249.f63ca6ab.js"><link rel="prefetch" href="/docs/assets/js/25.9b365520.js"><link rel="prefetch" href="/docs/assets/js/250.5028461e.js"><link rel="prefetch" href="/docs/assets/js/251.700a9ad2.js"><link rel="prefetch" href="/docs/assets/js/252.65863493.js"><link rel="prefetch" href="/docs/assets/js/253.c7f1408a.js"><link rel="prefetch" href="/docs/assets/js/254.e80beaaa.js"><link rel="prefetch" href="/docs/assets/js/255.f45d3357.js"><link rel="prefetch" href="/docs/assets/js/256.d042d44a.js"><link rel="prefetch" href="/docs/assets/js/257.7c75a92f.js"><link rel="prefetch" href="/docs/assets/js/258.c146c4a3.js"><link rel="prefetch" href="/docs/assets/js/259.de0af5eb.js"><link rel="prefetch" href="/docs/assets/js/26.30abc32c.js"><link rel="prefetch" href="/docs/assets/js/260.839e11e8.js"><link rel="prefetch" href="/docs/assets/js/261.97bb0ed0.js"><link rel="prefetch" href="/docs/assets/js/262.070934e7.js"><link rel="prefetch" href="/docs/assets/js/263.adc423b4.js"><link rel="prefetch" href="/docs/assets/js/264.9b8a39d8.js"><link rel="prefetch" href="/docs/assets/js/265.df06214b.js"><link rel="prefetch" href="/docs/assets/js/266.eae70f27.js"><link rel="prefetch" href="/docs/assets/js/267.aa6494db.js"><link rel="prefetch" href="/docs/assets/js/268.8992dea6.js"><link rel="prefetch" href="/docs/assets/js/269.8f7df18f.js"><link rel="prefetch" href="/docs/assets/js/27.24fa1cc9.js"><link rel="prefetch" href="/docs/assets/js/270.7121293a.js"><link rel="prefetch" href="/docs/assets/js/271.d6adf116.js"><link rel="prefetch" href="/docs/assets/js/272.2b9157fb.js"><link rel="prefetch" href="/docs/assets/js/273.f40dbb86.js"><link rel="prefetch" href="/docs/assets/js/274.2b389e67.js"><link rel="prefetch" href="/docs/assets/js/275.227f5ac1.js"><link rel="prefetch" href="/docs/assets/js/276.21fdff2c.js"><link rel="prefetch" href="/docs/assets/js/277.29078436.js"><link rel="prefetch" href="/docs/assets/js/278.dc8182d4.js"><link rel="prefetch" href="/docs/assets/js/279.5f9b2ec0.js"><link rel="prefetch" href="/docs/assets/js/28.ca336578.js"><link rel="prefetch" href="/docs/assets/js/280.de8e5ebd.js"><link rel="prefetch" href="/docs/assets/js/281.16c7b05c.js"><link rel="prefetch" href="/docs/assets/js/282.be2a917f.js"><link rel="prefetch" href="/docs/assets/js/283.220947c2.js"><link rel="prefetch" href="/docs/assets/js/284.da9160df.js"><link rel="prefetch" href="/docs/assets/js/285.fa7630a9.js"><link rel="prefetch" href="/docs/assets/js/286.43812755.js"><link rel="prefetch" href="/docs/assets/js/287.7baefd3a.js"><link rel="prefetch" href="/docs/assets/js/288.fb454a1e.js"><link rel="prefetch" href="/docs/assets/js/289.d36a6be4.js"><link rel="prefetch" href="/docs/assets/js/29.b1a6618d.js"><link rel="prefetch" href="/docs/assets/js/290.d1aad767.js"><link rel="prefetch" href="/docs/assets/js/291.50f9a3bb.js"><link rel="prefetch" href="/docs/assets/js/292.e1e6afc2.js"><link rel="prefetch" href="/docs/assets/js/293.99027ef7.js"><link rel="prefetch" href="/docs/assets/js/294.2ef9fa48.js"><link rel="prefetch" href="/docs/assets/js/295.0fcb2629.js"><link rel="prefetch" href="/docs/assets/js/296.c52ba386.js"><link rel="prefetch" href="/docs/assets/js/297.0230dbd3.js"><link rel="prefetch" href="/docs/assets/js/298.716f388d.js"><link rel="prefetch" href="/docs/assets/js/299.61961772.js"><link rel="prefetch" href="/docs/assets/js/3.be60361a.js"><link rel="prefetch" href="/docs/assets/js/30.9781de99.js"><link rel="prefetch" href="/docs/assets/js/300.cde52e12.js"><link rel="prefetch" href="/docs/assets/js/301.076db9ab.js"><link rel="prefetch" href="/docs/assets/js/302.72c04a84.js"><link rel="prefetch" href="/docs/assets/js/303.214320de.js"><link rel="prefetch" href="/docs/assets/js/304.54f665b0.js"><link rel="prefetch" href="/docs/assets/js/305.a55bb868.js"><link rel="prefetch" href="/docs/assets/js/306.fdc90b88.js"><link rel="prefetch" href="/docs/assets/js/307.00058bbe.js"><link rel="prefetch" href="/docs/assets/js/308.94d8ea34.js"><link rel="prefetch" href="/docs/assets/js/309.13e2971e.js"><link rel="prefetch" href="/docs/assets/js/31.fa77e7a5.js"><link rel="prefetch" href="/docs/assets/js/310.c2aa274b.js"><link rel="prefetch" href="/docs/assets/js/311.e269e39b.js"><link rel="prefetch" href="/docs/assets/js/312.5332a8cc.js"><link rel="prefetch" href="/docs/assets/js/313.60d58d5b.js"><link rel="prefetch" href="/docs/assets/js/314.2ad98766.js"><link rel="prefetch" href="/docs/assets/js/315.9925c28b.js"><link rel="prefetch" href="/docs/assets/js/316.26d689cc.js"><link rel="prefetch" href="/docs/assets/js/317.baa47f7b.js"><link rel="prefetch" href="/docs/assets/js/318.644969f2.js"><link rel="prefetch" href="/docs/assets/js/319.a586db0e.js"><link rel="prefetch" href="/docs/assets/js/32.9359f992.js"><link rel="prefetch" href="/docs/assets/js/320.e6e9a67a.js"><link rel="prefetch" href="/docs/assets/js/321.10cb3143.js"><link rel="prefetch" href="/docs/assets/js/322.74095545.js"><link rel="prefetch" href="/docs/assets/js/323.cd41b7d8.js"><link rel="prefetch" href="/docs/assets/js/324.129d09b1.js"><link rel="prefetch" href="/docs/assets/js/325.ac12a297.js"><link rel="prefetch" href="/docs/assets/js/326.9c1e0be9.js"><link rel="prefetch" href="/docs/assets/js/327.25337a79.js"><link rel="prefetch" href="/docs/assets/js/328.79c1fee0.js"><link rel="prefetch" href="/docs/assets/js/329.12a3dc34.js"><link rel="prefetch" href="/docs/assets/js/33.606454a1.js"><link rel="prefetch" href="/docs/assets/js/330.efb6b149.js"><link rel="prefetch" href="/docs/assets/js/331.e5bec2ce.js"><link rel="prefetch" href="/docs/assets/js/332.203cc3cc.js"><link rel="prefetch" href="/docs/assets/js/333.7866c0d2.js"><link rel="prefetch" href="/docs/assets/js/334.0082e5c2.js"><link rel="prefetch" href="/docs/assets/js/335.b5f83fcc.js"><link rel="prefetch" href="/docs/assets/js/336.8ac6864b.js"><link rel="prefetch" href="/docs/assets/js/337.63cb9a74.js"><link rel="prefetch" href="/docs/assets/js/338.d994c327.js"><link rel="prefetch" href="/docs/assets/js/339.bb074452.js"><link rel="prefetch" href="/docs/assets/js/34.ebb0a999.js"><link rel="prefetch" href="/docs/assets/js/340.974af885.js"><link rel="prefetch" href="/docs/assets/js/341.5e43e84a.js"><link rel="prefetch" href="/docs/assets/js/342.fcac6682.js"><link rel="prefetch" href="/docs/assets/js/343.0e1f7ee1.js"><link rel="prefetch" href="/docs/assets/js/344.6b3cb9c4.js"><link rel="prefetch" href="/docs/assets/js/345.49b44c83.js"><link rel="prefetch" href="/docs/assets/js/346.995f3a4d.js"><link rel="prefetch" href="/docs/assets/js/347.96d7f280.js"><link rel="prefetch" href="/docs/assets/js/348.d709bd24.js"><link rel="prefetch" href="/docs/assets/js/349.c8f4b79f.js"><link rel="prefetch" href="/docs/assets/js/35.cf0c5cff.js"><link rel="prefetch" href="/docs/assets/js/350.c7b0fabe.js"><link rel="prefetch" href="/docs/assets/js/351.750b865a.js"><link rel="prefetch" href="/docs/assets/js/352.43378d4e.js"><link rel="prefetch" href="/docs/assets/js/353.f2925ad9.js"><link rel="prefetch" href="/docs/assets/js/354.3bd82fc0.js"><link rel="prefetch" href="/docs/assets/js/355.b6d2159b.js"><link rel="prefetch" href="/docs/assets/js/356.6982032f.js"><link rel="prefetch" href="/docs/assets/js/357.4c49d091.js"><link rel="prefetch" href="/docs/assets/js/358.58778375.js"><link rel="prefetch" href="/docs/assets/js/359.d7a3eed7.js"><link rel="prefetch" href="/docs/assets/js/36.ea4496fb.js"><link rel="prefetch" href="/docs/assets/js/360.2bb18f61.js"><link rel="prefetch" href="/docs/assets/js/361.0527c11f.js"><link rel="prefetch" href="/docs/assets/js/362.759f2caf.js"><link rel="prefetch" href="/docs/assets/js/363.5c7bd2e3.js"><link rel="prefetch" href="/docs/assets/js/364.6d60739f.js"><link rel="prefetch" href="/docs/assets/js/365.e1ed33cd.js"><link rel="prefetch" href="/docs/assets/js/366.e26ed3b5.js"><link rel="prefetch" href="/docs/assets/js/367.387c8b29.js"><link rel="prefetch" href="/docs/assets/js/368.2e90639c.js"><link rel="prefetch" href="/docs/assets/js/369.c8a7d6e9.js"><link rel="prefetch" href="/docs/assets/js/37.76126470.js"><link rel="prefetch" href="/docs/assets/js/370.3861cb69.js"><link rel="prefetch" href="/docs/assets/js/371.bd160e8c.js"><link rel="prefetch" href="/docs/assets/js/372.b0bfa093.js"><link rel="prefetch" href="/docs/assets/js/373.0c1d5af5.js"><link rel="prefetch" href="/docs/assets/js/374.f962cac0.js"><link rel="prefetch" href="/docs/assets/js/375.b8528c15.js"><link rel="prefetch" href="/docs/assets/js/376.968e8efe.js"><link rel="prefetch" href="/docs/assets/js/377.74cad1ce.js"><link rel="prefetch" href="/docs/assets/js/378.01fcaa4a.js"><link rel="prefetch" href="/docs/assets/js/379.3ceb63b2.js"><link rel="prefetch" href="/docs/assets/js/38.4f63d6d6.js"><link rel="prefetch" href="/docs/assets/js/380.baeec066.js"><link rel="prefetch" href="/docs/assets/js/381.3858acf9.js"><link rel="prefetch" href="/docs/assets/js/382.d567c6e5.js"><link rel="prefetch" href="/docs/assets/js/383.1b2d5203.js"><link rel="prefetch" href="/docs/assets/js/384.68b6d85a.js"><link rel="prefetch" href="/docs/assets/js/385.3039bbac.js"><link rel="prefetch" href="/docs/assets/js/386.39cc596b.js"><link rel="prefetch" href="/docs/assets/js/387.3eb0f07d.js"><link rel="prefetch" href="/docs/assets/js/388.def7dfa2.js"><link rel="prefetch" href="/docs/assets/js/389.a62affc9.js"><link rel="prefetch" href="/docs/assets/js/39.b2ea3bdb.js"><link rel="prefetch" href="/docs/assets/js/390.89bc6ba7.js"><link rel="prefetch" href="/docs/assets/js/391.534e2707.js"><link rel="prefetch" href="/docs/assets/js/392.46f48644.js"><link rel="prefetch" href="/docs/assets/js/393.290cee2e.js"><link rel="prefetch" href="/docs/assets/js/394.30049985.js"><link rel="prefetch" href="/docs/assets/js/395.db1c1d4d.js"><link rel="prefetch" href="/docs/assets/js/396.1ece0725.js"><link rel="prefetch" href="/docs/assets/js/397.f9eac505.js"><link rel="prefetch" href="/docs/assets/js/398.aec783b3.js"><link rel="prefetch" href="/docs/assets/js/399.41ce8c01.js"><link rel="prefetch" href="/docs/assets/js/4.d8227897.js"><link rel="prefetch" href="/docs/assets/js/40.359c4485.js"><link rel="prefetch" href="/docs/assets/js/400.27bcbcf0.js"><link rel="prefetch" href="/docs/assets/js/401.8cc920f4.js"><link rel="prefetch" href="/docs/assets/js/402.5797bd89.js"><link rel="prefetch" href="/docs/assets/js/403.d6c32d9d.js"><link rel="prefetch" href="/docs/assets/js/404.a0e2e7a6.js"><link rel="prefetch" href="/docs/assets/js/405.db6e7674.js"><link rel="prefetch" href="/docs/assets/js/406.3490c772.js"><link rel="prefetch" href="/docs/assets/js/407.eafb5264.js"><link rel="prefetch" href="/docs/assets/js/408.341c0ecf.js"><link rel="prefetch" href="/docs/assets/js/409.8c1a841c.js"><link rel="prefetch" href="/docs/assets/js/41.68e9c340.js"><link rel="prefetch" href="/docs/assets/js/410.c16acdec.js"><link rel="prefetch" href="/docs/assets/js/411.2c93d669.js"><link rel="prefetch" href="/docs/assets/js/412.219c76d4.js"><link rel="prefetch" href="/docs/assets/js/413.cf027e0d.js"><link rel="prefetch" href="/docs/assets/js/414.874c42fd.js"><link rel="prefetch" href="/docs/assets/js/415.623a3981.js"><link rel="prefetch" href="/docs/assets/js/416.f9b40ea6.js"><link rel="prefetch" href="/docs/assets/js/417.ff4a6a2d.js"><link rel="prefetch" href="/docs/assets/js/418.32c3807a.js"><link rel="prefetch" href="/docs/assets/js/419.4ce53817.js"><link rel="prefetch" href="/docs/assets/js/42.cfe25c3c.js"><link rel="prefetch" href="/docs/assets/js/420.b3b70070.js"><link rel="prefetch" href="/docs/assets/js/421.6330ee35.js"><link rel="prefetch" href="/docs/assets/js/422.562e743d.js"><link rel="prefetch" href="/docs/assets/js/423.2a1035d0.js"><link rel="prefetch" href="/docs/assets/js/424.fd04f069.js"><link rel="prefetch" href="/docs/assets/js/425.cac74778.js"><link rel="prefetch" href="/docs/assets/js/426.3825ff36.js"><link rel="prefetch" href="/docs/assets/js/428.6e428064.js"><link rel="prefetch" href="/docs/assets/js/429.413554b2.js"><link rel="prefetch" href="/docs/assets/js/43.86b59091.js"><link rel="prefetch" href="/docs/assets/js/430.3802272b.js"><link rel="prefetch" href="/docs/assets/js/431.589cae88.js"><link rel="prefetch" href="/docs/assets/js/432.afda281d.js"><link rel="prefetch" href="/docs/assets/js/433.3c9efc65.js"><link rel="prefetch" href="/docs/assets/js/434.bfb13128.js"><link rel="prefetch" href="/docs/assets/js/435.3d01ee7a.js"><link rel="prefetch" href="/docs/assets/js/436.fd176ab7.js"><link rel="prefetch" href="/docs/assets/js/437.fa7245e1.js"><link rel="prefetch" href="/docs/assets/js/438.f14bcf01.js"><link rel="prefetch" href="/docs/assets/js/439.4eb77264.js"><link rel="prefetch" href="/docs/assets/js/44.624efc6b.js"><link rel="prefetch" href="/docs/assets/js/440.7af8642a.js"><link rel="prefetch" href="/docs/assets/js/441.909a3106.js"><link rel="prefetch" href="/docs/assets/js/442.996aeac2.js"><link rel="prefetch" href="/docs/assets/js/443.286ce6c2.js"><link rel="prefetch" href="/docs/assets/js/444.0630cbd6.js"><link rel="prefetch" href="/docs/assets/js/445.dc45c015.js"><link rel="prefetch" href="/docs/assets/js/446.2b253d6b.js"><link rel="prefetch" href="/docs/assets/js/447.8ca5b29d.js"><link rel="prefetch" href="/docs/assets/js/448.dde0b8eb.js"><link rel="prefetch" href="/docs/assets/js/449.f4b0646b.js"><link rel="prefetch" href="/docs/assets/js/45.874a37c3.js"><link rel="prefetch" href="/docs/assets/js/450.244ddbac.js"><link rel="prefetch" href="/docs/assets/js/451.318d3652.js"><link rel="prefetch" href="/docs/assets/js/452.146bcf07.js"><link rel="prefetch" href="/docs/assets/js/453.b8bb9c3b.js"><link rel="prefetch" href="/docs/assets/js/454.9917399f.js"><link rel="prefetch" href="/docs/assets/js/455.319d0dd2.js"><link rel="prefetch" href="/docs/assets/js/456.a3dd7e9c.js"><link rel="prefetch" href="/docs/assets/js/457.e4a278c5.js"><link rel="prefetch" href="/docs/assets/js/458.c44d9c30.js"><link rel="prefetch" href="/docs/assets/js/459.c8e7f474.js"><link rel="prefetch" href="/docs/assets/js/46.543ef7b2.js"><link rel="prefetch" href="/docs/assets/js/460.3c331d43.js"><link rel="prefetch" href="/docs/assets/js/461.98aa839f.js"><link rel="prefetch" href="/docs/assets/js/462.6c1a456a.js"><link rel="prefetch" href="/docs/assets/js/463.9e40bb6c.js"><link rel="prefetch" href="/docs/assets/js/464.b3da2f37.js"><link rel="prefetch" href="/docs/assets/js/465.8e0950b9.js"><link rel="prefetch" href="/docs/assets/js/466.9d0d3a80.js"><link rel="prefetch" href="/docs/assets/js/467.4dc0ad20.js"><link rel="prefetch" href="/docs/assets/js/468.313f98f7.js"><link rel="prefetch" href="/docs/assets/js/469.f01a81c9.js"><link rel="prefetch" href="/docs/assets/js/47.b543ba1a.js"><link rel="prefetch" href="/docs/assets/js/470.5b2c9790.js"><link rel="prefetch" href="/docs/assets/js/471.294e32d5.js"><link rel="prefetch" href="/docs/assets/js/472.ca84e7ee.js"><link rel="prefetch" href="/docs/assets/js/473.2ca381b3.js"><link rel="prefetch" href="/docs/assets/js/474.d4e6e34f.js"><link rel="prefetch" href="/docs/assets/js/475.72c6a47a.js"><link rel="prefetch" href="/docs/assets/js/476.520ea89d.js"><link rel="prefetch" href="/docs/assets/js/477.ae15e407.js"><link rel="prefetch" href="/docs/assets/js/478.cbd34cd4.js"><link rel="prefetch" href="/docs/assets/js/479.e4b0785b.js"><link rel="prefetch" href="/docs/assets/js/48.57bcc163.js"><link rel="prefetch" href="/docs/assets/js/480.5fc9f42a.js"><link rel="prefetch" href="/docs/assets/js/481.bbb57ae2.js"><link rel="prefetch" href="/docs/assets/js/482.aac47e34.js"><link rel="prefetch" href="/docs/assets/js/483.abbd7f87.js"><link rel="prefetch" href="/docs/assets/js/484.379f8f09.js"><link rel="prefetch" href="/docs/assets/js/485.9b9639f2.js"><link rel="prefetch" href="/docs/assets/js/486.62d77015.js"><link rel="prefetch" href="/docs/assets/js/487.7bb8530a.js"><link rel="prefetch" href="/docs/assets/js/488.fc9acf37.js"><link rel="prefetch" href="/docs/assets/js/489.c3ed95ab.js"><link rel="prefetch" href="/docs/assets/js/49.d31bfb36.js"><link rel="prefetch" href="/docs/assets/js/490.687dcb20.js"><link rel="prefetch" href="/docs/assets/js/491.b266dae9.js"><link rel="prefetch" href="/docs/assets/js/492.97ee2fd5.js"><link rel="prefetch" href="/docs/assets/js/493.b389a038.js"><link rel="prefetch" href="/docs/assets/js/494.aed73152.js"><link rel="prefetch" href="/docs/assets/js/495.381ffed8.js"><link rel="prefetch" href="/docs/assets/js/496.d3b8b785.js"><link rel="prefetch" href="/docs/assets/js/497.68af20e7.js"><link rel="prefetch" href="/docs/assets/js/498.6fde3a10.js"><link rel="prefetch" href="/docs/assets/js/499.b0a62b12.js"><link rel="prefetch" href="/docs/assets/js/5.f0a3497b.js"><link rel="prefetch" href="/docs/assets/js/50.0197c73e.js"><link rel="prefetch" href="/docs/assets/js/500.d94cb147.js"><link rel="prefetch" href="/docs/assets/js/501.944b0099.js"><link rel="prefetch" href="/docs/assets/js/502.6cc3ee8b.js"><link rel="prefetch" href="/docs/assets/js/503.93521879.js"><link rel="prefetch" href="/docs/assets/js/504.ec9ee580.js"><link rel="prefetch" href="/docs/assets/js/505.aeb39883.js"><link rel="prefetch" href="/docs/assets/js/506.44a03e2b.js"><link rel="prefetch" href="/docs/assets/js/507.1b855e7e.js"><link rel="prefetch" href="/docs/assets/js/508.95983f7f.js"><link rel="prefetch" href="/docs/assets/js/509.5dc95e22.js"><link rel="prefetch" href="/docs/assets/js/51.76f4d363.js"><link rel="prefetch" href="/docs/assets/js/510.7f4b53c7.js"><link rel="prefetch" href="/docs/assets/js/511.53274dc8.js"><link rel="prefetch" href="/docs/assets/js/512.12fdcbb1.js"><link rel="prefetch" href="/docs/assets/js/513.028b2379.js"><link rel="prefetch" href="/docs/assets/js/514.8b5be113.js"><link rel="prefetch" href="/docs/assets/js/515.c16f12d2.js"><link rel="prefetch" href="/docs/assets/js/516.a65fe14d.js"><link rel="prefetch" href="/docs/assets/js/517.3e07c036.js"><link rel="prefetch" href="/docs/assets/js/518.340fe4f4.js"><link rel="prefetch" href="/docs/assets/js/519.a76f58e2.js"><link rel="prefetch" href="/docs/assets/js/52.6d462fbc.js"><link rel="prefetch" href="/docs/assets/js/520.5acb294c.js"><link rel="prefetch" href="/docs/assets/js/521.ac06cfc3.js"><link rel="prefetch" href="/docs/assets/js/522.805f7538.js"><link rel="prefetch" href="/docs/assets/js/523.bdbb3cc9.js"><link rel="prefetch" href="/docs/assets/js/524.900f16f5.js"><link rel="prefetch" href="/docs/assets/js/525.1095b729.js"><link rel="prefetch" href="/docs/assets/js/526.42300468.js"><link rel="prefetch" href="/docs/assets/js/527.87dc4b4c.js"><link rel="prefetch" href="/docs/assets/js/528.2e5a63db.js"><link rel="prefetch" href="/docs/assets/js/529.f8e071a4.js"><link rel="prefetch" href="/docs/assets/js/53.5f084480.js"><link rel="prefetch" href="/docs/assets/js/530.150e3ec1.js"><link rel="prefetch" href="/docs/assets/js/531.031cb643.js"><link rel="prefetch" href="/docs/assets/js/532.7c52b538.js"><link rel="prefetch" href="/docs/assets/js/533.eac8007f.js"><link rel="prefetch" href="/docs/assets/js/534.846c79c4.js"><link rel="prefetch" href="/docs/assets/js/535.b0b99199.js"><link rel="prefetch" href="/docs/assets/js/536.622d324e.js"><link rel="prefetch" href="/docs/assets/js/537.75e129bd.js"><link rel="prefetch" href="/docs/assets/js/538.924d38d5.js"><link rel="prefetch" href="/docs/assets/js/539.d97da478.js"><link rel="prefetch" href="/docs/assets/js/54.3f8cc9cb.js"><link rel="prefetch" href="/docs/assets/js/540.16a748ca.js"><link rel="prefetch" href="/docs/assets/js/541.232eadea.js"><link rel="prefetch" href="/docs/assets/js/542.bf4f1be8.js"><link rel="prefetch" href="/docs/assets/js/543.c5439a80.js"><link rel="prefetch" href="/docs/assets/js/544.006a61fb.js"><link rel="prefetch" href="/docs/assets/js/545.21faa340.js"><link rel="prefetch" href="/docs/assets/js/546.a0ab563a.js"><link rel="prefetch" href="/docs/assets/js/547.b67d0bf7.js"><link rel="prefetch" href="/docs/assets/js/548.a4fd9f76.js"><link rel="prefetch" href="/docs/assets/js/549.b0b3c894.js"><link rel="prefetch" href="/docs/assets/js/55.d4d19fe5.js"><link rel="prefetch" href="/docs/assets/js/550.7e9dac5a.js"><link rel="prefetch" href="/docs/assets/js/551.641ee0d8.js"><link rel="prefetch" href="/docs/assets/js/552.9681c8e4.js"><link rel="prefetch" href="/docs/assets/js/553.4a1f3561.js"><link rel="prefetch" href="/docs/assets/js/554.1dc4e5b2.js"><link rel="prefetch" href="/docs/assets/js/555.cf1fdc10.js"><link rel="prefetch" href="/docs/assets/js/556.510722d5.js"><link rel="prefetch" href="/docs/assets/js/56.84133045.js"><link rel="prefetch" href="/docs/assets/js/57.d92f4603.js"><link rel="prefetch" href="/docs/assets/js/58.cee2292c.js"><link rel="prefetch" href="/docs/assets/js/59.3e6d4050.js"><link rel="prefetch" href="/docs/assets/js/6.b278dc4e.js"><link rel="prefetch" href="/docs/assets/js/60.0a263946.js"><link rel="prefetch" href="/docs/assets/js/61.09554251.js"><link rel="prefetch" href="/docs/assets/js/62.a31a5b5c.js"><link rel="prefetch" href="/docs/assets/js/63.63f30ba7.js"><link rel="prefetch" href="/docs/assets/js/64.74bb8806.js"><link rel="prefetch" href="/docs/assets/js/65.0b512734.js"><link rel="prefetch" href="/docs/assets/js/66.7491621a.js"><link rel="prefetch" href="/docs/assets/js/67.5c9e0c40.js"><link rel="prefetch" href="/docs/assets/js/68.72f27108.js"><link rel="prefetch" href="/docs/assets/js/69.4815a4b2.js"><link rel="prefetch" href="/docs/assets/js/7.61e764e7.js"><link rel="prefetch" href="/docs/assets/js/70.dfbfacdc.js"><link rel="prefetch" href="/docs/assets/js/71.a204ef42.js"><link rel="prefetch" href="/docs/assets/js/72.e04aa20b.js"><link rel="prefetch" href="/docs/assets/js/73.107d0242.js"><link rel="prefetch" href="/docs/assets/js/74.5527d3bc.js"><link rel="prefetch" href="/docs/assets/js/75.40a24a9f.js"><link rel="prefetch" href="/docs/assets/js/76.5ec731d3.js"><link rel="prefetch" href="/docs/assets/js/77.24ff2df4.js"><link rel="prefetch" href="/docs/assets/js/78.03089db1.js"><link rel="prefetch" href="/docs/assets/js/79.d427479a.js"><link rel="prefetch" href="/docs/assets/js/8.f178db4a.js"><link rel="prefetch" href="/docs/assets/js/80.363d68e8.js"><link rel="prefetch" href="/docs/assets/js/81.aa0725b9.js"><link rel="prefetch" href="/docs/assets/js/82.cdfba134.js"><link rel="prefetch" href="/docs/assets/js/83.23196e5b.js"><link rel="prefetch" href="/docs/assets/js/84.61bb29e0.js"><link rel="prefetch" href="/docs/assets/js/85.9232f841.js"><link rel="prefetch" href="/docs/assets/js/86.2fa9acd8.js"><link rel="prefetch" href="/docs/assets/js/87.8335ebb8.js"><link rel="prefetch" href="/docs/assets/js/88.78c7a070.js"><link rel="prefetch" href="/docs/assets/js/89.54035c9e.js"><link rel="prefetch" href="/docs/assets/js/9.1156f888.js"><link rel="prefetch" href="/docs/assets/js/90.b03591be.js"><link rel="prefetch" href="/docs/assets/js/92.a50938d8.js"><link rel="prefetch" href="/docs/assets/js/93.283832d8.js"><link rel="prefetch" href="/docs/assets/js/94.04378600.js"><link rel="prefetch" href="/docs/assets/js/95.f2c3d6df.js"><link rel="prefetch" href="/docs/assets/js/96.87b7bafe.js"><link rel="prefetch" href="/docs/assets/js/97.2a8dde9a.js"><link rel="prefetch" href="/docs/assets/js/98.0e912f54.js"><link rel="prefetch" href="/docs/assets/js/99.a00b3686.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.416feb4e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">Nguyễn Khánk's Wiki</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/architect/" class="nav-link">
  Architecture
</a></div><div class="nav-item"><a href="https://nguyenngockhank.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/architect/" class="nav-link">
  Architecture
</a></div><div class="nav-item"><a href="https://nguyenngockhank.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>System Design Case Studies</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/kungfu/case-study/notification/" class="sidebar-link">Design a notification system</a></li><li><a href="/docs/kungfu/case-study/metrics/" class="sidebar-link">Metrics Monitoring &amp; Alerting System</a></li><li><a href="/docs/kungfu/case-study/ad-click/" class="sidebar-link">Ad Click Event Aggregation</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Data storage</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Online tools</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Booking System</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Social Network</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Location-based</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Video</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Chat system</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>The Art of Readable Code</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>A Philosophy of Software Design</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Building Microservices</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>97 Things Every Programmer Should Know</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>NoSql Distilled</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Go</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Others</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_10-classes"><a href="#_10-classes" class="header-anchor">#</a> 10. Classes</h1> <p>So far in this book we have focused on how to write lines and blocks of code well. We have
delved into proper composition of functions and how they interrelate. But for all the attention to the expressiveness of code statements and the functions they comprise, we still don’t have clean code until we’ve paid attention to higher levels of code organization. Let’s
talk about clean classes.</p> <h2 id="class-organization"><a href="#class-organization" class="header-anchor">#</a> Class Organization</h2> <p>Following the standard Java convention, a class should begin with a list of variables. Public static constants, if any, should come first. Then private static variables, followed by private instance variables. There is seldom a good reason to have a public variable.</p> <p>Public functions should follow the list of variables. We like to put the private utilities called by a public function right after the public function itself. This follows the stepdown rule and helps the program read like a newspaper article.</p> <h3 id="encapsulation"><a href="#encapsulation" class="header-anchor">#</a> Encapsulation</h3> <p>We like to keep our variables and utility functions private, but we’re not fanatic about it.
Sometimes we need to make a variable or utility function protected so that it can be accessed by a test. For us, tests rule. If a test in the same package needs to call a function or access a variable, we’ll make it protected or package scope. However, we’ll first look for a way to maintain privacy. Loosening encapsulation is always a last resort.</p> <h2 id="classes-should-be-small"><a href="#classes-should-be-small" class="header-anchor">#</a> Classes Should Be Small!</h2> <p>The first rule of classes is that they should be small. The second rule of classes is that they should be smaller than that. No, we’re not going to repeat the exact same text from the <em>Functions</em> chapter. But as with functions, smaller is the primary rule when it comes to designing classes. As with functions, our immediate question is always “How small?”</p> <p>With functions we measured size by counting physical lines. With classes we use a different measure. We count <em>responsibilities.</em></p> <p>Listing 10-1 outlines a class, <code>SuperDashboard</code>, that exposes about 70 public methods.
Most developers would agree that it’s a bit too super in size. Some developers might refer to <code>SuperDashboard</code> as a “God class.”</p> <h4 id="listing-10-1"><a href="#listing-10-1" class="header-anchor">#</a> Listing 10-1</h4> <p><strong>Too Many Responsibilities</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SuperDashboard</span> <span class="token keyword">extends</span> <span class="token class-name">JFrame</span> <span class="token keyword">implements</span> <span class="token class-name">MetaDataUser</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getCustomizerLanguagePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setSystemConfigPath</span><span class="token punctuation">(</span><span class="token class-name">String</span> systemConfigPath<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getSystemConfigDocument</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setSystemConfigDocument</span><span class="token punctuation">(</span><span class="token class-name">String</span> systemConfigDocument<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">getGuruState</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">getNoviceState</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">getOpenSourceState</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">showObject</span><span class="token punctuation">(</span><span class="token class-name">MetaObject</span> object<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">showProgress</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isMetadataDirty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setIsMetadataDirty</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> isMetadataDirty<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Component</span> <span class="token function">getLastFocusedComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setLastFocused</span><span class="token punctuation">(</span><span class="token class-name">Component</span> lastFocused<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMouseSelectState</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> isMouseSelected<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isMouseSelected</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">LanguageManager</span> <span class="token function">getLanguageManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Project</span> <span class="token function">getProject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Project</span> <span class="token function">getFirstProject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Project</span> <span class="token function">getLastProject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getNewProjectName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setComponentSizes</span><span class="token punctuation">(</span><span class="token class-name">Dimension</span> dim<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getCurrentDir</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCurrentDir</span><span class="token punctuation">(</span><span class="token class-name">String</span> newDir<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">updateStatus</span><span class="token punctuation">(</span><span class="token keyword">int</span> dotPos<span class="token punctuation">,</span> <span class="token keyword">int</span> markPos<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getDataBaseClasses</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">MetadataFeeder</span> <span class="token function">getMetadataFeeder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addProject</span><span class="token punctuation">(</span><span class="token class-name">Project</span> project<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">setCurrentProject</span><span class="token punctuation">(</span><span class="token class-name">Project</span> project<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">removeProject</span><span class="token punctuation">(</span><span class="token class-name">Project</span> project<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">MetaProjectHeader</span> <span class="token function">getProgramMetadata</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">resetDashboard</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Project</span> <span class="token function">loadProject</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">,</span> <span class="token class-name">String</span> projectName<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCanSaveMetadata</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> canSave<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">MetaObject</span> <span class="token function">getSelectedObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deselectObjects</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setProject</span><span class="token punctuation">(</span><span class="token class-name">Project</span> project<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">editorAction</span><span class="token punctuation">(</span><span class="token class-name">String</span> actionName<span class="token punctuation">,</span> <span class="token class-name">ActionEvent</span> event<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMode</span><span class="token punctuation">(</span><span class="token keyword">int</span> mode<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">FileManager</span> <span class="token function">getFileManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFileManager</span><span class="token punctuation">(</span><span class="token class-name">FileManager</span> fileManager<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">ConfigManager</span> <span class="token function">getConfigManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setConfigManager</span><span class="token punctuation">(</span><span class="token class-name">ConfigManager</span> configManager<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">ClassLoader</span> <span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setClassLoader</span><span class="token punctuation">(</span><span class="token class-name">ClassLoader</span> classLoader<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Properties</span> <span class="token function">getProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getUserHome</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getBaseDir</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getMajorVersionNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getMinorVersionNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getBuildNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">MetaObject</span> <span class="token function">pasting</span><span class="token punctuation">(</span>
    <span class="token class-name">MetaObject</span> target<span class="token punctuation">,</span> <span class="token class-name">MetaObject</span> pasted<span class="token punctuation">,</span> <span class="token class-name">MetaProject</span> project<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">processMenuItems</span><span class="token punctuation">(</span><span class="token class-name">MetaObject</span> metaObject<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">processMenuSeparators</span><span class="token punctuation">(</span><span class="token class-name">MetaObject</span> metaObject<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">processTabPages</span><span class="token punctuation">(</span><span class="token class-name">MetaObject</span> metaObject<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">processPlacement</span><span class="token punctuation">(</span><span class="token class-name">MetaObject</span> object<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">processCreateLayout</span><span class="token punctuation">(</span><span class="token class-name">MetaObject</span> object<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">updateDisplayLayer</span><span class="token punctuation">(</span><span class="token class-name">MetaObject</span> object<span class="token punctuation">,</span> <span class="token keyword">int</span> layerIndex<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">propertyEditedRepaint</span><span class="token punctuation">(</span><span class="token class-name">MetaObject</span> object<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">processDeleteObject</span><span class="token punctuation">(</span><span class="token class-name">MetaObject</span> object<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">getAttachedToDesigner</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">processProjectChangedState</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> hasProjectChanged<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">processObjectNameChanged</span><span class="token punctuation">(</span><span class="token class-name">MetaObject</span> object<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">runProject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> setAç<span class="token function">owDragging</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> allowDragging<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">allowDragging</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isCustomizing</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setTitle</span><span class="token punctuation">(</span><span class="token class-name">String</span> title<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">IdeMenuBar</span> <span class="token function">getIdeMenuBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">showHelper</span><span class="token punctuation">(</span><span class="token class-name">MetaObject</span> metaObject<span class="token punctuation">,</span> <span class="token class-name">String</span> propertyName<span class="token punctuation">)</span>
    <span class="token comment">// ... many non-public methods follow ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>But what if SuperDashboard contained only the methods shown in Listing 10-2?</p> <h4 id="listing-10-2"><a href="#listing-10-2" class="header-anchor">#</a> Listing 10-2</h4> <p><strong>Small Enough?</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SuperDashboard</span> <span class="token keyword">extends</span> <span class="token class-name">JFrame</span> <span class="token keyword">implements</span> <span class="token class-name">MetaDataUser</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">Component</span> <span class="token function">getLastFocusedComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setLastFocused</span><span class="token punctuation">(</span><span class="token class-name">Component</span> lastFocused<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getMajorVersionNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getMinorVersionNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getBuildNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Five methods isn’t too much, is it? In this case it is because despite its small number of methods, <code>SuperDashboard</code> has too many <em>responsibilities</em>.</p> <p>The name of a class should describe what responsibilities it fulfills. In fact, naming is probably the first way of helping determine class size. If we cannot derive a concise name for a class, then  it’s likely too large. The more ambiguous the class name, the more likely it has too many responsibilities. For example, class names including weasel words like <code>Processor</code> or <code>Manager</code> or <code>Super</code> often hint at unfortunate aggregation of responsibilities.</p> <p>We should also be able to write a brief description of the class in about 25 words,
without using the words “if,” “and,” “or,” or “but.” How would we describe the <code>SuperDashboard</code>? “The <code>SuperDashboard</code> provides access to the component that last held the focus, and it also allows us to track the version and build numbers.” The first “and” is a
hint that <code>SuperDashboard</code> has too many responsibilities.</p> <h3 id="the-single-responsibility-principle"><a href="#the-single-responsibility-principle" class="header-anchor">#</a> The Single Responsibility Principle</h3> <p>The Single Responsibility Principle (SRP) states that a class or module should have one,
and only one, <em>reason to change</em>. This principle gives us both a definition of responsibility,
and a guidelines for class size. Classes should have one responsibility—one reason to
change.</p> <p>The seemingly small <code>SuperDashboard</code> class in Listing 10-2 has two reasons to change.
First, it tracks version information that would seemingly need to be updated every time the software gets shipped. Second, it manages Java Swing components (it is a derivative of <code>JFrame</code>, the Swing representation of a top-level GUI window). No doubt we’ll want to update the version number if we change any of the Swing code, but the converse isn’t necessarily true: We might change the version information based on changes to other code in the system.</p> <p>Trying to identify responsibilities (reasons to change) often helps us recognize and create better abstractions in our code. We can easily extract all three <code>SuperDashboard</code> methods that deal with version information into a separate class named <code>Version</code>.(See Listing 10-3.) The <code>Version</code> class is a construct that has a high potential for reuse in other applications!</p> <h4 id="listing-10-3"><a href="#listing-10-3" class="header-anchor">#</a> Listing 10-3</h4> <p><strong>A single-responsibility class</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Version</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getMajorVersionNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getMinorVersionNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getBuildNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>SRP is one of the more important concept in OO design. It’s also one of the simpler
concepts to understand and adhere to. Yet oddly, SRP is often the most abused class design
principle. We regularly encounter classes that do far too many things. Why?</p> <p>Getting software to work and making software clean are two very different activities.
Most of us have limited room in our heads, so we focus on getting our code to work more than organization and cleanliness. This is wholly appropriate. Maintaining a separation of concerns is just as important in our programming <em>activities</em> as it is in our programs.</p> <p>The problem is that too many of us think that we are done once the program works.
We fail to switch to the <em>other</em> concern of organization and cleanliness. We move on to the next problem rather than going back and breaking the overstuffed classes into decoupled units with single responsibilities.</p> <p>At the same time, many developers fear that a large number of small, single-purpose classes makes it more difficult to understand the bigger picture. They are concerned that they must navigate from class to class in order to figure out how a larger piece of work gets accomplished.</p> <p>However, a system with many small classes has no more moving parts than a system with a few large classes. There is just as much to learn in the system with a few large classes. So the question is: Do you want your tools organized into toolboxes with many small drawers each containing well-defined and well-labeled components? Or do you want a few drawers that you just toss everything into?</p> <p>Every sizable system will contain a large amount of logic and complexity. The primary goal in managing such complexity is to <em>organize</em> it so that a developer knows where to look to find things and need only understand the directly affected complexity at any given time. In contrast, a system with larger, multipurpose classes always hampers us by insisting we wade through lots of things we don’t need to know right now.</p> <p>To restate the former points for emphasis: We want our systems to be composed of many small classes, not a few large ones. Each small class encapsulates a single responsibility, has a single reason to change, and collaborates with a few others to achieve the desired system behaviors.</p> <h3 id="cohesion"><a href="#cohesion" class="header-anchor">#</a> Cohesion</h3> <p>Classes should have a small number of instance variables. Each of the methods of a class
should manipulate one or more of those variables. In general the more variables a method
manipulates the more cohesive that method is to its class. A class in which each variable is
used by each method is maximally cohesive.</p> <p>In general it is neither advisable nor possible to create such maximally cohesive
classes; on the other hand, we would like cohesion to be high. When cohesion is high, it
means that the methods and variables of the class are co-dependent and hang together as a
logical whole.</p> <p>Consider the implementation of a <code>Stack</code> in Listing 10-4. This is a very cohesive class.
Of the three methods only <code>size()</code> fails to use both the variables.</p> <h4 id="listing-10-4"><a href="#listing-10-4" class="header-anchor">#</a> Listing 10-4</h4> <p><strong>Stack.java A cohesive class.</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Stack</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> topOfStack <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> elements <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> topOfStack<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">int</span> element<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        topOfStack<span class="token operator">++</span><span class="token punctuation">;</span>
        elements<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">PoppedWhenEmpty</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>topOfStack <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">PoppedWhenEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> element <span class="token operator">=</span> elements<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token operator">--</span>topOfStack<span class="token punctuation">)</span><span class="token punctuation">;</span>
        elements<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>topOfStack<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> element<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The strategy of keeping functions small and keeping parameter lists short can sometimes lead to a proliferation of instance variables that are used by a subset of methods.
When this happens, it almost always means that there is at least one other class trying to
get out of the larger class. You should try to separate the variables and methods into two or
more classes such that the new classes are more cohesive.</p> <h3 id="maintaining-cohesion-results-in-many-small-classes"><a href="#maintaining-cohesion-results-in-many-small-classes" class="header-anchor">#</a> Maintaining Cohesion Results in Many Small Classes</h3> <p>Just the act of breaking large functions into smaller functions causes a proliferation of classes. Consider a large function with many variables declared within it. Let’s say you
want to extract one small part of that function into a separate function. However, the code
you want to extract uses four of the variables declared in the function. Must you pass all
four of those variables into the new function as arguments?</p> <p>Not at all! If we promoted those four variables to instance variables of the class, then we could extract the code without passing <em>any</em> variables at all. It would be <em>easy</em> to break
the function up into small pieces.</p> <p>Unfortunately, this also means that our classes lose cohesion because they accumulate
more and more instance variables that exist solely to allow a few functions to share them.
But wait! If there are a few functions that want to share certain variables, doesn’t that
make them a class in their own right? Of course it does. When classes lose cohesion, split
them!</p> <p>So breaking a large function into many smaller functions often gives us the opportunity to split several smaller classes out as well. This gives our program a much better organization and a more transparent structure.</p> <p>As a demonstration of what I mean, let’s use a time-honored example taken from
Knuth’s wonderful book <em>Literate Programming.</em>^3 Listing 10-5 shows a translation into Java
of Knuth’s <code>PrintPrimes</code> program. To be fair to Knuth, this is not the program as he wrote it
but rather as it was output by his WEB tool. I’m using it because it makes a great starting
place for breaking up a big function into many smaller functions and classes.</p> <h4 id="listing-10-5"><a href="#listing-10-5" class="header-anchor">#</a> Listing 10-5</h4> <p><strong>PrintPrimes.java</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">literatePrimes</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PrintPrimes</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token class-name">M</span> <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token keyword">int</span> RR <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token keyword">int</span> CC <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token keyword">int</span> WW <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token keyword">int</span> ORDMAX <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> <span class="token class-name">P</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">M</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> PAGENUMBER<span class="token punctuation">;</span>
        <span class="token keyword">int</span> PAGEOFFSET<span class="token punctuation">;</span>
        <span class="token keyword">int</span> ROWOFFSET<span class="token punctuation">;</span>
        <span class="token keyword">int</span> <span class="token class-name">C</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> <span class="token class-name">J</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> <span class="token class-name">K</span><span class="token punctuation">;</span>
        <span class="token keyword">boolean</span> JPRIME<span class="token punctuation">;</span>
        <span class="token keyword">int</span> ORD<span class="token punctuation">;</span>
        <span class="token keyword">int</span> SQUARE<span class="token punctuation">;</span>
        <span class="token keyword">int</span> <span class="token class-name">N</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> MULT<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>ORDMAX <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token class-name">J</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token class-name">K</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token class-name">P</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
        ORD <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
        SQUARE <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token class-name">K</span> <span class="token operator">&lt;</span> <span class="token class-name">M</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">do</span> <span class="token punctuation">{</span>
                <span class="token class-name">J</span> <span class="token operator">=</span> <span class="token class-name">J</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">J</span> <span class="token operator">==</span> SQUARE<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    ORD <span class="token operator">=</span> ORD <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
                    SQUARE <span class="token operator">=</span> <span class="token class-name">P</span><span class="token punctuation">[</span>ORD<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token class-name">P</span><span class="token punctuation">[</span>ORD<span class="token punctuation">]</span><span class="token punctuation">;</span>
                    MULT<span class="token punctuation">[</span>ORD <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">J</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token class-name">N</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
                JPRIME <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token class-name">N</span> <span class="token operator">&lt;</span> ORD <span class="token operator">&amp;&amp;</span> JPRIME<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">while</span> <span class="token punctuation">(</span>MULT<span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token class-name">J</span><span class="token punctuation">)</span>
                        MULT<span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span> <span class="token operator">=</span> MULT<span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token class-name">P</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token class-name">P</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>MULT<span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token class-name">J</span><span class="token punctuation">)</span>
                        JPRIME <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
                    <span class="token class-name">N</span> <span class="token operator">=</span> <span class="token class-name">N</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>JPRIME<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">K</span> <span class="token operator">=</span> <span class="token class-name">K</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token class-name">P</span><span class="token punctuation">[</span><span class="token class-name">K</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">J</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token punctuation">{</span>
            PAGENUMBER <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            PAGEOFFSET <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>PAGEOFFSET <span class="token operator">&lt;=</span> <span class="token class-name">M</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;The First &quot;</span> <span class="token operator">+</span> <span class="token class-name">M</span> <span class="token operator">+</span>
                    <span class="token string">&quot; Prime Numbers --- Page &quot;</span> <span class="token operator">+</span> PAGENUMBER<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span>ROWOFFSET <span class="token operator">=</span> PAGEOFFSET<span class="token punctuation">;</span> ROWOFFSET <span class="token operator">&lt;</span> PAGEOFFSET <span class="token operator">+</span> RR<span class="token punctuation">;</span> ROWOFFSET<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">C</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token class-name">C</span> <span class="token operator">&lt;</span> CC<span class="token punctuation">;</span> <span class="token class-name">C</span><span class="token operator">++</span><span class="token punctuation">)</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>ROWOFFSET <span class="token operator">+</span> <span class="token class-name">C</span> <span class="token operator">*</span> RR <span class="token operator">&lt;=</span> <span class="token class-name">M</span><span class="token punctuation">)</span>
                            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%10d&quot;</span><span class="token punctuation">,</span> <span class="token class-name">P</span><span class="token punctuation">[</span>ROWOFFSET <span class="token operator">+</span> <span class="token class-name">C</span> <span class="token operator">*</span> RR<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\f&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                PAGENUMBER <span class="token operator">=</span> PAGENUMBER <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
                PAGEOFFSET <span class="token operator">=</span> PAGEOFFSET <span class="token operator">+</span> RR <span class="token operator">*</span> CC<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This program, written as a single function, is a mess. It has a deeply indented structure, a plethora of odd variables, and a tightly coupled structure. At the very least, the one big function should be split up into a few smaller functions.</p> <p>Listing 10-6 through Listing 10-8 show the result of splitting the code in <a href="#listing-10-5">Listing 10-5</a> into smaller classes and functions, and choosing meaningful names for those classes, functions, and variables.</p> <h4 id="listing-10-6"><a href="#listing-10-6" class="header-anchor">#</a> Listing 10-6</h4> <p><strong>PrimePrinter.java (refactored)</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">literatePrimes</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PrimePrinter</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">final</span> <span class="token keyword">int</span> NUMBER_OF_PRIMES <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> primes <span class="token operator">=</span> <span class="token class-name">PrimeGenerator</span><span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span>NUMBER_OF_PRIMES<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token keyword">int</span> ROWS_PER_PAGE <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token keyword">int</span> COLUMNS_PER_PAGE <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
        <span class="token class-name">RowColumnPagePrinter</span> tablePrinter <span class="token operator">=</span>
            <span class="token keyword">new</span> <span class="token class-name">RowColumnPagePrinter</span><span class="token punctuation">(</span>
                ROWS_PER_PAGE<span class="token punctuation">,</span>
                COLUMNS_PER_PAGE<span class="token punctuation">,</span>
                <span class="token string">&quot;The First &quot;</span> <span class="token operator">+</span> NUMBER_OF_PRIMES <span class="token operator">+</span> <span class="token string">&quot; Prime Numbers&quot;</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
        tablePrinter<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>primes<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="listing-10-7"><a href="#listing-10-7" class="header-anchor">#</a> Listing 10-7</h4> <p><strong>RowColumnPagePrinter.java</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">literatePrimes</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PrimeGenerator</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> primes<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">ArrayList</span> <span class="token generics"><span class="token punctuation">&lt;</span> <span class="token class-name">Integer</span> <span class="token punctuation">&gt;</span></span> multiplesOfPrimeFactors<span class="token punctuation">;</span>

    <span class="token keyword">protected</span> <span class="token keyword">static</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">generate</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        primes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
        multiplesOfPrimeFactors <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span> <span class="token generics"><span class="token punctuation">&lt;</span> <span class="token class-name">Integer</span> <span class="token punctuation">&gt;</span></span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">set2AsFirstPrime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">checkOddNumbersForSubsequentPrimes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> primes<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">set2AsFirstPrime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        primes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
        multiplesOfPrimeFactors<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">checkOddNumbersForSubsequentPrimes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> primeIndex <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> candidate <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> primeIndex <span class="token operator">&lt;</span> primes<span class="token punctuation">.</span>length<span class="token punctuation">;</span> candidate <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isPrime</span><span class="token punctuation">(</span>candidate<span class="token punctuation">)</span><span class="token punctuation">)</span>
                primes<span class="token punctuation">[</span>primeIndex<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> candidate<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">isPrime</span><span class="token punctuation">(</span><span class="token keyword">int</span> candidate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isLeastRelevantMultipleOfNextLargerPrimeFactor</span><span class="token punctuation">(</span>candidate<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            multiplesOfPrimeFactors<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>candidate<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token function">isNotMultipleOfAnyPreviousPrimeFactor</span><span class="token punctuation">(</span>candidate<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span>
    <span class="token function">isLeastRelevantMultipleOfNextLargerPrimeFactor</span><span class="token punctuation">(</span><span class="token keyword">int</span> candidate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> nextLargerPrimeFactor <span class="token operator">=</span> primes<span class="token punctuation">[</span>multiplesOfPrimeFactors<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> leastRelevantMultiple <span class="token operator">=</span> nextLargerPrimeFactor <span class="token operator">*</span> nextLargerPrimeFactor<span class="token punctuation">;</span>
        <span class="token keyword">return</span> candidate <span class="token operator">==</span> leastRelevantMultiple<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span>
    <span class="token function">isNotMultipleOfAnyPreviousPrimeFactor</span><span class="token punctuation">(</span><span class="token keyword">int</span> candidate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> n <span class="token operator">&lt;</span> multiplesOfPrimeFactors<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> n<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isMultipleOfNthPrimeFactor</span><span class="token punctuation">(</span>candidate<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span>
    <span class="token function">isMultipleOfNthPrimeFactor</span><span class="token punctuation">(</span><span class="token keyword">int</span> candidate<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>
        candidate <span class="token operator">==</span> <span class="token function">smallestOddNthMultipleNotLessThanCandidate</span><span class="token punctuation">(</span>candidate<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span>
    <span class="token function">smallestOddNthMultipleNotLessThanCandidate</span><span class="token punctuation">(</span><span class="token keyword">int</span> candidate<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> multiple <span class="token operator">=</span> multiplesOfPrimeFactors<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>multiple <span class="token operator">&lt;</span> candidate<span class="token punctuation">)</span>
            multiple <span class="token operator">+=</span> <span class="token number">2</span> <span class="token operator">*</span> primes<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
        multiplesOfPrimeFactors<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> multiple<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> multiple<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The first thing you might notice is that the program got a lot longer. It went from a little over one page to nearly three pages in length. There are several reasons for this growth. First, the refactored program uses longer, more descriptive variable names. Second, the refactored program uses function and class declarations as a way to add commentary to the code. Third, we used whitespace and formatting techniques to keep the program readable.</p> <p>Notice how the program has been split into three main responsibilities. The main program is contained in the PrimePrinterclass all by itself. Its responsibility is to handle the execution environment. It will change if the method of invocation changes. For example, if this program were converted to a SOAP service, this is the class that would be affected.</p> <p>The <code>RowColumnPagePrinter</code> knows all about how to format a list of numbers into pages with a certain number of rows and columns. If the formatting of the output needed changing, then this is the class that would be affected.</p> <p>The <code>PrimeGenerator</code> class knows how to generate a list prime numbers. Notice that it is not meant to be instantiated as an object. The class is just a useful scope in which its variables can be declared and kept hidden. This class will change if the algorithm for computing prime numbers changes.</p> <p>This was not a rewrite! We did not start over from scratch and write the program over again. Indeed, if you look closely at the two different programs, you’ll see that they use the same algorithm and mechanics to get their work done.</p> <p>The change was made by writing a test suite that verified the <em>precise</em> behavior of the first program. Then a myriad of tiny little changes were made, one at a time. After each change the program was executed to ensure that the behavior had not changed. One tiny step after another, the first program was cleaned up and transformed into the second.</p> <h2 id="organizing-for-change"><a href="#organizing-for-change" class="header-anchor">#</a> Organizing for Change</h2> <p>For most systems, change is continual. Every change subjects us to the risk that the remainder of the system no longer works as intended. In a clean system we organize our classes so as to reduce the risk of change.</p> <p>The <code>Sql</code> class in Listing 10-9 is used to generate properly formed SQL strings given appropriate metadata. It’s a work in progress and, as such, doesn’t yet support SQL functionality like <code>update</code> statements. When the time comes for the <code>Sql</code> class to support an
<code>update</code> statement, we’ll have to “open up” this class to make modifications. The problem with opening a class is that it introduces risk. Any modifications to the class have the potential of breaking other code in the class. It must be fully retested.</p> <h4 id="listing-10-9"><a href="#listing-10-9" class="header-anchor">#</a> Listing 10-9</h4> <p><strong>A class that must be opened for change</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Sql</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">Sql</span><span class="token punctuation">(</span><span class="token class-name">String</span> table<span class="token punctuation">,</span> <span class="token class-name">Column</span><span class="token punctuation">[</span><span class="token punctuation">]</span> columns<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> fields<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">findByKey</span><span class="token punctuation">(</span><span class="token class-name">String</span> keyColumn<span class="token punctuation">,</span> <span class="token class-name">String</span> keyValue<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">select</span><span class="token punctuation">(</span><span class="token class-name">Column</span> column<span class="token punctuation">,</span> <span class="token class-name">String</span> pattern<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">select</span><span class="token punctuation">(</span><span class="token class-name">Criteria</span> criteria<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">preparedInsert</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">columnList</span><span class="token punctuation">(</span><span class="token class-name">Column</span><span class="token punctuation">[</span><span class="token punctuation">]</span> columns<span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">valuesList</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> fields<span class="token punctuation">,</span> <span class="token keyword">final</span> <span class="token class-name">Column</span><span class="token punctuation">[</span><span class="token punctuation">]</span> columns<span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">selectWithCriteria</span><span class="token punctuation">(</span><span class="token class-name">String</span> criteria<span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">placeholderList</span><span class="token punctuation">(</span><span class="token class-name">Column</span><span class="token punctuation">[</span><span class="token punctuation">]</span> columns<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The <code>Sql</code> class must change when we add a new type of statement. It also must change when we alter the details of a single statement type—for example, if we need to modify the <code>select</code> functionality to support subselects. These two reasons to change mean that the <code>Sql</code> class violates the SRP.</p> <p>We can spot this SRP violation from a simple organizational standpoint. The method outline of <code>Sql</code> shows that there are private methods, such as <code>selectWithCriteria</code>, that appear to relate only to <code>select</code> statements.</p> <p>Private method behavior that applies only to a small subset of a class can be a useful
heuristic for spotting potential areas for improvement. However, the primary spur for taking action should be system change itself. If the <code>Sql</code> class is deemed logically complete, then we need not worry about separating the responsibilities. If we won’t need update functionality for the foreseeable future, then we should leave <code>Sql</code> alone. But as soon as we find ourselves opening up a class, we should consider fixing our design.</p> <p>What if we considered a solution like that in Listing 10-10? Each public interface method defined in the previous <code>Sql</code> from Listing 10-9 is refactored out to its own derivative
of the <code>Sql</code> class. Note that the private methods, such as <code>valuesList</code>, move directly where
they are needed. The common private behavior is isolated to a pair of utility classes, Where
and <code>ColumnList</code>.</p> <h4 id="listing-10-10"><a href="#listing-10-10" class="header-anchor">#</a> Listing 10-10</h4> <p><strong>A set of closed classes</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">abstract</span> <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Sql</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">Sql</span><span class="token punctuation">(</span><span class="token class-name">String</span> table<span class="token punctuation">,</span> <span class="token class-name">Column</span><span class="token punctuation">[</span><span class="token punctuation">]</span> columns<span class="token punctuation">)</span>
    <span class="token keyword">abstract</span> <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">generate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CreateSql</span> <span class="token keyword">extends</span> <span class="token class-name">Sql</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">CreateSql</span><span class="token punctuation">(</span><span class="token class-name">String</span> table<span class="token punctuation">,</span> <span class="token class-name">Column</span><span class="token punctuation">[</span><span class="token punctuation">]</span> columns<span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Override</span> <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">generate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SelectSql</span> <span class="token keyword">extends</span> <span class="token class-name">Sql</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">SelectSql</span><span class="token punctuation">(</span><span class="token class-name">String</span> table<span class="token punctuation">,</span> <span class="token class-name">Column</span><span class="token punctuation">[</span><span class="token punctuation">]</span> columns<span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Override</span> <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">generate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InsertSql</span> <span class="token keyword">extends</span> <span class="token class-name">Sql</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">InsertSql</span><span class="token punctuation">(</span><span class="token class-name">String</span> table<span class="token punctuation">,</span> <span class="token class-name">Column</span><span class="token punctuation">[</span><span class="token punctuation">]</span> columns<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> fields<span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Override</span> <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">generate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">valuesList</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> fields<span class="token punctuation">,</span> <span class="token keyword">final</span> <span class="token class-name">Column</span><span class="token punctuation">[</span><span class="token punctuation">]</span> columns<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SelectWithCriteriaSql</span> <span class="token keyword">extends</span> <span class="token class-name">Sql</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">SelectWithCriteriaSql</span><span class="token punctuation">(</span>
        <span class="token class-name">String</span> table<span class="token punctuation">,</span> <span class="token class-name">Column</span><span class="token punctuation">[</span><span class="token punctuation">]</span> columns<span class="token punctuation">,</span> <span class="token class-name">Criteria</span> criteria<span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Override</span> <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">generate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SelectWithMatchSql</span> <span class="token keyword">extends</span> <span class="token class-name">Sql</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">SelectWithMatchSql</span><span class="token punctuation">(</span>
        <span class="token class-name">String</span> table<span class="token punctuation">,</span> <span class="token class-name">Column</span><span class="token punctuation">[</span><span class="token punctuation">]</span> columns<span class="token punctuation">,</span> <span class="token class-name">Column</span> column<span class="token punctuation">,</span> <span class="token class-name">String</span> pattern<span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Override</span> <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">generate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FindByKeySql</span> <span class="token keyword">extends</span> <span class="token class-name">Sql</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">FindByKeySql</span><span class="token punctuation">(</span>
        <span class="token class-name">String</span> table<span class="token punctuation">,</span> <span class="token class-name">Column</span><span class="token punctuation">[</span><span class="token punctuation">]</span> columns<span class="token punctuation">,</span> <span class="token class-name">String</span> keyColumn<span class="token punctuation">,</span> <span class="token class-name">String</span> keyValue<span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Override</span> <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">generate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PreparedInsertSql</span> <span class="token keyword">extends</span> <span class="token class-name">Sql</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">PreparedInsertSql</span><span class="token punctuation">(</span><span class="token class-name">String</span> table<span class="token punctuation">,</span> <span class="token class-name">Column</span><span class="token punctuation">[</span><span class="token punctuation">]</span> columns<span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Override</span> <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">generate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">placeholderList</span><span class="token punctuation">(</span><span class="token class-name">Column</span><span class="token punctuation">[</span><span class="token punctuation">]</span> columns<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Where</span> <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token class-name">Where</span><span class="token punctuation">(</span><span class="token class-name">String</span> criteria<span class="token punctuation">)</span>
        <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">generate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ColumnList</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">ColumnList</span><span class="token punctuation">(</span><span class="token class-name">Column</span><span class="token punctuation">[</span><span class="token punctuation">]</span> columns<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">generate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The code in each class becomes excruciatingly simple. Our required comprehension time to understand any class decreases to almost nothing. The risk that one function could break another becomes vanishingly small. From a test standpoint, it becomes an easier
task to prove all bits of logic in this solution, as the classes are all isolated from one another.</p> <p>Equally important, when it’s time to add the <code>update</code> statements, none of the existing classes need change! We code the logic to build <code>update</code> statements in a new subclass of <code>Sql</code> named <code>UpdateSql</code>. No other code in the system will break because of this change.</p> <p>Our restructured <code>Sql</code> logic represents the best of all worlds. It supports the SRP. It also supports another key OO class design principle known as the Open-Closed Principle, or OCP:^4 Classes should be open for extension but closed for modification. Our restructured <code>Sql</code> class is open to allow new functionality via subclassing, but we can make this change while keeping every other class closed. We simply drop our <code>UpdateSql</code> class in place.</p> <p>We want to structure our systems so that we muck with as little as possible when we update them with new or changed features. In an ideal system, we incorporate new features by extending the system, not by making modifications to existing code.</p> <h3 id="isolating-from-change"><a href="#isolating-from-change" class="header-anchor">#</a> Isolating from Change</h3> <p>Needs will change, therefore code will change. We learned in OO 101 that there are concrete classes, which contain implementation details (code), and abstract classes, which represent concepts only. A client class depending upon concrete details is at risk when
those details change. We can introduce interfaces and abstract classes to help isolate the impact of those details.</p> <p>Dependencies upon concrete details create challenges for testing our system. If we’re building a Portfolioclass and it depends upon an external <code>TokyoStockExchangeAPI</code> to derive the portfolio’s value, our test cases are impacted by the volatility of such a lookup.
It’s hard to write a test when we get a different answer every five minutes!</p> <p>Instead of designing Portfolioso that it directly depends upon <code>TokyoStockExchange</code>, we create an interface, StockExchange, that declares a single method:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">StockExchange</span> <span class="token punctuation">{</span>
    <span class="token class-name">Money</span> <span class="token function">currentPrice</span><span class="token punctuation">(</span><span class="token class-name">String</span> symbol<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>We design <code>TokyoStockExchange</code> to implement this interface. We also make sure that the constructor of <code>Portfolio</code> takes a <code>StockExchange</code> reference as an argument:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">Portfolio</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">StockExchange</span> exchange<span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token class-name">Portfolio</span><span class="token punctuation">(</span><span class="token class-name">StockExchange</span> exchange<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>exchange <span class="token operator">=</span> exchange<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Now our test can create a testable implementation of the <code>StockExchange</code> interface that emulates the <code>TokyoStockExchange</code>. This test implementation will fix the current value for any symbol we use in testing. If our test demonstrates purchasing five shares of Microsoft
for our portfolio, we code the test implementation to always return $100 per share of Microsoft. Our test implementation of the <code>StockExchange</code> interface reduces to a simple table lookup. We can then write a test that expects $500 for our overall portfolio value.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PortfolioTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">FixedStockExchangeStub</span> exchange<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Portfolio</span> portfolio<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Before</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">setUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        exchange <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FixedStockExchangeStub</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        exchange<span class="token punctuation">.</span><span class="token function">fix</span><span class="token punctuation">(</span><span class="token string">&quot;MSFT&quot;</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        portfolio <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Portfolio</span><span class="token punctuation">(</span>exchange<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token class-name">GivenFiveMSFTTotalShouldBe500</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        portfolio<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&quot;MSFT&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span> portfolio<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>If a system is decoupled enough to be tested in this way, it will also be more flexible and promote more reuse. The lack of coupling means that the elements of our system are better isolated from each other and from change. This isolation makes it easier to understand each element of the system.</p> <p>By minimizing coupling in this way, our classes adhere to another class design principle known as the Dependency Inversion Principle (DIP).^5 In essence, the DIP says that our classes should depend upon abstractions, not on concrete details.</p> <p>Instead of being dependent upon the implementation details of the TokyoStock-
Exchangeclass, our Portfolioclass is now dependent upon the StockExchangeinterface.
TheStockExchangeinterface represents the abstract concept of asking for the current price
of a symbol. This abstraction isolates all of the specific details of obtaining such a price,
including from where that price is obtained.</p> <h2 id="bibliography"><a href="#bibliography" class="header-anchor">#</a> Bibliography</h2> <p><strong>[RDD]:</strong> <em>Object Design: Roles, Responsibilities, and Collaborations</em> , Rebecca WirfsBrock et al., Addison-Wesley, 2002.</p> <p><strong>[PPP]:</strong> <em>Agile Software Development: Principles, Patterns, and Practices</em> , Robert C. Martin,
Prentice Hall, 2002.</p> <p><strong>[Knuth92]:</strong> <em>Literate Programming,</em> Donald E. Knuth, Center for the Study of language and Information, Leland Stanford Junior University, 1992.</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----><!----><!----></div></div>
    <script src="/docs/assets/js/app.72e120a4.js" defer></script><script src="/docs/assets/js/2.063f64f2.js" defer></script><script src="/docs/assets/js/427.369a6b99.js" defer></script><script src="/docs/assets/js/91.cee80a96.js" defer></script>
  </body>
</html>
