<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Chapter 6. Version Stamps | Nguyễn Khánk&#39;s Wiki</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="apple-touch-icon" sizes="180x180" href="../public/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../public/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../public/favicons/favicon-16x16.png">
    <link rel="manifest" href="../public/favicons/manifest.json">
    <link rel="mask-icon" href="../public/favicons/safari-pinned-tab.svg" color="#3a0839">
    <link rel="shortcut icon" href="../public/favicons/favicon.ico">
    <meta name="description" content="Wikipedia của tui">
    <meta name="msapplication-TileColor" content="#3a0839">
    <meta name="msapplication-config" content="../public/favicons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    
    <link rel="preload" href="/docs/assets/css/0.styles.5d974432.css" as="style"><link rel="preload" href="/docs/assets/js/app.a82515ad.js" as="script"><link rel="preload" href="/docs/assets/js/2.f326a5a1.js" as="script"><link rel="preload" href="/docs/assets/js/70.d47cdd36.js" as="script"><link rel="preload" href="/docs/assets/js/24.55a1e86e.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.9862a5d5.js"><link rel="prefetch" href="/docs/assets/js/100.7ee34494.js"><link rel="prefetch" href="/docs/assets/js/101.ec54df92.js"><link rel="prefetch" href="/docs/assets/js/102.3d9258ef.js"><link rel="prefetch" href="/docs/assets/js/103.bcdd66df.js"><link rel="prefetch" href="/docs/assets/js/104.2a479c7a.js"><link rel="prefetch" href="/docs/assets/js/105.3f558529.js"><link rel="prefetch" href="/docs/assets/js/106.cbabb4ad.js"><link rel="prefetch" href="/docs/assets/js/107.d6e94f12.js"><link rel="prefetch" href="/docs/assets/js/108.fe3e03c4.js"><link rel="prefetch" href="/docs/assets/js/109.8ef058cb.js"><link rel="prefetch" href="/docs/assets/js/11.105ef992.js"><link rel="prefetch" href="/docs/assets/js/110.be55ef4d.js"><link rel="prefetch" href="/docs/assets/js/111.4df7f5d6.js"><link rel="prefetch" href="/docs/assets/js/112.d5e76589.js"><link rel="prefetch" href="/docs/assets/js/113.a9dbbe7a.js"><link rel="prefetch" href="/docs/assets/js/114.f83c9674.js"><link rel="prefetch" href="/docs/assets/js/115.99e364ed.js"><link rel="prefetch" href="/docs/assets/js/116.20b79cbb.js"><link rel="prefetch" href="/docs/assets/js/117.6b3ba194.js"><link rel="prefetch" href="/docs/assets/js/118.5251c6a0.js"><link rel="prefetch" href="/docs/assets/js/119.42ec33ab.js"><link rel="prefetch" href="/docs/assets/js/12.44cf298e.js"><link rel="prefetch" href="/docs/assets/js/120.a0049cfd.js"><link rel="prefetch" href="/docs/assets/js/121.f95ed200.js"><link rel="prefetch" href="/docs/assets/js/122.834a31db.js"><link rel="prefetch" href="/docs/assets/js/123.feb90b50.js"><link rel="prefetch" href="/docs/assets/js/124.f4fb0f1b.js"><link rel="prefetch" href="/docs/assets/js/125.e116fa50.js"><link rel="prefetch" href="/docs/assets/js/126.1c897717.js"><link rel="prefetch" href="/docs/assets/js/127.e1c3c5d3.js"><link rel="prefetch" href="/docs/assets/js/128.cb94ce90.js"><link rel="prefetch" href="/docs/assets/js/129.ee8651eb.js"><link rel="prefetch" href="/docs/assets/js/13.bbcdea6e.js"><link rel="prefetch" href="/docs/assets/js/130.bda7fd91.js"><link rel="prefetch" href="/docs/assets/js/131.942f8b39.js"><link rel="prefetch" href="/docs/assets/js/132.bb97aa26.js"><link rel="prefetch" href="/docs/assets/js/133.43497329.js"><link rel="prefetch" href="/docs/assets/js/134.d107f744.js"><link rel="prefetch" href="/docs/assets/js/135.5bc549c0.js"><link rel="prefetch" href="/docs/assets/js/136.3236bfcc.js"><link rel="prefetch" href="/docs/assets/js/137.7d86f199.js"><link rel="prefetch" href="/docs/assets/js/138.f4245c76.js"><link rel="prefetch" href="/docs/assets/js/139.627503ab.js"><link rel="prefetch" href="/docs/assets/js/14.80b73ebb.js"><link rel="prefetch" href="/docs/assets/js/140.3b7ac537.js"><link rel="prefetch" href="/docs/assets/js/141.7fd2d3c2.js"><link rel="prefetch" href="/docs/assets/js/142.a1abbedd.js"><link rel="prefetch" href="/docs/assets/js/143.a8144a4d.js"><link rel="prefetch" href="/docs/assets/js/144.0adb2161.js"><link rel="prefetch" href="/docs/assets/js/145.2e68b933.js"><link rel="prefetch" href="/docs/assets/js/146.5eda3607.js"><link rel="prefetch" href="/docs/assets/js/147.1011970a.js"><link rel="prefetch" href="/docs/assets/js/148.0b212740.js"><link rel="prefetch" href="/docs/assets/js/149.045f9f05.js"><link rel="prefetch" href="/docs/assets/js/15.e6064455.js"><link rel="prefetch" href="/docs/assets/js/150.10dadbc4.js"><link rel="prefetch" href="/docs/assets/js/151.295984b0.js"><link rel="prefetch" href="/docs/assets/js/152.4fa99fcf.js"><link rel="prefetch" href="/docs/assets/js/153.3cb15a9d.js"><link rel="prefetch" href="/docs/assets/js/154.cdcbe835.js"><link rel="prefetch" href="/docs/assets/js/155.fd7c5516.js"><link rel="prefetch" href="/docs/assets/js/156.f86034ba.js"><link rel="prefetch" href="/docs/assets/js/157.0bee5ce1.js"><link rel="prefetch" href="/docs/assets/js/158.67388282.js"><link rel="prefetch" href="/docs/assets/js/159.0931fdb1.js"><link rel="prefetch" href="/docs/assets/js/16.616ac548.js"><link rel="prefetch" href="/docs/assets/js/160.c11babce.js"><link rel="prefetch" href="/docs/assets/js/161.dd5b23db.js"><link rel="prefetch" href="/docs/assets/js/162.5d6943c0.js"><link rel="prefetch" href="/docs/assets/js/163.0ef52225.js"><link rel="prefetch" href="/docs/assets/js/164.3bd39a55.js"><link rel="prefetch" href="/docs/assets/js/165.8032e5a0.js"><link rel="prefetch" href="/docs/assets/js/166.1a499829.js"><link rel="prefetch" href="/docs/assets/js/167.b205313c.js"><link rel="prefetch" href="/docs/assets/js/168.922d408c.js"><link rel="prefetch" href="/docs/assets/js/169.d3f114c9.js"><link rel="prefetch" href="/docs/assets/js/17.bff629c7.js"><link rel="prefetch" href="/docs/assets/js/170.5eca41d6.js"><link rel="prefetch" href="/docs/assets/js/171.39ff0887.js"><link rel="prefetch" href="/docs/assets/js/172.f5f2e670.js"><link rel="prefetch" href="/docs/assets/js/173.faa2c6dd.js"><link rel="prefetch" href="/docs/assets/js/174.8cd736f4.js"><link rel="prefetch" href="/docs/assets/js/175.c67397c4.js"><link rel="prefetch" href="/docs/assets/js/176.5664c68f.js"><link rel="prefetch" href="/docs/assets/js/177.e9191df1.js"><link rel="prefetch" href="/docs/assets/js/178.36a25d55.js"><link rel="prefetch" href="/docs/assets/js/179.e99ef22c.js"><link rel="prefetch" href="/docs/assets/js/18.eec7d9b2.js"><link rel="prefetch" href="/docs/assets/js/180.9102d708.js"><link rel="prefetch" href="/docs/assets/js/181.f985f95b.js"><link rel="prefetch" href="/docs/assets/js/182.ffef53f1.js"><link rel="prefetch" href="/docs/assets/js/183.1a036130.js"><link rel="prefetch" href="/docs/assets/js/184.8d555eb4.js"><link rel="prefetch" href="/docs/assets/js/185.0db86884.js"><link rel="prefetch" href="/docs/assets/js/186.680f70c9.js"><link rel="prefetch" href="/docs/assets/js/187.bea8baf8.js"><link rel="prefetch" href="/docs/assets/js/188.1c9ca77b.js"><link rel="prefetch" href="/docs/assets/js/189.81d64f51.js"><link rel="prefetch" href="/docs/assets/js/19.d8516eae.js"><link rel="prefetch" href="/docs/assets/js/190.c70cc2cb.js"><link rel="prefetch" href="/docs/assets/js/191.c0478aef.js"><link rel="prefetch" href="/docs/assets/js/192.b4d84cdc.js"><link rel="prefetch" href="/docs/assets/js/193.71e318d5.js"><link rel="prefetch" href="/docs/assets/js/194.ac390ee4.js"><link rel="prefetch" href="/docs/assets/js/195.a2158d1f.js"><link rel="prefetch" href="/docs/assets/js/196.d9348c47.js"><link rel="prefetch" href="/docs/assets/js/197.69b555bf.js"><link rel="prefetch" href="/docs/assets/js/198.a5f0e733.js"><link rel="prefetch" href="/docs/assets/js/199.3e8efad1.js"><link rel="prefetch" href="/docs/assets/js/20.3fe04c0c.js"><link rel="prefetch" href="/docs/assets/js/200.aeac18be.js"><link rel="prefetch" href="/docs/assets/js/201.9387c4b7.js"><link rel="prefetch" href="/docs/assets/js/202.07584851.js"><link rel="prefetch" href="/docs/assets/js/203.c9313ade.js"><link rel="prefetch" href="/docs/assets/js/204.743dbfea.js"><link rel="prefetch" href="/docs/assets/js/205.a3ce9bc3.js"><link rel="prefetch" href="/docs/assets/js/206.4b4122f3.js"><link rel="prefetch" href="/docs/assets/js/207.58a5d84f.js"><link rel="prefetch" href="/docs/assets/js/208.06d94e7c.js"><link rel="prefetch" href="/docs/assets/js/209.1ddd67a4.js"><link rel="prefetch" href="/docs/assets/js/21.b711ed39.js"><link rel="prefetch" href="/docs/assets/js/210.e8c4de53.js"><link rel="prefetch" href="/docs/assets/js/211.877ee125.js"><link rel="prefetch" href="/docs/assets/js/212.1d8a4922.js"><link rel="prefetch" href="/docs/assets/js/213.cb9d712d.js"><link rel="prefetch" href="/docs/assets/js/214.66c995fd.js"><link rel="prefetch" href="/docs/assets/js/215.6aace6f3.js"><link rel="prefetch" href="/docs/assets/js/216.6a01d95d.js"><link rel="prefetch" href="/docs/assets/js/217.f55a9d7c.js"><link rel="prefetch" href="/docs/assets/js/218.fb2ea161.js"><link rel="prefetch" href="/docs/assets/js/219.93570ded.js"><link rel="prefetch" href="/docs/assets/js/22.181d85f8.js"><link rel="prefetch" href="/docs/assets/js/220.cc02c2af.js"><link rel="prefetch" href="/docs/assets/js/221.e37e1591.js"><link rel="prefetch" href="/docs/assets/js/222.740359b3.js"><link rel="prefetch" href="/docs/assets/js/223.e86393cf.js"><link rel="prefetch" href="/docs/assets/js/224.d0da7190.js"><link rel="prefetch" href="/docs/assets/js/225.e9a3c59f.js"><link rel="prefetch" href="/docs/assets/js/226.5fbc2f36.js"><link rel="prefetch" href="/docs/assets/js/227.2a4dede7.js"><link rel="prefetch" href="/docs/assets/js/228.81ca5856.js"><link rel="prefetch" href="/docs/assets/js/229.e3e4b554.js"><link rel="prefetch" href="/docs/assets/js/23.f7b31a47.js"><link rel="prefetch" href="/docs/assets/js/230.d76f996b.js"><link rel="prefetch" href="/docs/assets/js/231.60b59ce9.js"><link rel="prefetch" href="/docs/assets/js/232.008f706e.js"><link rel="prefetch" href="/docs/assets/js/233.375b1b6e.js"><link rel="prefetch" href="/docs/assets/js/234.8bc980f6.js"><link rel="prefetch" href="/docs/assets/js/235.ecbc6b83.js"><link rel="prefetch" href="/docs/assets/js/236.6230ff8a.js"><link rel="prefetch" href="/docs/assets/js/237.1a97874b.js"><link rel="prefetch" href="/docs/assets/js/238.71d1868b.js"><link rel="prefetch" href="/docs/assets/js/239.3aa661e5.js"><link rel="prefetch" href="/docs/assets/js/240.dd1131dc.js"><link rel="prefetch" href="/docs/assets/js/241.1bc027a1.js"><link rel="prefetch" href="/docs/assets/js/242.08373308.js"><link rel="prefetch" href="/docs/assets/js/243.297f60c9.js"><link rel="prefetch" href="/docs/assets/js/244.00ed072e.js"><link rel="prefetch" href="/docs/assets/js/245.cd27b8cd.js"><link rel="prefetch" href="/docs/assets/js/246.013224ad.js"><link rel="prefetch" href="/docs/assets/js/247.33f56bc3.js"><link rel="prefetch" href="/docs/assets/js/248.e588754a.js"><link rel="prefetch" href="/docs/assets/js/249.f1f52fd7.js"><link rel="prefetch" href="/docs/assets/js/25.1b72f38f.js"><link rel="prefetch" href="/docs/assets/js/250.aa054e2e.js"><link rel="prefetch" href="/docs/assets/js/251.f2684ce8.js"><link rel="prefetch" href="/docs/assets/js/252.b62ede58.js"><link rel="prefetch" href="/docs/assets/js/253.2424eb44.js"><link rel="prefetch" href="/docs/assets/js/254.8605f6b5.js"><link rel="prefetch" href="/docs/assets/js/255.019b3b6f.js"><link rel="prefetch" href="/docs/assets/js/256.112a988a.js"><link rel="prefetch" href="/docs/assets/js/257.48ff3e9e.js"><link rel="prefetch" href="/docs/assets/js/258.c57c116f.js"><link rel="prefetch" href="/docs/assets/js/259.aa7a65f6.js"><link rel="prefetch" href="/docs/assets/js/26.7bedb575.js"><link rel="prefetch" href="/docs/assets/js/260.c05fc88d.js"><link rel="prefetch" href="/docs/assets/js/261.f784febb.js"><link rel="prefetch" href="/docs/assets/js/262.4ea219ab.js"><link rel="prefetch" href="/docs/assets/js/263.cf507db3.js"><link rel="prefetch" href="/docs/assets/js/264.1e9a11c8.js"><link rel="prefetch" href="/docs/assets/js/265.f42f97e9.js"><link rel="prefetch" href="/docs/assets/js/266.1c2e63a7.js"><link rel="prefetch" href="/docs/assets/js/267.758cf377.js"><link rel="prefetch" href="/docs/assets/js/268.fe34ba72.js"><link rel="prefetch" href="/docs/assets/js/269.29ca4e93.js"><link rel="prefetch" href="/docs/assets/js/27.5a7c3b47.js"><link rel="prefetch" href="/docs/assets/js/270.7db7cb90.js"><link rel="prefetch" href="/docs/assets/js/271.cb0dc068.js"><link rel="prefetch" href="/docs/assets/js/272.77fa111a.js"><link rel="prefetch" href="/docs/assets/js/273.0be202a7.js"><link rel="prefetch" href="/docs/assets/js/274.48391e7b.js"><link rel="prefetch" href="/docs/assets/js/275.7669041e.js"><link rel="prefetch" href="/docs/assets/js/276.eb5f2fee.js"><link rel="prefetch" href="/docs/assets/js/277.16119a69.js"><link rel="prefetch" href="/docs/assets/js/278.72083ac8.js"><link rel="prefetch" href="/docs/assets/js/279.15e1771d.js"><link rel="prefetch" href="/docs/assets/js/28.374a14f9.js"><link rel="prefetch" href="/docs/assets/js/280.ca50ba08.js"><link rel="prefetch" href="/docs/assets/js/281.62bed578.js"><link rel="prefetch" href="/docs/assets/js/282.49a25059.js"><link rel="prefetch" href="/docs/assets/js/283.1e9c0250.js"><link rel="prefetch" href="/docs/assets/js/284.8e034c1b.js"><link rel="prefetch" href="/docs/assets/js/285.a24de9a3.js"><link rel="prefetch" href="/docs/assets/js/286.270e301e.js"><link rel="prefetch" href="/docs/assets/js/287.286ad858.js"><link rel="prefetch" href="/docs/assets/js/29.d3adfe56.js"><link rel="prefetch" href="/docs/assets/js/3.30731c7e.js"><link rel="prefetch" href="/docs/assets/js/30.1928ea42.js"><link rel="prefetch" href="/docs/assets/js/31.cec77a6b.js"><link rel="prefetch" href="/docs/assets/js/32.7e6134cb.js"><link rel="prefetch" href="/docs/assets/js/33.cd8e1397.js"><link rel="prefetch" href="/docs/assets/js/34.1680d438.js"><link rel="prefetch" href="/docs/assets/js/35.d03bc804.js"><link rel="prefetch" href="/docs/assets/js/36.09ab867b.js"><link rel="prefetch" href="/docs/assets/js/37.0138deec.js"><link rel="prefetch" href="/docs/assets/js/38.ef44f92e.js"><link rel="prefetch" href="/docs/assets/js/39.096b140c.js"><link rel="prefetch" href="/docs/assets/js/4.bbe544e8.js"><link rel="prefetch" href="/docs/assets/js/40.b2844efe.js"><link rel="prefetch" href="/docs/assets/js/41.d17c497d.js"><link rel="prefetch" href="/docs/assets/js/42.6cf5443b.js"><link rel="prefetch" href="/docs/assets/js/43.d9459bef.js"><link rel="prefetch" href="/docs/assets/js/44.29a0ee1a.js"><link rel="prefetch" href="/docs/assets/js/45.f4fe9b97.js"><link rel="prefetch" href="/docs/assets/js/46.75a7f037.js"><link rel="prefetch" href="/docs/assets/js/47.03fd116c.js"><link rel="prefetch" href="/docs/assets/js/48.e599f197.js"><link rel="prefetch" href="/docs/assets/js/49.90e53c4f.js"><link rel="prefetch" href="/docs/assets/js/5.b009095e.js"><link rel="prefetch" href="/docs/assets/js/50.8ba7f097.js"><link rel="prefetch" href="/docs/assets/js/51.2977bdde.js"><link rel="prefetch" href="/docs/assets/js/52.f911733f.js"><link rel="prefetch" href="/docs/assets/js/53.f11a069c.js"><link rel="prefetch" href="/docs/assets/js/54.1e86b7a3.js"><link rel="prefetch" href="/docs/assets/js/55.9b97a2a7.js"><link rel="prefetch" href="/docs/assets/js/56.49042f5d.js"><link rel="prefetch" href="/docs/assets/js/57.fd3564b6.js"><link rel="prefetch" href="/docs/assets/js/58.bf82d3b7.js"><link rel="prefetch" href="/docs/assets/js/59.233a4681.js"><link rel="prefetch" href="/docs/assets/js/6.fae158fc.js"><link rel="prefetch" href="/docs/assets/js/60.712f07a1.js"><link rel="prefetch" href="/docs/assets/js/61.60360262.js"><link rel="prefetch" href="/docs/assets/js/62.5975afbd.js"><link rel="prefetch" href="/docs/assets/js/63.fa2cbe4d.js"><link rel="prefetch" href="/docs/assets/js/64.48d02cd4.js"><link rel="prefetch" href="/docs/assets/js/65.deef4b99.js"><link rel="prefetch" href="/docs/assets/js/66.a2f7c304.js"><link rel="prefetch" href="/docs/assets/js/67.d5c80293.js"><link rel="prefetch" href="/docs/assets/js/68.58e82388.js"><link rel="prefetch" href="/docs/assets/js/69.12efcefa.js"><link rel="prefetch" href="/docs/assets/js/7.6c2e5e4d.js"><link rel="prefetch" href="/docs/assets/js/71.0caf376c.js"><link rel="prefetch" href="/docs/assets/js/72.a809f677.js"><link rel="prefetch" href="/docs/assets/js/73.29c46644.js"><link rel="prefetch" href="/docs/assets/js/74.1925ccf3.js"><link rel="prefetch" href="/docs/assets/js/75.1b0d26c9.js"><link rel="prefetch" href="/docs/assets/js/76.6038365c.js"><link rel="prefetch" href="/docs/assets/js/77.0aebb4b4.js"><link rel="prefetch" href="/docs/assets/js/78.d6895d81.js"><link rel="prefetch" href="/docs/assets/js/79.12d16d82.js"><link rel="prefetch" href="/docs/assets/js/8.9b9cd82a.js"><link rel="prefetch" href="/docs/assets/js/80.e67a7386.js"><link rel="prefetch" href="/docs/assets/js/81.04634101.js"><link rel="prefetch" href="/docs/assets/js/82.4fb7a72c.js"><link rel="prefetch" href="/docs/assets/js/83.87ca4522.js"><link rel="prefetch" href="/docs/assets/js/84.4e1bb272.js"><link rel="prefetch" href="/docs/assets/js/85.c898e628.js"><link rel="prefetch" href="/docs/assets/js/86.f1953c53.js"><link rel="prefetch" href="/docs/assets/js/87.28f5e101.js"><link rel="prefetch" href="/docs/assets/js/88.896a4982.js"><link rel="prefetch" href="/docs/assets/js/89.a83b200f.js"><link rel="prefetch" href="/docs/assets/js/9.051f6c42.js"><link rel="prefetch" href="/docs/assets/js/90.2f7232ff.js"><link rel="prefetch" href="/docs/assets/js/91.0e6ac974.js"><link rel="prefetch" href="/docs/assets/js/92.8140663d.js"><link rel="prefetch" href="/docs/assets/js/93.159f88d3.js"><link rel="prefetch" href="/docs/assets/js/94.1c920b48.js"><link rel="prefetch" href="/docs/assets/js/95.8b8815fc.js"><link rel="prefetch" href="/docs/assets/js/96.517009c1.js"><link rel="prefetch" href="/docs/assets/js/97.8bbf4550.js"><link rel="prefetch" href="/docs/assets/js/98.ed7a6039.js"><link rel="prefetch" href="/docs/assets/js/99.8efc7f3f.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.5d974432.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">Nguyễn Khánk's Wiki</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/architect/" class="nav-link router-link-active">
  Architecture
</a></div><div class="nav-item"><a href="https://nguyenngockhank.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/architect/" class="nav-link router-link-active">
  Architecture
</a></div><div class="nav-item"><a href="https://nguyenngockhank.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/docs/architect/" aria-current="page" class="sidebar-link">Architecture Overview</a></li><li><a href="/docs/architect/philosophy-sw-design.html" class="sidebar-link">A Philosophy of Software Design</a></li><li><a href="/docs/architect/ddd.html" class="sidebar-link">Domain-Driven Design</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>The Architecture of Systems</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Khác</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/architect/authenication.html" class="sidebar-link">Authenication</a></li><li><a href="/docs/architect/full_stack_software_design.html" class="sidebar-link">The Full-stack Software Design &amp; Architecture Map</a></li><li><a href="/docs/architect/terms.html" class="sidebar-link">Architecture Terms</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Họ làm điều đó như nào?</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>NoSql Distilled</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/architect/nosql-distilled/00.html" class="sidebar-link">NoSQL Distilled</a></li><li><a href="/docs/architect/nosql-distilled/c0.html" class="sidebar-link">Preface</a></li><li><a href="/docs/architect/nosql-distilled/c1.html" class="sidebar-link">Chapter 1. Why NoSQL?</a></li><li><a href="/docs/architect/nosql-distilled/c2.html" class="sidebar-link">Chapter 2. Aggregate Data Models</a></li><li><a href="/docs/architect/nosql-distilled/c3.html" class="sidebar-link">Chapter 3. More Details on Data Models</a></li><li><a href="/docs/architect/nosql-distilled/c4.html" class="sidebar-link">Chapter 4. Distribution Models</a></li><li><a href="/docs/architect/nosql-distilled/c5.html" class="sidebar-link">Chapter 5. Consistency</a></li><li><a href="/docs/architect/nosql-distilled/c6.html" aria-current="page" class="active sidebar-link">Chapter 6. Version Stamps</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/architect/nosql-distilled/c6.html#_6-1-business-and-system-transactions" class="sidebar-link">6.1. Business and System Transactions</a></li><li class="sidebar-sub-header"><a href="/docs/architect/nosql-distilled/c6.html#_6-2-version-stamps-on-multiple-nodes" class="sidebar-link">6.2. Version Stamps on Multiple Nodes</a></li><li class="sidebar-sub-header"><a href="/docs/architect/nosql-distilled/c6.html#_6-3-key-points" class="sidebar-link">6.3. Key Points</a></li></ul></li><li><a href="/docs/architect/nosql-distilled/c7.html" class="sidebar-link">Chapter 7. Map-Reduce</a></li><li><a href="/docs/architect/nosql-distilled/c8.html" class="sidebar-link">Chapter 8. Key-Value Databases</a></li><li><a href="/docs/architect/nosql-distilled/c9.html" class="sidebar-link">Chapter 9. Document Databases</a></li><li><a href="/docs/architect/nosql-distilled/c10.html" class="sidebar-link">Chapter 10. Column-Family Stores</a></li><li><a href="/docs/architect/nosql-distilled/c11.html" class="sidebar-link">Chapter 11. Graph Databases</a></li><li><a href="/docs/architect/nosql-distilled/c12.html" class="sidebar-link">Chapter 12. Schema Migrations</a></li><li><a href="/docs/architect/nosql-distilled/c13.html" class="sidebar-link">Chapter 13. Polyglot Persistence</a></li><li><a href="/docs/architect/nosql-distilled/c14.html" class="sidebar-link">Chapter 14. Beyond NoSQL</a></li><li><a href="/docs/architect/nosql-distilled/c15.html" class="sidebar-link">Chapter 15. Choosing Your Database</a></li></ul></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="chapter-6-version-stamps"><a href="#chapter-6-version-stamps" class="header-anchor">#</a> Chapter 6. Version Stamps</h1> <p>Many critics of NoSQL databases focus on the lack of support for transactions. Transactions are a
useful tool that helps programmers support consistency. One reason why many NoSQL proponents
worry less about a lack of transactions is that aggregate-oriented NoSQL databases do support atomic
updates within an aggregate—and aggregates are designed so that their data forms a natural unit of
update. That said, it’s true that transactional needs are something to take into account when you
decide what database to use.</p> <p>As part of this, it’s important to remember that transactions have limitations. Even within a
transactional system we still have to deal with updates that require human intervention and usually
cannot be run within transactions because they would involve holding a transaction open for too long.
We can cope with these using <strong>version stamps</strong> —which turn out to be handy in other situations as well,
particularly as we move away from the single-server distribution model.</p> <h2 id="_6-1-business-and-system-transactions"><a href="#_6-1-business-and-system-transactions" class="header-anchor">#</a> 6.1. Business and System Transactions</h2> <p>The need to support update consistency without transactions is actually a common feature of systems
even when they are built on top of transactional databases. When users think about transactions, they
usually mean <strong>business transactions</strong>. A business transaction may be something like browsing a
product catalog, choosing a bottle of Talisker at a good price, filling in credit card information, and
confirming the order. Yet all of this usually won’t occur within the <strong>system transaction</strong> provided by
the database because this would mean locking the database elements while the user is trying to find
their credit card and gets called off to lunch by their colleagues.</p> <p>Usually applications only begin a system transaction at the end of the interaction with the user, so
that the locks are only held for a short period of time. The problem, however, is that calculations and
decisions may have been made based on data that’s changed. The price list may have updated the
price of the Talisker, or someone may have updated the customer’s address, changing the shipping
charges.</p> <p>The broad techniques for handling this are offline concurrency [Fowler PoEAA], useful in NoSQL
situations too. A particularly useful approach is the Optimistic Offline Lock [Fowler PoEAA], a form
of conditional update where a client operation rereads any information that the business transaction
relies on and checks that it hasn’t changed since it was originally read and displayed to the user. A
good way of doing this is to ensure that records in the database contain some form of <strong>version stamp</strong> :
a field that changes every time the underlying data in the record changes. When you read the data you
keep a note of the version stamp, so that when you write data you can check to see if the version has
changed.</p> <p>You may have come across this technique with updating resources with HTTP. One way
of doing this is to use etags. Whenever you get a resource, the server responds with an etag in the
header. This etag is an opaque string that indicates the version of the resource. If you then update that resource, you can use a conditional update by supplying the etag that you got from your last GET. If the resource has changed on the server, the etags won’t match and the server will refuse the update,
returning a <em>412 (Precondition Failed)</em> response.</p> <p>Some databases provide a similar mechanism of conditional update that allows you to ensure
updates won’t be based on stale data. You can do this check yourself, although you then have to</p> <p>ensure no other thread can run against the resource between your read and your update. (Sometimes
this is called a compare-and-set (CAS) operation, whose name comes from the CAS operations done
in processors. The difference is that a processor CAS compares a value before setting it, while a
database conditional update compares a version stamp of the value.)</p> <p>There are various ways you can construct your version stamps. You can use a counter, always
incrementing it when you update the resource. Counters are useful since they make it easy to tell if one
version is more recent than another. On the other hand, they require the server to generate the counter
value, and also need a single master to ensure the counters aren’t duplicated.</p> <p>Another approach is to create a GUID, a large random number that’s guaranteed to be unique.
These use some combination of dates, hardware information, and whatever other sources of
randomness they can pick up. The nice thing about GUIDs is that they can be generated by anyone and
you’ll never get a duplicate; a disadvantage is that they are large and can’t be compared directly for
recentness.</p> <p>A third approach is to make a hash of the contents of the resource. With a big enough hash key size,
a content hash can be globally unique like a GUID and can also be generated by anyone; the advantage
is that they are deterministic—any node will generate the same content hash for same resource data.
However, like GUIDs they can’t be directly compared for recentness, and they can be lengthy.</p> <p>A fourth approach is to use the timestamp of the last update. Like counters, they are reasonably
short and can be directly compared for recentness, yet have the advantage of not needing a single
master. Multiple machines can generate timestamps—but to work properly, their clocks have to be
kept in sync. One node with a bad clock can cause all sorts of data corruptions. There’s also a danger
that if the timestamp is too granular you can get duplicates—it’s no good using timestamps of a
millisecond precision if you get many updates per millisecond.</p> <p>You can blend the advantages of these different version stamp schemes by using more than one of
them to create a composite stamp. For example, CouchDB uses a combination of counter and content
hash. Most of the time this allows version stamps to be compared for recentness, even when you use
peer-to-peer replication. Should two peers update at the same time, the combination of the same count
and different content hashes makes it easy to spot the conflict.</p> <p>As well as helping to avoid update conflicts, version stamps are also useful for providing session
consistency (p. 52 ).</p> <h2 id="_6-2-version-stamps-on-multiple-nodes"><a href="#_6-2-version-stamps-on-multiple-nodes" class="header-anchor">#</a> 6.2. Version Stamps on Multiple Nodes</h2> <p>The basic version stamp works well when you have a single authoritative source for data, such as a
single server or master-slave replication. In that case the version stamp is controlled by the master.
Any slaves follow the master’s stamps. But this system has to be enhanced in a peer-to-peer
distribution model because there’s no longer a single place to set the version stamps.</p> <p>If you’re asking two nodes for some data, you run into the chance that they may give you different
answers. If this happens, your reaction may vary depending on the cause of that difference. It may be
that an update has only reached one node but not the other, in which case you can accept the latest
(assuming you can tell which one that is). Alternatively, you may have run into an inconsistent update,
in which case you need to decide how to deal with that. In this situation, a simple GUID or etag won’t
suffice, since these don’t tell you enough about the relationships.</p> <p>The simplest form of version stamp is a counter. Each time a node updates the data, it increments the counter and puts the value of the counter into the version stamp. If you have blue and green slave
replicas of a single master, and the blue node answers with a version stamp of 4 and the green node
with 6, you know that the green’s answer is more recent.</p> <p>In multiple-master cases, we need something fancier. One approach, used by distributed version
control systems, is to ensure that all nodes contain a history of version stamps. That way you can see
if the blue node’s answer is an ancestor of the green’s answer. This would either require the clients to
hold onto version stamp histories, or the server nodes to keep version stamp histories and include
them when asked for data. This also detects an inconsistency, which we would see if we get two
version stamps and neither of them has the other in their histories. Although version control systems
keep these kinds of histories, they aren’t found in NoSQL databases.</p> <p>A simple but problematic approach is to use timestamps. The main problem here is that it’s usually
difficult to ensure that all the nodes have a consistent notion of time, particularly if updates can
happen rapidly. Should a node’s clock get out of sync, it can cause all sorts of trouble. In addition,
you can’t detect write-write conflicts with timestamps, so it would only work well for the single-
master case—and then a counter is usually better.</p> <p>The most common approach used by peer-to-peer NoSQL systems is a special form of version
stamp which we call a vector stamp. In essence, a <strong>vector stamp</strong> is a set of counters, one for each
node. A vector stamp for <em>three nodes (blue, green, black)</em> would look something like <em><code>[blue: 43, green: 54, black: 12]</code></em>. Each time a node has an internal update, it updates its own counter, so an
update in the green node would change the vector to <em><code>[blue: 43, green: 55, black: 12]</code></em>.
Whenever two nodes communicate, they synchronize their vector stamps. There are several variations
of exactly how this synchronization is done. We’re coining the term “vector stamp” as a general term
in this book; you’ll also come across <strong>vector clocks</strong> and <strong>version vectors</strong> —these are specific forms of vector stamps that differ in how they synchronize.</p> <p>By using this scheme you can tell if one version stamp is newer than another because the newer
stamp will have all its counters greater than or equal to those in the older stamp. So <em><code>[blue: 1, green: 2, black: 5]</code></em> is newer than <em><code>[blue:1, green: 1, black 5]</code></em> since one of its counters is
greater. If both stamps have a counter greater than the other, e.g. <em><code>[blue: 1, green: 2, black: 5]* and *[blue: 2, green: 1, black: 5]</code></em>, then you have a write-write conflict.</p> <p>There may be missing values in the vector, in which case we use treat the missing value as 0. So
<em><code>[blue: 6, black: 2]</code></em> would be treated as <em><code>[blue: 6, green: 0, black: 2]</code></em>. This allows you to
easily add new nodes without invalidating the existing vector stamps.</p> <p>Vector stamps are a valuable tool that spots inconsistencies, but doesn’t resolve them. Any conflict resolution will depend on the domain you are working in. This is part of the consistency/latency tradeoff. You either have to live with the fact that network partitions may make your system unavailable, or you have to detect and deal with inconsistencies.</p> <h2 id="_6-3-key-points"><a href="#_6-3-key-points" class="header-anchor">#</a> 6.3. Key Points</h2> <ul><li>Version stamps help you detect concurrency conflicts. When you read data, then update it, you can check the version stamp to ensure nobody updated the data between your read and write.</li> <li>Version stamps can be implemented using counters, GUIDs, content hashes, timestamps, or a combination of these.</li> <li>With distributed systems, a vector of version stamps allows you to detect when different nodes have conflicting updates.</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/architect/nosql-distilled/c5.html" class="prev">
        Chapter 5. Consistency
      </a></span> <span class="next"><a href="/docs/architect/nosql-distilled/c7.html">
        Chapter 7. Map-Reduce
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----><!----></div></div>
    <script src="/docs/assets/js/app.a82515ad.js" defer></script><script src="/docs/assets/js/2.f326a5a1.js" defer></script><script src="/docs/assets/js/70.d47cdd36.js" defer></script><script src="/docs/assets/js/24.55a1e86e.js" defer></script>
  </body>
</html>
