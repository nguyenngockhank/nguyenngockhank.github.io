<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Clean Architecture | Nguyễn Khánk&#39;s Wiki</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="apple-touch-icon" sizes="180x180" href="../public/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../public/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../public/favicons/favicon-16x16.png">
    <link rel="manifest" href="../public/favicons/manifest.json">
    <link rel="mask-icon" href="../public/favicons/safari-pinned-tab.svg" color="#3a0839">
    <link rel="shortcut icon" href="../public/favicons/favicon.ico">
    <meta name="description" content="Wikipedia của tui">
    <meta name="msapplication-TileColor" content="#3a0839">
    <meta name="msapplication-config" content="../public/favicons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <link rel="preload" href="/docs/assets/css/0.styles.15db6eca.css" as="style"><link rel="preload" href="/docs/assets/js/app.1de406c1.js" as="script"><link rel="preload" href="/docs/assets/js/2.9c32d6ee.js" as="script"><link rel="preload" href="/docs/assets/js/7.ab93e64f.js" as="script"><link rel="preload" href="/docs/assets/js/13.fb70cafb.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.0c22c18e.js"><link rel="prefetch" href="/docs/assets/js/100.8cba43d4.js"><link rel="prefetch" href="/docs/assets/js/101.cf5dc23e.js"><link rel="prefetch" href="/docs/assets/js/102.9a427f71.js"><link rel="prefetch" href="/docs/assets/js/103.b6c39f82.js"><link rel="prefetch" href="/docs/assets/js/104.737606a1.js"><link rel="prefetch" href="/docs/assets/js/105.1ace4285.js"><link rel="prefetch" href="/docs/assets/js/106.15c69705.js"><link rel="prefetch" href="/docs/assets/js/107.b35c3777.js"><link rel="prefetch" href="/docs/assets/js/108.fa45a387.js"><link rel="prefetch" href="/docs/assets/js/109.54e16755.js"><link rel="prefetch" href="/docs/assets/js/11.56af7241.js"><link rel="prefetch" href="/docs/assets/js/110.4859ff28.js"><link rel="prefetch" href="/docs/assets/js/111.1853af43.js"><link rel="prefetch" href="/docs/assets/js/112.d5e2ce30.js"><link rel="prefetch" href="/docs/assets/js/113.28e671af.js"><link rel="prefetch" href="/docs/assets/js/114.81fda54b.js"><link rel="prefetch" href="/docs/assets/js/115.98770587.js"><link rel="prefetch" href="/docs/assets/js/116.d0893a2f.js"><link rel="prefetch" href="/docs/assets/js/117.a0190312.js"><link rel="prefetch" href="/docs/assets/js/118.bd8b2d5b.js"><link rel="prefetch" href="/docs/assets/js/119.390a329f.js"><link rel="prefetch" href="/docs/assets/js/12.63e00f26.js"><link rel="prefetch" href="/docs/assets/js/120.1b29081d.js"><link rel="prefetch" href="/docs/assets/js/121.879da784.js"><link rel="prefetch" href="/docs/assets/js/122.be9f31ed.js"><link rel="prefetch" href="/docs/assets/js/123.91326167.js"><link rel="prefetch" href="/docs/assets/js/124.4efa5b9e.js"><link rel="prefetch" href="/docs/assets/js/125.7c74bf75.js"><link rel="prefetch" href="/docs/assets/js/126.1d726006.js"><link rel="prefetch" href="/docs/assets/js/127.26def29f.js"><link rel="prefetch" href="/docs/assets/js/128.522456ed.js"><link rel="prefetch" href="/docs/assets/js/129.eb0f4a89.js"><link rel="prefetch" href="/docs/assets/js/130.0310f7df.js"><link rel="prefetch" href="/docs/assets/js/131.07be65b9.js"><link rel="prefetch" href="/docs/assets/js/132.3d699d58.js"><link rel="prefetch" href="/docs/assets/js/133.3fca77b1.js"><link rel="prefetch" href="/docs/assets/js/134.6d25177d.js"><link rel="prefetch" href="/docs/assets/js/135.20917c95.js"><link rel="prefetch" href="/docs/assets/js/136.8ed56e03.js"><link rel="prefetch" href="/docs/assets/js/137.1248471c.js"><link rel="prefetch" href="/docs/assets/js/138.badc9d12.js"><link rel="prefetch" href="/docs/assets/js/139.4094788d.js"><link rel="prefetch" href="/docs/assets/js/14.c0552a00.js"><link rel="prefetch" href="/docs/assets/js/140.799ffd7e.js"><link rel="prefetch" href="/docs/assets/js/141.48a23b62.js"><link rel="prefetch" href="/docs/assets/js/142.9fb8dac2.js"><link rel="prefetch" href="/docs/assets/js/143.c8c5b73e.js"><link rel="prefetch" href="/docs/assets/js/144.641a8f67.js"><link rel="prefetch" href="/docs/assets/js/145.5daf9afa.js"><link rel="prefetch" href="/docs/assets/js/146.1510dba2.js"><link rel="prefetch" href="/docs/assets/js/147.28c2f76f.js"><link rel="prefetch" href="/docs/assets/js/148.54a08804.js"><link rel="prefetch" href="/docs/assets/js/149.a1747c3a.js"><link rel="prefetch" href="/docs/assets/js/15.b49517f1.js"><link rel="prefetch" href="/docs/assets/js/150.f799ec70.js"><link rel="prefetch" href="/docs/assets/js/151.edbbde91.js"><link rel="prefetch" href="/docs/assets/js/152.a6b7eb10.js"><link rel="prefetch" href="/docs/assets/js/153.fff40c8a.js"><link rel="prefetch" href="/docs/assets/js/154.59b828bd.js"><link rel="prefetch" href="/docs/assets/js/155.7741a472.js"><link rel="prefetch" href="/docs/assets/js/16.71cc698a.js"><link rel="prefetch" href="/docs/assets/js/17.f4784ec5.js"><link rel="prefetch" href="/docs/assets/js/18.a638ea7f.js"><link rel="prefetch" href="/docs/assets/js/19.e978e989.js"><link rel="prefetch" href="/docs/assets/js/20.a93714b7.js"><link rel="prefetch" href="/docs/assets/js/21.5f357deb.js"><link rel="prefetch" href="/docs/assets/js/22.a8994c9c.js"><link rel="prefetch" href="/docs/assets/js/23.775ce537.js"><link rel="prefetch" href="/docs/assets/js/24.15e55c8d.js"><link rel="prefetch" href="/docs/assets/js/25.4fc9833e.js"><link rel="prefetch" href="/docs/assets/js/26.c6e20504.js"><link rel="prefetch" href="/docs/assets/js/27.49664f15.js"><link rel="prefetch" href="/docs/assets/js/28.f7d211f2.js"><link rel="prefetch" href="/docs/assets/js/29.9630473e.js"><link rel="prefetch" href="/docs/assets/js/3.d7059bcd.js"><link rel="prefetch" href="/docs/assets/js/30.87d600e2.js"><link rel="prefetch" href="/docs/assets/js/31.c35e2f89.js"><link rel="prefetch" href="/docs/assets/js/32.7dac83e3.js"><link rel="prefetch" href="/docs/assets/js/33.add7e3ec.js"><link rel="prefetch" href="/docs/assets/js/34.1e649bd5.js"><link rel="prefetch" href="/docs/assets/js/35.41b03c43.js"><link rel="prefetch" href="/docs/assets/js/36.4f1c23ac.js"><link rel="prefetch" href="/docs/assets/js/37.d4c5ba80.js"><link rel="prefetch" href="/docs/assets/js/38.0d8720ab.js"><link rel="prefetch" href="/docs/assets/js/39.e0a856ff.js"><link rel="prefetch" href="/docs/assets/js/4.1627638d.js"><link rel="prefetch" href="/docs/assets/js/40.fa65c73d.js"><link rel="prefetch" href="/docs/assets/js/41.4a437151.js"><link rel="prefetch" href="/docs/assets/js/42.524ef463.js"><link rel="prefetch" href="/docs/assets/js/43.b3efaf30.js"><link rel="prefetch" href="/docs/assets/js/44.c5bc3214.js"><link rel="prefetch" href="/docs/assets/js/45.1ddc1069.js"><link rel="prefetch" href="/docs/assets/js/46.1c3d6f72.js"><link rel="prefetch" href="/docs/assets/js/47.6bbc8bbc.js"><link rel="prefetch" href="/docs/assets/js/48.76cdd5d2.js"><link rel="prefetch" href="/docs/assets/js/49.2085d91d.js"><link rel="prefetch" href="/docs/assets/js/5.900af00c.js"><link rel="prefetch" href="/docs/assets/js/50.88fc108b.js"><link rel="prefetch" href="/docs/assets/js/51.324dc6e0.js"><link rel="prefetch" href="/docs/assets/js/52.444c9cbd.js"><link rel="prefetch" href="/docs/assets/js/53.150f508c.js"><link rel="prefetch" href="/docs/assets/js/54.a1dd91cd.js"><link rel="prefetch" href="/docs/assets/js/55.c56eaa6e.js"><link rel="prefetch" href="/docs/assets/js/56.78dd8ea7.js"><link rel="prefetch" href="/docs/assets/js/57.bc4c4566.js"><link rel="prefetch" href="/docs/assets/js/58.871e741c.js"><link rel="prefetch" href="/docs/assets/js/59.7aa29408.js"><link rel="prefetch" href="/docs/assets/js/6.e98a72b5.js"><link rel="prefetch" href="/docs/assets/js/60.c0692988.js"><link rel="prefetch" href="/docs/assets/js/61.6f754b41.js"><link rel="prefetch" href="/docs/assets/js/62.37f2d7cb.js"><link rel="prefetch" href="/docs/assets/js/63.252aa936.js"><link rel="prefetch" href="/docs/assets/js/64.13789a77.js"><link rel="prefetch" href="/docs/assets/js/65.49b2d72d.js"><link rel="prefetch" href="/docs/assets/js/66.16ffa500.js"><link rel="prefetch" href="/docs/assets/js/67.38962fa5.js"><link rel="prefetch" href="/docs/assets/js/68.63036922.js"><link rel="prefetch" href="/docs/assets/js/69.8ad54625.js"><link rel="prefetch" href="/docs/assets/js/70.a0d73a91.js"><link rel="prefetch" href="/docs/assets/js/71.d15b341b.js"><link rel="prefetch" href="/docs/assets/js/72.cc2a2438.js"><link rel="prefetch" href="/docs/assets/js/73.2d849b97.js"><link rel="prefetch" href="/docs/assets/js/74.10e43e50.js"><link rel="prefetch" href="/docs/assets/js/75.2744e58f.js"><link rel="prefetch" href="/docs/assets/js/76.7be28510.js"><link rel="prefetch" href="/docs/assets/js/77.05b76001.js"><link rel="prefetch" href="/docs/assets/js/78.1c3cec65.js"><link rel="prefetch" href="/docs/assets/js/79.b23290d0.js"><link rel="prefetch" href="/docs/assets/js/8.143a3751.js"><link rel="prefetch" href="/docs/assets/js/80.8571f013.js"><link rel="prefetch" href="/docs/assets/js/81.8fbdd0f2.js"><link rel="prefetch" href="/docs/assets/js/82.6f21f3d1.js"><link rel="prefetch" href="/docs/assets/js/83.8a746e9e.js"><link rel="prefetch" href="/docs/assets/js/84.67f0b25a.js"><link rel="prefetch" href="/docs/assets/js/85.aec475c2.js"><link rel="prefetch" href="/docs/assets/js/86.5daddde6.js"><link rel="prefetch" href="/docs/assets/js/87.c58c694a.js"><link rel="prefetch" href="/docs/assets/js/88.c1490c5a.js"><link rel="prefetch" href="/docs/assets/js/89.ad7fdae4.js"><link rel="prefetch" href="/docs/assets/js/9.5b58cce9.js"><link rel="prefetch" href="/docs/assets/js/90.f98a4296.js"><link rel="prefetch" href="/docs/assets/js/91.d8c68ea8.js"><link rel="prefetch" href="/docs/assets/js/92.83ce780a.js"><link rel="prefetch" href="/docs/assets/js/93.cf241a18.js"><link rel="prefetch" href="/docs/assets/js/94.e8fe2ddc.js"><link rel="prefetch" href="/docs/assets/js/95.a806689a.js"><link rel="prefetch" href="/docs/assets/js/96.ccf77164.js"><link rel="prefetch" href="/docs/assets/js/97.258c6533.js"><link rel="prefetch" href="/docs/assets/js/98.7c0173f8.js"><link rel="prefetch" href="/docs/assets/js/99.780a6144.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.15db6eca.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">Nguyễn Khánk's Wiki</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/architect/" class="nav-link router-link-active">
  Architecture
</a></div><div class="nav-item"><a href="https://nguyenngockhank.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/architect/" class="nav-link router-link-active">
  Architecture
</a></div><div class="nav-item"><a href="https://nguyenngockhank.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/docs/architect/" aria-current="page" class="sidebar-link">Architecture Overview</a></li><li><a href="/docs/architect/philosophy-sw-design.html" class="sidebar-link">A Philosophy of Software Design</a></li><li><a href="/docs/architect/ddd.html" class="sidebar-link">Domain-Driven Design</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>The Architecture of Systems</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/architect/clean_A.html" aria-current="page" class="active sidebar-link">Clean Architecture</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/architect/clean_A.html#cac-cong-cu-ben-ngoai-va-co-che-phan-phoi" class="sidebar-link">Các công cụ bên ngoài và cơ chế phân phối</a></li><li class="sidebar-sub-header"><a href="/docs/architect/clean_A.html#chieu-cua-su-phu-thuoc" class="sidebar-link">Chiều của sự phụ thuộc</a></li><li class="sidebar-sub-header"><a href="/docs/architect/clean_A.html#cac-layers" class="sidebar-link">Các Layers</a></li><li class="sidebar-sub-header"><a href="/docs/architect/clean_A.html#kha-nang-co-lap-kiem-thu" class="sidebar-link">Khả năng cô lập kiểm thử</a></li><li class="sidebar-sub-header"><a href="/docs/architect/clean_A.html#đung-tren-vai-nhung-ga-khong-lo-mvc-va-ebi" class="sidebar-link">Đứng trên vai những gã khổng lồ: MVC và EBI</a></li><li class="sidebar-sub-header"><a href="/docs/architect/clean_A.html#ket-luan" class="sidebar-link">Kết luận</a></li><li class="sidebar-sub-header"><a href="/docs/architect/clean_A.html#references" class="sidebar-link">References</a></li></ul></li><li><a href="/docs/architect/ebi.html" class="sidebar-link">EBI Architecture</a></li><li><a href="/docs/architect/onion_A.html" class="sidebar-link">Onion Architecture</a></li><li><a href="/docs/architect/soa.html" class="sidebar-link">Service Oriented Architecture (SOA)</a></li><li><a href="/docs/architect/cqrs.html" class="sidebar-link">Command Query Responsibility Segregation (CQRS)</a></li><li><a href="/docs/architect/event_driven_A.html" class="sidebar-link">Event-driven architecture</a></li><li><a href="/docs/architect/hexagonal_A.html" class="sidebar-link">Hexagonal Architecture</a></li><li><a href="/docs/architect/spa.html" class="sidebar-link">Single Page Application</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Khác</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="clean-architecture"><a href="#clean-architecture" class="header-anchor">#</a> Clean Architecture</h1> <p><strong>Robert C. Martin</strong> (hay còn gọi là Uncle Bob) cho ra đời ý tưởng của mình về Clean Architecture vào năm 2012, trong <a href="https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html" target="_blank" rel="noopener noreferrer">một bài viết trên blog<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> của mình, và giảng dạy về nó tại một vài hội nghị, và gần đây nhất là cuốn sách <a href="https://edwardthienhoang.wordpress.com/2018/01/13/book-review-clean-architecture-by-robert-c-martin-2017/" target="_blank" rel="noopener noreferrer">Clean Architecture: A Craftsman’s Guide to Software Structure and Design<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> xuất bản năm 2017.</p> <p></p><div class="table-of-contents"><ul><li><a href="#cac-cong-cu-ben-ngoai-va-co-che-phan-phoi">Các công cụ bên ngoài và cơ chế phân phối</a></li><li><a href="#chieu-cua-su-phu-thuoc">Chiều của sự phụ thuộc</a></li><li><a href="#cac-layers">Các Layers</a></li><li><a href="#kha-nang-co-lap-kiem-thu">Khả năng cô lập kiểm thử</a></li><li><a href="#đung-tren-vai-nhung-ga-khong-lo-mvc-va-ebi">Đứng trên vai những gã khổng lồ: MVC và EBI</a></li><li><a href="#ket-luan">Kết luận</a></li><li><a href="#references">References</a></li></ul></div><p></p> <hr> <p>Clean Architecture dựa trên các khái niệm, quy tắc, và mô hình nổi tiếng, giải thích làm thế nào để kết hợp chúng với nhau, để đề xuất cách xây dựng các ứng dụng chuẩn.</p> <p>Các mục tiêu cốt lõi của Clean Architecture cũng giống với đối với Ports &amp; Adapters (Hexagonal) và Onion Architectures:</p> <ul><li><strong>Độc lập các công cụ (Frameworks/UI/Database);</strong></li> <li><strong>Sự độc lập của các cơ chế phân phối;</strong></li> <li><strong>Khả năng cô lập kiểm thử.</strong></li></ul> <p>Trong bài viết về Clean Architecture đã được xuất bản, đây là sơ đồ được sử dụng để giải thích ý tưởng tổng quát:</p> <p><img src="/docs/assets/img/cleanarchitecture.94e85674.jpg" alt="Clearn Architecture"> <em>Robert C. Martin 2012, The Clean Architecture</em></p> <p>Như ông Bob nói trong bài của mình, sơ đồ trên là một nỗ lực để tích hợp các ý tưởng kiến trúc gần đây vào một ý tưởng có thể thực hiện được.</p> <p>Hãy so sánh sơ đồ Clean Architecture với các sơ đồ được sử dụng để giải thích Hexagonal Architecture và Onion Architecture, và xem chúng trùng nhau ở đâu:</p> <p><img src="/docs/assets/img/hexagonal_original.8737083e.gif" alt="hexagonal_original"></p> <p><img src="/docs/assets/img/4ioq9.42a9440b.png" alt="4ioq9"></p> <h2 id="cac-cong-cu-ben-ngoai-va-co-che-phan-phoi"><a href="#cac-cong-cu-ben-ngoai-va-co-che-phan-phoi" class="header-anchor">#</a> Các công cụ bên ngoài và cơ chế phân phối</h2> <p><em>(Externalisation of tools and delivery mechanisms)</em></p> <p>Hexagonal Architecture tập trung vào việc mở rộng các công cụ và cơ chế phân phối từ ứng dụng, sử dụng interfaces (Port) và Adapter. Đây cũng là một trong những nền tảng cốt lõi của Onion Architecture, như chúng ta có thể thấy qua biểu đồ của nó, UI, cơ sở hạ tầng và các testing đều nằm trong layer ngoài cùng của sơ đồ. Clean Architecture cũng có đặc điểm giống như vậy, có giao diện người dùng, web, DB, v.v … ở layer ngoài cùng. Trong cùng là tất cả mã lõi ứng dụng độc lập với framework / libraries.</p> <h2 id="chieu-cua-su-phu-thuoc"><a href="#chieu-cua-su-phu-thuoc" class="header-anchor">#</a> Chiều của sự phụ thuộc</h2> <p><em>(Dependencies direction)</em></p> <p><strong>Sự phụ thuộc</strong>: lớp bên trong sẽ ko phụ thuộc lớp ngoài.</p> <p><strong>&gt;&gt;&gt;&gt; Code của các class thuộc lớp trong không được tham chiếu đến code của class thuộc lớp ngoài.</strong></p> <p>Trong Hexagonal Architecture, chúng ta không có bất cứ điều gì rõ ràng cho chúng ta biết hướng của các phụ thuộc. Tuy nhiên, chúng ta có thể dễ dàng suy luận nó: Ứng dụng có một Port (interface) phải được implement hoặc sử dụng bởi Adapter. Vì vậy Adapter phụ thuộc vào giao diện, nó phụ thuộc vào ứng dụng nằm ở trung tâm. Bên ngoài phụ thuộc vào bên trong, hướng của các phụ thuộc là về phía trung tâm. Trong Onion Architecture, chúng ta cũng không có bất cứ điều gì rõ ràng cho chúng ta biết hướng phụ thuộc, tuy nhiên, trong bài thứ hai của mình, Jeffrey Palermo cho biết rõ ràng rằng tất cả các phụ thuộc đều hướng đến trung tâm. Clean Architecture, lần lượt, nó khá rõ ràng trong chỉ ra rằng sự phụ thuộc hướng là hướng về trung tâm. Tất cả đều đưa ra Nguyên tắc đảo ngược phụ thuộc (<strong>Dependency Inversion Principle</strong>) ở cấp kiến ​​trúc. Vòng tròn bên trong không hề biết gì về các vòng tròn bên ngoài. Hơn nữa, khi chúng ta truyền dữ liệu qua một ranh giới (Boundary), nó luôn ở dạng thuận tiện nhất cho vòng tròn phía trong.</p> <h2 id="cac-layers"><a href="#cac-layers" class="header-anchor">#</a> Các Layers</h2> <p>Sơ đồ Kiến trúc Hexagonal Architecture chỉ hiển thị cho chúng ta hai layer: Bên trong ứng dụng và bên ngoài của ứng dụng. Mặt khác, Onion Architecture mang đến sự kết hợp các layer ứng dụng được xác định bởi DDD: Entities, Value Objects, Application Services chứa các use-case logic; Domain Services đóng gói domain logic không thuộc về các Entities hoặc Value Objects… Khi so sánh với Onion Architecture, Clean Architecture sẽ duy trì Application Services layer (Use Cases) và Entities layer nhưng dường như nó quên mất Domain Services layer. Tuy nhiên, đọc bài của Bác Bob chúng ta nhận ra rằng ông coi một thực thể (Entity) không chỉ theo ý nghĩa của DDD : “Một entity có thể là một đối tượng với các phương thức, hoặc nó có thể là một tập hợp các cấu trúc dữ liệu và các hàm.“. Trong thực tế, ông đã sáp nhập hai layer bên trong để đơn giản hóa sơ đồ.</p> <h2 id="kha-nang-co-lap-kiem-thu"><a href="#kha-nang-co-lap-kiem-thu" class="header-anchor">#</a> Khả năng cô lập kiểm thử</h2> <p><em>(Testability in isolation)</em></p> <p>Trong cả ba kiểu Kiến trúc, chúng đều tuân theo các nguyên tắc phân tách domain logic với các thành phần bên ngoài. Điều này có nghĩa là trong mọi trường hợp chúng ta chỉ có thể mô phỏng các công cụ bên ngoài và các cơ chế phân phối và thực hiện kiểm thử ứng dụng mà không sử dụng bất kỳ DB hay HTTP request nào.</p> <p>Như chúng ta có thể thấy, Clean Architecture sẽ kết hợp các quy tắc của Hexagonal Architecture và Onion Architecture. Cho đến nay, kiến trúc sạch sẽ không thêm bất cứ điều gì mới cho phương trình. Tuy nhiên, ở góc dưới cùng bên phải của Clean Architecture diagram, chúng ta có thể thấy thêm một biểu đồ nhỏ …</p> <h2 id="đung-tren-vai-nhung-ga-khong-lo-mvc-va-ebi"><a href="#đung-tren-vai-nhung-ga-khong-lo-mvc-va-ebi" class="header-anchor">#</a> Đứng trên vai những gã khổng lồ: MVC và EBI</h2> <p>Biểu đồ phụ nhỏ ở góc dưới cùng bên phải của Clean Architecture diagram sẽ giải thích về sơ đồ luồng tương tác (flow of control) giữa các component. Biểu đồ nhỏ này không cung cấp cho chúng ta nhiều thông tin, nhưng lời giải thích về bài đăng trên blog và các bài giảng của hội thảo được đưa ra bởi Robert C. Martin mở rộng về đề tài này.</p> <p><img src="/docs/assets/img/cleanarchitecturedesign2.5a9dc3c7.png" alt="cleanarchitecturedesign"></p> <p>Trong sơ đồ ở trên, ở phía bên trái, chúng ta có View và Controller của MVC. Mọi thứ bên trong / giữa các đường kẻ đôi màu đen đại diện cho Model trong MVC. Mô hình này cũng đại diện cho kiến trúc EBI (với “Boundary”, Interactor và the Entities”), “Application” trong Hexagonal Architecture, “Application Core” trong Onion Architecture, “Entities” và “Use Cases” layer trong Clean Architecture.</p> <p>Theo biểu đồ luồng tương tác, chúng ta có một yêu cầu HTTP đến các Controller. Controller sau đó sẽ:</p> <ol><li>Phân tích Request;</li> <li>Tạo một Request Model với các dữ liệu có liên quan;</li> <li>Execute một method trong Interactor (đã được đưa (inject) vào Controller bằng cách sử dụng interface của Interactor là Boundary), chuyển nó cho Request Model;</li> <li>Interactor sẽ:</li> <li><ol><li>Sử dụng implementation của Entity Gateway (được đưa vào Interactor bằng cách sử dụng Entity Gateway Interface) để tìm các Entities liên quan;</li> <li>Phối hợp các tương tác giữa các Entities;</li> <li>Tạo Response Model với kết quả dữ liệu trả về;</li> <li>Tạo ra Presenter chứa Response Model;</li> <li>Trả lại Presenter cho Controller;</li></ol></li> <li>Dùng Presenter để tạo ra một ViewModel;</li> <li>Bind ViewModel với View;</li> <li>Trả View về cho Client.</li></ol> <h2 id="ket-luan"><a href="#ket-luan" class="header-anchor">#</a> Kết luận</h2> <p>Tôi không nói rằng Clean Architecture là cuộc cách mạng bởi vì nó không thực sự mang lại một khái niệm hoặc mô hình đột phá mới. Tuy nhiên, tôi xin nói rằng đó là một công trình có tầm quan trọng lớn, bởi vì:</p> <ul><li>Nó khôi phục các khái niệm, quy tắc và khuôn mẫu bị quên lãng;</li> <li>Nó làm rõ các khái niệm và quy tắc hữu ích và quan trọng;</li></ul> <p>Nó cho chúng ta biết tất cả các khái niệm, quy tắc và mẫu này phù hợp với nhau để cung cấp cho chúng ta một cách chuẩn hóa để xây dựng các ứng dụng phức tạp với sự bảo trì trong đầu.</p> <p>Khi tôi nghĩ về Bác Bob làm việc với Clean Architecture, nó làm cho tôi nghĩ về Isaac Newton. Trọng lực luôn ở đó, mọi người đều biết rằng nếu chúng ta thả quả táo cách mặt đất một mét, nó sẽ di chuyển xuống mặt đất. “Điều duy nhất” mà Newton đã làm là xuất bản một bài báo đưa ra sự thật đó *. Đó là một điều “đơn giản” phải làm, nhưng nó cho phép mọi người lý giải về nó và sử dụng ý tưởng cụ thể làm nền tảng cho những ý tưởng khác.</p> <p>Nói cách khác, tôi thấy Robert C. Martin là Isaac Newton trong phát triển phần mềm!</p> <h2 id="references"><a href="#references" class="header-anchor">#</a> References</h2> <p>Youtube</p> <iframe width="560" height="315" src="https://www.youtube.com/embed/CnailTcJV_U" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe> <ul><li><a href="https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html" target="_blank" rel="noopener noreferrer">The Clean Architecture<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://herbertograca.com/2017/09/28/clean-architecture-standing-on-the-shoulders-of-giants/" target="_blank" rel="noopener noreferrer">Clean Architecture: Standing on the shoulders of giants<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>Phiên bản việt</p> <ul><li><a href="https://viblo.asia/p/clean-architecture-MdZkAQpRkox" target="_blank" rel="noopener noreferrer">Clean Architecture<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://edwardthienhoang.wordpress.com/2018/01/18/clean-architecture-dung-tren-vai-nhung-ga-khong-lo/" target="_blank" rel="noopener noreferrer">Clean Architecture: Đứng trên vai những gã khổng lồ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>Example Github</p> <p><a href="https://github.com/dev-mastery/comments-api" target="_blank" rel="noopener noreferrer">https://github.com/dev-mastery/comments-api<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://edwardthienhoang.wordpress.com/2018/01/31/thuc-hanh-implement-clean-architecture/" target="_blank" rel="noopener noreferrer">Thực hành implement Clean Architecture<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://hackernoon.com/applying-clean-architecture-on-web-application-with-modular-pattern-7b11f1b89011" target="_blank" rel="noopener noreferrer">How to Organize CLEAN ARCHITECTURE to Modular Patterns<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://www.youtube.com/watch?v=o_TH-Y78tt4" target="_blank" rel="noopener noreferrer">YOUTUBE - The Principles of Clean Architecture by Uncle Bob Martin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://www.youtube.com/watch?v=2dKZ-dWaCiU" target="_blank" rel="noopener noreferrer">ITkonekt 2019 | Robert C. Martin (Uncle Bob), Clean Architecture and Design<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/architect/ddd.html" class="prev">
        Domain-Driven Design
      </a></span> <span class="next"><a href="/docs/architect/ebi.html">
        EBI Architecture
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/docs/assets/js/app.1de406c1.js" defer></script><script src="/docs/assets/js/2.9c32d6ee.js" defer></script><script src="/docs/assets/js/7.ab93e64f.js" defer></script><script src="/docs/assets/js/13.fb70cafb.js" defer></script>
  </body>
</html>
