<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Elastic Search | Nguyễn Khánk&#39;s Wiki</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="apple-touch-icon" sizes="180x180" href="../public/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../public/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../public/favicons/favicon-16x16.png">
    <link rel="manifest" href="../public/favicons/manifest.json">
    <link rel="mask-icon" href="../public/favicons/safari-pinned-tab.svg" color="#3a0839">
    <link rel="shortcut icon" href="../public/favicons/favicon.ico">
    <meta name="description" content="Wikipedia của tui">
    <meta name="msapplication-TileColor" content="#3a0839">
    <meta name="msapplication-config" content="../public/favicons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    
    <link rel="preload" href="/docs/assets/css/0.styles.6906ca04.css" as="style"><link rel="preload" href="/docs/assets/js/app.e1ceda63.js" as="script"><link rel="preload" href="/docs/assets/js/2.cd415d86.js" as="script"><link rel="preload" href="/docs/assets/js/264.0847ba58.js" as="script"><link rel="preload" href="/docs/assets/js/76.30cf021a.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.87bdf1db.js"><link rel="prefetch" href="/docs/assets/js/100.c9c97c5c.js"><link rel="prefetch" href="/docs/assets/js/101.6b038da0.js"><link rel="prefetch" href="/docs/assets/js/102.91cd0044.js"><link rel="prefetch" href="/docs/assets/js/103.0d85afea.js"><link rel="prefetch" href="/docs/assets/js/104.bfdf8274.js"><link rel="prefetch" href="/docs/assets/js/105.d4e103a9.js"><link rel="prefetch" href="/docs/assets/js/106.572467a6.js"><link rel="prefetch" href="/docs/assets/js/107.c0eb5aa2.js"><link rel="prefetch" href="/docs/assets/js/108.d056a634.js"><link rel="prefetch" href="/docs/assets/js/109.0924b864.js"><link rel="prefetch" href="/docs/assets/js/11.a78737bd.js"><link rel="prefetch" href="/docs/assets/js/110.04381270.js"><link rel="prefetch" href="/docs/assets/js/111.1a3d95c1.js"><link rel="prefetch" href="/docs/assets/js/112.66dcf44f.js"><link rel="prefetch" href="/docs/assets/js/113.08bc39fd.js"><link rel="prefetch" href="/docs/assets/js/114.d58412ed.js"><link rel="prefetch" href="/docs/assets/js/115.55674ff0.js"><link rel="prefetch" href="/docs/assets/js/116.52220f53.js"><link rel="prefetch" href="/docs/assets/js/117.a7b4d7b4.js"><link rel="prefetch" href="/docs/assets/js/118.812e44ca.js"><link rel="prefetch" href="/docs/assets/js/119.8af26645.js"><link rel="prefetch" href="/docs/assets/js/12.1aa2def8.js"><link rel="prefetch" href="/docs/assets/js/120.0eddf31c.js"><link rel="prefetch" href="/docs/assets/js/121.8b04fb69.js"><link rel="prefetch" href="/docs/assets/js/122.60b4e18d.js"><link rel="prefetch" href="/docs/assets/js/123.4176d67e.js"><link rel="prefetch" href="/docs/assets/js/124.338844b9.js"><link rel="prefetch" href="/docs/assets/js/125.ce12afb0.js"><link rel="prefetch" href="/docs/assets/js/126.fa1b4b76.js"><link rel="prefetch" href="/docs/assets/js/127.22dc2e45.js"><link rel="prefetch" href="/docs/assets/js/128.194e589e.js"><link rel="prefetch" href="/docs/assets/js/129.9f9b6707.js"><link rel="prefetch" href="/docs/assets/js/13.edb7a3ec.js"><link rel="prefetch" href="/docs/assets/js/130.86e816ce.js"><link rel="prefetch" href="/docs/assets/js/131.61d4221d.js"><link rel="prefetch" href="/docs/assets/js/132.15c9bdb5.js"><link rel="prefetch" href="/docs/assets/js/133.d006cff1.js"><link rel="prefetch" href="/docs/assets/js/134.eead2d8a.js"><link rel="prefetch" href="/docs/assets/js/135.ca6bae9b.js"><link rel="prefetch" href="/docs/assets/js/136.477a78f2.js"><link rel="prefetch" href="/docs/assets/js/137.0a162a86.js"><link rel="prefetch" href="/docs/assets/js/138.12a36a19.js"><link rel="prefetch" href="/docs/assets/js/139.ee27742a.js"><link rel="prefetch" href="/docs/assets/js/14.ab6bf9dc.js"><link rel="prefetch" href="/docs/assets/js/140.9c07fa2c.js"><link rel="prefetch" href="/docs/assets/js/141.a0b3d822.js"><link rel="prefetch" href="/docs/assets/js/142.a1919bc1.js"><link rel="prefetch" href="/docs/assets/js/143.f3aa73c4.js"><link rel="prefetch" href="/docs/assets/js/144.c90ef10c.js"><link rel="prefetch" href="/docs/assets/js/145.21e5e679.js"><link rel="prefetch" href="/docs/assets/js/146.ed09bb64.js"><link rel="prefetch" href="/docs/assets/js/147.b182f230.js"><link rel="prefetch" href="/docs/assets/js/148.df9abdc2.js"><link rel="prefetch" href="/docs/assets/js/149.40000981.js"><link rel="prefetch" href="/docs/assets/js/15.4d492857.js"><link rel="prefetch" href="/docs/assets/js/150.76cb5826.js"><link rel="prefetch" href="/docs/assets/js/151.b9f42f73.js"><link rel="prefetch" href="/docs/assets/js/152.1f11175e.js"><link rel="prefetch" href="/docs/assets/js/153.8bf86e8b.js"><link rel="prefetch" href="/docs/assets/js/154.9a716b06.js"><link rel="prefetch" href="/docs/assets/js/155.746fcc7b.js"><link rel="prefetch" href="/docs/assets/js/156.a44dc33a.js"><link rel="prefetch" href="/docs/assets/js/157.65536f53.js"><link rel="prefetch" href="/docs/assets/js/158.4b049571.js"><link rel="prefetch" href="/docs/assets/js/159.1ac26d71.js"><link rel="prefetch" href="/docs/assets/js/16.cd96683c.js"><link rel="prefetch" href="/docs/assets/js/160.c6a57789.js"><link rel="prefetch" href="/docs/assets/js/161.a861865b.js"><link rel="prefetch" href="/docs/assets/js/162.92b00cd0.js"><link rel="prefetch" href="/docs/assets/js/163.d4a9874c.js"><link rel="prefetch" href="/docs/assets/js/164.f5921281.js"><link rel="prefetch" href="/docs/assets/js/165.a2efc642.js"><link rel="prefetch" href="/docs/assets/js/166.73185509.js"><link rel="prefetch" href="/docs/assets/js/167.090af86e.js"><link rel="prefetch" href="/docs/assets/js/168.f6de1af4.js"><link rel="prefetch" href="/docs/assets/js/169.13a0ed61.js"><link rel="prefetch" href="/docs/assets/js/17.31dcf766.js"><link rel="prefetch" href="/docs/assets/js/170.ba8074b0.js"><link rel="prefetch" href="/docs/assets/js/171.259be2f9.js"><link rel="prefetch" href="/docs/assets/js/172.a44ed6af.js"><link rel="prefetch" href="/docs/assets/js/173.14e2d4da.js"><link rel="prefetch" href="/docs/assets/js/174.54f73595.js"><link rel="prefetch" href="/docs/assets/js/175.8562f74e.js"><link rel="prefetch" href="/docs/assets/js/176.b0b9d9dc.js"><link rel="prefetch" href="/docs/assets/js/177.805ff745.js"><link rel="prefetch" href="/docs/assets/js/178.3be4dc9e.js"><link rel="prefetch" href="/docs/assets/js/179.c868dbe3.js"><link rel="prefetch" href="/docs/assets/js/18.069b31d1.js"><link rel="prefetch" href="/docs/assets/js/180.e53b46ba.js"><link rel="prefetch" href="/docs/assets/js/181.176c6e80.js"><link rel="prefetch" href="/docs/assets/js/182.6301d7fd.js"><link rel="prefetch" href="/docs/assets/js/183.7fc51a3a.js"><link rel="prefetch" href="/docs/assets/js/184.cb42686f.js"><link rel="prefetch" href="/docs/assets/js/185.16681bd2.js"><link rel="prefetch" href="/docs/assets/js/186.278fcc22.js"><link rel="prefetch" href="/docs/assets/js/187.2e6706a2.js"><link rel="prefetch" href="/docs/assets/js/188.b1c99e1b.js"><link rel="prefetch" href="/docs/assets/js/189.7312562d.js"><link rel="prefetch" href="/docs/assets/js/19.5feb4f78.js"><link rel="prefetch" href="/docs/assets/js/190.5d2da987.js"><link rel="prefetch" href="/docs/assets/js/191.9ba5c11a.js"><link rel="prefetch" href="/docs/assets/js/192.52172301.js"><link rel="prefetch" href="/docs/assets/js/193.62aee3e8.js"><link rel="prefetch" href="/docs/assets/js/194.e70cd10a.js"><link rel="prefetch" href="/docs/assets/js/195.1202009b.js"><link rel="prefetch" href="/docs/assets/js/196.e7c19860.js"><link rel="prefetch" href="/docs/assets/js/197.1589c3dc.js"><link rel="prefetch" href="/docs/assets/js/198.9d645f5d.js"><link rel="prefetch" href="/docs/assets/js/199.84067f01.js"><link rel="prefetch" href="/docs/assets/js/20.04e54051.js"><link rel="prefetch" href="/docs/assets/js/200.768426a0.js"><link rel="prefetch" href="/docs/assets/js/201.ab2c17a2.js"><link rel="prefetch" href="/docs/assets/js/202.09d1e4d6.js"><link rel="prefetch" href="/docs/assets/js/203.cda1621d.js"><link rel="prefetch" href="/docs/assets/js/204.c5c69ec9.js"><link rel="prefetch" href="/docs/assets/js/205.150e43ba.js"><link rel="prefetch" href="/docs/assets/js/206.ff21a53e.js"><link rel="prefetch" href="/docs/assets/js/207.1107cfa3.js"><link rel="prefetch" href="/docs/assets/js/208.4aa50dc0.js"><link rel="prefetch" href="/docs/assets/js/209.e85d5a17.js"><link rel="prefetch" href="/docs/assets/js/21.05ef387f.js"><link rel="prefetch" href="/docs/assets/js/210.15808fbe.js"><link rel="prefetch" href="/docs/assets/js/211.78015b09.js"><link rel="prefetch" href="/docs/assets/js/212.702ba2d2.js"><link rel="prefetch" href="/docs/assets/js/213.a13b7ddd.js"><link rel="prefetch" href="/docs/assets/js/214.7df4240e.js"><link rel="prefetch" href="/docs/assets/js/215.0efc262a.js"><link rel="prefetch" href="/docs/assets/js/216.01b5d4b6.js"><link rel="prefetch" href="/docs/assets/js/217.40b070d4.js"><link rel="prefetch" href="/docs/assets/js/218.42ff0c0c.js"><link rel="prefetch" href="/docs/assets/js/219.a80174b4.js"><link rel="prefetch" href="/docs/assets/js/22.0493ae1b.js"><link rel="prefetch" href="/docs/assets/js/220.827855e0.js"><link rel="prefetch" href="/docs/assets/js/221.df13f256.js"><link rel="prefetch" href="/docs/assets/js/222.e84f27f8.js"><link rel="prefetch" href="/docs/assets/js/223.67f15965.js"><link rel="prefetch" href="/docs/assets/js/224.6ffec149.js"><link rel="prefetch" href="/docs/assets/js/225.ad180c93.js"><link rel="prefetch" href="/docs/assets/js/226.dfcd397f.js"><link rel="prefetch" href="/docs/assets/js/227.a2140dbe.js"><link rel="prefetch" href="/docs/assets/js/228.6c7d42a5.js"><link rel="prefetch" href="/docs/assets/js/229.5b7bf325.js"><link rel="prefetch" href="/docs/assets/js/23.2380d727.js"><link rel="prefetch" href="/docs/assets/js/230.073e97cf.js"><link rel="prefetch" href="/docs/assets/js/231.ec7d0ee2.js"><link rel="prefetch" href="/docs/assets/js/232.3bf78084.js"><link rel="prefetch" href="/docs/assets/js/233.83cb6705.js"><link rel="prefetch" href="/docs/assets/js/234.024aa3cb.js"><link rel="prefetch" href="/docs/assets/js/235.d3c4eb7b.js"><link rel="prefetch" href="/docs/assets/js/236.6e7c7552.js"><link rel="prefetch" href="/docs/assets/js/237.148242a0.js"><link rel="prefetch" href="/docs/assets/js/238.7ef3d1c4.js"><link rel="prefetch" href="/docs/assets/js/239.ac939fea.js"><link rel="prefetch" href="/docs/assets/js/24.d2c9b521.js"><link rel="prefetch" href="/docs/assets/js/240.2b6a1c76.js"><link rel="prefetch" href="/docs/assets/js/241.a88466da.js"><link rel="prefetch" href="/docs/assets/js/242.c91cea93.js"><link rel="prefetch" href="/docs/assets/js/243.5bdab2ca.js"><link rel="prefetch" href="/docs/assets/js/244.b4515cc1.js"><link rel="prefetch" href="/docs/assets/js/245.10a9fb47.js"><link rel="prefetch" href="/docs/assets/js/246.e0851aab.js"><link rel="prefetch" href="/docs/assets/js/247.ff609db0.js"><link rel="prefetch" href="/docs/assets/js/248.6b371557.js"><link rel="prefetch" href="/docs/assets/js/249.95684361.js"><link rel="prefetch" href="/docs/assets/js/25.62556d6c.js"><link rel="prefetch" href="/docs/assets/js/250.36f233d6.js"><link rel="prefetch" href="/docs/assets/js/251.2d2a096a.js"><link rel="prefetch" href="/docs/assets/js/252.9b56ce0a.js"><link rel="prefetch" href="/docs/assets/js/253.e026cc75.js"><link rel="prefetch" href="/docs/assets/js/254.67a1c432.js"><link rel="prefetch" href="/docs/assets/js/255.9277ab76.js"><link rel="prefetch" href="/docs/assets/js/256.86cba0a1.js"><link rel="prefetch" href="/docs/assets/js/257.3a723750.js"><link rel="prefetch" href="/docs/assets/js/258.9d57f7bb.js"><link rel="prefetch" href="/docs/assets/js/259.f866c6d0.js"><link rel="prefetch" href="/docs/assets/js/26.78e1e3cf.js"><link rel="prefetch" href="/docs/assets/js/260.48e08164.js"><link rel="prefetch" href="/docs/assets/js/261.cf3b72ab.js"><link rel="prefetch" href="/docs/assets/js/262.2edad61f.js"><link rel="prefetch" href="/docs/assets/js/263.71c90116.js"><link rel="prefetch" href="/docs/assets/js/265.fac8dec5.js"><link rel="prefetch" href="/docs/assets/js/266.5d9e4113.js"><link rel="prefetch" href="/docs/assets/js/267.6d1775d2.js"><link rel="prefetch" href="/docs/assets/js/268.f8b2c410.js"><link rel="prefetch" href="/docs/assets/js/269.936f99ee.js"><link rel="prefetch" href="/docs/assets/js/27.17c383be.js"><link rel="prefetch" href="/docs/assets/js/270.87c49640.js"><link rel="prefetch" href="/docs/assets/js/271.b45f096c.js"><link rel="prefetch" href="/docs/assets/js/272.ec54e078.js"><link rel="prefetch" href="/docs/assets/js/273.0395c09e.js"><link rel="prefetch" href="/docs/assets/js/274.8e4e7c6e.js"><link rel="prefetch" href="/docs/assets/js/275.5c3ce3f5.js"><link rel="prefetch" href="/docs/assets/js/276.e255ad26.js"><link rel="prefetch" href="/docs/assets/js/277.79befaee.js"><link rel="prefetch" href="/docs/assets/js/278.9a6120ee.js"><link rel="prefetch" href="/docs/assets/js/279.5dbbedd8.js"><link rel="prefetch" href="/docs/assets/js/28.7a89617e.js"><link rel="prefetch" href="/docs/assets/js/280.04ebf0b1.js"><link rel="prefetch" href="/docs/assets/js/281.eda7764f.js"><link rel="prefetch" href="/docs/assets/js/282.54d2b027.js"><link rel="prefetch" href="/docs/assets/js/283.99c53033.js"><link rel="prefetch" href="/docs/assets/js/284.59c8dc39.js"><link rel="prefetch" href="/docs/assets/js/285.4a5e88d9.js"><link rel="prefetch" href="/docs/assets/js/286.65ddfd3d.js"><link rel="prefetch" href="/docs/assets/js/287.1bdee1d2.js"><link rel="prefetch" href="/docs/assets/js/288.30dad557.js"><link rel="prefetch" href="/docs/assets/js/289.6a87a6fb.js"><link rel="prefetch" href="/docs/assets/js/29.74ebc7ff.js"><link rel="prefetch" href="/docs/assets/js/290.484a416a.js"><link rel="prefetch" href="/docs/assets/js/291.1d019da7.js"><link rel="prefetch" href="/docs/assets/js/292.23ba88c3.js"><link rel="prefetch" href="/docs/assets/js/293.c8b30825.js"><link rel="prefetch" href="/docs/assets/js/294.6e25c6c8.js"><link rel="prefetch" href="/docs/assets/js/295.6dfa21b2.js"><link rel="prefetch" href="/docs/assets/js/296.67386ac8.js"><link rel="prefetch" href="/docs/assets/js/297.0c294f7c.js"><link rel="prefetch" href="/docs/assets/js/298.1766c222.js"><link rel="prefetch" href="/docs/assets/js/299.24836ae2.js"><link rel="prefetch" href="/docs/assets/js/3.05c481d3.js"><link rel="prefetch" href="/docs/assets/js/30.db253af7.js"><link rel="prefetch" href="/docs/assets/js/300.8a0c95b7.js"><link rel="prefetch" href="/docs/assets/js/301.3302f99e.js"><link rel="prefetch" href="/docs/assets/js/302.4ff7dc3f.js"><link rel="prefetch" href="/docs/assets/js/303.84485351.js"><link rel="prefetch" href="/docs/assets/js/304.d530389e.js"><link rel="prefetch" href="/docs/assets/js/305.ae67c8cb.js"><link rel="prefetch" href="/docs/assets/js/306.d91657da.js"><link rel="prefetch" href="/docs/assets/js/307.244ed490.js"><link rel="prefetch" href="/docs/assets/js/308.f772f8a4.js"><link rel="prefetch" href="/docs/assets/js/309.2c47e087.js"><link rel="prefetch" href="/docs/assets/js/31.caeaed49.js"><link rel="prefetch" href="/docs/assets/js/310.46c11241.js"><link rel="prefetch" href="/docs/assets/js/311.f513efee.js"><link rel="prefetch" href="/docs/assets/js/312.264f0ecb.js"><link rel="prefetch" href="/docs/assets/js/313.697a703f.js"><link rel="prefetch" href="/docs/assets/js/314.40e68802.js"><link rel="prefetch" href="/docs/assets/js/315.a507a256.js"><link rel="prefetch" href="/docs/assets/js/316.66850a5d.js"><link rel="prefetch" href="/docs/assets/js/317.464edc3c.js"><link rel="prefetch" href="/docs/assets/js/318.bcd5f8f0.js"><link rel="prefetch" href="/docs/assets/js/319.3e9dca83.js"><link rel="prefetch" href="/docs/assets/js/32.fecae787.js"><link rel="prefetch" href="/docs/assets/js/320.7e9fbb55.js"><link rel="prefetch" href="/docs/assets/js/321.8eb99a97.js"><link rel="prefetch" href="/docs/assets/js/322.17f13da4.js"><link rel="prefetch" href="/docs/assets/js/323.73c30964.js"><link rel="prefetch" href="/docs/assets/js/324.7a1a09b9.js"><link rel="prefetch" href="/docs/assets/js/325.5ad0d666.js"><link rel="prefetch" href="/docs/assets/js/326.999be57f.js"><link rel="prefetch" href="/docs/assets/js/327.11a6443d.js"><link rel="prefetch" href="/docs/assets/js/328.1303ee9c.js"><link rel="prefetch" href="/docs/assets/js/329.dc125181.js"><link rel="prefetch" href="/docs/assets/js/33.20654f3b.js"><link rel="prefetch" href="/docs/assets/js/330.2578fe31.js"><link rel="prefetch" href="/docs/assets/js/331.3c439ed3.js"><link rel="prefetch" href="/docs/assets/js/332.012ac9d9.js"><link rel="prefetch" href="/docs/assets/js/333.5c7877d9.js"><link rel="prefetch" href="/docs/assets/js/334.6d5c2331.js"><link rel="prefetch" href="/docs/assets/js/335.44eece4a.js"><link rel="prefetch" href="/docs/assets/js/336.471cb7ea.js"><link rel="prefetch" href="/docs/assets/js/337.28eca3eb.js"><link rel="prefetch" href="/docs/assets/js/338.09b8536d.js"><link rel="prefetch" href="/docs/assets/js/339.4a69a464.js"><link rel="prefetch" href="/docs/assets/js/34.84c684ec.js"><link rel="prefetch" href="/docs/assets/js/340.581ff563.js"><link rel="prefetch" href="/docs/assets/js/341.fa902805.js"><link rel="prefetch" href="/docs/assets/js/342.1fcb64e1.js"><link rel="prefetch" href="/docs/assets/js/343.feb04cd3.js"><link rel="prefetch" href="/docs/assets/js/344.c3e84142.js"><link rel="prefetch" href="/docs/assets/js/345.8eda2c04.js"><link rel="prefetch" href="/docs/assets/js/346.fd5cd494.js"><link rel="prefetch" href="/docs/assets/js/347.72490bf3.js"><link rel="prefetch" href="/docs/assets/js/348.f2e5b66f.js"><link rel="prefetch" href="/docs/assets/js/349.3300ff63.js"><link rel="prefetch" href="/docs/assets/js/35.8e1962da.js"><link rel="prefetch" href="/docs/assets/js/350.ea3146f4.js"><link rel="prefetch" href="/docs/assets/js/351.0d30db54.js"><link rel="prefetch" href="/docs/assets/js/352.ec45042f.js"><link rel="prefetch" href="/docs/assets/js/353.7c9f31b0.js"><link rel="prefetch" href="/docs/assets/js/354.b9af8750.js"><link rel="prefetch" href="/docs/assets/js/355.d822d0b2.js"><link rel="prefetch" href="/docs/assets/js/356.44c780b2.js"><link rel="prefetch" href="/docs/assets/js/357.3da5c81e.js"><link rel="prefetch" href="/docs/assets/js/358.cf100aa1.js"><link rel="prefetch" href="/docs/assets/js/359.46068330.js"><link rel="prefetch" href="/docs/assets/js/36.94094fde.js"><link rel="prefetch" href="/docs/assets/js/360.a9bb7149.js"><link rel="prefetch" href="/docs/assets/js/361.3666f1ab.js"><link rel="prefetch" href="/docs/assets/js/362.3892e5e0.js"><link rel="prefetch" href="/docs/assets/js/363.a038e67d.js"><link rel="prefetch" href="/docs/assets/js/364.652d8331.js"><link rel="prefetch" href="/docs/assets/js/365.cb18811f.js"><link rel="prefetch" href="/docs/assets/js/366.45c52277.js"><link rel="prefetch" href="/docs/assets/js/367.90e24779.js"><link rel="prefetch" href="/docs/assets/js/368.3d6d8a31.js"><link rel="prefetch" href="/docs/assets/js/369.428dd6e0.js"><link rel="prefetch" href="/docs/assets/js/37.1717edb7.js"><link rel="prefetch" href="/docs/assets/js/370.1a71779d.js"><link rel="prefetch" href="/docs/assets/js/371.884c9d3c.js"><link rel="prefetch" href="/docs/assets/js/372.b4f00e9a.js"><link rel="prefetch" href="/docs/assets/js/373.4a1770c4.js"><link rel="prefetch" href="/docs/assets/js/374.5c0bae2a.js"><link rel="prefetch" href="/docs/assets/js/375.69160b91.js"><link rel="prefetch" href="/docs/assets/js/376.c2be4421.js"><link rel="prefetch" href="/docs/assets/js/377.4f0e6251.js"><link rel="prefetch" href="/docs/assets/js/378.afce2228.js"><link rel="prefetch" href="/docs/assets/js/379.90ea05cb.js"><link rel="prefetch" href="/docs/assets/js/38.f3b7322a.js"><link rel="prefetch" href="/docs/assets/js/380.52068bba.js"><link rel="prefetch" href="/docs/assets/js/381.7b6a8d3d.js"><link rel="prefetch" href="/docs/assets/js/382.164bd2c9.js"><link rel="prefetch" href="/docs/assets/js/383.a1043ff6.js"><link rel="prefetch" href="/docs/assets/js/384.b3f6f207.js"><link rel="prefetch" href="/docs/assets/js/385.181b9106.js"><link rel="prefetch" href="/docs/assets/js/386.7b834957.js"><link rel="prefetch" href="/docs/assets/js/387.b5bbe430.js"><link rel="prefetch" href="/docs/assets/js/388.5a0e9226.js"><link rel="prefetch" href="/docs/assets/js/389.166711a7.js"><link rel="prefetch" href="/docs/assets/js/39.cd3fc91b.js"><link rel="prefetch" href="/docs/assets/js/390.b26468d9.js"><link rel="prefetch" href="/docs/assets/js/391.096e5931.js"><link rel="prefetch" href="/docs/assets/js/392.cd5a90c5.js"><link rel="prefetch" href="/docs/assets/js/393.8f7f4e23.js"><link rel="prefetch" href="/docs/assets/js/394.11aef299.js"><link rel="prefetch" href="/docs/assets/js/395.bec36f83.js"><link rel="prefetch" href="/docs/assets/js/396.b1154d71.js"><link rel="prefetch" href="/docs/assets/js/397.ff97304a.js"><link rel="prefetch" href="/docs/assets/js/398.1dcc54bf.js"><link rel="prefetch" href="/docs/assets/js/399.ff7342c3.js"><link rel="prefetch" href="/docs/assets/js/4.70354805.js"><link rel="prefetch" href="/docs/assets/js/40.d56dbbad.js"><link rel="prefetch" href="/docs/assets/js/400.40e7c57a.js"><link rel="prefetch" href="/docs/assets/js/401.1ebf62c2.js"><link rel="prefetch" href="/docs/assets/js/402.f5575139.js"><link rel="prefetch" href="/docs/assets/js/403.bc7b7fb8.js"><link rel="prefetch" href="/docs/assets/js/404.a54ef9e2.js"><link rel="prefetch" href="/docs/assets/js/405.12d0737d.js"><link rel="prefetch" href="/docs/assets/js/406.e7ee378a.js"><link rel="prefetch" href="/docs/assets/js/407.47f62352.js"><link rel="prefetch" href="/docs/assets/js/408.703157dd.js"><link rel="prefetch" href="/docs/assets/js/409.4d801004.js"><link rel="prefetch" href="/docs/assets/js/41.c7552e47.js"><link rel="prefetch" href="/docs/assets/js/410.07a5a2a6.js"><link rel="prefetch" href="/docs/assets/js/411.470f2dd3.js"><link rel="prefetch" href="/docs/assets/js/412.1440c9b5.js"><link rel="prefetch" href="/docs/assets/js/413.f4bda0ef.js"><link rel="prefetch" href="/docs/assets/js/414.7cca3973.js"><link rel="prefetch" href="/docs/assets/js/415.baf428c9.js"><link rel="prefetch" href="/docs/assets/js/416.76771abc.js"><link rel="prefetch" href="/docs/assets/js/417.f75d4331.js"><link rel="prefetch" href="/docs/assets/js/418.7266fb75.js"><link rel="prefetch" href="/docs/assets/js/419.3595eb6a.js"><link rel="prefetch" href="/docs/assets/js/42.b74678fd.js"><link rel="prefetch" href="/docs/assets/js/420.342acd16.js"><link rel="prefetch" href="/docs/assets/js/421.24cb687c.js"><link rel="prefetch" href="/docs/assets/js/422.b9968e4e.js"><link rel="prefetch" href="/docs/assets/js/423.321dba33.js"><link rel="prefetch" href="/docs/assets/js/424.9f5e6b4d.js"><link rel="prefetch" href="/docs/assets/js/425.2130dde9.js"><link rel="prefetch" href="/docs/assets/js/426.cd666a8b.js"><link rel="prefetch" href="/docs/assets/js/427.ee99a099.js"><link rel="prefetch" href="/docs/assets/js/428.4e719d21.js"><link rel="prefetch" href="/docs/assets/js/429.c421bf07.js"><link rel="prefetch" href="/docs/assets/js/43.8f1218e2.js"><link rel="prefetch" href="/docs/assets/js/430.bb881451.js"><link rel="prefetch" href="/docs/assets/js/431.fa5eb635.js"><link rel="prefetch" href="/docs/assets/js/432.5366f030.js"><link rel="prefetch" href="/docs/assets/js/433.b990ca14.js"><link rel="prefetch" href="/docs/assets/js/434.77441786.js"><link rel="prefetch" href="/docs/assets/js/435.56039bc3.js"><link rel="prefetch" href="/docs/assets/js/436.1ec8625c.js"><link rel="prefetch" href="/docs/assets/js/437.e368eeb3.js"><link rel="prefetch" href="/docs/assets/js/438.37733dea.js"><link rel="prefetch" href="/docs/assets/js/439.1d5d906b.js"><link rel="prefetch" href="/docs/assets/js/44.99452824.js"><link rel="prefetch" href="/docs/assets/js/440.b21eca57.js"><link rel="prefetch" href="/docs/assets/js/441.aefc27a7.js"><link rel="prefetch" href="/docs/assets/js/442.5b3b4a58.js"><link rel="prefetch" href="/docs/assets/js/443.f70210ea.js"><link rel="prefetch" href="/docs/assets/js/444.066aa0c4.js"><link rel="prefetch" href="/docs/assets/js/445.6d510bfe.js"><link rel="prefetch" href="/docs/assets/js/446.5b3b186e.js"><link rel="prefetch" href="/docs/assets/js/447.fafb3c52.js"><link rel="prefetch" href="/docs/assets/js/448.d0795c75.js"><link rel="prefetch" href="/docs/assets/js/449.d4377dff.js"><link rel="prefetch" href="/docs/assets/js/45.23ce70f1.js"><link rel="prefetch" href="/docs/assets/js/450.b6bb1d97.js"><link rel="prefetch" href="/docs/assets/js/451.6aa62c2c.js"><link rel="prefetch" href="/docs/assets/js/452.bbf6a1e2.js"><link rel="prefetch" href="/docs/assets/js/453.021f705e.js"><link rel="prefetch" href="/docs/assets/js/454.708004df.js"><link rel="prefetch" href="/docs/assets/js/455.31b35f2b.js"><link rel="prefetch" href="/docs/assets/js/456.7e4664a2.js"><link rel="prefetch" href="/docs/assets/js/457.12d715db.js"><link rel="prefetch" href="/docs/assets/js/458.0837c20b.js"><link rel="prefetch" href="/docs/assets/js/459.cc9dcaa1.js"><link rel="prefetch" href="/docs/assets/js/46.bc82d671.js"><link rel="prefetch" href="/docs/assets/js/460.04b46630.js"><link rel="prefetch" href="/docs/assets/js/461.b5d5ab9e.js"><link rel="prefetch" href="/docs/assets/js/462.8a06e93b.js"><link rel="prefetch" href="/docs/assets/js/463.583d838d.js"><link rel="prefetch" href="/docs/assets/js/464.d8f6f64a.js"><link rel="prefetch" href="/docs/assets/js/465.9ed33318.js"><link rel="prefetch" href="/docs/assets/js/466.b26563e8.js"><link rel="prefetch" href="/docs/assets/js/467.6ae18200.js"><link rel="prefetch" href="/docs/assets/js/468.94edba79.js"><link rel="prefetch" href="/docs/assets/js/469.507758e5.js"><link rel="prefetch" href="/docs/assets/js/47.48a26d13.js"><link rel="prefetch" href="/docs/assets/js/470.f22c1372.js"><link rel="prefetch" href="/docs/assets/js/471.f9660b7f.js"><link rel="prefetch" href="/docs/assets/js/472.bfd3f2de.js"><link rel="prefetch" href="/docs/assets/js/473.25e7293e.js"><link rel="prefetch" href="/docs/assets/js/474.0ef02ee7.js"><link rel="prefetch" href="/docs/assets/js/475.7face8c2.js"><link rel="prefetch" href="/docs/assets/js/476.7cb2d9f7.js"><link rel="prefetch" href="/docs/assets/js/477.f56d32f2.js"><link rel="prefetch" href="/docs/assets/js/478.897f58ec.js"><link rel="prefetch" href="/docs/assets/js/479.13b8840b.js"><link rel="prefetch" href="/docs/assets/js/48.3b82eddf.js"><link rel="prefetch" href="/docs/assets/js/480.c231d748.js"><link rel="prefetch" href="/docs/assets/js/481.de9504ae.js"><link rel="prefetch" href="/docs/assets/js/482.7d32d005.js"><link rel="prefetch" href="/docs/assets/js/483.90f79ec6.js"><link rel="prefetch" href="/docs/assets/js/484.cfe5ca75.js"><link rel="prefetch" href="/docs/assets/js/485.e446fe62.js"><link rel="prefetch" href="/docs/assets/js/486.e8215596.js"><link rel="prefetch" href="/docs/assets/js/487.7780fc90.js"><link rel="prefetch" href="/docs/assets/js/488.78ccbcbb.js"><link rel="prefetch" href="/docs/assets/js/489.f37358a7.js"><link rel="prefetch" href="/docs/assets/js/49.5ddc1757.js"><link rel="prefetch" href="/docs/assets/js/490.55136a60.js"><link rel="prefetch" href="/docs/assets/js/491.53d502fa.js"><link rel="prefetch" href="/docs/assets/js/492.80ce4174.js"><link rel="prefetch" href="/docs/assets/js/493.dc2cb663.js"><link rel="prefetch" href="/docs/assets/js/494.0e52a456.js"><link rel="prefetch" href="/docs/assets/js/495.240097b9.js"><link rel="prefetch" href="/docs/assets/js/496.737f14cf.js"><link rel="prefetch" href="/docs/assets/js/497.6db84f44.js"><link rel="prefetch" href="/docs/assets/js/498.8132094a.js"><link rel="prefetch" href="/docs/assets/js/499.97ab3b8d.js"><link rel="prefetch" href="/docs/assets/js/5.71a3d074.js"><link rel="prefetch" href="/docs/assets/js/50.303fb573.js"><link rel="prefetch" href="/docs/assets/js/500.8b02c41e.js"><link rel="prefetch" href="/docs/assets/js/501.3bb88fc2.js"><link rel="prefetch" href="/docs/assets/js/502.221f64b1.js"><link rel="prefetch" href="/docs/assets/js/503.a7297dca.js"><link rel="prefetch" href="/docs/assets/js/504.18d518a2.js"><link rel="prefetch" href="/docs/assets/js/505.2d5b99fe.js"><link rel="prefetch" href="/docs/assets/js/506.5a025ee2.js"><link rel="prefetch" href="/docs/assets/js/507.516ba2df.js"><link rel="prefetch" href="/docs/assets/js/508.81b3b4e0.js"><link rel="prefetch" href="/docs/assets/js/509.a5ebb42d.js"><link rel="prefetch" href="/docs/assets/js/51.2a4f1306.js"><link rel="prefetch" href="/docs/assets/js/510.be94d59c.js"><link rel="prefetch" href="/docs/assets/js/511.b65077c3.js"><link rel="prefetch" href="/docs/assets/js/512.5369ef39.js"><link rel="prefetch" href="/docs/assets/js/513.e61543eb.js"><link rel="prefetch" href="/docs/assets/js/514.e27cd97f.js"><link rel="prefetch" href="/docs/assets/js/515.8ff21993.js"><link rel="prefetch" href="/docs/assets/js/516.977f5e4f.js"><link rel="prefetch" href="/docs/assets/js/517.b3e0affc.js"><link rel="prefetch" href="/docs/assets/js/518.93a9fb17.js"><link rel="prefetch" href="/docs/assets/js/519.b24833f0.js"><link rel="prefetch" href="/docs/assets/js/52.a32e25a4.js"><link rel="prefetch" href="/docs/assets/js/520.282d4047.js"><link rel="prefetch" href="/docs/assets/js/521.30060eb4.js"><link rel="prefetch" href="/docs/assets/js/522.da1c0aec.js"><link rel="prefetch" href="/docs/assets/js/523.1179796c.js"><link rel="prefetch" href="/docs/assets/js/524.8a477b0e.js"><link rel="prefetch" href="/docs/assets/js/525.5ecc4ab6.js"><link rel="prefetch" href="/docs/assets/js/526.114f82be.js"><link rel="prefetch" href="/docs/assets/js/527.4ea525b5.js"><link rel="prefetch" href="/docs/assets/js/528.7e686637.js"><link rel="prefetch" href="/docs/assets/js/529.c9c8352c.js"><link rel="prefetch" href="/docs/assets/js/53.b024d5c8.js"><link rel="prefetch" href="/docs/assets/js/530.09023ff9.js"><link rel="prefetch" href="/docs/assets/js/531.a934669a.js"><link rel="prefetch" href="/docs/assets/js/54.47d8f727.js"><link rel="prefetch" href="/docs/assets/js/55.c5825a2e.js"><link rel="prefetch" href="/docs/assets/js/56.efc68c57.js"><link rel="prefetch" href="/docs/assets/js/57.cfa1d96a.js"><link rel="prefetch" href="/docs/assets/js/58.dafb09be.js"><link rel="prefetch" href="/docs/assets/js/59.5d202955.js"><link rel="prefetch" href="/docs/assets/js/6.ce533e79.js"><link rel="prefetch" href="/docs/assets/js/60.c0c47eaf.js"><link rel="prefetch" href="/docs/assets/js/61.1aa82168.js"><link rel="prefetch" href="/docs/assets/js/62.a4124384.js"><link rel="prefetch" href="/docs/assets/js/63.2ff8ce7b.js"><link rel="prefetch" href="/docs/assets/js/64.a52c52d3.js"><link rel="prefetch" href="/docs/assets/js/65.be9e7cd2.js"><link rel="prefetch" href="/docs/assets/js/66.cf34123c.js"><link rel="prefetch" href="/docs/assets/js/67.a5598377.js"><link rel="prefetch" href="/docs/assets/js/68.1759161f.js"><link rel="prefetch" href="/docs/assets/js/69.9bdbfb75.js"><link rel="prefetch" href="/docs/assets/js/7.3784183f.js"><link rel="prefetch" href="/docs/assets/js/70.89f52e12.js"><link rel="prefetch" href="/docs/assets/js/71.288d0bba.js"><link rel="prefetch" href="/docs/assets/js/72.4fb1f322.js"><link rel="prefetch" href="/docs/assets/js/73.bf0f5e5a.js"><link rel="prefetch" href="/docs/assets/js/74.65da99e6.js"><link rel="prefetch" href="/docs/assets/js/75.8e6e8374.js"><link rel="prefetch" href="/docs/assets/js/77.5d125689.js"><link rel="prefetch" href="/docs/assets/js/78.8ff4b0cf.js"><link rel="prefetch" href="/docs/assets/js/79.9302c962.js"><link rel="prefetch" href="/docs/assets/js/8.6c701bec.js"><link rel="prefetch" href="/docs/assets/js/80.ae6b3a59.js"><link rel="prefetch" href="/docs/assets/js/81.b45aab52.js"><link rel="prefetch" href="/docs/assets/js/82.ae459d31.js"><link rel="prefetch" href="/docs/assets/js/83.dc130cc2.js"><link rel="prefetch" href="/docs/assets/js/84.ba44f41e.js"><link rel="prefetch" href="/docs/assets/js/85.08cbabc0.js"><link rel="prefetch" href="/docs/assets/js/86.837366a5.js"><link rel="prefetch" href="/docs/assets/js/87.e72d31c8.js"><link rel="prefetch" href="/docs/assets/js/88.af0ee4ae.js"><link rel="prefetch" href="/docs/assets/js/89.0c296c56.js"><link rel="prefetch" href="/docs/assets/js/9.443fecba.js"><link rel="prefetch" href="/docs/assets/js/90.dfed5e59.js"><link rel="prefetch" href="/docs/assets/js/91.4e5bb02a.js"><link rel="prefetch" href="/docs/assets/js/92.dfd578da.js"><link rel="prefetch" href="/docs/assets/js/93.81ee8915.js"><link rel="prefetch" href="/docs/assets/js/94.f6ba4885.js"><link rel="prefetch" href="/docs/assets/js/95.5a7107de.js"><link rel="prefetch" href="/docs/assets/js/96.426b99c6.js"><link rel="prefetch" href="/docs/assets/js/97.12c8436f.js"><link rel="prefetch" href="/docs/assets/js/98.a996af36.js"><link rel="prefetch" href="/docs/assets/js/99.0ab6b28b.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.6906ca04.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">Nguyễn Khánk's Wiki</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/architect/" class="nav-link">
  Architecture
</a></div><div class="nav-item"><a href="https://nguyenngockhank.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/architect/" class="nav-link">
  Architecture
</a></div><div class="nav-item"><a href="https://nguyenngockhank.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Chuyện muôn thuở</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>API Guidelines</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Database</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/db/architect.html" class="sidebar-link">Scalable Database Architectures</a></li><li><a href="/docs/db/id-generate.html" class="sidebar-link">Generate ID</a></li><li><a href="/docs/db/tx-isolation.html" class="sidebar-link">Transaction Isolation Levels</a></li><li><a href="/docs/db/acid.html" class="sidebar-link">ACID</a></li><li><a href="/docs/db/optimize_db.html" class="sidebar-link">Database Tuning</a></li><li><a href="/docs/db/mysql_snippets.html" class="sidebar-link">MySql Snippets</a></li><li><a href="/docs/db/postgre.html" class="sidebar-link">PostgreSql Snippets</a></li><li><a href="/docs/db/couchdb.html" class="sidebar-link">CouchDB Notes</a></li><li><a href="/docs/db/mongodb.html" class="sidebar-link">MongoDB Notes</a></li><li><a href="/docs/db/cassandra.html" class="sidebar-link">Apache Cassandra</a></li><li><a href="/docs/db/elasticsearch.html" aria-current="page" class="active sidebar-link">Elastic Search</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/db/elasticsearch.html#key-terms" class="sidebar-link">Key terms</a></li><li class="sidebar-sub-header"><a href="/docs/db/elasticsearch.html#how-documents-are-ranked-in-elasticsearch" class="sidebar-link">How documents are ranked in Elasticsearch</a></li><li class="sidebar-sub-header"><a href="/docs/db/elasticsearch.html#searching-for-same-meaning-words" class="sidebar-link">Searching for Same Meaning Words</a></li><li class="sidebar-sub-header"><a href="/docs/db/elasticsearch.html#searching-for-mistyped-words" class="sidebar-link">Searching for Mistyped Words</a></li><li class="sidebar-sub-header"><a href="/docs/db/elasticsearch.html#use-geo-point" class="sidebar-link">Use Geo-point</a></li><li class="sidebar-sub-header"><a href="/docs/db/elasticsearch.html#match-query-vs-term-query" class="sidebar-link">Match query vs Term query</a></li><li class="sidebar-sub-header"><a href="/docs/db/elasticsearch.html#use-aggregation" class="sidebar-link">Use Aggregation</a></li><li class="sidebar-sub-header"><a href="/docs/db/elasticsearch.html#sharding-data" class="sidebar-link">Sharding data</a></li><li class="sidebar-sub-header"><a href="/docs/db/elasticsearch.html#other-samples" class="sidebar-link">Other Samples</a></li><li class="sidebar-sub-header"><a href="/docs/db/elasticsearch.html#other" class="sidebar-link">Other</a></li></ul></li><li><a href="/docs/db/redis.html" class="sidebar-link">Redis Notes</a></li><li><a href="/docs/db/nosql.html" class="sidebar-link">NoSQL Overview</a></li><li><a href="/docs/db/use-cases.html" class="sidebar-link">Choose a data storage</a></li><li><a href="/docs/db/db-table-design.html" class="sidebar-link">Database design</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Giải Toán</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>OOP</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Javascript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ReactJS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>VueJS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>PHP</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Tools / Toys</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Thuật ngữ</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Network</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>AWS</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="elastic-search"><a href="#elastic-search" class="header-anchor">#</a> Elastic Search</h1> <p><a href="https://www.elastic.co/guide/index.html" target="_blank" rel="noopener noreferrer">Welcome to Elastic Docs<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://www.elastic.co/guide/en/elasticsearch/reference/8.7/api-conventions.html" target="_blank" rel="noopener noreferrer">Api conventions<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="key-terms"><a href="#key-terms" class="header-anchor">#</a> Key terms</h2> <ul><li><strong>Documents</strong> — Data is stored as JSON documents.</li> <li><strong>Indices</strong> — Every document is indexed (inverted index) to perform fast searches.</li> <li><strong>Node</strong> — Every instance of elastic search is a node. Nodes actually handle the client requests. There are different roles a node.</li> <li><strong>Aggregation</strong> -  is a way to group and summarize data. Elasticsearch provides a wide range of aggregation types, such as terms, range, date histogram, and geo distance</li> <li><strong>Shard</strong> - A shard is a subset of an index that contains a portion of the index's data.</li> <li><strong>Cluster</strong> — Group of nodes that have the same cluster.name attribute.</li> <li>Optimistic concurrency control</li></ul> <h3 id="how-to-communicate"><a href="#how-to-communicate" class="header-anchor">#</a> How to Communicate</h3> <ul><li>Elastic search provides REST apis. E.g creating index, listing all indices, querying a document, etc</li> <li>These APIs support structured queries, full text queries, and complex queries that combine the two.</li></ul> <h2 id="how-documents-are-ranked-in-elasticsearch"><a href="#how-documents-are-ranked-in-elasticsearch" class="header-anchor">#</a> How documents are ranked in Elasticsearch</h2> <h3 id="relevance-score"><a href="#relevance-score" class="header-anchor">#</a> <strong>Relevance Score</strong></h3> <p>The relevance score is a measure of how well a document matches the search query. Elasticsearch calculates the relevance score based on a number of factors, including:</p> <ul><li><strong>Term frequency</strong>: How often the search terms appear in the document.</li> <li><strong>Inverse document frequency</strong>: How common the search terms are across all documents in the index.</li> <li><strong>Field length</strong>: Longer fields are given less weight than shorter fields.</li> <li><strong>Term proximity</strong>: How close the search terms are to each other in the document.</li></ul> <p>Elasticsearch uses a variant of the TF-IDF algorithm to calculate the relevance score. The relevance score is a decimal value between 0 and 1, with 1 being the most relevant.</p> <h3 id="sorting-criteria"><a href="#sorting-criteria" class="header-anchor">#</a> Sorting Criteria</h3> <p>In addition to the relevance score, Elasticsearch also uses sorting criteria to determine the order of the results in the response list. Sorting criteria can be specified when you perform a search query and can include fields such as date, price, or popularity.</p> <p>By default, Elasticsearch sorts the results by relevance score in descending order. This means that the most relevant results appear at the top of the response list. However, you can specify additional sorting criteria to further refine the order of the results.</p> <p>For example, if you are searching for products on an e-commerce website, you might want to sort the results by price in ascending order. This would ensure that the cheapest products appear at the top of the response list.</p> <p><a href="https://www.elastic.co/blog/how-to-improve-elasticsearch-search-relevance-with-boolean-queries" target="_blank" rel="noopener noreferrer">READ MORE<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="searching-for-same-meaning-words"><a href="#searching-for-same-meaning-words" class="header-anchor">#</a> Searching for Same Meaning Words</h2> <p>we can achieve this by using synonyms</p> <h3 id="define-synonyms"><a href="#define-synonyms" class="header-anchor">#</a> Define Synonyms</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> Client <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@elastic/elasticsearch'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Client</span><span class="token punctuation">(</span><span class="token punctuation">{</span> node<span class="token operator">:</span> <span class="token string">'http://localhost:9200'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> indexName <span class="token operator">=</span> <span class="token string">'my_index'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> settings <span class="token operator">=</span> <span class="token punctuation">{</span>
  analysis<span class="token operator">:</span> <span class="token punctuation">{</span>
    filter<span class="token operator">:</span> <span class="token punctuation">{</span>
      my_synonyms<span class="token operator">:</span> <span class="token punctuation">{</span>
        type<span class="token operator">:</span> <span class="token string">'synonym'</span><span class="token punctuation">,</span>
        <span class="token comment">// here</span>
        synonyms<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">'car, automobile'</span><span class="token punctuation">,</span>
          <span class="token string">'bike, bicycle'</span><span class="token punctuation">,</span>
          <span class="token string">'bus, coach, minibus'</span><span class="token punctuation">,</span>
          <span class="token string">'train, railway'</span><span class="token punctuation">,</span>
          <span class="token string">'plane, airplane, aircraft'</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    analyzer<span class="token operator">:</span> <span class="token punctuation">{</span>
      my_analyzer<span class="token operator">:</span> <span class="token punctuation">{</span>
        tokenizer<span class="token operator">:</span> <span class="token string">'standard'</span><span class="token punctuation">,</span>
        filter<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'lowercase'</span><span class="token punctuation">,</span> <span class="token string">'my_synonyms'</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

client<span class="token punctuation">.</span>indices<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  index<span class="token operator">:</span> indexName<span class="token punctuation">,</span>
  body<span class="token operator">:</span> <span class="token punctuation">{</span>
    settings<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> resp</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">else</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Index </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>indexName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> created.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="search-for-synonyms"><a href="#search-for-synonyms" class="header-anchor">#</a> Search for Synonyms</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> indexName <span class="token operator">=</span> <span class="token string">'my_index'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> searchParams <span class="token operator">=</span> <span class="token punctuation">{</span>
  index<span class="token operator">:</span> indexName<span class="token punctuation">,</span>
  body<span class="token operator">:</span> <span class="token punctuation">{</span>
    query<span class="token operator">:</span> <span class="token punctuation">{</span>
      match<span class="token operator">:</span> <span class="token punctuation">{</span>
        my_field<span class="token operator">:</span> <span class="token punctuation">{</span>
          query<span class="token operator">:</span> <span class="token string">'car'</span><span class="token punctuation">,</span>
          analyzer<span class="token operator">:</span> <span class="token string">'my_analyzer'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

client<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span>searchParams<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> resp</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">else</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>resp<span class="token punctuation">.</span>hits<span class="token punctuation">.</span>hits<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>In this example, we search for the word <code>car</code> using the <code>my_analyzer</code> analyzer. The analyzer will expand the search to include the synonyms <code>automobile</code>. The search results will include all documents that contain the word <code>car</code> or <code>automobile</code>.</p> <h3 id="alternative-to-data-given"><a href="#alternative-to-data-given" class="header-anchor">#</a> Alternative to Data given</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token comment">// ... </span>
  filter<span class="token operator">:</span> <span class="token punctuation">{</span>
    your_synonym_filter_name<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> <span class="token string">'synonym'</span><span class="token punctuation">,</span>
      synonyms_path<span class="token operator">:</span> <span class="token string">'path_to_synonyms_file'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Use <code>synonyms_path</code> instead <code>synonyms</code></p> <p>Each line in the file <code>path_to_synonyms_file</code> should contain a group of synonyms separated by commas</p> <div class="language- extra-class"><pre class="language-text"><code>car, automobile
bike, bicycle
bus, coach, minibus
train, railway
plane, airplane, aircraft
</code></pre></div><h2 id="searching-for-mistyped-words"><a href="#searching-for-mistyped-words" class="header-anchor">#</a> Searching for Mistyped Words</h2> <h3 id="_1-use-fuzzy-query"><a href="#_1-use-fuzzy-query" class="header-anchor">#</a> 1. Use Fuzzy Query</h3> <p>Fuzzy Query feature allows you to search for words that are similar to the one you are looking for, even if they are not spelled correctly. For example, if you are searching for the word <code>apple</code> but someone has typed <code>aple</code> instead, the Fuzzy Query feature will still return the correct result.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> body <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  index<span class="token operator">:</span> <span class="token string">'my_index'</span><span class="token punctuation">,</span>
  body<span class="token operator">:</span> <span class="token punctuation">{</span>
    query<span class="token operator">:</span> <span class="token punctuation">{</span>
      fuzzy<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">'my_field'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          value<span class="token operator">:</span> <span class="token string">'aple'</span><span class="token punctuation">,</span>
          fuzziness<span class="token operator">:</span> <span class="token string">'AUTO'</span><span class="token punctuation">,</span> <span class="token comment">// here</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>body<span class="token punctuation">.</span>hits<span class="token punctuation">.</span>hits<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_2-use-phonetic-analysis"><a href="#_2-use-phonetic-analysis" class="header-anchor">#</a> 2. Use Phonetic Analysis</h3> <p>This technique involves converting words into their phonetic representations and then searching for words that sound similar to the one you are looking for. This can be especially useful for words that are commonly misspelled, such as names or technical terms.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> body <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  index<span class="token operator">:</span> <span class="token string">'my_index'</span><span class="token punctuation">,</span>
  body<span class="token operator">:</span> <span class="token punctuation">{</span>
    query<span class="token operator">:</span> <span class="token punctuation">{</span>
      match<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">'my_field'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          query<span class="token operator">:</span> <span class="token string">'aple'</span><span class="token punctuation">,</span>
          analyzer<span class="token operator">:</span> <span class="token string">'my_phonetic_analyzer'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>body<span class="token punctuation">.</span>hits<span class="token punctuation">.</span>hits<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="to-create-my-phonetic-analyzer"><a href="#to-create-my-phonetic-analyzer" class="header-anchor">#</a> <strong>To create <code>my_phonetic_analyzer</code></strong></h4> <ol><li>Install plugin</li></ol> <div class="language- extra-class"><pre class="language-text"><code>sudo bin/elasticsearch-plugin install analysis-phonetic
</code></pre></div><ol start="2"><li>Create a custom phonetic analyzer</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>client<span class="token punctuation">.</span>indices<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  index<span class="token operator">:</span> <span class="token string">'my_index'</span><span class="token punctuation">,</span>
  body<span class="token operator">:</span> <span class="token punctuation">{</span>
    settings<span class="token operator">:</span> <span class="token punctuation">{</span>
      analysis<span class="token operator">:</span> <span class="token punctuation">{</span>
        analyzer<span class="token operator">:</span> <span class="token punctuation">{</span>
          my_phonetic_analyzer<span class="token operator">:</span> <span class="token punctuation">{</span>
            tokenizer<span class="token operator">:</span> <span class="token string">'standard'</span><span class="token punctuation">,</span>
            filter<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'lowercase'</span><span class="token punctuation">,</span> <span class="token string">'my_phonetic_filter'</span><span class="token punctuation">]</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        filter<span class="token operator">:</span> <span class="token punctuation">{</span>
          my_phonetic_filter<span class="token operator">:</span> <span class="token punctuation">{</span>
            type<span class="token operator">:</span> <span class="token string">'phonetic'</span><span class="token punctuation">,</span>
            encoder<span class="token operator">:</span> <span class="token string">'double_metaphone'</span><span class="token punctuation">,</span>
            replace<span class="token operator">:</span> <span class="token boolean">true</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> resp</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="3"><li>use the custom analyzer</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>client<span class="token punctuation">.</span><span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  index<span class="token operator">:</span> <span class="token string">'my_index'</span><span class="token punctuation">,</span>
  body<span class="token operator">:</span> <span class="token punctuation">{</span>
    title<span class="token operator">:</span> <span class="token string">'The Night Knight'</span><span class="token punctuation">,</span>
    content<span class="token operator">:</span> <span class="token string">'A story about a knight who fights at night.'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  analyzer<span class="token operator">:</span> <span class="token string">'my_phonetic_analyzer'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> resp</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_3-use-n-grams"><a href="#_3-use-n-grams" class="header-anchor">#</a> 3. Use N-Grams</h3> <p>N-Grams are a type of tokenization that breaks words down into smaller pieces and indexes them separately. This allows you to search for words even if they are misspelled or incomplete.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> body <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  index<span class="token operator">:</span> <span class="token string">'my_index'</span><span class="token punctuation">,</span>
  body<span class="token operator">:</span> <span class="token punctuation">{</span>
    query<span class="token operator">:</span> <span class="token punctuation">{</span>
      match<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">'my_field'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          query<span class="token operator">:</span> <span class="token string">'aple'</span><span class="token punctuation">,</span>
          analyzer<span class="token operator">:</span> <span class="token string">'my_ngram_analyzer'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>body<span class="token punctuation">.</span>hits<span class="token punctuation">.</span>hits<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>To create <code>my_ngram_analyzer</code></strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> settings <span class="token operator">=</span> <span class="token punctuation">{</span>
  analysis<span class="token operator">:</span> <span class="token punctuation">{</span>
    analyzer<span class="token operator">:</span> <span class="token punctuation">{</span>
      my_ngram_analyzer<span class="token operator">:</span> <span class="token punctuation">{</span>
        tokenizer<span class="token operator">:</span> <span class="token string">'my_ngram_tokenizer'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    tokenizer<span class="token operator">:</span> <span class="token punctuation">{</span>
      my_ngram_tokenizer<span class="token operator">:</span> <span class="token punctuation">{</span>
        type<span class="token operator">:</span> <span class="token string">'ngram'</span><span class="token punctuation">,</span>
        min_gram<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        max_gram<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
        token_chars<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'letter'</span><span class="token punctuation">,</span> <span class="token string">'digit'</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> mappings <span class="token operator">=</span> <span class="token punctuation">{</span>
  properties<span class="token operator">:</span> <span class="token punctuation">{</span>
    my_field<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span>
      analyzer<span class="token operator">:</span> <span class="token string">'my_ngram_analyzer'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">await</span> client<span class="token punctuation">.</span>indices<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  index<span class="token operator">:</span> indexName<span class="token punctuation">,</span>
  body<span class="token operator">:</span> <span class="token punctuation">{</span>
    settings<span class="token punctuation">,</span>
    mappings<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="use-geo-point"><a href="#use-geo-point" class="header-anchor">#</a> Use Geo-point</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// create index</span>
<span class="token keyword">await</span> client<span class="token punctuation">.</span>indices<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  index<span class="token operator">:</span> <span class="token string">'my_index'</span><span class="token punctuation">,</span>
  body<span class="token operator">:</span> <span class="token punctuation">{</span>
    mappings<span class="token operator">:</span> <span class="token punctuation">{</span>
      properties<span class="token operator">:</span> <span class="token punctuation">{</span>
        location<span class="token operator">:</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'geo_point'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// index document</span>
<span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  index<span class="token operator">:</span> <span class="token string">'my_index'</span><span class="token punctuation">,</span>
  body<span class="token operator">:</span> <span class="token punctuation">{</span>
    location<span class="token operator">:</span> <span class="token punctuation">{</span>
      lat<span class="token operator">:</span> <span class="token number">40.7128</span><span class="token punctuation">,</span>
      lon<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">74.0060</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">// searching</span>
<span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  index<span class="token operator">:</span> <span class="token string">'my_index'</span><span class="token punctuation">,</span>
  body<span class="token operator">:</span> <span class="token punctuation">{</span>
    query<span class="token operator">:</span> <span class="token punctuation">{</span>
      geo_distance<span class="token operator">:</span> <span class="token punctuation">{</span>
        distance<span class="token operator">:</span> <span class="token string">'10km'</span><span class="token punctuation">,</span>
        location<span class="token operator">:</span> <span class="token punctuation">{</span>
          lat<span class="token operator">:</span> <span class="token number">40.7128</span><span class="token punctuation">,</span>
          lon<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">74.0060</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>hits<span class="token punctuation">.</span>hits<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="match-query-vs-term-query"><a href="#match-query-vs-term-query" class="header-anchor">#</a> Match query vs Term query</h2> <ul><li>The <code>match</code> query is a full-text search query</li> <li>The <code>term</code> query is a query that looks for exact matches of a term or phrase in the index.</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// match query </span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> body <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  index<span class="token operator">:</span> <span class="token string">'my_index'</span><span class="token punctuation">,</span>
  body<span class="token operator">:</span> <span class="token punctuation">{</span>
    query<span class="token operator">:</span> <span class="token punctuation">{</span>
      match<span class="token operator">:</span> <span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">'Nodejs elasticsearch'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>body<span class="token punctuation">.</span>hits<span class="token punctuation">.</span>hits<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// term query</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> body <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  index<span class="token operator">:</span> <span class="token string">'my_index'</span><span class="token punctuation">,</span>
  body<span class="token operator">:</span> <span class="token punctuation">{</span>
    query<span class="token operator">:</span> <span class="token punctuation">{</span>
      term<span class="token operator">:</span> <span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">'Nodejs elasticsearch'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>body<span class="token punctuation">.</span>hits<span class="token punctuation">.</span>hits<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="use-aggregation"><a href="#use-aggregation" class="header-anchor">#</a> Use Aggregation</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  index<span class="token operator">:</span> <span class="token string">'myindex'</span><span class="token punctuation">,</span>
  body<span class="token operator">:</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'John Doe'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
    city<span class="token operator">:</span> <span class="token string">'New York'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  index<span class="token operator">:</span> <span class="token string">'myindex'</span><span class="token punctuation">,</span>
  body<span class="token operator">:</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'Jane Doe'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">25</span><span class="token punctuation">,</span>
    city<span class="token operator">:</span> <span class="token string">'Los Angeles'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  index<span class="token operator">:</span> <span class="token string">'myindex'</span><span class="token punctuation">,</span>
  body<span class="token operator">:</span> <span class="token punctuation">{</span>
    aggs<span class="token operator">:</span> <span class="token punctuation">{</span>
      avg_age<span class="token operator">:</span> <span class="token punctuation">{</span>
        avg<span class="token operator">:</span> <span class="token punctuation">{</span>
          field<span class="token operator">:</span> <span class="token string">'age'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      city_count<span class="token operator">:</span> <span class="token punctuation">{</span>
        terms<span class="token operator">:</span> <span class="token punctuation">{</span>
          field<span class="token operator">:</span> <span class="token string">'city'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>body<span class="token punctuation">.</span>aggregations<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="date-histogram-aggregation"><a href="#date-histogram-aggregation" class="header-anchor">#</a> date_histogram Aggregation</h3> <p>allows you to group data based on a specific time interval</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> body <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  index<span class="token operator">:</span> <span class="token string">'my_index'</span><span class="token punctuation">,</span>
  body<span class="token operator">:</span> <span class="token punctuation">{</span>
    query<span class="token operator">:</span> <span class="token punctuation">{</span>
      match_all<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    aggs<span class="token operator">:</span> <span class="token punctuation">{</span>
      sales_over_time<span class="token operator">:</span> <span class="token punctuation">{</span>
        date_histogram<span class="token operator">:</span> <span class="token punctuation">{</span>
          field<span class="token operator">:</span> <span class="token string">'timestamp'</span><span class="token punctuation">,</span>
          interval<span class="token operator">:</span> <span class="token string">'day'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> salesOverTime <span class="token operator">=</span> body<span class="token punctuation">.</span>aggregations<span class="token punctuation">.</span>sales_over_time<span class="token punctuation">.</span>buckets<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>salesOverTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Others are <code>avg</code>, <code>sum</code>, <code>min</code>, <code>max</code>, <code>cardinality</code>, <code>terms</code>, <code>date_histogram</code>, and more.</p> <h2 id="sharding-data"><a href="#sharding-data" class="header-anchor">#</a> Sharding data</h2> <h3 id="_1-create-an-index"><a href="#_1-create-an-index" class="header-anchor">#</a> 1. Create an Index</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> client<span class="token punctuation">.</span>indices<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  index<span class="token operator">:</span> <span class="token string">'my_index'</span><span class="token punctuation">,</span>
  body<span class="token operator">:</span> <span class="token punctuation">{</span>
    settings<span class="token operator">:</span> <span class="token punctuation">{</span>
      number_of_shards<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
      number_of_replicas<span class="token operator">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> ignore<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">400</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// status ignore</span>
</code></pre></div><h3 id="_2-index-data"><a href="#_2-index-data" class="header-anchor">#</a> 2. Index Data</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  index<span class="token operator">:</span> <span class="token string">'my_index'</span><span class="token punctuation">,</span>
  body<span class="token operator">:</span> <span class="token punctuation">{</span>
    title<span class="token operator">:</span> <span class="token string">'My Document'</span><span class="token punctuation">,</span>
    content<span class="token operator">:</span> <span class="token string">'This is my document content.'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> 
  routing<span class="token operator">:</span> <span class="token string">'my_routing_value'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>routing</code> is a way to ensure that related documents are stored in the same shard.</p> <h3 id="_3-search-data"><a href="#_3-search-data" class="header-anchor">#</a> 3. Search Data</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> body <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  index<span class="token operator">:</span> <span class="token string">'my_index'</span><span class="token punctuation">,</span>
  body<span class="token operator">:</span> <span class="token punctuation">{</span>
    query<span class="token operator">:</span> <span class="token punctuation">{</span>
      match<span class="token operator">:</span> <span class="token punctuation">{</span>
        content<span class="token operator">:</span> <span class="token string">'document'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>body<span class="token punctuation">.</span>hits<span class="token punctuation">.</span>hits<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="other-samples"><a href="#other-samples" class="header-anchor">#</a> Other Samples</h2> <h3 id="indexes"><a href="#indexes" class="header-anchor">#</a> Indexes</h3> <p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/8.7/docs-index_.html" target="_blank" rel="noopener noreferrer">Index API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><strong>Creates</strong> a new index customer</p> <div class="language- extra-class"><pre class="language-text"><code>PUT customer
</code></pre></div><p><strong>Lists</strong> all indices</p> <div class="language- extra-class"><pre class="language-text"><code>GET /_cat/indices?v
</code></pre></div><p><strong>Deletes</strong> the index customer, pretty option to pretty print output of the command</p> <div class="language- extra-class"><pre class="language-text"><code>DELETE /customer?pretty
</code></pre></div><h3 id="documents"><a href="#documents" class="header-anchor">#</a> Documents</h3> <p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/8.7/docs.html" target="_blank" rel="noopener noreferrer">Document API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><strong>Add</strong> a new document to the index customer</p> <div class="language- extra-class"><pre class="language-text"><code>PUT /customer/_doc/1?pretty
{
  &quot;name&quot;: &quot;John Doe&quot;
}

// Response of the above command returns the index created
{
  &quot;_index&quot; : &quot;customer&quot;,
  &quot;_type&quot; : &quot;_doc&quot;,
  &quot;_id&quot; : &quot;1&quot;,
  &quot;_version&quot; : 1,
  &quot;result&quot; : &quot;created&quot;,
  &quot;_shards&quot; : {
    &quot;total&quot; : 2,
    &quot;successful&quot; : 1,
    &quot;failed&quot; : 0
  },
  &quot;_seq_no&quot; : 0,
  &quot;_primary_term&quot; : 1
}
</code></pre></div><p><strong>Updates</strong> existing document in index customer with id-&gt;1</p> <div class="language- extra-class"><pre class="language-text"><code>POST /customer/_update/1?pretty
{
  &quot;doc&quot;: { &quot;name&quot;: &quot;Jane Doe&quot; }
}
</code></pre></div><p><strong>Deletes</strong> existing document in index customer  with id -&gt; 1</p> <div class="language- extra-class"><pre class="language-text"><code>DELETE /customer/_doc/1?pretty
</code></pre></div><h2 id="other"><a href="#other" class="header-anchor">#</a> Other</h2> <ul><li>TF-IDF = Term Frequency–Inverse Document Frequency</li> <li><a href="https://www.elastic.co/guide/en/elastic-stack-get-started/8.2/get-started-stack-docker.html" target="_blank" rel="noopener noreferrer">Running the Elastic Stack on Docker<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://granulate.io/blog/elasticsearch-use-cases-architecture-6-best-practices/" target="_blank" rel="noopener noreferrer">Use Cases, Architecture, and 6 Best Practices<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/db/cassandra.html" class="prev">
        Apache Cassandra
      </a></span> <span class="next"><a href="/docs/db/redis.html">
        Redis Notes
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----><!----></div></div>
    <script src="/docs/assets/js/app.e1ceda63.js" defer></script><script src="/docs/assets/js/2.cd415d86.js" defer></script><script src="/docs/assets/js/264.0847ba58.js" defer></script><script src="/docs/assets/js/76.30cf021a.js" defer></script>
  </body>
</html>
