<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Scalable Database Architectures | Nguyễn Khánk&#39;s Wiki</title>
    <meta name="description" content="Wikipedia của tui">
    <link rel="apple-touch-icon" sizes="180x180" href="../public/favicons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="../public/favicons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="../public/favicons/favicon-16x16.png">
  <link rel="manifest" href="../public/favicons/webmanifest.json">
  <link rel="mask-icon" href="../public/favicons/safari-pinned-tab.svg" color="#3a0839">
  <link rel="shortcut icon" href="../public/favicons/favicon.ico">
  <meta name="msapplication-TileColor" content="#3a0839">
  <meta name="msapplication-config" content="../public/favicons/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">
    
    <link rel="preload" href="/docs/assets/css/0.styles.54152147.css" as="style"><link rel="preload" href="/docs/assets/js/app.5a1ee948.js" as="script"><link rel="preload" href="/docs/assets/js/2.3366c959.js" as="script"><link rel="preload" href="/docs/assets/js/26.86b9f4c9.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.a5724eb3.js"><link rel="prefetch" href="/docs/assets/js/11.73937ccd.js"><link rel="prefetch" href="/docs/assets/js/12.cf0054b7.js"><link rel="prefetch" href="/docs/assets/js/13.e09f2895.js"><link rel="prefetch" href="/docs/assets/js/14.f2b4a949.js"><link rel="prefetch" href="/docs/assets/js/15.4e4d9e28.js"><link rel="prefetch" href="/docs/assets/js/16.a8650992.js"><link rel="prefetch" href="/docs/assets/js/17.e727c753.js"><link rel="prefetch" href="/docs/assets/js/18.5a8ef9f2.js"><link rel="prefetch" href="/docs/assets/js/19.3f7f18f5.js"><link rel="prefetch" href="/docs/assets/js/20.03875c88.js"><link rel="prefetch" href="/docs/assets/js/21.7efc416c.js"><link rel="prefetch" href="/docs/assets/js/22.43712ad9.js"><link rel="prefetch" href="/docs/assets/js/23.6b3f609d.js"><link rel="prefetch" href="/docs/assets/js/24.c5b23059.js"><link rel="prefetch" href="/docs/assets/js/25.6ab17c67.js"><link rel="prefetch" href="/docs/assets/js/27.a582a098.js"><link rel="prefetch" href="/docs/assets/js/28.b5fd43bf.js"><link rel="prefetch" href="/docs/assets/js/29.d5e69c5e.js"><link rel="prefetch" href="/docs/assets/js/3.fd7f31d1.js"><link rel="prefetch" href="/docs/assets/js/30.93f98b77.js"><link rel="prefetch" href="/docs/assets/js/31.7ff0716d.js"><link rel="prefetch" href="/docs/assets/js/32.b100ac6f.js"><link rel="prefetch" href="/docs/assets/js/33.28591c91.js"><link rel="prefetch" href="/docs/assets/js/34.55185d1d.js"><link rel="prefetch" href="/docs/assets/js/35.e900ebc2.js"><link rel="prefetch" href="/docs/assets/js/36.603bd024.js"><link rel="prefetch" href="/docs/assets/js/37.6e4a5f71.js"><link rel="prefetch" href="/docs/assets/js/38.b2bf4336.js"><link rel="prefetch" href="/docs/assets/js/39.560b7831.js"><link rel="prefetch" href="/docs/assets/js/4.671ed721.js"><link rel="prefetch" href="/docs/assets/js/40.825160a8.js"><link rel="prefetch" href="/docs/assets/js/41.76e18e4f.js"><link rel="prefetch" href="/docs/assets/js/42.eee0af3c.js"><link rel="prefetch" href="/docs/assets/js/43.843828be.js"><link rel="prefetch" href="/docs/assets/js/44.43e008ea.js"><link rel="prefetch" href="/docs/assets/js/45.1667d872.js"><link rel="prefetch" href="/docs/assets/js/46.484f7842.js"><link rel="prefetch" href="/docs/assets/js/47.bad416dd.js"><link rel="prefetch" href="/docs/assets/js/48.713715e7.js"><link rel="prefetch" href="/docs/assets/js/49.33598533.js"><link rel="prefetch" href="/docs/assets/js/5.2360ee73.js"><link rel="prefetch" href="/docs/assets/js/50.4da70332.js"><link rel="prefetch" href="/docs/assets/js/51.e35d7ec8.js"><link rel="prefetch" href="/docs/assets/js/52.1925f1ba.js"><link rel="prefetch" href="/docs/assets/js/53.73479726.js"><link rel="prefetch" href="/docs/assets/js/54.e287d1cb.js"><link rel="prefetch" href="/docs/assets/js/55.f619aee7.js"><link rel="prefetch" href="/docs/assets/js/56.39b2e460.js"><link rel="prefetch" href="/docs/assets/js/57.6745eeb7.js"><link rel="prefetch" href="/docs/assets/js/58.36d16a89.js"><link rel="prefetch" href="/docs/assets/js/59.b55da5a2.js"><link rel="prefetch" href="/docs/assets/js/6.cd633043.js"><link rel="prefetch" href="/docs/assets/js/60.159fdc33.js"><link rel="prefetch" href="/docs/assets/js/61.8e424c42.js"><link rel="prefetch" href="/docs/assets/js/62.49379e8f.js"><link rel="prefetch" href="/docs/assets/js/63.c9a17da0.js"><link rel="prefetch" href="/docs/assets/js/64.25e1af42.js"><link rel="prefetch" href="/docs/assets/js/7.23808d7c.js"><link rel="prefetch" href="/docs/assets/js/8.50a5dd5c.js"><link rel="prefetch" href="/docs/assets/js/9.5cb9ead5.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.54152147.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">Nguyễn Khánk's Wiki</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Chuyện muôn thuở</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/common/optimize_web.html" class="sidebar-link">Performance website</a></li><li><a href="/docs/common/cross_domain.html" class="sidebar-link">Cross Domain</a></li><li><a href="/docs/common/authenication.html" class="sidebar-link">Authenication</a></li><li><a href="/docs/common/seo.html" class="sidebar-link">SEO</a></li><li><a href="/docs/common/realtime.html" class="sidebar-link">Real time</a></li><li><a href="/docs/common/crawl.html" class="sidebar-link">Crawl data</a></li><li><a href="/docs/common/refactor.html" class="sidebar-link">Code Refactoring</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Giải Toán</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Tools / Toys</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Thuật ngữ</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Javascript</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="scalable-database-architectures"><a href="#scalable-database-architectures" aria-hidden="true" class="header-anchor">#</a> Scalable Database Architectures</h1> <p></p><div class="table-of-contents"><ul><li><a href="#replication">Replication</a></li><li><a href="#partitioning">Partitioning</a><ul><li><a href="#horizontal-partitioning">Horizontal partitioning</a></li><li><a href="#vertical-partitioning">Vertical Partitioning</a></li></ul></li><li><a href="#partitioning-criteria">Partitioning criteria</a></li><li><a href="#sharding">Sharding</a></li><li><a href="#cluster">Cluster</a></li><li><a href="#maria-galera-cluster">Maria Galera Cluster</a></li><li><a href="#references">References</a></li></ul></div><p></p> <h2 id="replication"><a href="#replication" aria-hidden="true" class="header-anchor">#</a> Replication</h2> <p>Hiểu nôm na thì đây là kiến trúc nhân bản.</p> <div class="tip custom-block"><ul><li>Chúng ta có 1 server Master và 1 hoặc nhiều server Slave
<ul><li>Master dùng chủ yếu để ghi dữ liệu (có thể dùng để đọc trong trường hợp cần thiết)</li> <li>Slave dùng để dọc dữ liệu và ko thể ghi dữ liệu.</li></ul></li></ul></div> <p>Vấn đề lớn nhất của phương pháp này là khi ứng dung được cấu hình ghi trên master , đọc trên slave. Nhưng sau khi dư liệu trên master thì mất một khoảng thời gian nhất định gọi là lag dư liệu mới được đồng bộ lên slave.</p> <p>Ví dụ khi mua hàng, chúng ta mua thì số lượng sản phẩm phải bị giảm đi, Nhưng câu lệnh giảm số lượng sản phẩm đã thưc hiện xong thì trên slave vẫn chưa được cập nhật nên có thể dẫn đến sai logic. Trong trường hợp này chúng ta phải thực hiện dọc trực tiếp trên master thay vì đọc trên slave.</p> <h2 id="partitioning"><a href="#partitioning" aria-hidden="true" class="header-anchor">#</a> Partitioning</h2> <div class="tip custom-block"><p>Partitioning is a database design technique which is used to improves performance, manageability, simplifies maintenance and reduce the cost of storing large amounts of data.</p></div> <p>Để dễ hình dung thì 1 bảng dữ liệu gióng như một chiếc hộp nhiều ngăn.</p> <ul><li>Mỗi partition là một ngăn, mỗi một ngăn sẽ chưa một số lượng bản ghi theo một quy luật nào đó.</li> <li>Các cách chia thường theo id của bản ghi, hoặc theo thời gian tạo bản ghi theo ngày tháng</li></ul> <h3 id="horizontal-partitioning"><a href="#horizontal-partitioning" aria-hidden="true" class="header-anchor">#</a> Horizontal partitioning</h3> <div class="tip custom-block"><p>Horizontal partitioning divides a table into multiple tables. Each table then contains the same number of columns, but fewer rows.</p></div> <p>Ví dụ theo tháng chẳng hạn, thì bảng sẽ chia thành 12 partition, dữ liệu của mỗi tháng của các năm sẽ được đấy vào cùng partition, nôm na có thể hiểu truy vẫn dữ liệu trong một tháng tốc độ sẽ tăng lên 12 lần.</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">table</span> testing_user
<span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> <span class="token keyword">HASH</span><span class="token punctuation">(</span> <span class="token keyword">YEAR</span><span class="token punctuation">(</span>created<span class="token punctuation">)</span> <span class="token punctuation">)</span>
PARTITIONS <span class="token number">10</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="vertical-partitioning"><a href="#vertical-partitioning" aria-hidden="true" class="header-anchor">#</a> Vertical Partitioning</h3> <div class="tip custom-block"><p>Vertical partitioning involves creating tables with fewer columns and using additional tables to store the remaining columns. Normalization also involves this splitting of columns across tables, but vertical partitioning goes beyond that and partitions columns even when already normalized.</p></div> <h2 id="partitioning-criteria"><a href="#partitioning-criteria" aria-hidden="true" class="header-anchor">#</a> Partitioning criteria</h2> <ul><li>Range partitioning</li> <li>List partitioning</li> <li>Composite partitioning</li> <li>Round-robin partitioning</li> <li>Hash partitioning</li></ul> <h2 id="sharding"><a href="#sharding" aria-hidden="true" class="header-anchor">#</a> Sharding</h2> <div class="tip custom-block"><p>Partitioning is more a generic term for dividing data across tables or databases.
Sharding is one specific type of partitioning, namely horizontal partitioning.</p></div> <p>Thường dùng trong ứng dụng dữ liệu người dùng ko liên quan đến dữ liệu cảu người dùng khác. Hoặc nhóm người dùng, các user trong một công ty sẽ lưu vào một sharding node chẳng hạn</p> <hr> <h2 id="cluster"><a href="#cluster" aria-hidden="true" class="header-anchor">#</a> Cluster</h2> <h2 id="maria-galera-cluster"><a href="#maria-galera-cluster" aria-hidden="true" class="header-anchor">#</a> Maria Galera Cluster</h2> <div class="tip custom-block"><p>một công cụ tạo ra nhiều bản sao giống hệt nhau trên nhiều máy chủ khác nhau, phục vụ cho mục đích backup dữ liệu</p></div> <hr> <h2 id="references"><a href="#references" aria-hidden="true" class="header-anchor">#</a> References</h2> <ul><li><a href="https://kipalog.kaopiz.com/posts/Cac-mo-hinh-database-nen-biet" target="_blank" rel="noopener noreferrer">Các mô hình database nên biết<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://kipalog.com/posts/Cau-hinh-Galera-server-cho-MariaDB" target="_blank" rel="noopener noreferrer">Cấu hình Galera server cho MariaDB<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://acmeextension.com/mysql-table-partitioning/" target="_blank" rel="noopener noreferrer">A Step-by-Step Guide to Create Partitions on MySQL table<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.quora.com/Whats-the-difference-between-sharding-DB-tables-and-partitioning-them" target="_blank" rel="noopener noreferrer">What's the difference between sharding DB tables and partitioning them?<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.5a1ee948.js" defer></script><script src="/docs/assets/js/2.3366c959.js" defer></script><script src="/docs/assets/js/26.86b9f4c9.js" defer></script>
  </body>
</html>
