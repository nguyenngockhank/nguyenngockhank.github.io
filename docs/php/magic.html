<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Magic methods | Nguyễn Khánk&#39;s Wiki</title>
    <meta name="description" content="Wikipedia của tui">
    <link rel="apple-touch-icon" sizes="180x180" href="../public/favicons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="../public/favicons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="../public/favicons/favicon-16x16.png">
  <link rel="manifest" href="../public/favicons/manifest.json">
  <link rel="mask-icon" href="../public/favicons/safari-pinned-tab.svg" color="#3a0839">
  <link rel="shortcut icon" href="../public/favicons/favicon.ico">
  <meta name="msapplication-TileColor" content="#3a0839">
  <meta name="msapplication-config" content="../public/favicons/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">
    
    <link rel="preload" href="/docs/assets/css/0.styles.88febddd.css" as="style"><link rel="preload" href="/docs/assets/js/app.62e6d9f2.js" as="script"><link rel="preload" href="/docs/assets/js/2.6cd03918.js" as="script"><link rel="preload" href="/docs/assets/js/47.7b568236.js" as="script"><link rel="preload" href="/docs/assets/js/3.1533988c.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.1895586f.js"><link rel="prefetch" href="/docs/assets/js/11.5a118dd1.js"><link rel="prefetch" href="/docs/assets/js/12.1d082a62.js"><link rel="prefetch" href="/docs/assets/js/13.5ce2c780.js"><link rel="prefetch" href="/docs/assets/js/14.dcf43a1c.js"><link rel="prefetch" href="/docs/assets/js/15.c778099e.js"><link rel="prefetch" href="/docs/assets/js/16.83e4fd44.js"><link rel="prefetch" href="/docs/assets/js/17.2205c236.js"><link rel="prefetch" href="/docs/assets/js/18.80581d1d.js"><link rel="prefetch" href="/docs/assets/js/19.9a7e3fee.js"><link rel="prefetch" href="/docs/assets/js/20.d76b1748.js"><link rel="prefetch" href="/docs/assets/js/21.29a15e6e.js"><link rel="prefetch" href="/docs/assets/js/22.d326fb6a.js"><link rel="prefetch" href="/docs/assets/js/23.d3e6bd9c.js"><link rel="prefetch" href="/docs/assets/js/24.ce487289.js"><link rel="prefetch" href="/docs/assets/js/25.e42e02ad.js"><link rel="prefetch" href="/docs/assets/js/26.53e63d84.js"><link rel="prefetch" href="/docs/assets/js/27.11dfd72b.js"><link rel="prefetch" href="/docs/assets/js/28.c6e2ef46.js"><link rel="prefetch" href="/docs/assets/js/29.5a7e2e85.js"><link rel="prefetch" href="/docs/assets/js/30.0ae8b1ba.js"><link rel="prefetch" href="/docs/assets/js/31.3e690db1.js"><link rel="prefetch" href="/docs/assets/js/32.a7ec8e9a.js"><link rel="prefetch" href="/docs/assets/js/33.cd96da6d.js"><link rel="prefetch" href="/docs/assets/js/34.c4dcbf30.js"><link rel="prefetch" href="/docs/assets/js/35.3ed72c60.js"><link rel="prefetch" href="/docs/assets/js/36.e3fc25cb.js"><link rel="prefetch" href="/docs/assets/js/37.a2672f8a.js"><link rel="prefetch" href="/docs/assets/js/38.b4c7458c.js"><link rel="prefetch" href="/docs/assets/js/39.8eb3ebae.js"><link rel="prefetch" href="/docs/assets/js/4.30d8cf92.js"><link rel="prefetch" href="/docs/assets/js/40.4d80a043.js"><link rel="prefetch" href="/docs/assets/js/41.1089a950.js"><link rel="prefetch" href="/docs/assets/js/42.b97b8b99.js"><link rel="prefetch" href="/docs/assets/js/43.8b3b484b.js"><link rel="prefetch" href="/docs/assets/js/44.f38e45f1.js"><link rel="prefetch" href="/docs/assets/js/45.37e8ba46.js"><link rel="prefetch" href="/docs/assets/js/46.65988f2e.js"><link rel="prefetch" href="/docs/assets/js/48.ff924efb.js"><link rel="prefetch" href="/docs/assets/js/49.75ff1a36.js"><link rel="prefetch" href="/docs/assets/js/5.b75474f2.js"><link rel="prefetch" href="/docs/assets/js/50.9b03bbab.js"><link rel="prefetch" href="/docs/assets/js/51.8a263efa.js"><link rel="prefetch" href="/docs/assets/js/52.24396bd6.js"><link rel="prefetch" href="/docs/assets/js/53.4b385ac9.js"><link rel="prefetch" href="/docs/assets/js/54.f2d364ba.js"><link rel="prefetch" href="/docs/assets/js/55.f0d1ba24.js"><link rel="prefetch" href="/docs/assets/js/56.c524d265.js"><link rel="prefetch" href="/docs/assets/js/57.135f328d.js"><link rel="prefetch" href="/docs/assets/js/58.df0c61c3.js"><link rel="prefetch" href="/docs/assets/js/59.d82ed995.js"><link rel="prefetch" href="/docs/assets/js/6.7d3fe3ef.js"><link rel="prefetch" href="/docs/assets/js/60.93833126.js"><link rel="prefetch" href="/docs/assets/js/61.be62e7c4.js"><link rel="prefetch" href="/docs/assets/js/62.a109e647.js"><link rel="prefetch" href="/docs/assets/js/63.077fb8f5.js"><link rel="prefetch" href="/docs/assets/js/64.d7465824.js"><link rel="prefetch" href="/docs/assets/js/65.b551f8c4.js"><link rel="prefetch" href="/docs/assets/js/66.3b988511.js"><link rel="prefetch" href="/docs/assets/js/67.015cd091.js"><link rel="prefetch" href="/docs/assets/js/68.20eaa090.js"><link rel="prefetch" href="/docs/assets/js/7.4f6c46ca.js"><link rel="prefetch" href="/docs/assets/js/8.bcaec870.js"><link rel="prefetch" href="/docs/assets/js/9.11d21348.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.88febddd.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">Nguyễn Khánk's Wiki</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://nguyenngockhank.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://nguyenngockhank.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Chuyện muôn thuở</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/common/optimize_web.html" class="sidebar-link">Performance website</a></li><li><a href="/docs/common/cross_domain.html" class="sidebar-link">Cross Domain</a></li><li><a href="/docs/common/authenication.html" class="sidebar-link">Authenication</a></li><li><a href="/docs/common/seo.html" class="sidebar-link">SEO</a></li><li><a href="/docs/common/realtime.html" class="sidebar-link">Real time</a></li><li><a href="/docs/common/crawl.html" class="sidebar-link">Crawl data</a></li><li><a href="/docs/common/refactor.html" class="sidebar-link">Code Refactoring</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Giải Toán</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Tools / Toys</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Thuật ngữ</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Database</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Javascript</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="magic-methods"><a href="#magic-methods" aria-hidden="true" class="header-anchor">#</a> Magic methods</h1> <p>Magic methods là 1 thứ rất hay ho và khá bảnh của PHP.</p> <p>Dưới đây là note của mình về cách làm 1 thứ cũng rất này nọ từ feature này.</p> <p>Đó là <strong>Class static</strong> (khái niệm mới chế)</p> <h2 id="singleton"><a href="#singleton" aria-hidden="true" class="header-anchor">#</a> Singleton</h2> <p>Đầu tiên ta xem định nghĩa qua class <strong><code>BaseLogger</code></strong> implement pattern singleton</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">class</span> <span class="token class-name">BaseLogger</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">static</span> <span class="token variable">$instance</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">null</span> <span class="token operator">===</span> <span class="token variable">$instance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token variable">$instance</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">static</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token variable">$instance</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">function</span> <span class="token function">debug</span><span class="token punctuation">(</span><span class="token variable">$name</span> <span class="token operator">=</span> <span class="token single-quoted-string string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">echo</span> <span class="token single-quoted-string string">'Debug: Hello '</span> <span class="token punctuation">.</span> <span class="token variable">$name</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">info</span><span class="token punctuation">(</span><span class="token variable">$name</span>  <span class="token operator">=</span> <span class="token single-quoted-string string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">echo</span> <span class="token single-quoted-string string">'Info: Hello '</span> <span class="token punctuation">.</span> <span class="token variable">$name</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/// ... more functions </span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>Cách sử dụng</strong></p> <div class="language-php extra-class"><pre class="language-php"><code>BaseLogger<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'khanh'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
BaseLogger<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre></div><p>Ừm cũng coi như là static hết rồi nhưng lúc nào cũng phải gọi <strong><code>::getInstance()</code></strong>, có cách nào bỏ luôn không ^^!</p> <blockquote><p>Yes, it's magic</p></blockquote> <h2 id="callstatic"><a href="#callstatic" aria-hidden="true" class="header-anchor">#</a> <code>__callStatic</code></h2> <p>Và đây là solution.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">class</span> <span class="token class-name">Logger</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">__callStatic</span><span class="token punctuation">(</span><span class="token variable">$method</span><span class="token punctuation">,</span> <span class="token variable">$arguments</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> call_user_func_array <span class="token punctuation">(</span> <span class="token punctuation">[</span> BaseLogger<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token variable">$method</span> <span class="token punctuation">]</span> <span class="token punctuation">,</span> <span class="token variable">$arguments</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Tạo một class khác và gọi tới <code>BaseLogger</code>.</p> <div class="language-php extra-class"><pre class="language-php"><code>Logger<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Khanh'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
Logger<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">info</span><span class="token punctuation">(</span>'<span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre></div><p><strong>__callStatic</strong></p> <div class="tip custom-block"><p><code>__callStatic</code> is triggered when invoking inaccessible methods in a static context.</p></div> <p>Sub: <code>__callStatic</code> hàm này sẽ được thực thi khi những hàm static (::info, ::debug) được sử dụng không có implementation.</p> <p><strong>call_user_func_array</strong></p> <div class="tip custom-block"><p><code>call_user_func_array</code> - Call a callback with an array of parameters</p></div> <p>Sub: gọi 1 Callback với các tham số nằm gói gọn trong cái mảng =)) Nôm na là để truyền tham số động vào đúng cái method</p> <h2 id="note-them"><a href="#note-them" aria-hidden="true" class="header-anchor">#</a> Note thêm</h2> <div class="warning custom-block"><p class="custom-block-title">Caution</p> <p>PHP reserves all function names starting with __ as magical. It is recommended that you do not use function names with __ in PHP unless you want some documented magic functionality.</p></div> <div class="tip custom-block"><p class="custom-block-title">__invoke ([ $... ] ) : mixed</p> <p>is called when a script tries to call an object as a function.</p></div> <div class="tip custom-block"><p class="custom-block-title">static __set_state ( array $properties ) : object</p> <p>is called for classes exported by <code>var_export()</code> since PHP 5.1.0.</p></div> <div class="tip custom-block"><p class="custom-block-title">___debugInfo ( void ) : array</p> <p>is called by var_dump() when dumping an object to get the properties that should be shown. If the method isn't defined on an object, then all public, protected and private properties will be shown.</p></div> <div class="tip custom-block"><p class="custom-block-title">__clone ( void ) : void</p> <p>An object copy is created by using the clone keyword (which calls the object's __clone() method if possible). An object's __clone() method cannot be called directly.</p></div> <hr> <div class="tip custom-block"><p class="custom-block-title">__sleep( void ) : array</p> <p>serialize() checks if your class has a function with the magic name __sleep(). If so, that function is executed prior to any serialization.</p></div> <p>It can clean up the object and is supposed to return an array with the names of all variables of that object that should be serialized. If the method doesn't return anything then <strong>NULL</strong> is serialized and <strong>E_NOTICE</strong> is issued.</p> <div class="tip custom-block"><p class="custom-block-title">__wakeup ( void ) : void</p> <p>Conversely, unserialize() checks for the presence of a function with the magic name __wakeup(). If present, this function can reconstruct any resources that the object may have.</p></div> <hr></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/docs/assets/js/app.62e6d9f2.js" defer></script><script src="/docs/assets/js/2.6cd03918.js" defer></script><script src="/docs/assets/js/47.7b568236.js" defer></script><script src="/docs/assets/js/3.1533988c.js" defer></script>
  </body>
</html>
