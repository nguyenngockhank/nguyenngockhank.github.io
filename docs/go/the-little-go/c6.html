<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Chương 6 - Đồng thời | Nguyễn Khánk&#39;s Wiki</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="apple-touch-icon" sizes="180x180" href="../public/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../public/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../public/favicons/favicon-16x16.png">
    <link rel="manifest" href="../public/favicons/manifest.json">
    <link rel="mask-icon" href="../public/favicons/safari-pinned-tab.svg" color="#3a0839">
    <link rel="shortcut icon" href="../public/favicons/favicon.ico">
    <meta name="description" content="Wikipedia của tui">
    <meta name="msapplication-TileColor" content="#3a0839">
    <meta name="msapplication-config" content="../public/favicons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    
    <link rel="preload" href="/docs/assets/css/0.styles.3c6afca0.css" as="style"><link rel="preload" href="/docs/assets/js/app.fbd23b33.js" as="script"><link rel="preload" href="/docs/assets/js/2.5b2c2b8c.js" as="script"><link rel="preload" href="/docs/assets/js/293.6e6c1420.js" as="script"><link rel="preload" href="/docs/assets/js/76.62e617fa.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.153eccfc.js"><link rel="prefetch" href="/docs/assets/js/100.3b088c92.js"><link rel="prefetch" href="/docs/assets/js/101.02c21b3f.js"><link rel="prefetch" href="/docs/assets/js/102.5f086579.js"><link rel="prefetch" href="/docs/assets/js/103.71c9f8b0.js"><link rel="prefetch" href="/docs/assets/js/104.157e846d.js"><link rel="prefetch" href="/docs/assets/js/105.2dcf0948.js"><link rel="prefetch" href="/docs/assets/js/106.b2891254.js"><link rel="prefetch" href="/docs/assets/js/107.8855ece8.js"><link rel="prefetch" href="/docs/assets/js/108.5d87ba50.js"><link rel="prefetch" href="/docs/assets/js/109.39278f35.js"><link rel="prefetch" href="/docs/assets/js/11.ed15a6b7.js"><link rel="prefetch" href="/docs/assets/js/110.e3c84b8e.js"><link rel="prefetch" href="/docs/assets/js/111.32801890.js"><link rel="prefetch" href="/docs/assets/js/112.03f55f95.js"><link rel="prefetch" href="/docs/assets/js/113.7f23e38c.js"><link rel="prefetch" href="/docs/assets/js/114.6847241c.js"><link rel="prefetch" href="/docs/assets/js/115.2b82a788.js"><link rel="prefetch" href="/docs/assets/js/116.6f4bbd24.js"><link rel="prefetch" href="/docs/assets/js/117.a7b4d7b4.js"><link rel="prefetch" href="/docs/assets/js/118.863d1cf4.js"><link rel="prefetch" href="/docs/assets/js/119.8af26645.js"><link rel="prefetch" href="/docs/assets/js/12.0260387a.js"><link rel="prefetch" href="/docs/assets/js/120.8597295e.js"><link rel="prefetch" href="/docs/assets/js/121.c005b40f.js"><link rel="prefetch" href="/docs/assets/js/122.60b4e18d.js"><link rel="prefetch" href="/docs/assets/js/123.bda0985c.js"><link rel="prefetch" href="/docs/assets/js/124.338844b9.js"><link rel="prefetch" href="/docs/assets/js/125.081814a8.js"><link rel="prefetch" href="/docs/assets/js/126.1d5d4484.js"><link rel="prefetch" href="/docs/assets/js/127.89bfa8c0.js"><link rel="prefetch" href="/docs/assets/js/128.d3f32783.js"><link rel="prefetch" href="/docs/assets/js/129.8099f88d.js"><link rel="prefetch" href="/docs/assets/js/13.df0f0583.js"><link rel="prefetch" href="/docs/assets/js/130.1c417555.js"><link rel="prefetch" href="/docs/assets/js/131.d0e80eb5.js"><link rel="prefetch" href="/docs/assets/js/132.ea0c83e3.js"><link rel="prefetch" href="/docs/assets/js/133.b86d29a7.js"><link rel="prefetch" href="/docs/assets/js/134.45a10b4e.js"><link rel="prefetch" href="/docs/assets/js/135.7401f283.js"><link rel="prefetch" href="/docs/assets/js/136.b98ba7eb.js"><link rel="prefetch" href="/docs/assets/js/137.47392d93.js"><link rel="prefetch" href="/docs/assets/js/138.1093a88f.js"><link rel="prefetch" href="/docs/assets/js/139.2aa34002.js"><link rel="prefetch" href="/docs/assets/js/14.4b09c51d.js"><link rel="prefetch" href="/docs/assets/js/140.2e7d4454.js"><link rel="prefetch" href="/docs/assets/js/141.20ff5f59.js"><link rel="prefetch" href="/docs/assets/js/142.7b914728.js"><link rel="prefetch" href="/docs/assets/js/143.5bf9b4ad.js"><link rel="prefetch" href="/docs/assets/js/144.65dccdad.js"><link rel="prefetch" href="/docs/assets/js/145.b9ae6916.js"><link rel="prefetch" href="/docs/assets/js/146.ebf272e6.js"><link rel="prefetch" href="/docs/assets/js/147.330c8649.js"><link rel="prefetch" href="/docs/assets/js/148.07a6f7df.js"><link rel="prefetch" href="/docs/assets/js/149.9c6ac56c.js"><link rel="prefetch" href="/docs/assets/js/15.80c25c0b.js"><link rel="prefetch" href="/docs/assets/js/150.b7cf046d.js"><link rel="prefetch" href="/docs/assets/js/151.6d2476c6.js"><link rel="prefetch" href="/docs/assets/js/152.8739ef8c.js"><link rel="prefetch" href="/docs/assets/js/153.9cac2499.js"><link rel="prefetch" href="/docs/assets/js/154.8000a8a6.js"><link rel="prefetch" href="/docs/assets/js/155.5f64d024.js"><link rel="prefetch" href="/docs/assets/js/156.a9267d18.js"><link rel="prefetch" href="/docs/assets/js/157.a913fa0b.js"><link rel="prefetch" href="/docs/assets/js/158.5e41e119.js"><link rel="prefetch" href="/docs/assets/js/159.195202fc.js"><link rel="prefetch" href="/docs/assets/js/16.67cc9487.js"><link rel="prefetch" href="/docs/assets/js/160.4da77b6b.js"><link rel="prefetch" href="/docs/assets/js/161.6c416092.js"><link rel="prefetch" href="/docs/assets/js/162.cbf16c54.js"><link rel="prefetch" href="/docs/assets/js/163.546a14da.js"><link rel="prefetch" href="/docs/assets/js/164.b6c14a71.js"><link rel="prefetch" href="/docs/assets/js/165.e623411a.js"><link rel="prefetch" href="/docs/assets/js/166.a3adbdbb.js"><link rel="prefetch" href="/docs/assets/js/167.3138b691.js"><link rel="prefetch" href="/docs/assets/js/168.4159ef9c.js"><link rel="prefetch" href="/docs/assets/js/169.eb89be73.js"><link rel="prefetch" href="/docs/assets/js/17.90a825f5.js"><link rel="prefetch" href="/docs/assets/js/170.cdfb4269.js"><link rel="prefetch" href="/docs/assets/js/171.8d9ee985.js"><link rel="prefetch" href="/docs/assets/js/172.680cf1c5.js"><link rel="prefetch" href="/docs/assets/js/173.4780b497.js"><link rel="prefetch" href="/docs/assets/js/174.bd2bdb7b.js"><link rel="prefetch" href="/docs/assets/js/175.092e668f.js"><link rel="prefetch" href="/docs/assets/js/176.8b618404.js"><link rel="prefetch" href="/docs/assets/js/177.77fb40d5.js"><link rel="prefetch" href="/docs/assets/js/178.842aba1b.js"><link rel="prefetch" href="/docs/assets/js/179.76a8437e.js"><link rel="prefetch" href="/docs/assets/js/18.70f92410.js"><link rel="prefetch" href="/docs/assets/js/180.f4e1d0b5.js"><link rel="prefetch" href="/docs/assets/js/181.90af1476.js"><link rel="prefetch" href="/docs/assets/js/182.58e1eac3.js"><link rel="prefetch" href="/docs/assets/js/183.e29712d0.js"><link rel="prefetch" href="/docs/assets/js/184.bec1b80c.js"><link rel="prefetch" href="/docs/assets/js/185.08330ae6.js"><link rel="prefetch" href="/docs/assets/js/186.a3389ed8.js"><link rel="prefetch" href="/docs/assets/js/187.e507a1e7.js"><link rel="prefetch" href="/docs/assets/js/188.487bf109.js"><link rel="prefetch" href="/docs/assets/js/189.c278c43e.js"><link rel="prefetch" href="/docs/assets/js/19.994126d6.js"><link rel="prefetch" href="/docs/assets/js/190.aa538f74.js"><link rel="prefetch" href="/docs/assets/js/191.3056bb39.js"><link rel="prefetch" href="/docs/assets/js/192.41c013c1.js"><link rel="prefetch" href="/docs/assets/js/193.d429002e.js"><link rel="prefetch" href="/docs/assets/js/194.0e199aa9.js"><link rel="prefetch" href="/docs/assets/js/195.637925a6.js"><link rel="prefetch" href="/docs/assets/js/196.0b407aa2.js"><link rel="prefetch" href="/docs/assets/js/197.adfcfc59.js"><link rel="prefetch" href="/docs/assets/js/198.e3e6c4ef.js"><link rel="prefetch" href="/docs/assets/js/199.49683376.js"><link rel="prefetch" href="/docs/assets/js/20.436dec13.js"><link rel="prefetch" href="/docs/assets/js/200.0e3112e6.js"><link rel="prefetch" href="/docs/assets/js/201.eeb624ba.js"><link rel="prefetch" href="/docs/assets/js/202.0773f90d.js"><link rel="prefetch" href="/docs/assets/js/203.fadab892.js"><link rel="prefetch" href="/docs/assets/js/204.ee2ea57c.js"><link rel="prefetch" href="/docs/assets/js/205.ad990583.js"><link rel="prefetch" href="/docs/assets/js/206.6e751def.js"><link rel="prefetch" href="/docs/assets/js/207.d39659f9.js"><link rel="prefetch" href="/docs/assets/js/208.a3c8890b.js"><link rel="prefetch" href="/docs/assets/js/209.10bee9a0.js"><link rel="prefetch" href="/docs/assets/js/21.f48a1c2d.js"><link rel="prefetch" href="/docs/assets/js/210.4a01e5ea.js"><link rel="prefetch" href="/docs/assets/js/211.6391565f.js"><link rel="prefetch" href="/docs/assets/js/212.d3660dd9.js"><link rel="prefetch" href="/docs/assets/js/213.1edf503a.js"><link rel="prefetch" href="/docs/assets/js/214.d060c68f.js"><link rel="prefetch" href="/docs/assets/js/215.c47ffe1d.js"><link rel="prefetch" href="/docs/assets/js/216.f6ff1235.js"><link rel="prefetch" href="/docs/assets/js/217.21bb087b.js"><link rel="prefetch" href="/docs/assets/js/218.cadaf40a.js"><link rel="prefetch" href="/docs/assets/js/219.3f22b866.js"><link rel="prefetch" href="/docs/assets/js/22.8712296c.js"><link rel="prefetch" href="/docs/assets/js/220.fd39177a.js"><link rel="prefetch" href="/docs/assets/js/221.82aeb4ce.js"><link rel="prefetch" href="/docs/assets/js/222.256d785e.js"><link rel="prefetch" href="/docs/assets/js/223.08325637.js"><link rel="prefetch" href="/docs/assets/js/224.a047d3e4.js"><link rel="prefetch" href="/docs/assets/js/225.a393cb0a.js"><link rel="prefetch" href="/docs/assets/js/226.26e9c0d4.js"><link rel="prefetch" href="/docs/assets/js/227.fcdc3910.js"><link rel="prefetch" href="/docs/assets/js/228.57537ca6.js"><link rel="prefetch" href="/docs/assets/js/229.db29aef5.js"><link rel="prefetch" href="/docs/assets/js/23.cec52df0.js"><link rel="prefetch" href="/docs/assets/js/230.78bcea08.js"><link rel="prefetch" href="/docs/assets/js/231.b4d485b3.js"><link rel="prefetch" href="/docs/assets/js/232.0e058393.js"><link rel="prefetch" href="/docs/assets/js/233.e5542ac6.js"><link rel="prefetch" href="/docs/assets/js/234.169c9463.js"><link rel="prefetch" href="/docs/assets/js/235.92ec6465.js"><link rel="prefetch" href="/docs/assets/js/236.10e76a1c.js"><link rel="prefetch" href="/docs/assets/js/237.148242a0.js"><link rel="prefetch" href="/docs/assets/js/238.e74664ed.js"><link rel="prefetch" href="/docs/assets/js/239.ac939fea.js"><link rel="prefetch" href="/docs/assets/js/24.1a41c864.js"><link rel="prefetch" href="/docs/assets/js/240.c98d9fa4.js"><link rel="prefetch" href="/docs/assets/js/241.8cc7e9f1.js"><link rel="prefetch" href="/docs/assets/js/242.eb51ae94.js"><link rel="prefetch" href="/docs/assets/js/243.62c6602e.js"><link rel="prefetch" href="/docs/assets/js/244.3a99361b.js"><link rel="prefetch" href="/docs/assets/js/245.c48c6ba8.js"><link rel="prefetch" href="/docs/assets/js/246.95202299.js"><link rel="prefetch" href="/docs/assets/js/247.b1960cdb.js"><link rel="prefetch" href="/docs/assets/js/248.62f5a631.js"><link rel="prefetch" href="/docs/assets/js/249.5645910c.js"><link rel="prefetch" href="/docs/assets/js/25.cda362ba.js"><link rel="prefetch" href="/docs/assets/js/250.4486891e.js"><link rel="prefetch" href="/docs/assets/js/251.23192ff8.js"><link rel="prefetch" href="/docs/assets/js/252.6c3474c5.js"><link rel="prefetch" href="/docs/assets/js/253.73e3e091.js"><link rel="prefetch" href="/docs/assets/js/254.dbd43be8.js"><link rel="prefetch" href="/docs/assets/js/255.fec8556c.js"><link rel="prefetch" href="/docs/assets/js/256.90084eed.js"><link rel="prefetch" href="/docs/assets/js/257.f53b5c9e.js"><link rel="prefetch" href="/docs/assets/js/258.603e35d7.js"><link rel="prefetch" href="/docs/assets/js/259.e1cf22cc.js"><link rel="prefetch" href="/docs/assets/js/26.51ea897e.js"><link rel="prefetch" href="/docs/assets/js/260.66445b4c.js"><link rel="prefetch" href="/docs/assets/js/261.10f26d22.js"><link rel="prefetch" href="/docs/assets/js/262.c54f6fce.js"><link rel="prefetch" href="/docs/assets/js/263.b3b28d8b.js"><link rel="prefetch" href="/docs/assets/js/264.74646aa8.js"><link rel="prefetch" href="/docs/assets/js/265.81a4e142.js"><link rel="prefetch" href="/docs/assets/js/266.42107a04.js"><link rel="prefetch" href="/docs/assets/js/267.f3be4b3b.js"><link rel="prefetch" href="/docs/assets/js/268.65fbbba6.js"><link rel="prefetch" href="/docs/assets/js/269.bf8bb2e6.js"><link rel="prefetch" href="/docs/assets/js/27.aaa626e8.js"><link rel="prefetch" href="/docs/assets/js/270.4684282b.js"><link rel="prefetch" href="/docs/assets/js/271.d616dc02.js"><link rel="prefetch" href="/docs/assets/js/272.461617a2.js"><link rel="prefetch" href="/docs/assets/js/273.21bab8fb.js"><link rel="prefetch" href="/docs/assets/js/274.a4d57fc1.js"><link rel="prefetch" href="/docs/assets/js/275.4a78fd93.js"><link rel="prefetch" href="/docs/assets/js/276.a47300c3.js"><link rel="prefetch" href="/docs/assets/js/277.d701a174.js"><link rel="prefetch" href="/docs/assets/js/278.2575de2e.js"><link rel="prefetch" href="/docs/assets/js/279.9f00e70c.js"><link rel="prefetch" href="/docs/assets/js/28.35cfd80f.js"><link rel="prefetch" href="/docs/assets/js/280.eab318a6.js"><link rel="prefetch" href="/docs/assets/js/281.cdd8b2f4.js"><link rel="prefetch" href="/docs/assets/js/282.ca27923b.js"><link rel="prefetch" href="/docs/assets/js/283.d7a17cba.js"><link rel="prefetch" href="/docs/assets/js/284.b21c55c6.js"><link rel="prefetch" href="/docs/assets/js/285.ea98c8df.js"><link rel="prefetch" href="/docs/assets/js/286.cfe07592.js"><link rel="prefetch" href="/docs/assets/js/287.4aa18e13.js"><link rel="prefetch" href="/docs/assets/js/288.7ed9a591.js"><link rel="prefetch" href="/docs/assets/js/289.30bda953.js"><link rel="prefetch" href="/docs/assets/js/29.8abf2eab.js"><link rel="prefetch" href="/docs/assets/js/290.c939ef23.js"><link rel="prefetch" href="/docs/assets/js/291.c9a48300.js"><link rel="prefetch" href="/docs/assets/js/292.8c4c68a1.js"><link rel="prefetch" href="/docs/assets/js/294.c3b7760d.js"><link rel="prefetch" href="/docs/assets/js/295.498f0beb.js"><link rel="prefetch" href="/docs/assets/js/296.91faaa89.js"><link rel="prefetch" href="/docs/assets/js/297.08055bda.js"><link rel="prefetch" href="/docs/assets/js/298.ce63f3b1.js"><link rel="prefetch" href="/docs/assets/js/299.60b386f3.js"><link rel="prefetch" href="/docs/assets/js/3.4817e8a1.js"><link rel="prefetch" href="/docs/assets/js/30.4e3ad4e4.js"><link rel="prefetch" href="/docs/assets/js/300.c00da2ff.js"><link rel="prefetch" href="/docs/assets/js/301.338078e5.js"><link rel="prefetch" href="/docs/assets/js/302.72169e7a.js"><link rel="prefetch" href="/docs/assets/js/303.d1cfa0b2.js"><link rel="prefetch" href="/docs/assets/js/304.c4c8a184.js"><link rel="prefetch" href="/docs/assets/js/305.496e1737.js"><link rel="prefetch" href="/docs/assets/js/306.aaafe961.js"><link rel="prefetch" href="/docs/assets/js/307.1028b830.js"><link rel="prefetch" href="/docs/assets/js/308.8f829313.js"><link rel="prefetch" href="/docs/assets/js/309.6257afef.js"><link rel="prefetch" href="/docs/assets/js/31.cdab1fb1.js"><link rel="prefetch" href="/docs/assets/js/310.842264c8.js"><link rel="prefetch" href="/docs/assets/js/311.aeef3a74.js"><link rel="prefetch" href="/docs/assets/js/312.9afae71a.js"><link rel="prefetch" href="/docs/assets/js/313.33707f49.js"><link rel="prefetch" href="/docs/assets/js/314.2c665b13.js"><link rel="prefetch" href="/docs/assets/js/315.d6f56bc5.js"><link rel="prefetch" href="/docs/assets/js/316.0a8b99a5.js"><link rel="prefetch" href="/docs/assets/js/317.83063898.js"><link rel="prefetch" href="/docs/assets/js/318.532db9a8.js"><link rel="prefetch" href="/docs/assets/js/319.6f96271f.js"><link rel="prefetch" href="/docs/assets/js/32.5a51a4e3.js"><link rel="prefetch" href="/docs/assets/js/320.fc5cbd47.js"><link rel="prefetch" href="/docs/assets/js/321.f1a34043.js"><link rel="prefetch" href="/docs/assets/js/322.389211d9.js"><link rel="prefetch" href="/docs/assets/js/323.265697d5.js"><link rel="prefetch" href="/docs/assets/js/324.a2423187.js"><link rel="prefetch" href="/docs/assets/js/325.99af5dc8.js"><link rel="prefetch" href="/docs/assets/js/326.11baa982.js"><link rel="prefetch" href="/docs/assets/js/327.1300302d.js"><link rel="prefetch" href="/docs/assets/js/328.7b2997f0.js"><link rel="prefetch" href="/docs/assets/js/329.b1de0441.js"><link rel="prefetch" href="/docs/assets/js/33.74b96a4c.js"><link rel="prefetch" href="/docs/assets/js/330.cf36055d.js"><link rel="prefetch" href="/docs/assets/js/331.fcc07dae.js"><link rel="prefetch" href="/docs/assets/js/332.85ed6be7.js"><link rel="prefetch" href="/docs/assets/js/333.d080c267.js"><link rel="prefetch" href="/docs/assets/js/334.e9037519.js"><link rel="prefetch" href="/docs/assets/js/335.348239dd.js"><link rel="prefetch" href="/docs/assets/js/336.dc7bdc03.js"><link rel="prefetch" href="/docs/assets/js/337.f5aba021.js"><link rel="prefetch" href="/docs/assets/js/338.8296ef8e.js"><link rel="prefetch" href="/docs/assets/js/339.c9a9ac9b.js"><link rel="prefetch" href="/docs/assets/js/34.2e07fc22.js"><link rel="prefetch" href="/docs/assets/js/340.0a618ed9.js"><link rel="prefetch" href="/docs/assets/js/341.e4eea490.js"><link rel="prefetch" href="/docs/assets/js/342.c975e6ba.js"><link rel="prefetch" href="/docs/assets/js/343.9de869ac.js"><link rel="prefetch" href="/docs/assets/js/344.c65e80ac.js"><link rel="prefetch" href="/docs/assets/js/345.1ea6b70e.js"><link rel="prefetch" href="/docs/assets/js/346.0ea7211f.js"><link rel="prefetch" href="/docs/assets/js/347.59941581.js"><link rel="prefetch" href="/docs/assets/js/348.1976fd45.js"><link rel="prefetch" href="/docs/assets/js/349.80f7933a.js"><link rel="prefetch" href="/docs/assets/js/35.4702b4c9.js"><link rel="prefetch" href="/docs/assets/js/350.cbe1e66c.js"><link rel="prefetch" href="/docs/assets/js/351.70831a08.js"><link rel="prefetch" href="/docs/assets/js/352.31578756.js"><link rel="prefetch" href="/docs/assets/js/353.0d229803.js"><link rel="prefetch" href="/docs/assets/js/354.59ac2d50.js"><link rel="prefetch" href="/docs/assets/js/355.1bb1de1b.js"><link rel="prefetch" href="/docs/assets/js/356.ba30beac.js"><link rel="prefetch" href="/docs/assets/js/357.b455e984.js"><link rel="prefetch" href="/docs/assets/js/358.cdca0c9a.js"><link rel="prefetch" href="/docs/assets/js/359.0ef5d23c.js"><link rel="prefetch" href="/docs/assets/js/36.871cd6d0.js"><link rel="prefetch" href="/docs/assets/js/360.fc10cf71.js"><link rel="prefetch" href="/docs/assets/js/361.f3e2bcf6.js"><link rel="prefetch" href="/docs/assets/js/362.2ff5b723.js"><link rel="prefetch" href="/docs/assets/js/363.797f4557.js"><link rel="prefetch" href="/docs/assets/js/364.8ce96950.js"><link rel="prefetch" href="/docs/assets/js/365.937fba98.js"><link rel="prefetch" href="/docs/assets/js/366.1042ee1f.js"><link rel="prefetch" href="/docs/assets/js/367.8cb0a47b.js"><link rel="prefetch" href="/docs/assets/js/368.e481351c.js"><link rel="prefetch" href="/docs/assets/js/369.48f24a48.js"><link rel="prefetch" href="/docs/assets/js/37.1717edb7.js"><link rel="prefetch" href="/docs/assets/js/370.f4282417.js"><link rel="prefetch" href="/docs/assets/js/371.9ff4951c.js"><link rel="prefetch" href="/docs/assets/js/372.45d72404.js"><link rel="prefetch" href="/docs/assets/js/373.55eb4baf.js"><link rel="prefetch" href="/docs/assets/js/374.d08d2499.js"><link rel="prefetch" href="/docs/assets/js/375.aac89b1c.js"><link rel="prefetch" href="/docs/assets/js/376.e0663fe8.js"><link rel="prefetch" href="/docs/assets/js/377.9842e930.js"><link rel="prefetch" href="/docs/assets/js/378.1368eb63.js"><link rel="prefetch" href="/docs/assets/js/379.5cc5f7ee.js"><link rel="prefetch" href="/docs/assets/js/38.cb6e508f.js"><link rel="prefetch" href="/docs/assets/js/380.976deaab.js"><link rel="prefetch" href="/docs/assets/js/381.5e5b4b49.js"><link rel="prefetch" href="/docs/assets/js/382.6693ec34.js"><link rel="prefetch" href="/docs/assets/js/383.ad993fed.js"><link rel="prefetch" href="/docs/assets/js/384.0732eb74.js"><link rel="prefetch" href="/docs/assets/js/385.990e1f58.js"><link rel="prefetch" href="/docs/assets/js/386.bdcbe912.js"><link rel="prefetch" href="/docs/assets/js/387.bfec2da3.js"><link rel="prefetch" href="/docs/assets/js/388.addd019e.js"><link rel="prefetch" href="/docs/assets/js/389.b12cb2a8.js"><link rel="prefetch" href="/docs/assets/js/39.b6a2ba8c.js"><link rel="prefetch" href="/docs/assets/js/390.ac1fd5c4.js"><link rel="prefetch" href="/docs/assets/js/391.90c39986.js"><link rel="prefetch" href="/docs/assets/js/392.714c5684.js"><link rel="prefetch" href="/docs/assets/js/393.909012d7.js"><link rel="prefetch" href="/docs/assets/js/394.a55bb24e.js"><link rel="prefetch" href="/docs/assets/js/395.e3f224c1.js"><link rel="prefetch" href="/docs/assets/js/396.dfc1d2a0.js"><link rel="prefetch" href="/docs/assets/js/397.4b63dc06.js"><link rel="prefetch" href="/docs/assets/js/398.800d8973.js"><link rel="prefetch" href="/docs/assets/js/399.21f13e6d.js"><link rel="prefetch" href="/docs/assets/js/4.8ff35f86.js"><link rel="prefetch" href="/docs/assets/js/40.db3d33a5.js"><link rel="prefetch" href="/docs/assets/js/400.b9bc23b9.js"><link rel="prefetch" href="/docs/assets/js/401.1dd5633a.js"><link rel="prefetch" href="/docs/assets/js/402.486f63a7.js"><link rel="prefetch" href="/docs/assets/js/403.1c93030f.js"><link rel="prefetch" href="/docs/assets/js/404.36fe4a0a.js"><link rel="prefetch" href="/docs/assets/js/405.42744518.js"><link rel="prefetch" href="/docs/assets/js/406.12f95b1f.js"><link rel="prefetch" href="/docs/assets/js/407.facdd13e.js"><link rel="prefetch" href="/docs/assets/js/408.a98dbc09.js"><link rel="prefetch" href="/docs/assets/js/409.45ad89bf.js"><link rel="prefetch" href="/docs/assets/js/41.66fa9fc7.js"><link rel="prefetch" href="/docs/assets/js/410.36db0f87.js"><link rel="prefetch" href="/docs/assets/js/411.e0550079.js"><link rel="prefetch" href="/docs/assets/js/412.3a836dee.js"><link rel="prefetch" href="/docs/assets/js/413.3b6c83a7.js"><link rel="prefetch" href="/docs/assets/js/414.c02ada50.js"><link rel="prefetch" href="/docs/assets/js/415.6116f44a.js"><link rel="prefetch" href="/docs/assets/js/416.97dd0514.js"><link rel="prefetch" href="/docs/assets/js/417.f9175d51.js"><link rel="prefetch" href="/docs/assets/js/418.95133a59.js"><link rel="prefetch" href="/docs/assets/js/419.fb18b70b.js"><link rel="prefetch" href="/docs/assets/js/42.c9f72855.js"><link rel="prefetch" href="/docs/assets/js/420.51e5959f.js"><link rel="prefetch" href="/docs/assets/js/421.f078de0f.js"><link rel="prefetch" href="/docs/assets/js/422.7a343cc3.js"><link rel="prefetch" href="/docs/assets/js/423.24cf4b6a.js"><link rel="prefetch" href="/docs/assets/js/424.c0e67115.js"><link rel="prefetch" href="/docs/assets/js/425.95968190.js"><link rel="prefetch" href="/docs/assets/js/426.d0ec5021.js"><link rel="prefetch" href="/docs/assets/js/427.7c6f7b10.js"><link rel="prefetch" href="/docs/assets/js/428.9334074c.js"><link rel="prefetch" href="/docs/assets/js/429.4c0cbf06.js"><link rel="prefetch" href="/docs/assets/js/43.5c5da131.js"><link rel="prefetch" href="/docs/assets/js/430.d35393bb.js"><link rel="prefetch" href="/docs/assets/js/431.67cb5fd5.js"><link rel="prefetch" href="/docs/assets/js/432.6736c146.js"><link rel="prefetch" href="/docs/assets/js/433.c85005cf.js"><link rel="prefetch" href="/docs/assets/js/434.6cbcfa9f.js"><link rel="prefetch" href="/docs/assets/js/435.017c17c4.js"><link rel="prefetch" href="/docs/assets/js/436.ceaca6a1.js"><link rel="prefetch" href="/docs/assets/js/437.7cff5b5f.js"><link rel="prefetch" href="/docs/assets/js/438.b674bbe5.js"><link rel="prefetch" href="/docs/assets/js/439.dbd66663.js"><link rel="prefetch" href="/docs/assets/js/44.4590d7f1.js"><link rel="prefetch" href="/docs/assets/js/440.5d005e92.js"><link rel="prefetch" href="/docs/assets/js/441.9355d8e1.js"><link rel="prefetch" href="/docs/assets/js/442.3a81b8cc.js"><link rel="prefetch" href="/docs/assets/js/443.46c60fd9.js"><link rel="prefetch" href="/docs/assets/js/444.f835713e.js"><link rel="prefetch" href="/docs/assets/js/445.5f59c527.js"><link rel="prefetch" href="/docs/assets/js/446.e050af2e.js"><link rel="prefetch" href="/docs/assets/js/447.b3e41b5d.js"><link rel="prefetch" href="/docs/assets/js/448.dec17721.js"><link rel="prefetch" href="/docs/assets/js/449.536051c9.js"><link rel="prefetch" href="/docs/assets/js/45.7e0bbda2.js"><link rel="prefetch" href="/docs/assets/js/450.9b8117a7.js"><link rel="prefetch" href="/docs/assets/js/451.8bb67cef.js"><link rel="prefetch" href="/docs/assets/js/452.7c273bc3.js"><link rel="prefetch" href="/docs/assets/js/453.cdeaa47b.js"><link rel="prefetch" href="/docs/assets/js/454.9a3b4f51.js"><link rel="prefetch" href="/docs/assets/js/455.2c773cc7.js"><link rel="prefetch" href="/docs/assets/js/456.528307e2.js"><link rel="prefetch" href="/docs/assets/js/457.2f4cf3d9.js"><link rel="prefetch" href="/docs/assets/js/458.79fd872d.js"><link rel="prefetch" href="/docs/assets/js/459.233e6850.js"><link rel="prefetch" href="/docs/assets/js/46.0a18af9e.js"><link rel="prefetch" href="/docs/assets/js/460.4d1347f2.js"><link rel="prefetch" href="/docs/assets/js/461.3e46be7a.js"><link rel="prefetch" href="/docs/assets/js/462.e637b5e3.js"><link rel="prefetch" href="/docs/assets/js/463.1668b0ac.js"><link rel="prefetch" href="/docs/assets/js/464.0cbc676b.js"><link rel="prefetch" href="/docs/assets/js/465.9143ecf1.js"><link rel="prefetch" href="/docs/assets/js/466.ca9be5e1.js"><link rel="prefetch" href="/docs/assets/js/467.42960d31.js"><link rel="prefetch" href="/docs/assets/js/468.93c20259.js"><link rel="prefetch" href="/docs/assets/js/469.6be9ada6.js"><link rel="prefetch" href="/docs/assets/js/47.6cc36353.js"><link rel="prefetch" href="/docs/assets/js/470.08c6e11e.js"><link rel="prefetch" href="/docs/assets/js/471.a3deb894.js"><link rel="prefetch" href="/docs/assets/js/472.9400ee32.js"><link rel="prefetch" href="/docs/assets/js/473.6f29fa93.js"><link rel="prefetch" href="/docs/assets/js/474.79369d87.js"><link rel="prefetch" href="/docs/assets/js/475.eb2d96a8.js"><link rel="prefetch" href="/docs/assets/js/476.61babacc.js"><link rel="prefetch" href="/docs/assets/js/477.60cdd99a.js"><link rel="prefetch" href="/docs/assets/js/478.0d64eca1.js"><link rel="prefetch" href="/docs/assets/js/479.9999b174.js"><link rel="prefetch" href="/docs/assets/js/48.ab94f424.js"><link rel="prefetch" href="/docs/assets/js/480.adcc7a56.js"><link rel="prefetch" href="/docs/assets/js/481.34f7cec4.js"><link rel="prefetch" href="/docs/assets/js/482.8ea0c90b.js"><link rel="prefetch" href="/docs/assets/js/483.506594df.js"><link rel="prefetch" href="/docs/assets/js/484.a5a90cf5.js"><link rel="prefetch" href="/docs/assets/js/485.c5c99502.js"><link rel="prefetch" href="/docs/assets/js/486.1334aec7.js"><link rel="prefetch" href="/docs/assets/js/487.8b1dff5b.js"><link rel="prefetch" href="/docs/assets/js/488.196c8db4.js"><link rel="prefetch" href="/docs/assets/js/489.05b0521d.js"><link rel="prefetch" href="/docs/assets/js/49.d8781e25.js"><link rel="prefetch" href="/docs/assets/js/490.a5061b4d.js"><link rel="prefetch" href="/docs/assets/js/491.442521cf.js"><link rel="prefetch" href="/docs/assets/js/492.fbeb3aed.js"><link rel="prefetch" href="/docs/assets/js/493.79917713.js"><link rel="prefetch" href="/docs/assets/js/494.bcad083a.js"><link rel="prefetch" href="/docs/assets/js/495.375c9cf9.js"><link rel="prefetch" href="/docs/assets/js/496.1d425fb6.js"><link rel="prefetch" href="/docs/assets/js/497.ad44d1c9.js"><link rel="prefetch" href="/docs/assets/js/498.cebdef24.js"><link rel="prefetch" href="/docs/assets/js/499.637f4279.js"><link rel="prefetch" href="/docs/assets/js/5.920303d3.js"><link rel="prefetch" href="/docs/assets/js/50.79bbd7c3.js"><link rel="prefetch" href="/docs/assets/js/500.f9a6f50f.js"><link rel="prefetch" href="/docs/assets/js/501.c4f9ed73.js"><link rel="prefetch" href="/docs/assets/js/502.7d0a3dae.js"><link rel="prefetch" href="/docs/assets/js/503.b41c9d2b.js"><link rel="prefetch" href="/docs/assets/js/504.31c5907a.js"><link rel="prefetch" href="/docs/assets/js/505.ae1cde23.js"><link rel="prefetch" href="/docs/assets/js/506.6a13f6be.js"><link rel="prefetch" href="/docs/assets/js/507.cefcde55.js"><link rel="prefetch" href="/docs/assets/js/508.c0d7785c.js"><link rel="prefetch" href="/docs/assets/js/509.b71ddf7a.js"><link rel="prefetch" href="/docs/assets/js/51.75f60799.js"><link rel="prefetch" href="/docs/assets/js/510.90185223.js"><link rel="prefetch" href="/docs/assets/js/511.1c134fc3.js"><link rel="prefetch" href="/docs/assets/js/512.1eeb29e8.js"><link rel="prefetch" href="/docs/assets/js/513.2250a47b.js"><link rel="prefetch" href="/docs/assets/js/514.0c224bab.js"><link rel="prefetch" href="/docs/assets/js/515.9ef6cd17.js"><link rel="prefetch" href="/docs/assets/js/516.d4cd5e72.js"><link rel="prefetch" href="/docs/assets/js/517.4bc0e8ed.js"><link rel="prefetch" href="/docs/assets/js/518.1636bfe8.js"><link rel="prefetch" href="/docs/assets/js/519.d8fbc0e0.js"><link rel="prefetch" href="/docs/assets/js/52.a2bfa5d3.js"><link rel="prefetch" href="/docs/assets/js/520.b46dfcc1.js"><link rel="prefetch" href="/docs/assets/js/521.7fee360d.js"><link rel="prefetch" href="/docs/assets/js/522.076cffed.js"><link rel="prefetch" href="/docs/assets/js/523.7a722ada.js"><link rel="prefetch" href="/docs/assets/js/524.de72a0f3.js"><link rel="prefetch" href="/docs/assets/js/525.e8109539.js"><link rel="prefetch" href="/docs/assets/js/526.9d5de854.js"><link rel="prefetch" href="/docs/assets/js/527.64ac893e.js"><link rel="prefetch" href="/docs/assets/js/528.7471b01a.js"><link rel="prefetch" href="/docs/assets/js/529.3a6dd6ed.js"><link rel="prefetch" href="/docs/assets/js/53.10822569.js"><link rel="prefetch" href="/docs/assets/js/530.16d2247b.js"><link rel="prefetch" href="/docs/assets/js/531.e0e0a78d.js"><link rel="prefetch" href="/docs/assets/js/532.eb8c9cc6.js"><link rel="prefetch" href="/docs/assets/js/533.5dfbf023.js"><link rel="prefetch" href="/docs/assets/js/534.ca3f7fb1.js"><link rel="prefetch" href="/docs/assets/js/535.035cc5d5.js"><link rel="prefetch" href="/docs/assets/js/536.5c48af68.js"><link rel="prefetch" href="/docs/assets/js/537.6241a244.js"><link rel="prefetch" href="/docs/assets/js/538.f9bdb9e2.js"><link rel="prefetch" href="/docs/assets/js/539.7926ee80.js"><link rel="prefetch" href="/docs/assets/js/54.c9c2c34b.js"><link rel="prefetch" href="/docs/assets/js/540.399a76fe.js"><link rel="prefetch" href="/docs/assets/js/55.ed015c71.js"><link rel="prefetch" href="/docs/assets/js/56.71f43403.js"><link rel="prefetch" href="/docs/assets/js/57.a384c67a.js"><link rel="prefetch" href="/docs/assets/js/58.c4ef592f.js"><link rel="prefetch" href="/docs/assets/js/59.6f0582d9.js"><link rel="prefetch" href="/docs/assets/js/6.38188c8f.js"><link rel="prefetch" href="/docs/assets/js/60.ef6b88c0.js"><link rel="prefetch" href="/docs/assets/js/61.9e01fd79.js"><link rel="prefetch" href="/docs/assets/js/62.336f5400.js"><link rel="prefetch" href="/docs/assets/js/63.2ff8ce7b.js"><link rel="prefetch" href="/docs/assets/js/64.a37312eb.js"><link rel="prefetch" href="/docs/assets/js/65.8074d9cb.js"><link rel="prefetch" href="/docs/assets/js/66.efb7898e.js"><link rel="prefetch" href="/docs/assets/js/67.ebd404b1.js"><link rel="prefetch" href="/docs/assets/js/68.8cb33538.js"><link rel="prefetch" href="/docs/assets/js/69.75fea6bc.js"><link rel="prefetch" href="/docs/assets/js/7.e900982d.js"><link rel="prefetch" href="/docs/assets/js/70.26e87fff.js"><link rel="prefetch" href="/docs/assets/js/71.4426de7c.js"><link rel="prefetch" href="/docs/assets/js/72.89331de8.js"><link rel="prefetch" href="/docs/assets/js/73.87d1b07f.js"><link rel="prefetch" href="/docs/assets/js/74.47792d8c.js"><link rel="prefetch" href="/docs/assets/js/75.637db22c.js"><link rel="prefetch" href="/docs/assets/js/77.add19caf.js"><link rel="prefetch" href="/docs/assets/js/78.20dc9968.js"><link rel="prefetch" href="/docs/assets/js/79.38b46b66.js"><link rel="prefetch" href="/docs/assets/js/8.8a1fef28.js"><link rel="prefetch" href="/docs/assets/js/80.a8fec1b9.js"><link rel="prefetch" href="/docs/assets/js/81.27cd48cd.js"><link rel="prefetch" href="/docs/assets/js/82.cbcab587.js"><link rel="prefetch" href="/docs/assets/js/83.860bd2e4.js"><link rel="prefetch" href="/docs/assets/js/84.89d5b92a.js"><link rel="prefetch" href="/docs/assets/js/85.dd84ff93.js"><link rel="prefetch" href="/docs/assets/js/86.5adfb7f6.js"><link rel="prefetch" href="/docs/assets/js/87.e72d31c8.js"><link rel="prefetch" href="/docs/assets/js/88.44dea61a.js"><link rel="prefetch" href="/docs/assets/js/89.55ad9cb5.js"><link rel="prefetch" href="/docs/assets/js/9.0c3d5006.js"><link rel="prefetch" href="/docs/assets/js/90.d088c58c.js"><link rel="prefetch" href="/docs/assets/js/91.95a2e3e9.js"><link rel="prefetch" href="/docs/assets/js/92.6713a3bd.js"><link rel="prefetch" href="/docs/assets/js/93.3e54be1f.js"><link rel="prefetch" href="/docs/assets/js/94.37aea67e.js"><link rel="prefetch" href="/docs/assets/js/95.0f7b324a.js"><link rel="prefetch" href="/docs/assets/js/96.f1cd4ec8.js"><link rel="prefetch" href="/docs/assets/js/97.4c8da3e8.js"><link rel="prefetch" href="/docs/assets/js/98.8552c2eb.js"><link rel="prefetch" href="/docs/assets/js/99.c3e9aa13.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.3c6afca0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">Nguyễn Khánk's Wiki</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/architect/" class="nav-link">
  Architecture
</a></div><div class="nav-item"><a href="https://nguyenngockhank.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/architect/" class="nav-link">
  Architecture
</a></div><div class="nav-item"><a href="https://nguyenngockhank.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Chuyện muôn thuở</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>Optimize Perf</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/common/optimize_overview.html" class="sidebar-link">Optimization Overview</a></li><li><a href="/docs/common/optimize_web.html" class="sidebar-link">Optimize performance for Web</a></li><li><a href="/docs/common/optimize_be.html" class="sidebar-link">Optimize Performance at Backend</a></li><li><a href="/docs/common/scaling_overview.html" class="sidebar-link">Scaling system overview</a></li><li><a href="/docs/common/cache/overview.html" class="sidebar-link">Cache overview</a></li><li><a href="/docs/common/cdn/cdn.html" class="sidebar-link">Content Delivery Network (CDN)</a></li></ul></section></li><li><a href="/docs/common/system_design_overview.html" class="sidebar-link">System design overview</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Communication</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Clean code</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/docs/common/deployment-overview.html" class="sidebar-link">Deployment Overview</a></li><li><a href="/docs/common/seo.html" class="sidebar-link">SEO</a></li><li><a href="/docs/common/crawl.html" class="sidebar-link">Crawl data</a></li><li><a href="/docs/common/document.html" class="sidebar-link">Documentation</a></li><li><a href="/docs/common/debugging.html" class="sidebar-link">Debugging</a></li><li><a href="/docs/common/cross_domain.html" class="sidebar-link">Cross Domain</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Tools / Toys</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>API Guidelines</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Database</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Giải Toán</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>OOP</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Javascript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ReactJS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>VueJS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>PHP</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Thuật ngữ</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Payment</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Network</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>AWS</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="chuong-6-đong-thoi"><a href="#chuong-6-đong-thoi" class="header-anchor">#</a> Chương 6 - Đồng thời</h1> <p>(Người dịch: trong tiếng Anh Concurrency có nghĩa là thực hiện nhiều việc trong cùng một khoảng thời gian. Có người sẽ dịch Concurrency là song song. Riêng tôi cho rằng, song song có nghĩa là hai hoặc nhiều việc cũng được thực hiện trong cùng một thời điểm. Điều này khác với bản chất của Go và mô hình xử lý đa luồng M:N. Nếu 2 Goroutine nằm trên 2 luồng hệ điều hành, thì có thể coi là chúng hoạt động song song. Nếu chúng cùng nằm trên 1 luồng của hệ điều hành, thì không thể coi là hoạt động song song được. Chúng ta chỉ biết rằng, trong một khoảng thời gian xác định, chắc chắn cả hai Goroutine đều được thực thi. Do đó trong chương này, tôi sẽ dùng từ <code>đồng thời</code>. )</p> <p>Go được mô tả là một ngôn ngữ hỗ trợ lập trình tính toán đồng thời. Nó có một cú pháp đơn giản để hỗ trợ điều này. Go sử dụng hai cơ chế sau để thực hiện tính toán đồng thời: goroutines và channels.</p> <h2 id="goroutines"><a href="#goroutines" class="header-anchor">#</a> Goroutines</h2> <p>Goroutine (Tiến trình Go) gần tương tự như luồng (thread), nhưng nó được kiểm soát thực thi bởi Go, chứ không phải hệ điều hành. Đoạn mã sau chạy một goroutine có thể thực thi đồng thời với các đoạn mã khác. Hãy xem ví dụ đơn giản sau:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
  <span class="token string">&quot;fmt&quot;</span>
  <span class="token string">&quot;time&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;start&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">go</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Millisecond <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment">// rất tệ, đừng làm thế!</span>
  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;done&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;processing&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Điểm quan trọng là chúng ta bắt đầu một goroutine như thế nào. Chúng ta chỉ cần sử dụng từ khóa <code>go</code>, theo sau đó là hàm cần thực thi. Nếu chúng ta chỉ muốn thực thi mã, giống như ở trên, mà không phải định nghĩa một hàm mới, chúng ta có thể dùng hàm ẩn danh (anonymous function), loại hàm này không phải chỉ dùng được với goroutine.</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;processing&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>Goroutine sẽ tiêu tốn tài nguyên một chút. Nhiều hàm goroutine có thể cùng hoạt động trên một luồng của OS. Mô hình này thường được gọi là mô hình đa luồng M:N vì chúng ta có M goroutine chạy trên N luồng của hệ điều hành. Kết quả là một goroutine sẽ sử dụng ít tài nguyên (một vài kB) hơn một luồng của hệ điều hành. Trên các hệ thống phần cứng hiện đại, có thể có hàng triệu goroutine.</p> <p>Hơn nữa, sự phức tạp của cơ chế ánh xạ và lập lịch sẽ được ẩn đi. Chúng ta chỉ cần nói <em>các đoạn mã này nên chạy đồng thời</em> và để cho Go thực hiện chúng.</p> <p>Quay trở lại ví dụ trên, bạn sẽ thấy chúng ta có hàm <code>Sleep</code> trong một vài mili giây. Bởi vì tiến trình chính kết thúc trước khi goroutine có cơ hội thực thi (hàm main không đợi cho đến khi tất cả các Goroutine kết thúc).</p> <h2 id="đong-bo-hoa"><a href="#đong-bo-hoa" class="header-anchor">#</a> Đồng bộ hóa</h2> <p>Tạo một goroutine khá bình thường, chính vì chúng cần ít tài nguyên nên ta có thể tạo ra nhiều tiến trình như vậy, tuy nhiên các đoạn mã đồng thời cần liên lạc và có thể phối hợp với nhau. Để giải quyết vấn đề này, Go cung cấp <code>channels</code>. Trước khi tiếp cận <code>channels</code>, tôi thấy hiểu một chút về lý thuyết lập trình đồng thời là rất quan trọng.</p> <p>Viết các đoạn mã đồng thời yêu cầu bạn quan tâm đến khi nào bạn đọc và khi nào ghi các giá trị. Theo cách khác, nó giống như lập trình mà không có bộ dọn rác. Nó yêu cầu bạn nghĩ về dữ liệu ở một góc độ mới, và luôn đề phòng những thao tác nguy hiểm. Ví dụ:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
  <span class="token string">&quot;fmt&quot;</span>
  <span class="token string">&quot;time&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">var</span> counter <span class="token operator">=</span> <span class="token number">0</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">20</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
    <span class="token keyword">go</span> <span class="token function">incr</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Millisecond <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">incr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  counter<span class="token operator">++</span>
  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>counter<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Bạn nghĩ kết quả hiển thị là gì?</p> <p>Nếu bạn nói kết quả là <code>1, 2, ... 20</code> bạn vừa đúng lại vừa sai. Có thể bạn chạy đoạn mã trên, kết quả hiển thị cũng tương tự như thế. Tuy nhiên sự thật là hoạt động của chương trình không thể biết trước được. Tại sao? Bởi vì có thể có nhiều Goroutine (trường hợp này là hai) cùng ghi vào một biến <code>counter</code>, trong cùng một lúc. Hoặc, một Goroutine có thể đọc <code>counter</code> trong khi tiến trình còn lại đang ghi vào đó.</p> <p>Điều đó có nguy hiểm không? Có, tất nhiên là rất nguy hiểm. <code>counter++</code> giống như là 1 dòng code, nhưng nếu chia nhỏ ra, thì nó là nhiều dòng hợp ngữ -- thứ chạy trực tiếp trên máy tính của bạn. Nếu chạy ví dụ này, bạn sẽ thấy một hàng số được hiển thị, hoặc bị lặp, hoặc bị mất. Tuy nhiên, một trường hợp có thể xảy ra là nếu 2 luồng cùng đọc lúc <code>counter</code> bằng <code>0</code> và bạn sẽ nhận được kết quả <code>1, 1</code>. Có nhiều tình huống còn tồi tệ hơn, ví dụ như hệ thống bị lỗi hoặc truy cập vào một vùng nhớ bất kì và thay dổi nó!</p> <p>Chỉ có đọc dữ liệu từ một biến có thể thực hiện đồng thời mà vẫn an toàn. Bạn có thể đọc từ nhiều luồng khác nhau, nhưng nếu ghi dữ liệu thì bạn phải sử dụng đồng bộ hóa. Có nhiều cách để làm như thế, bao gồm dùng các hành động nguyên tố (atomic operation) dựa trên một vài lệnh đặc biệt của CPU. Tuy nhiên, cách tiếp cận chung nhất là sử dụng mutex:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
  <span class="token string">&quot;fmt&quot;</span>
  <span class="token string">&quot;time&quot;</span>
  <span class="token string">&quot;sync&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">var</span> <span class="token punctuation">(</span>
  counter <span class="token operator">=</span> <span class="token number">0</span>
  lock sync<span class="token punctuation">.</span>Mutex
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">20</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
    <span class="token keyword">go</span> <span class="token function">incr</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Millisecond <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">incr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  lock<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">defer</span> lock<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  counter<span class="token operator">++</span>
  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>counter<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Một mutex có thể truy cập tuần tự vào đoạn mã thông qua một khóa. Chúng ta có thể khai báo đơn giản trong mã nguồn như sau <code>lock sync.Mutex</code>, giá trị mặc định của <code>sync.Mutex</code> là chưa khóa.</p> <p>Trông có vẻ đơn giản? Có một lớp các lỗi nghiêm trọng sinh ra trong quá trình lập trình đồng thời. Tất nhiên, không phải lúc nào cũng như vậy, nhưng rõ ràng rằng các đoạn mã trong chương trình cần được bảo vệ để đảm bảo nó có thể chạy đúng. Nó có thể được bảo vệ bằng cách sử dụng khóa (khóa sẽ bao quanh đoạn mã cần được bảo vệ), tuy nhiên, bằng cách này thì sẽ làm mất đi ý nghĩa của lập trình đồng thời mà chúng ta đang đề cập. Chúng ta sử dụng khóa cũng giống như chúng ta sẽ không đi trên đường cao tốc mười làn xe, mà quay về đường chỉ có một làn.</p> <p>Một vấn đề khác hay gặp phải là deadlock<strong>s</strong> (lưu ý là tôi sử dụng số nhiều -- người dịch). Với một khóa đơn, vấn đề này không xảy ra nhưng nếu sử dụng nhiều hơn một khóa để tác động vào cùng một đoạn mã, thì vấn đề này thật sự nghiêm trọng. Khi tiến trình A giữ khóa A nhưng cần truy cập vào khóa B nhưng tiến trình B đang giữ khóa B và lại phải truy cập vào khóa A.</p> <p>Vấn đề này cũng có thể xảy ra với một khóa đơn, nếu chúng ta khóa và quên không mở khóa. Điều đó không thực sự quá nghiêm trọng như sử dụng nhiều khóa vì lỗi này <strong>rất dễ</strong> phát hiện nhưng bạn có thể xem chuyện gì xảy ra nếu chạy đoạn mã sau:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
  <span class="token string">&quot;time&quot;</span>
  <span class="token string">&quot;sync&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">var</span> <span class="token punctuation">(</span>
  lock sync<span class="token punctuation">.</span>Mutex
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> lock<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Millisecond <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span>
  lock<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Có nhiều cách để lập trình đồng thời hơn chúng ta vừa xem. Ví dụ, có một mutex khác được gọi là mutex đọc ghi (read-write mutex). Nó cho thấy có 2 chức năng có thể khóa: một để khóa trước khi đọc và một để khóa trước khi ghi. Sự phân biệt này cho phép nhiều tiến trình đọc đồng thời trong khi không cho phép bất cứ một tiến trình nào thực hiện ghi dữ liệu. Trong Go, <code>sync.RWMutex</code> là một khóa như vậy. Thêm vào đó, hàm <code>Lock</code> và <code>Unlock</code> của <code>sync.Mutex</code>, cũng ch thấy có hai hàm <code>RLock</code> và <code>RUnlock</code> ; trong đó <code>R</code> có nghĩa là <em>Read</em>. Trong khi các mutex đọc ghi được sử dụng phổ biến, chúng à một gánh năng cho lập trình viên, : chúng ta phải quan tâm không chỉ là lúc nào thao tác với dữ liệu mà còn quan tâm tới phương thức truy cập là đọc hay ghi.</p> <p>Hơn nữa, một phần của lập trình đồng thời không phải là truy cập tuần tự vào phần hẹp nhất của đoạn mã, nó còn là cách phối hợp giữa nhiều tiến trình với nhau. Ví dụ, tạm dựng hoạt động 10 mili giây giây không phải là một giải pháp hợp lý. Chuyện gì sẽ xảy ra nếu một tiến trình cần nhiều hơn 10 mili giây? Nếu nó cần ít hơn 10 mili giây, thì chúng ta đang lãng phí thời gian? Ngoài ra, thay vì đợi cho luông xử lý khác kết thúc, tôi muốn hiển thị <em>này, Tôi có dữ liệu mới để xử lý đây!</em> thì phải làm thế nào?</p> <p>Trên đây là tất cả các thứ có thể làm được mà không cần <code>channels</code>. Với trường hợp đơn giản, tôi nghĩ bạn <strong>nên dùng</strong> các thành phần cơ bản như <code>sync.Mutex</code> và <code>sync.RWMutex</code>, nhưng trong phần kế tiếp, <code>channels</code> sẽ làm cho lập trình đồng thời trong sáng hơn và ít lỗi.</p> <h2 id="channels"><a href="#channels" class="header-anchor">#</a> Channels</h2> <p>Thách thức với lập trình đồng thời xuất phát từ chia sẻ dữ liệu. Nếu các goroutine không chia sẻ dữ liệu, bạn không cần phải lo lắng về việc đồng bộ hóa chúng. Đó không phải là một lựa chọn cho tất cả các hệ thống. Trong thực tế, nhiều hệ thống được xây dựng với mục tiêu ngay từ đầu là: có thể chia sẻ dữ liệu giữa các thành phần với nhau. Một bộ nhớ cache hoặc một cơ sở dữ liệu, là những ví dụ tốt về điều này. Điều này đang trở thành một thực tế ngày càng phổ biến.</p> <p>Channel (kênh) giúp cho lập trình đồng thời lập trình dễ hơn. Một channel là một pipe giao tiếp giữa các goroutine, và được sử dụng để truyền dữ liệu. Nói cách khác, một goroutine có dữ liệu chuyển dữ liệu cho một goroutine khác thông qua một channel. Kết quả là, tại bất kỳ thời điểm nào, chỉ có một goroutine có quyền truy cập vào dữ liệu.</p> <p>Channel cũng cần phải xác định kiểu. Đây là kiểu dữ liệu mà chúng ta sẽ truyền qua channel. Ví dụ, để tạo một channel có thể được sử dụng để truyền một số nguyên, chúng ta sẽ làm như sau:</p> <div class="language-go extra-class"><pre class="language-go"><code>c <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span>
</code></pre></div><p>Loại channel này là <code>chan int</code>. Vì vậy, để truyền qua channel này đến một hàm, signature của hàm như sau:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">worker</span><span class="token punctuation">(</span>c <span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
</code></pre></div><p>Các channel hỗ trợ hai thao tác: nhận (receive) và gửi (send). Chúng ta gửi dữ liệu đến channel bằng cách:</p> <div class="language- extra-class"><pre class="language-text"><code>CHANNEL &lt;- DATA
</code></pre></div><p>và nhận bằng cách</p> <div class="language- extra-class"><pre class="language-text"><code>VAR := &lt;-CHANNEL
</code></pre></div><p>Mũi tên chỉ hướng đi của dữ liệu. Khi gửi, dữ liệu được truyền vào channel. Khi nhận, dữ liệu được lấy ra khỏi channel.</p> <p>Điều cuối cùng cần biết trước khi chúng ta nhìn vào ví dụ đầu tiên là nhận và gửi từ một channel là một quá trình chờ (blocking). Đó là, khi chúng ta nhận từ một channel, goroutine sẽ chờ cho đến khi dữ liệu đã sẵn sàng. Tương tự như vậy, khi chúng ta gửi vào một channel, goroutine sẽ chờ cho đến khi dữ liệu được nhận.</p> <p>Hãy xem xét một hệ thống xử lý dữ liệu đến mà chúng ta muốn xử lý trong các goroutine riêng biệt. Đây là một yêu cầu chung. Nếu chúng ta xử lý dữ liệu ngay trên goroutine mà chấp nhận kết nối đến, chúng ta sẽ có nguy cơ các client bị chờ quá lâu. Đầu tiên, chúng ta sẽ viết worker (có nghĩa là hàm xử lý dữ liệu nhận được -- người dịch) . Đây có thể là một hàm đơn giản, nhưng tôi sẽ làm cho nó một cấu trúc cho nó:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> Worker <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  id <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>w Worker<span class="token punctuation">)</span> <span class="token function">process</span><span class="token punctuation">(</span>c <span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">{</span>
    data <span class="token operator">:=</span> <span class="token operator">&lt;-</span>c
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;worker %d got %d\n&quot;</span><span class="token punctuation">,</span> w<span class="token punctuation">.</span>id<span class="token punctuation">,</span> data<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Worker rất đơn giản. Nó chờ đợi cho đến khi dữ liệu sẵn sàng sau đó &quot;process&quot; nó. Nó hoạt động trong một vòng lặp vô hạn và sẽ chờ thêm dữ liệu để xử lý.</p> <p>Để sử dụng, điều đầu tiên chúng ta làm là tạo và chạy một vài worker:</p> <div class="language-go extra-class"><pre class="language-go"><code>c <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
  worker <span class="token operator">:=</span> <span class="token operator">&amp;</span>Worker<span class="token punctuation">{</span>id<span class="token punctuation">:</span> i<span class="token punctuation">}</span>
  <span class="token keyword">go</span> worker<span class="token punctuation">.</span><span class="token function">process</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Và sau đó cho chúng một chút dữ liệu:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">for</span> <span class="token punctuation">{</span>
  c <span class="token operator">&lt;-</span> rand<span class="token punctuation">.</span><span class="token function">Int</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Millisecond <span class="token operator">*</span> <span class="token number">50</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Đây là toàn bộ mã nguồn:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
  <span class="token string">&quot;fmt&quot;</span>
  <span class="token string">&quot;time&quot;</span>
  <span class="token string">&quot;math/rand&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  c <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span>
  <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
    worker <span class="token operator">:=</span> <span class="token operator">&amp;</span>Worker<span class="token punctuation">{</span>id<span class="token punctuation">:</span> i<span class="token punctuation">}</span>
    <span class="token keyword">go</span> worker<span class="token punctuation">.</span><span class="token function">process</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">for</span> <span class="token punctuation">{</span>
    c <span class="token operator">&lt;-</span> rand<span class="token punctuation">.</span><span class="token function">Int</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Millisecond <span class="token operator">*</span> <span class="token number">50</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Worker <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  id <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>w <span class="token operator">*</span>Worker<span class="token punctuation">)</span> <span class="token function">process</span><span class="token punctuation">(</span>c <span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">{</span>
    data <span class="token operator">:=</span> <span class="token operator">&lt;-</span>c
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;worker %d got %d\n&quot;</span><span class="token punctuation">,</span> w<span class="token punctuation">.</span>id<span class="token punctuation">,</span> data<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Chúng ta không biết worker nào đang lấy dữ liệu. Những gì chúng ta biết, những gì Go đảm bảo, là dữ liệu được chúng ta gửi cho channel sẽ chỉ được nhận bởi một worker duy nhất.</p> <p>Chú ý rằng thứ được chia sẻ chỉ là channel, chúng ta có thể gửi và nhận dữ liệu đồng thời một cách an toàn. Các channel cung cấp các mã đồng bộ, chúng ta cần và cũng đảm bảo rằng, tại bất kỳ thời điểm nào, chỉ có một goroutine có quyền truy cập vào một phần cụ thể của dữ liệu.</p> <h3 id="buffered-channels"><a href="#buffered-channels" class="header-anchor">#</a> Buffered Channels</h3> <p>Với đoạn mã trên, chuyện gì sẽ xảy ra nếu chúng ta có nhiều dữ liệu đi vào hơn chúng ta có thể xử lý? Bạn có thể mô phỏng này bằng cách thay đổi các worker, cho chúng tạm dừng sau khi nó đã nhận được dữ liệu:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">for</span> <span class="token punctuation">{</span>
  data <span class="token operator">:=</span> <span class="token operator">&lt;-</span>c
  fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;worker %d got %d\n&quot;</span><span class="token punctuation">,</span> w<span class="token punctuation">.</span>id<span class="token punctuation">,</span> data<span class="token punctuation">)</span>
  time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Millisecond <span class="token operator">*</span> <span class="token number">500</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Trong hàm xử lý chính, là hàm nhận dữ liệu của người dùng (mà chúng ta vừa mô phỏng với một bộ tạo số ngẫu nhiên) sẽ bị block, không thể gửi được, do không có worker nào đang chờ xử lý.</p> <p>Trong trường hợp bạn cần phải đảm bảo rằng dữ liệu phải được xử lý, có thể bạn sẽ muốn tạm dừng tiếp nhận dữ liệu từ phía client. Trong trường hợp khác, bạn có thể sẵn sàng nới lỏng những đảm bảo. Có một vài cách phổ biến để làm điều này. Đầu tiên là bộ đệm dữ liệu. Nếu không có worker đang chờ, chúng ta muốn tạm thời lưu trữ các dữ liệu trong một loại hàng đợi. Channel có này khả năng lưu tạm thời các dữ liệu. Khi chúng ta tạo ra channel bằng <code>make</code>, chúng ta có thể cung cấp kích thước cho channel:</p> <div class="language-go extra-class"><pre class="language-go"><code>c <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
</code></pre></div><p>Bạn có thể thực hiện thay đổi này, nhưng bạn sẽ nhận thấy rằng việc xử lý vẫn bị không hoàn toàn trọn vẹn. Buffered channel không cung cấp thêm khả năng cho worker; mà chỉ đơn thuần cung cấp một hàng đợi để lưu trữ tạm thời trong tình huống dữ liệu nhiều lên đột ngột. Trong ví dụ của chúng ta, chúng ta đang liên tục đẩy thêm nhiều dữ liệu hơn so với khả năng mà worker có thể xử lý.</p> <p>Tuy nhiên, chúng ta có thể kiểm tra buffered channel bằng cách xem <code>len</code> của channel:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">for</span> <span class="token punctuation">{</span>
  c <span class="token operator">&lt;-</span> rand<span class="token punctuation">.</span><span class="token function">Int</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span>
  time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Millisecond <span class="token operator">*</span> <span class="token number">50</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Bạn có thể thấy nó tăng dần cho đến khi nó đầy, lúc này nếu dữ liệu được gửi đến đầu channel, thì sẽ không tiếp tục được.</p> <h3 id="select"><a href="#select" class="header-anchor">#</a> Select</h3> <p>Ngay cả với buffered channel, sẽ đến một thời điểm mà chúng ta cần phải bắt đầu không nhận được dữ liệu. Chúng ta không thể để bộ nhớ tăng vô hạn và hy vọng woker sẽ giải quyết nó. Đối với việc này, chúng ta sử dụng <code>select</code>.</p> <p><code>select</code> hơi giống như switch. Trước tiên, hãy xóa buffered channel để chúng ta có thể nhìn thấy rõ cách <code>select</code> hoạt động:</p> <div class="language-go extra-class"><pre class="language-go"><code>c <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span>
</code></pre></div><p>Tiếp theo, chúng ta sửa vòng lặp <code>for</code>:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">for</span> <span class="token punctuation">{</span>
  <span class="token keyword">select</span> <span class="token punctuation">{</span>
  <span class="token keyword">case</span> c <span class="token operator">&lt;-</span> rand<span class="token punctuation">.</span><span class="token function">Int</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment">//các mã khác ở đây</span>
  <span class="token keyword">default</span><span class="token punctuation">:</span>
    <span class="token comment">//dòng này để trống để không xử lý dữ liệu</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;dropped&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Millisecond <span class="token operator">*</span> <span class="token number">50</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Chúng ta đang đẩy 20 tin nhắn mỗi giây, nhưng worker chỉ có thể xử lý 10 mỗi giây; do đó, một nửa các thông điệp sẽ không được xử lý.</p> <p>Đây chỉ là bắt đầu của những gì chúng ta có thể làm với <code>select</code>. Mục đích chính của <code>select</code> là để quản lý nhiều channel. Với nhiều channel, <code>select</code> sẽ đưa hệ thống vào trạng thái chờ cho đến khi có một channel khả dụng. Nếu không có channel, <code>default</code> được sử dụng. Một channel được lựa chọn ngẫu nhiên trong các channel có thể sử dụng.</p> <p>Thật khó để đưa ra một ví dụ đơn giản thể hiện cách xử lý này vì nó là một tính năng khá tiên tiến. Các phần tiếp theo có thể giúp minh họa cho select.</p> <h3 id="timeout"><a href="#timeout" class="header-anchor">#</a> Timeout</h3> <p>Chúng ta xử lý các tin nhắn được lưu tạm thời cũng tương tự như cách không xử lý chúng. Một tùy chọn khác phổ biến là để thời gian chờ. Chúng ta có thể không nhận dữ liệu trong một khoảng thời gian, nhưng không phải mãi mãi. Việc này rất dễ làm trong Go. Phải thừa nhận rằng, cú pháp có thể hơi khó hiểu, nhưng nó là một tính năng rất hữu ích.</p> <p>Để ngừng xử lý trong một khoảng thời gian, chúng ta có thể dùng hàm <code>time.After</code>. Để sử dụng, viết đoạn mã như sau:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">for</span> <span class="token punctuation">{</span>
  <span class="token keyword">select</span> <span class="token punctuation">{</span>
  <span class="token keyword">case</span> c <span class="token operator">&lt;-</span> rand<span class="token punctuation">.</span><span class="token function">Int</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
  <span class="token keyword">case</span> <span class="token operator">&lt;-</span>time<span class="token punctuation">.</span><span class="token function">After</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Millisecond <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;timed out&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Millisecond <span class="token operator">*</span> <span class="token number">50</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>time.After</code> trả về một channel, do đó chúng ta có thể <code>select</code> từ channel. Channel sẽ được đẩy dữ liệu vào sau một khoảng thời gian chờ. Không có gì là ma thuật ở đây cả. Nếu bạn thắc mắc, thì cách xây dựng hàm <code>after</code> trông như thế này:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">after</span><span class="token punctuation">(</span>d time<span class="token punctuation">.</span>Duration<span class="token punctuation">)</span> <span class="token keyword">chan</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>
  c <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">bool</span><span class="token punctuation">)</span>
  <span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span>
    c <span class="token operator">&lt;-</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> c
<span class="token punctuation">}</span>
</code></pre></div><p>Trở lại với <code>select</code>, có một số thứ mà bạn có thể xem qua. Đầu tiên, chuyện gì sẽ xảy ra nếu bạn thêm <code>default</code> vào đó? Bạn có thể đoán? Hãy thử nó. Nếu bạn không chắc chắn những gì đang xảy ra, hãy nhớ rằng <code>default</code> được gọi ngay lập tức nếu không có channel nào đang sẵn sàng.</p> <p>Ngoài ra, <code>time.After</code> là một channel có kiểu <code>chan time.Time</code>. Trong ví dụ trên, chúng ta chỉ đơn giản là loại bỏ các giá trị đã được gửi đến channel. Nếu muốn, bạn có thể nhận:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">case</span> t <span class="token operator">:=</span> <span class="token operator">&lt;-</span>time<span class="token punctuation">.</span><span class="token function">After</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Millisecond <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;timed out at&quot;</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span>
</code></pre></div><p>Hãy chú ý đến <code>select</code>. Chú ý rằng chúng ta đang gửi tới <code>c</code> nhưng nhận từ <code>time.After</code>. <code>Select</code> hoạt động như nhau bất kể chúng ta đang nhận, đang gửi, hoặc bất kỳ sự kết hợp của các channel:</p> <ul><li>Các channel khả dụng đầu tiên được chọn.</li> <li>Nếu nhiều channel khả dụng, Go sẽ chọn ngẫu nhiên một cái.</li> <li>Nếu không có channel khả dụng, trường hợp mặc định được thực thi.</li> <li>Nếu không có mặc định, thì hệ thống sẽ vào trạng thái chờ.</li></ul> <p>Cuối cùng, <code>select</code> rất hay dùng bên trong một vòng lặp <code>for</code>. Xem đoạn mã sau:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">for</span> <span class="token punctuation">{</span>
  <span class="token keyword">select</span> <span class="token punctuation">{</span>
  <span class="token keyword">case</span> data <span class="token operator">:=</span> <span class="token operator">&lt;-</span>c<span class="token punctuation">:</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;worker %d got %d\n&quot;</span><span class="token punctuation">,</span> w<span class="token punctuation">.</span>id<span class="token punctuation">,</span> data<span class="token punctuation">)</span>
  <span class="token keyword">case</span> <span class="token operator">&lt;-</span>time<span class="token punctuation">.</span><span class="token function">After</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Millisecond <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Break time&quot;</span><span class="token punctuation">)</span>
    time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="truoc-khi-đoc-tiep"><a href="#truoc-khi-đoc-tiep" class="header-anchor">#</a> Trước khi đọc tiếp</h2> <p>Nếu bạn mới biết đến lập trình đồng thời, có thể bạn sẽ rất bối rối. Nó cần thời gian để làm quen và tìm hiểu một cách sâu sắc. Go sinh ra để nhằm mục đích giảm thiểu những khó khăn này.</p> <p>Goroutines cho phép bạn viết mã cho những gì cần chạy đồng thời. Các channel giúp loại bỏ một số lỗi nghiêm trọng có thể xảy ra khi dữ liệu được chia sẻ bằng cách loại bỏ việc chia sẻ dữ liệu. Điều này không chỉ loại bỏ lỗi, nhưng nó thay đổi cách lập trình đồng thời. Bạn suy nghĩ về tính đồng thời của dữ liệu, chứ không phải tính đồng thời trong quá trình xử lý.</p> <p>Phải nói rằng, tôi vẫn sử dụng cách đồng bộ khá đơn giản trong gói <code>sync</code> và <code>sync/atomic</code>. Tôi nghĩ rằng điều quan trọng là tôi cảm thấy thoải mái. Tôi khuyên bạn tập trung vào các channel trước, nhưng khi bạn nhìn thấy một trường hợp đơn giản mà cần một khóa đơn, hãy thử sử dụng mutex hoặc mutex đọc-ghi.</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----><!----><!----></div></div>
    <script src="/docs/assets/js/app.fbd23b33.js" defer></script><script src="/docs/assets/js/2.5b2c2b8c.js" defer></script><script src="/docs/assets/js/293.6e6c1420.js" defer></script><script src="/docs/assets/js/76.62e617fa.js" defer></script>
  </body>
</html>
