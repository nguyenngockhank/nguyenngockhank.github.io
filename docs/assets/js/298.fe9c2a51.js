(window.webpackJsonp=window.webpackJsonp||[]).push([[298],{914:function(t,e,s){"use strict";s.r(e);var a=s(7),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"_6-making-comments-precise-and-compact"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-making-comments-precise-and-compact"}},[t._v("#")]),t._v(" 6. Making Comments Precise and Compact")]),t._v(" "),s("p",[t._v("The previous chapter was about realizing "),s("em",[t._v("what")]),t._v(" you should be commenting. This chapter is about "),s("em",[t._v("how")]),t._v(" to write comments that are precise and compact.")]),t._v(" "),s("p",[t._v("If you're going to write a comment at all, it might as well be "),s("em",[t._v("precise")]),t._v(" —as specific and detailed as possible. On the other hand, comments take up extra space on the screen, and take extra time to read. So comments should also be "),s("em",[t._v("compact")]),t._v(".")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("K E Y I D E A")]),t._v(" "),s("p",[t._v("Comments should have a high information-to-space ratio.")])]),t._v(" "),s("p",[t._v("The rest of the chapter shows examples of how to do this.")]),t._v(" "),s("h2",{attrs:{id:"keep-comments-compact"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#keep-comments-compact"}},[t._v("#")]),t._v(" Keep Comments Compact")]),t._v(" "),s("p",[t._v("Here’s an example of a comment for a C++ type definition:")]),t._v(" "),s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// The int is the CategoryType.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// The first float in the inner pair is the 'score',")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// the second is the 'weight'.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typedef")]),t._v(" hash_map"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pair"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("float")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("float")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" ScoreMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("But why use three lines to explain it, when you can illustrate it in just one line?")]),t._v(" "),s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// CategoryType -> (score, weight)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typedef")]),t._v(" hash_map"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pair"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("float")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("float")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" ScoreMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("Some comments need three lines of space, but this is not one of them.")]),t._v(" "),s("h2",{attrs:{id:"avoid-ambiguous-pronouns"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#avoid-ambiguous-pronouns"}},[t._v("#")]),t._v(" Avoid Ambiguous Pronouns")]),t._v(" "),s("p",[t._v("As the classic “Who’s on First?” skit illustrated, pronouns can make things very confusing.")]),t._v(" "),s("p",[t._v("It takes extra work for the reader to “resolve” a pronoun. And in some cases, it’s unclear what “it” or “this” is referring to. Here’s an example:")]),t._v(" "),s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Insert the data into the cache, but check if it 's too big first.")]),t._v("\n")])])]),s("p",[t._v("In this comment, “it” might refer to the data or the cache. You could probably figure that out by reading the rest of the code. But if you have to do that, what’s the point of the comment?")]),t._v(" "),s("p",[t._v("The safest thing is to “fill in” pronouns if there’s any chance of confusion. In the previous example, let’s assume “it” was “the data”:")]),t._v(" "),s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Insert the data into the cache, but check if the data is too big first.")]),t._v("\n")])])]),s("p",[t._v("This is the simplest change to make. You could also have restructured the sentence to make “it” perfectly clear:")]),t._v(" "),s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// If the data is small enough, insert it into the cache.")]),t._v("\n")])])]),s("h2",{attrs:{id:"polish-sloppy-sentences"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#polish-sloppy-sentences"}},[t._v("#")]),t._v(" Polish Sloppy Sentences")]),t._v(" "),s("p",[t._v("In many cases, making a comment more precise goes hand-in-hand with making it more compact.")]),t._v(" "),s("p",[t._v("Here is an example from a web crawler:")]),t._v(" "),s("div",{staticClass:"language-py extra-class"},[s("pre",{pre:!0,attrs:{class:"language-py"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Depending on whether we've already crawled this URL before, give it a different priority.")]),t._v("\n")])])]),s("p",[t._v("This sentence might seem okay, but compare it to this version:")]),t._v(" "),s("div",{staticClass:"language-py extra-class"},[s("pre",{pre:!0,attrs:{class:"language-py"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Give higher priority to URLs we've never crawled before.")]),t._v("\n")])])]),s("p",[t._v("This sentence is simpler, smaller, and more direct. It also explains that "),s("em",[t._v("higher")]),t._v(" priority is given to uncrawled URLs—the previous comment didn’t contain that information.")]),t._v(" "),s("h2",{attrs:{id:"describe-function-behavior-precisely"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#describe-function-behavior-precisely"}},[t._v("#")]),t._v(" Describe Function Behavior Precisely")]),t._v(" "),s("p",[t._v("Imagine you just wrote a function that counts the number of lines in a file:")]),t._v(" "),s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Return the number of lines in this file.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("CountLines")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("string filename"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("This comment isn’t very precise—there are a lot of ways to define a “line.” Here are some corner cases to think about:")]),t._v(" "),s("ul",[s("li",[s("code",[t._v('""')]),t._v(" (an empty file) — 0 or 1 line?")]),t._v(" "),s("li",[s("code",[t._v('"hello"')]),t._v(" — 0 or 1 line?")]),t._v(" "),s("li",[s("code",[t._v('"hello\\n"')]),t._v(" — 1 or 2 lines?")]),t._v(" "),s("li",[s("code",[t._v('"hello\\n world"')]),t._v(" — 1 or 2 lines?")]),t._v(" "),s("li",[s("code",[t._v('"hello\\n\\r cruel\\n world\\r"')]),t._v(" — 2, 3, or 4 lines?")])]),t._v(" "),s("p",[t._v("The simplest implementation is to count the number of newline ("),s("code",[t._v("\\n")]),t._v(") characters. (This is the way the Unix command wc works.) Here’s a better comment to match this implementation:")]),t._v(" "),s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Count how many newline bytes ('\\n') are in the file.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("CountLines")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("string filename"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("This comment isn’t much longer than the first version, but contains much more information.")]),t._v(" "),s("p",[t._v("It tells the reader that the function might return 0 if there are no newlines. It also tells the reader that carriage returns ("),s("code",[t._v("\\r")]),t._v(") are ignored.")]),t._v(" "),s("h2",{attrs:{id:"use-input-output-examples-that-illustrate-corner-cases"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#use-input-output-examples-that-illustrate-corner-cases"}},[t._v("#")]),t._v(" Use Input/Output Examples That Illustrate Corner Cases")]),t._v(" "),s("p",[t._v("When it comes to comments, a carefully chosen input/output example can be worth a thousand words.")]),t._v(" "),s("p",[t._v("For example, here’s a common function that removes parts of a string:")]),t._v(" "),s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Remove the suffix/prefix of 'chars' from the input 'src'.")]),t._v("\nString "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Strip")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("String src"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" String chars"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("This comment isn’t very precise because it can’t answer questions such as:")]),t._v(" "),s("ul",[s("li",[t._v("Is chars a whole substring that is to be removed, or effectively just an unordered set of letters?")]),t._v(" "),s("li",[t._v("What if there are multiples of chars on the end of src?")])]),t._v(" "),s("p",[t._v("Instead, a well-chosen example can answer these questions:")]),t._v(" "),s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// Example: Strip("abba/a/ba", "ab") returns "/a/"')]),t._v("\nString "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Strip")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("String src"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" String chars"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("The example “shows off” the full functionality of Strip(). Note that a simpler example wouldn’t be as useful, if it doesn’t answer those questions:")]),t._v(" "),s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// Example: Strip("ab", "a") returns "b"')]),t._v("\n")])])]),s("p",[t._v("Here’s another example of a function that could use an illustration:")]),t._v(" "),s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Rearrange 'v' so that elements < pivot come before those >= pivot;")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Then return the largest 'i' for which v[i] < pivot (or -1 if none are < pivot)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Partition")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vector"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" v"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" pivot"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("This comment is actually very precise, but a little bit hard to visualize. Here’s an example you could include to illustrate things further:")]),t._v(" "),s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Example: Partition([8 5 9 8 2], 8) might result in [5 2 | 8 9 8] and return 1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Partition")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vector"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" v"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" pivot"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("There are a number of points to mention about the specific example input/output we chose:")]),t._v(" "),s("ul",[s("li",[t._v("The pivot is equal to elements in the vector to illustrate that edge case.")]),t._v(" "),s("li",[t._v("We put duplicates in the vector ( 8 ) to illustrate that this is an acceptable input.")]),t._v(" "),s("li",[t._v("The resulting vector is not sorted — if it were, the reader might get the wrong idea.")]),t._v(" "),s("li",[t._v("Because the return value was 1 , we made sure 1 wasn’t also a value in the vector — that would be confusing.")])]),t._v(" "),s("h2",{attrs:{id:"state-the-intent-of-your-code"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#state-the-intent-of-your-code"}},[t._v("#")]),t._v(" State the Intent of Your Code")]),t._v(" "),s("p",[t._v("As we mentioned in the previous chapter, commenting is often about telling the reader what you were thinking about when you wrote the code. Unfortunately, many comments end up just describing what the code does in literal terms, without adding much new information.")]),t._v(" "),s("p",[t._v("Here’s an example of such a comment:")]),t._v(" "),s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("DisplayProducts")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("list"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Product"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" products"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    products"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sort")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("CompareProductByPrice"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Iterate through the list in reverse order")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("list"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Product"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),t._v("reverse_iterator it "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" products"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rbegin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" it "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" products"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rend")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("it"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("DisplayPrice")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("it"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("price"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("All this comment does is just describe the line below it. Instead, consider this better comment:")]),t._v(" "),s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Display each price, from highest to lowest")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("list"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Product"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),t._v("reverse_iterator it "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" products"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rbegin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("This comment explains what the program is doing at a higher level. This is much more in tune with what the programmer was thinking when she wrote the code.")]),t._v(" "),s("p",[t._v("Interestingly, there is a bug in this program! The CompareProductByPrice function (not shown) already sorts higher-priced items first. The code is doing the opposite of what the author intended.")]),t._v(" "),s("p",[t._v("This is a good reason why the second comment is better. Despite the bug, the first comment is technically correct (the loop does iterate in reverse order). But with the second comment, a reader is more likely to notice that the intent of the writer (to show higher-priced items first) contradicts what the code actually does. In effect, the comment acts as a "),s("em",[t._v("redundancy check")]),t._v(".")]),t._v(" "),s("p",[t._v("Ultimately, the best redundancy check is a unit test (see Chapter 14, "),s("em",[t._v("Testing and Readability")]),t._v(" ).")]),t._v(" "),s("p",[t._v("But it’s still worthwhile having comments like these explaining the intent of your program.")]),t._v(" "),s("h2",{attrs:{id:"named-function-parameter-comments"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#named-function-parameter-comments"}},[t._v("#")]),t._v(" “Named Function Parameter” Comments")]),t._v(" "),s("p",[t._v("Suppose you saw a function call like this one:")]),t._v(" "),s("div",{staticClass:"language-py extra-class"},[s("pre",{pre:!0,attrs:{class:"language-py"}},[s("code",[t._v("Connect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" false"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("This function call is a bit mysterious because of those integer and boolean literals being passed in.")]),t._v(" "),s("p",[t._v("In languages like Python, you can assign the arguments by name:")]),t._v(" "),s("div",{staticClass:"language-py extra-class"},[s("pre",{pre:!0,attrs:{class:"language-py"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Connect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timeout"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" use_encryption"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Call the function using named parameters")]),t._v("\nConnect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" timeout "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" use_encryption "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("False")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("In languages like C++ and Java, you can’t do this. However, you can use an inline comment to the same effect:")]),t._v(" "),s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Connect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" timeout"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("bool")]),t._v(" use_encryption"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Call the function with commented parameters")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Connect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* timeout_ms = */")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* use_encryption = */")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("Notice that we “named” the first parameter "),s("code",[t._v("timeout_ms")]),t._v(" instead of timeout. Ideally, the function’s real argument would have been "),s("code",[t._v("timeout_ms")]),t._v(", but if for some reason we can’t make this change, this is a handy way to “improve” the name.")]),t._v(" "),s("p",[t._v("When it comes to boolean arguments, it’s especially important to put "),s("code",[t._v("/* name = */")]),t._v(" in "),s("em",[t._v("front")]),t._v(" of the value. Putting the comment "),s("em",[t._v("behind")]),t._v(" the value is very confusing:")]),t._v(" "),s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Don't do this!")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Connect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* use_encryption */")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Don't do this either!")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Connect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* = use_encryption */")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("In these examples, it’s unclear whether false means “use encryption” or “don’t use encryption”.")]),t._v(" "),s("p",[t._v("Most function calls don’t need comments like these, but it’s a handy (and compact) way to explain mysterious-looking arguments.")]),t._v(" "),s("h2",{attrs:{id:"use-information-dense-words"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#use-information-dense-words"}},[t._v("#")]),t._v(" Use Information-Dense Words")]),t._v(" "),s("p",[t._v("Once you’ve been programming for a number of years, you notice that the same general problems and solutions come up repeatedly. Often, there are specific words or phrases that have been developed to describe these patterns/idioms. Using these words can make your comments much more compact.")]),t._v(" "),s("p",[t._v("For example, suppose your comment were:")]),t._v(" "),s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// This class contains a number of members that store the same information as in the")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// database, but are stored here for speed. When this class is read from later, those")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// members are checked first to see if they exist, and if so are returned; otherwise the")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// database is read from and that data stored in those fields for next time.")]),t._v("\n")])])]),s("p",[t._v("Instead, you could just say:")]),t._v(" "),s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// This class acts as a caching layer to the database.")]),t._v("\n")])])]),s("p",[t._v("As another example, a comment such as:")]),t._v(" "),s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Remove excess whitespace from the street address, and do lots of other cleanup")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// like turn "Avenue" into "Ave." This way, if there are two different street addresses')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// that are typed in slightly differently, they will have the same cleaned-up version and")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// we can detect that these are equal.")]),t._v("\n")])])]),s("p",[t._v("could instead be:")]),t._v(" "),s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// Canonicalize the street address (remove extra spaces, "Avenue" -> "Ave.", etc.)')]),t._v("\n")])])]),s("p",[t._v("There are lots of words and phrases that pack a lot of meaning, such as “heuristic,” “brute-force,” “naive solution,” and the like. If you have a comment that feels a bit long-winded, see if it can be described as a typical programming situation.")]),t._v(" "),s("h2",{attrs:{id:"summary"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#summary"}},[t._v("#")]),t._v(" Summary")]),t._v(" "),s("p",[t._v("This chapter is about writing comments that pack as much information into as small a space")]),t._v(" "),s("p",[t._v("as possible. Here are the specific tips:")]),t._v(" "),s("ul",[s("li",[t._v("Avoid pronouns like “it” and “this” when they can refer to multiple things.")]),t._v(" "),s("li",[t._v("Describe a function’s behavior with as much precision as is practical.")]),t._v(" "),s("li",[t._v("Illustrate your comments with carefully chosen input/output examples.")]),t._v(" "),s("li",[t._v("State the high-level intent of your code, rather than the obvious details.")]),t._v(" "),s("li",[t._v("Use inline comments (e.g., "),s("code",[t._v("Function(/* arg = */ ... )")]),t._v(" ) to explain mysterious function arguments.")]),t._v(" "),s("li",[t._v("Keep your comments brief by using words that pack a lot of meaning.")])])])}),[],!1,null,null,null);e.default=n.exports}}]);