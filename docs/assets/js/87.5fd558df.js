(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{1380:function(t,e,o){"use strict";o.r(e);var s=o(7),v=Object(s.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"security-groups"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#security-groups"}},[t._v("#")]),t._v(" Security Groups")]),t._v(" "),s("ul",[s("li",[t._v("Security Groups are the fundamental of network security in AWS")]),t._v(" "),s("li",[t._v("They control how traffic is allowed into or out of our EC2 Instances")]),t._v(" "),s("li",[t._v("Security groups only contain "),s("strong",[t._v("allow")]),t._v(" rules")]),t._v(" "),s("li",[t._v("Security groups rules can reference by IP or by security group")])]),t._v(" "),s("p",[s("img",{attrs:{src:o(642),alt:"img"}})]),t._v(" "),s("h2",{attrs:{id:"deep-dive"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#deep-dive"}},[t._v("#")]),t._v(" Deep Dive")]),t._v(" "),s("ul",[s("li",[t._v("Security groups are acting as a "),s("em",[t._v("Firewall")]),t._v(" on EC2 instances")]),t._v(" "),s("li",[t._v("They regulate:\n"),s("ul",[s("li",[t._v("Access to Ports")]),t._v(" "),s("li",[t._v("Authorised IP ranges - IPv4 and IPv6")]),t._v(" "),s("li",[t._v("Control of inbound network (from other to the instance)")]),t._v(" "),s("li",[t._v("Control of outbound network (from the instance to other)")])])])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Type")]),t._v(" "),s("th",[t._v("Protocol")]),t._v(" "),s("th",[t._v("Port Range")]),t._v(" "),s("th",[t._v("Source")]),t._v(" "),s("th",[t._v("Description")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("HTTP")]),t._v(" "),s("td",[t._v("TCP")]),t._v(" "),s("td",[t._v("80")]),t._v(" "),s("td",[t._v("0.0.0.0/0")]),t._v(" "),s("td",[t._v("test http page")])]),t._v(" "),s("tr",[s("td",[t._v("SSH")]),t._v(" "),s("td",[t._v("TCP")]),t._v(" "),s("td",[t._v("22 122.149.168.85/32")]),t._v(" "),s("td"),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("Custom TCP Rule")]),t._v(" "),s("td",[t._v("TCP")]),t._v(" "),s("td",[t._v("4567")]),t._v(" "),s("td",[t._v("0.0.0.0/0")]),t._v(" "),s("td",[t._v("java app")])])])]),t._v(" "),s("p",[s("img",{attrs:{src:o(643),alt:"sgflow"}})]),t._v(" "),s("h2",{attrs:{id:"good-to-know"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#good-to-know"}},[t._v("#")]),t._v(" Good to know")]),t._v(" "),s("ul",[s("li",[t._v("Can be attached to multiple instances")]),t._v(" "),s("li",[t._v("Locked down to a region / VPC combination")]),t._v(" "),s("li",[t._v("Does live “outside” the EC2 – if traffic is blocked the EC2 instance won’t see it")]),t._v(" "),s("li",[s("em",[t._v("It’s good to maintain one separate security group for SSH access")])]),t._v(" "),s("li",[t._v("If your application is not accessible (time out), then it’s a security group issue")]),t._v(" "),s("li",[t._v("If your application gives a “connection refused“ error, then it’s an application error or it’s not launched")]),t._v(" "),s("li",[t._v("All inbound traffic is "),s("strong",[t._v("blocked")]),t._v(" by default")]),t._v(" "),s("li",[t._v("All outbound traffic is "),s("strong",[t._v("authorised")]),t._v(" by default")])]),t._v(" "),s("h2",{attrs:{id:"security-group-vs-nacls"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#security-group-vs-nacls"}},[t._v("#")]),t._v(" Security Group vs NACLs")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Feature")]),t._v(" "),s("th",[t._v("SG")]),t._v(" "),s("th",[t._v("NACL")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("Operates at")]),t._v(" "),s("td",[t._v("instance level")]),t._v(" "),s("td",[t._v("subnet level")])]),t._v(" "),s("tr",[s("td",[t._v("Apply to")]),t._v(" "),s("td",[s("code",[t._v("associated")]),t._v(" instances")]),t._v(" "),s("td",[t._v("all instances deployed in associated subnet")])]),t._v(" "),s("tr",[s("td",[t._v("Support")]),t._v(" "),s("td",[t._v("Allow rules only")]),t._v(" "),s("td",[t._v("Allow & Deny rules")])]),t._v(" "),s("tr",[s("td",[t._v("Rules are evaluted")]),t._v(" "),s("td",[t._v("before deciding allow traffic")]),t._v(" "),s("td",[t._v("in order, start with lowest numbered rule when deciding allow traffic")])]),t._v(" "),s("tr",[s("td",[t._v("State")]),t._v(" "),s("td",[s("strong",[t._v("Stateful")]),t._v(". Return traffic is allowed, regardless of the rules")]),t._v(" "),s("td",[s("strong",[t._v("Stateless")]),t._v(". Return traffic must be explicitly allowed by rules")])]),t._v(" "),s("tr",[s("td",[t._v("Relationship")]),t._v(" "),s("td",[t._v("SG & resource is "),s("code",[t._v("n - n")])]),t._v(" "),s("td",[t._v("NACL & subnet is "),s("code",[t._v("n - 1")])])])])]),t._v(" "),s("h2",{attrs:{id:"classic-ports-to-know"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#classic-ports-to-know"}},[t._v("#")]),t._v(" Classic Ports to know")]),t._v(" "),s("ul",[s("li",[t._v("22 = SSH (Secure Shell) - log into a Linux instance")]),t._v(" "),s("li",[t._v("21 = FTP (File Transfer Protocol) – upload files into a file share")]),t._v(" "),s("li",[t._v("22 = SFTP (Secure File Transfer Protocol) – upload files using SSH")]),t._v(" "),s("li",[t._v("80 = HTTP – access unsecured websites")]),t._v(" "),s("li",[t._v("443 = HTTPS – access secured websites")]),t._v(" "),s("li",[t._v("3389 = RDP (Remote Desktop Protocol) – log into a Windows instance")])])])}),[],!1,null,null,null);e.default=v.exports},642:function(t,e,o){t.exports=o.p+"assets/img/sg.904a7e0d.png"},643:function(t,e,o){t.exports=o.p+"assets/img/sg-flow.7db9fb71.png"}}]);