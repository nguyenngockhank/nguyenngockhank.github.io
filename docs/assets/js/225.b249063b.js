(window.webpackJsonp=window.webpackJsonp||[]).push([[225],{791:function(e,t,a){"use strict";a.r(t);var s=a(7),n=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"c-h-a-p-t-e-r-f-o-u-r"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#c-h-a-p-t-e-r-f-o-u-r"}},[e._v("#")]),e._v(" C H A P T E R F O U R")]),e._v(" "),a("p",[a("strong",[e._v("Aesthetics")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("33\n")])])]),a("p",[e._v("A lot of thought goes into the layout of a magazine—the length of the paragraphs, the width")]),e._v(" "),a("p",[e._v("of the columns, the order of the articles, and what goes on the cover. A good magazine makes")]),e._v(" "),a("p",[e._v("it easy to skip around from page to page, but also easy to read straight through.")]),e._v(" "),a("p",[e._v("Good source code should be just as “easy on the eyes.” In this chapter, we’ll show how good")]),e._v(" "),a("p",[e._v("use of spacing, alignment, and ordering can make your code easier to read.")]),e._v(" "),a("p",[e._v("Specifically, there are three principles we use:")]),e._v(" "),a("ul",[a("li",[e._v("Use consistent layout, with patterns the reader can get used to.")]),e._v(" "),a("li",[e._v("Make similar code look similar.")]),e._v(" "),a("li",[e._v("Group related lines of code into blocks.")])]),e._v(" "),a("p",[e._v("AESTHETICS VS. DESIGN")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("In this chapter, we’re concerned only with simple “aesthetic” improvements you can make to your\ncode. These types of changes are easy to make and often improve readability quite a bit. There are\ntimes when larger refactoring of your code (such as splitting out new functions or classes) can help\neven more. Our view is that good aesthetics and good design are independent ideas; ideally you\nshould strive for both.\n")])])]),a("h3",{attrs:{id:"why-do-aesthetics-matter"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#why-do-aesthetics-matter"}},[e._v("#")]),e._v(" Why Do Aesthetics Matter?")]),e._v(" "),a("p",[a("strong",[e._v("34")]),e._v(" CHAPTER FOUR")]),e._v(" "),a("p",[e._v("Imagine if you had to use this class:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("class StatsKeeper {\npublic:\n// A class for keeping track of a series of doubles\nvoid Add(double d); // and methods for quick statistics about them\nprivate: int count; /* how many so far\n*/ public:\ndouble Average();\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("private: double minimum;\nlist<double>\npast_items\n;double maximum;\n};\n")])])]),a("p",[e._v("It would take you a lot longer to understand it than if you had this cleaner version instead:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("// A class for keeping track of a series of doubles\n// and methods for quick statistics about them.\nclass StatsKeeper {\npublic:\nvoid Add(double d);\ndouble Average();\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("private:\nlist<double> past_items;\nint count; // how many so far\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("double minimum;\ndouble maximum;\n};\n")])])]),a("p",[e._v("Obviously it’s "),a("strong",[e._v("easier to work with code that’s aesthetically pleasing")]),e._v(". If you think about")]),e._v(" "),a("p",[e._v("it, most of your time programming is spent looking at code! The faster you can skim through")]),e._v(" "),a("p",[e._v("your code, the easier it is for everyone to use it.")]),e._v(" "),a("h3",{attrs:{id:"rearrange-line-breaks-to-be-consistent-and-compact"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rearrange-line-breaks-to-be-consistent-and-compact"}},[e._v("#")]),e._v(" Rearrange Line Breaks to Be Consistent and Compact")]),e._v(" "),a("p",[e._v("Suppose you were writing Java code to evaluate how your program behaves under various")]),e._v(" "),a("p",[e._v("network connection speeds. You have a TcpConnectionSimulator that takes four parameters in")]),e._v(" "),a("p",[e._v("the constructor:")]),e._v(" "),a("ol",[a("li",[e._v("The speed of the connection (Kbps)")]),e._v(" "),a("li",[e._v("The average latency (ms)\n3.The “jitter” of the latency (ms)")]),e._v(" "),a("li",[e._v("The packet loss (percentage)")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("AESTHETICS 35\n")])])]),a("p",[e._v("Your code needed three different TcpConnectionSimulator instances:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("public class PerformanceTester {\npublic static final TcpConnectionSimulator wifi = new TcpConnectionSimulator (\n500, /* Kbps */\n80, /* millisecs latency */\n200, /* jitter */\n1 /* packet loss % */);\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("public static final TcpConnectionSimulator t3_fiber =\nnew TcpConnectionSimulator (\n45000, /* Kbps */\n10, /* millisecs latency */\n0, /* jitter */\n0 /* packet loss % */);\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("public static final TcpConnectionSimulator cell = new TcpConnectionSimulator (\n100, /* Kbps */\n400, /* millisecs latency */\n250, /* jitter */\n5 /* packet loss % */);\n}\n")])])]),a("p",[e._v("This example code needed a lot of extra line breaks to fit inside an 80-character limit (this was")]),e._v(" "),a("p",[e._v("the coding standard at your company). Unfortunately, that made the definition of t3_fiber")]),e._v(" "),a("p",[e._v("look different from its neighbors. The “silhouette” of this code is odd, and it draws attention")]),e._v(" "),a("p",[e._v("to t3_fiber for no reason. This doesn’t follow the principle that “similar code should look")]),e._v(" "),a("p",[e._v("similar.”")]),e._v(" "),a("p",[e._v("To make the code look more consistent, we could introduce extra line breaks (and line up the")]),e._v(" "),a("p",[e._v("comments while we’re at it):")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("public class PerformanceTester {\npublic static final TcpConnectionSimulator wifi =\nnew TcpConnectionSimulator (\n500, /* Kbps */\n80, /* millisecs latency */\n200, /* jitter */\n1 /* packet loss % */);\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("public static final TcpConnectionSimulator t3_fiber =\nnew TcpConnectionSimulator (\n45000, /* Kbps */\n10, /* millisecs latency */\n0, /* jitter */\n0 /* packet loss % */);\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("public static final TcpConnectionSimulator cell =\nnew TcpConnectionSimulator (\n100, /* Kbps */\n400, /* millisecs latency */\n250, /* jitter */\n5 /* packet loss % */);\n}\n")])])]),a("p",[a("strong",[e._v("36")]),e._v(" CHAPTER FOUR")]),e._v(" "),a("p",[e._v("This code has a nice consistent pattern, and is easier to scan through. But unfortunately, it uses")]),e._v(" "),a("p",[e._v("a lot of vertical space. It also duplicates each comment three times.")]),e._v(" "),a("p",[e._v("Here’s a more compact way to write the class:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("public class PerformanceTester {\n// TcpConnectionSimulator(throughput, latency, jitter, packet_loss)\n// [Kbps] [ms] [ms] [percent]\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("public static final TcpConnectionSimulator wifi =\nnew TcpConnectionSimulator (500, 80, 200, 1);\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("public static final TcpConnectionSimulator t3_fiber =\nnew TcpConnectionSimulator (45000, 10, 0, 0);\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("public static final TcpConnectionSimulator cell =\nnew TcpConnectionSimulator (100, 400, 250, 5);\n}\n")])])]),a("p",[e._v("We’ve moved the comments up to the top and then put all the parameters on one line. Now,")]),e._v(" "),a("p",[e._v("even though the comment isn’t right next to each number, the “data” is lined up in a more")]),e._v(" "),a("p",[e._v("compact table.")]),e._v(" "),a("h3",{attrs:{id:"use-methods-to-clean-up-irregularity"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#use-methods-to-clean-up-irregularity"}},[e._v("#")]),e._v(" Use Methods to Clean Up Irregularity")]),e._v(" "),a("p",[e._v("Suppose you had a personnel database that provided the following function:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('// Turn a partial_name like "Doug Adams" into "Mr. Douglas Adams".\n// If not possible, \'error\' is filled with an explanation.\nstring ExpandFullName (DatabaseConnection dc, string partial_name, string* error);\n')])])]),a("p",[e._v("and this function was tested with a series of examples:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('DatabaseConnection database_connection;\nstring error;\nassert( ExpandFullName (database_connection, "Doug Adams", &error)\n== "Mr. Douglas Adams");\nassert(error == "");\nassert( ExpandFullName (database_connection, " Jake Brown ", &error)\n== "Mr. Jacob Brown III");\nassert(error == "");\nassert( ExpandFullName (database_connection, "No Such Guy", &error) == "");\nassert(error == "no match found");\nassert( ExpandFullName (database_connection, "John", &error) == "");\nassert(error == "more than one result");\n')])])]),a("p",[e._v("This code is not aesthetically pleasing. Some of the lines are so long that they wrap to the next")]),e._v(" "),a("p",[e._v("line. The silhouette of this code is ugly and there is no consistent pattern.")]),e._v(" "),a("p",[e._v("But this is a case where rearranging the line breaks can only do so much. The bigger problem")]),e._v(" "),a("p",[e._v("is that there are a lot of repeated strings like “assert(ExpandFullName(database_connection...,”")]),e._v(" "),a("p",[e._v("and “error” that are getting in the way. To really improve this code, we need a helper method")]),e._v(" "),a("p",[e._v("so the code can look like this:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("AESTHETICS 37\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('CheckFullName ("Doug Adams", "Mr. Douglas Adams", "");\nCheckFullName (" Jake Brown ", "Mr. Jake Brown III", "");\nCheckFullName ("No Such Guy", "", "no match found");\nCheckFullName ("John", "", "more than one result");\n')])])]),a("p",[e._v("Now it’s more clear that there are four tests happening, each with different parameters. Even")]),e._v(" "),a("p",[e._v("though all the “dirty work” is inside CheckFullName(), that function isn’t so bad, either:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("void CheckFullName(string partial_name,\nstring expected_full_name,\nstring expected_error) {\n// database_connection is now a class member\nstring error;\nstring full_name = ExpandFullName(database_connection, partial_name , &error);\nassert(error == expected_error );\nassert(full_name == expected_full_name );\n}\n")])])]),a("p",[e._v("Even though our goal was just to make the code more aesthetically pleasing, this change has")]),e._v(" "),a("p",[e._v("a number of other side benefits:")]),e._v(" "),a("ul",[a("li",[e._v("It eliminates a lot of the duplicated code from before, making the code more compact.")]),e._v(" "),a("li",[e._v("The important parts of each test case (the names and error strings) are now by\nthemselves, in plain sight. Before, these strings were interspersed with tokens like\ndatabase_connection and error, which made it hard to “take in” the code in one eyeful.")]),e._v(" "),a("li",[e._v("Adding new tests should be much easier now.")])]),e._v(" "),a("p",[e._v("The moral of the story is that making code “look pretty” often results in more than just surface")]),e._v(" "),a("p",[e._v("improvements—it might help you structure your code better.")]),e._v(" "),a("h3",{attrs:{id:"use-column-alignment-when-helpful"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#use-column-alignment-when-helpful"}},[e._v("#")]),e._v(" Use Column Alignment When Helpful")]),e._v(" "),a("p",[e._v("Straight edges and columns make it easier for readers to scan through text.")]),e._v(" "),a("p",[e._v("Sometimes you can introduce “column alignment” to make the code easier to read. For")]),e._v(" "),a("p",[e._v("example, in the previous section, you could space out and line up the arguments to")]),e._v(" "),a("p",[e._v("CheckFullName():")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('CheckFullName("Doug Adams" , "Mr. Douglas Adams" , "");\nCheckFullName(" Jake Brown ", "Mr. Jake Brown III", "");\nCheckFullName("No Such Guy" , "" , "no match found");\nCheckFullName("John" , "" , "more than one result");\n')])])]),a("p",[e._v("In this code, it’s easier to distinguish the second and third arguments to CheckFullName().")]),e._v(" "),a("p",[e._v("Here is a simple example with a large group of variable definitions:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# Extract POST parameters to local variables\ndetails = request.POST.get('details')\nlocation = request.POST.get('location')\nphone = equest.POST.get('phone')\n")])])]),a("p",[a("strong",[e._v("38")]),e._v(" CHAPTER FOUR")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("email = request.POST.get('email')\nurl = request.POST.get('url')\n")])])]),a("p",[e._v("As you may have noticed, the third definition has a typo (equest instead of request). Mistakes")]),e._v(" "),a("p",[e._v("like these are more pronounced when everything is lined up so neatly.")]),e._v(" "),a("p",[e._v("In the wget codebase, the available command-line options (more than 100 of them) were listed")]),e._v(" "),a("p",[e._v("as follows:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("commands[] = {\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('{ "timeout", NULL, cmd_spec_timeout },\n{ "timestamping", &opt.timestamping, cmd_boolean },\n{ "tries", &opt.ntry, cmd_number_inf },\n{ "useproxy", &opt.use_proxy, cmd_boolean },\n{ "useragent", NULL, cmd_spec_useragent },\n')])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("};\n")])])]),a("p",[e._v("This approach made the list very easy to skim through and jump from one column to the next.")]),e._v(" "),a("p",[a("strong",[e._v("Should You Use Column Alignment?")])]),e._v(" "),a("p",[e._v("Column edges provide “visual handrails” that make it easier to scan through. It’s a good")]),e._v(" "),a("p",[e._v("example of “make similar code look similar.”")]),e._v(" "),a("p",[e._v("But some programmers don’t like it. One reason is that it takes more work to set up and")]),e._v(" "),a("p",[e._v("maintain the alignment. Another reason is it creates a larger “diff” when making changes—a")]),e._v(" "),a("p",[e._v("one-line change might cause five other lines to change (mostly just whitespace).")]),e._v(" "),a("p",[e._v("Our advice is to try it. In our experience, it doesn’t take as much work as programmers fear.")]),e._v(" "),a("p",[e._v("And if it does, you can simply stop.")]),e._v(" "),a("h3",{attrs:{id:"pick-a-meaningful-order-and-use-it-consistently"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pick-a-meaningful-order-and-use-it-consistently"}},[e._v("#")]),e._v(" Pick a Meaningful Order, and Use It Consistently")]),e._v(" "),a("p",[e._v("There are many cases where the order of code doesn’t affect the correctness. For instance, these")]),e._v(" "),a("p",[e._v("five variable definitions could be written in any order:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("details = request.POST.get('details')\nlocation = request.POST.get('location')\nphone = request.POST.get('phone')\nemail = request.POST.get('email')\nurl = request.POST.get('url')\n")])])]),a("p",[e._v("In situations like this, it’s helpful to put them in some meaningful order, not just random. Here")]),e._v(" "),a("p",[e._v("are some ideas:")]),e._v(" "),a("ul",[a("li",[e._v("Match the order of the variables to the order of the "),a("input"),e._v(" fields on the corresponding\nHTML form.")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("AESTHETICS 39\n")])])]),a("ul",[a("li",[e._v("Order them from “most important” to “least important.”")]),e._v(" "),a("li",[e._v("Order them alphabetically.")])]),e._v(" "),a("p",[e._v("Whatever the order, you should use the same order throughout your code. It would be")]),e._v(" "),a("p",[e._v("confusing to change the order later on:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("if details: rec.details = details\nif phone: rec.phone = phone # Hey, where did 'location' go?\nif email: rec.email = email\nif url: rec.url = url\nif location: rec.location = location # Why is 'location' down here now?\n")])])]),a("h3",{attrs:{id:"organize-declarations-into-blocks"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#organize-declarations-into-blocks"}},[e._v("#")]),e._v(" Organize Declarations into Blocks")]),e._v(" "),a("p",[e._v("The brain naturally thinks in terms of groups and hierarchies, so you can help a reader quickly")]),e._v(" "),a("p",[e._v("digest your code by organizing it that way.")]),e._v(" "),a("p",[e._v("For example, here’s a C++ class for a frontend server, with all its method declarations:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("class FrontendServer {\npublic:\nFrontendServer();\nvoid ViewProfile(HttpRequest* request);\nvoid OpenDatabase(string location, string user);\nvoid SaveProfile(HttpRequest* request);\nstring ExtractQueryParam(HttpRequest* request, string param);\nvoid ReplyOK(HttpRequest* request, string html);\nvoid FindFriends(HttpRequest* request);\nvoid ReplyNotFound(HttpRequest* request, string error);\nvoid CloseDatabase(string location);\n~FrontendServer();\n};\n")])])]),a("p",[e._v("This code isn’t horrible, but the layout certainly doesn’t help the reader digest all those")]),e._v(" "),a("p",[e._v("methods. Instead of listing all the methods in one giant block, they should be logically organized")]),e._v(" "),a("p",[e._v("into groups, like this:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("class FrontendServer {\npublic:\nFrontendServer();\n~FrontendServer();\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("// Handlers\nvoid ViewProfile(HttpRequest* request);\nvoid SaveProfile(HttpRequest* request);\nvoid FindFriends(HttpRequest* request);\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("// Request/Reply Utilities\nstring ExtractQueryParam(HttpRequest* request, string param);\nvoid ReplyOK(HttpRequest* request, string html);\nvoid ReplyNotFound(HttpRequest* request, string error);\n")])])]),a("p",[a("strong",[e._v("40")]),e._v(" CHAPTER FOUR")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("// Database Helpers\nvoid OpenDatabase(string location, string user);\nvoid CloseDatabase(string location);\n};\n")])])]),a("p",[e._v("This version is much easier to digest. It’s also easier to read, even though there are more lines")]),e._v(" "),a("p",[e._v("of code. The reason is that you can quickly figure out the four high-level sections and then")]),e._v(" "),a("p",[e._v("read the details of each section when it’s necessary.")]),e._v(" "),a("h3",{attrs:{id:"break-code-into-paragraphs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#break-code-into-paragraphs"}},[e._v("#")]),e._v(" Break Code into “Paragraphs”")]),e._v(" "),a("p",[e._v("Written text is broken into paragraphs for a number of reasons:")]),e._v(" "),a("ul",[a("li",[e._v("It’s a way to group similar ideas together and set them apart from other ideas.")]),e._v(" "),a("li",[e._v("It provides a visual “stepping stone”—without it, it’s easy to lose your place on the page.")]),e._v(" "),a("li",[e._v("It facilitates navigation from one paragraph to another.")])]),e._v(" "),a("p",[e._v("Code should be broken into “paragraphs” for the same reasons. For example, no one likes to")]),e._v(" "),a("p",[e._v("read a giant lump of code like this:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# Import the user's email contacts, and match them to users in our system.\n# Then display a list of those users that he/she isn't already friends with.\ndef suggest_new_friends(user, email_password):\nfriends = user.friends()\nfriend_emails = set(f.email for f in friends)\ncontacts = import_contacts(user.email, email_password)\ncontact_emails = set(c.email for c in contacts)\nnon_friend_emails = contact_emails - friend_emails\nsuggested_friends = User.objects.select(email__in=non_friend_emails)\ndisplay['user'] = user\ndisplay['friends'] = friends\ndisplay['suggested_friends'] = suggested_friends\nreturn render(\"suggested_friends.html\", display)\n")])])]),a("p",[e._v("It may not be obvious, but this function goes through a number of distinct steps. So it would")]),e._v(" "),a("p",[e._v("be especially useful to break up those lines of code into paragraphs:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("def suggest_new_friends(user, email_password):\n# Get the user's friends' email addresses.\nfriends = user.friends()\nfriend_emails = set(f.email for f in friends)\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# Import all email addresses from this user's email account.\ncontacts = import_contacts(user.email, email_password)\ncontact_emails = set(c.email for c in contacts)\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# Find matching users that they aren't already friends with.\nnon_friend_emails = contact_emails - friend_emails\nsuggested_friends = User.objects.select(email__in=non_friend_emails)\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("AESTHETICS 41\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# Display these lists on the page.\ndisplay['user'] = user\ndisplay['friends'] = friends\ndisplay['suggested_friends'] = suggested_friends\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('return render("suggested_friends.html", display)\n')])])]),a("p",[e._v("Notice that we also added a summary comment to each paragraph, which also helps the reader")]),e._v(" "),a("p",[e._v("skim through the code. (See Chapter 5, "),a("em",[e._v("Knowing What to Comment")]),e._v(" .)")]),e._v(" "),a("p",[e._v("As with written text, there may be multiple ways to break the code up, and programmers may")]),e._v(" "),a("p",[e._v("prefer longer or shorter paragraphs.")]),e._v(" "),a("h3",{attrs:{id:"personal-style-versus-consistency"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#personal-style-versus-consistency"}},[e._v("#")]),e._v(" Personal Style versus Consistency")]),e._v(" "),a("p",[e._v("There are certain aesthetic choices that just boil down to personal style. For instance, where")]),e._v(" "),a("p",[e._v("the open brace for a class definition should go:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("class Logger {\n...\n};\n")])])]),a("p",[e._v("or")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("class Logger\n{\n...\n};\n")])])]),a("p",[e._v("If one of these styles is chosen over the other, it doesn’t substantially affect the readability of")]),e._v(" "),a("p",[e._v("the codebase. But if these two styles are mixed throughout the code, it does affect the")]),e._v(" "),a("p",[e._v("readability.")]),e._v(" "),a("p",[e._v("We’ve worked on many projects where we felt like the team was using the “wrong” style, but")]),e._v(" "),a("p",[e._v("we followed the project conventions because we knew that consistency is far more important.")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("K E Y I D E A")]),e._v(" "),a("p",[e._v("Consistent style is more important than the “right” style.")])]),e._v(" "),a("h3",{attrs:{id:"summary"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#summary"}},[e._v("#")]),e._v(" Summary")]),e._v(" "),a("p",[e._v("Everyone prefers to read code that’s aesthetically pleasing. By “formatting” your code in a")]),e._v(" "),a("p",[e._v("consistent, meaningful way, you make it easier and faster to read.")]),e._v(" "),a("p",[e._v("Here are specific techniques we discussed:")]),e._v(" "),a("ul",[a("li",[e._v("If multiple blocks of code are doing similar things, try to give them the same silhouette.")]),e._v(" "),a("li",[e._v("Aligning parts of the code into “columns” can make code easy to skim through.")]),e._v(" "),a("li",[e._v("If code mentions A, B, and C in one place, don’t say B, C, and A in another. Pick a\nmeaningful order and stick with it.")]),e._v(" "),a("li",[e._v("Use empty lines to break apart large blocks into logical “paragraphs.”")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("AESTHETICS 43\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);