(window.webpackJsonp=window.webpackJsonp||[]).push([[383],{1561:function(n,t,c){"use strict";c.r(t);var h=c(7),i=Object(h.a)({},(function(){var n=this,t=n.$createElement,c=n._self._c||t;return c("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[c("h1",{attrs:{id:"_73-chong-lai-su-cam-do-cua-singleton-pattern"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#_73-chong-lai-su-cam-do-cua-singleton-pattern"}},[n._v("#")]),n._v(" 73: Chá»‘ng láº¡i sá»± cÃ¡m dá»— cá»§a Singleton Pattern")]),n._v(" "),c("p",[c("strong",[n._v("Singleton Pattern")]),n._v(" giáº£i quyáº¿t Ä‘Æ°á»£c ráº¥t nhiá»u váº¥n Ä‘á». Báº¡n biáº¿t báº¡n chá»‰ cáº§n má»™t instance(**) duy nháº¥t. Báº¡n cÃ³ thá»ƒ Ä‘áº£m báº£o ráº±ng instance nÃ y Ä‘Æ°á»£c khá»Ÿi táº¡o trÆ°á»›c khi nÃ³ Ä‘Æ°á»£c sá»­ dá»¥ng. NÃ³ giá»¯ cho thiáº¿t káº¿ cá»§a báº¡n Ä‘Æ¡n giáº£n báº±ng má»™t Ä‘iá»ƒm truy cáº­p toÃ n cáº§u. Táº¥t cáº£ Ä‘á»u tá»‘t. Váº­y Ä‘iá»u gÃ¬ khiáº¿n thiáº¿t káº¿ pattern cá»• Ä‘iá»ƒn nÃ y trá»Ÿ nÃªn khÃ´ng Ä‘Æ°á»£c yÃªu thÃ­ch?")]),n._v(" "),c("p",[n._v("Nhiá»u trÆ°á»ng há»£p, má»™t káº¿t quáº£ báº¥t ngá» sáº½ Ä‘áº¿n. NÃ³ cÃ³ thá»ƒ ráº¥t háº¥p dáº«n, nhÆ°ng kinh nghiá»‡m chá»‰ ra ráº±ng, háº§u háº¿t cÃ¡c "),c("strong",[n._v("Singleton Pattern")]),n._v(" nÃ y háº¡i nhiá»u hÆ¡n lá»£i. "),c("strong",[n._v("ChÃºng cáº£n trá»Ÿ kháº£ nÄƒng kiá»ƒm tra vÃ  báº£o trÃ¬.")]),n._v(" Tháº­t khÃ´ng may, sá»± bá»• sung khÃ´n ngoan khÃ´ng Ä‘Æ°á»£c sá»­ dá»¥ng phá»• biáº¿n vÃ  cÃ¡c láº­p trÃ¬nh viÃªn khÃ´ng thá»ƒ bá» qua viá»‡c sá»­ dá»¥ng cÃ¡c Singleton.")]),n._v(" "),c("p",[n._v("NhÆ°ng Ä‘iá»u nÃ y ráº¥t Ä‘Ã¡ng Ä‘á»ƒ dá»«ng láº¡i:")]),n._v(" "),c("p",[n._v("CÃ¡c yÃªu cáº§u single-instance thÆ°á»ng Ä‘Æ°á»£c tÃ­nh Ä‘áº¿n. Trong nhiá»u trÆ°á»ng há»£p, cÃ¡c suy Ä‘oÃ¡n Ä‘Æ¡n giáº£n ráº±ng nhá»¯ng instance sáº½ cáº§n thÃªm vÃ o trong tÆ°Æ¡ng lai. NÃªu ra cÃ¡c tÃ­nh nÄƒng trÃªn lÃ½ thuyáº¿t vá» thiáº¿t káº¿ cá»§a má»™t á»©ng dá»¥ng sáº½ áº£nh hÆ°á»Ÿng tiÃªu cá»±c táº¡i má»™t sá»‘ vá»‹ trÃ­. YÃªu cáº§u sáº½ cáº§n thay Ä‘á»•i. Thiáº¿t káº¿ tá»‘t bao gá»“m Ä‘iá»u nÃ y nhÆ°ng cÃ¡c Singleton thÃ¬ khÃ´ng.")]),n._v(" "),c("p",[n._v("Singleton cÅ©ng Ã¢m tháº§m gÃ¢y ra sá»± phá»¥ thuá»™c giá»¯a cÃ¡c Ä‘Æ¡n vá»‹ code riÃªng láº». ÄÃ¢y lÃ  váº¥n Ä‘á» cáº£ bá»Ÿi vÃ¬ chÃºng bá»‹ áº©n Ä‘i vÃ  vÃ¬ chÃºng liÃªn káº¿t cÃ¡c cÃ¡c Ä‘Æ¡n vá»‹ khÃ´ng cáº§n thiáº¿t. Code cá»§a báº¡n sáº½ trá»Ÿ nÃªn â€œkhÃ³ nuá»‘tâ€ khi báº¡n cá»‘ gáº¯ng viáº¿t cÃ¡i Ä‘Æ¡n vá»‹ kiá»ƒm tra, Ä‘iá»u nÃ y phá»¥ thuá»™c vÃ o cÃ¡c káº¿t ná»‘i lá»ng láº»o vÃ  kháº£ nÄƒng thay tháº¿ cÃ³ chá»n lá»c cÃ¡c Ä‘á»‘i tÆ°á»£ng mÃ´ phá»ng trÃªn mÃ´i trÆ°á»ng thá»±c táº¿.")]),n._v(" "),c("p",[n._v("Singleton ngÄƒn cháº·n cÃ¡c Ä‘á»‘i tÆ°á»£ng mÃ´ phá»ng nÃ y.")]),n._v(" "),c("p",[n._v("Singleton cÅ©ng kÃ©o dÃ i ngáº§m trong há»‡ thá»‘ng, Ä‘iá»u nÃ y má»™t láº§n ná»¯a cáº£n trá»Ÿ cÃ¡c Ä‘Æ¡n vá»‹ kiá»ƒm tra, thá»© phá»¥ thuá»™c vÃ o thÃ nh pháº§n Ä‘á»™c láº­p, do Ä‘Ã³ viá»‡c kiá»ƒm tra cÃ³ thá»ƒ Ä‘Æ°á»£c thá»±c hiá»‡n theo báº¥t ká»³ thá»© tá»± nÃ o vÃ  chÆ°Æ¡ng trÃ¬nh cÃ³ thá»ƒ Ä‘Æ°á»£c Ä‘áº·t vÃ o tráº¡ng thÃ¡i Ä‘Ã£ biáº¿t trÆ°á»›c khi thá»±c hiá»‡n kiá»ƒm thá»­. Má»™t khi báº¡n thÃªm Singleton vá»›i tráº¡ng thÃ¡i cÃ³ thá»ƒ biáº¿n Ä‘á»•i, Ä‘iá»u nÃ y khÃ³ cÃ³ thá»ƒ thá»±c hiá»‡n. NgoÃ i ra, tráº¡ng thÃ¡i lÃ¢u dÃ i cá»§a kháº£ nÄƒng truy cáº­p toÃ n cáº§u lÃ m cho viá»‡c suy luáº­n vá» code trá»Ÿ nÃªn khÃ³ khÄƒn hÆ¡n Ä‘áº·c biá»‡t lÃ  trong mÃ´i trÆ°á»ng Ä‘a luá»“ng.")]),n._v(" "),c("p",[n._v("MÃ´i trÆ°á»ng Ä‘a luá»“ng Ä‘Æ°a ra nhá»¯ng sá»± â€œcÃ¡m dá»—â€ vá»›i Singleton Pattern. CÃ¡c lá»›p báº£o máº­t Ä‘Æ¡n giáº£n khi truy cáº­p khÃ´ng thá»±c sá»± hiá»‡u quáº£, do Ä‘Ã³ báº£o máº­t hai lá»›p trá»Ÿ (DCLP) nÃªn phá»• biáº¿n. Tháº­t khÃ´ng may, Ä‘Ã¢y cÃ³ thá»ƒ lÃ  má»™t hÃ¬nh thá»©c gÃ¢y thiá»‡t háº¡i lá»›n. NÃ³ chá»‰ ra ráº±ng, trong nhiá»u ngÃ´n ngá»¯, DCLP khÃ´ng an toÃ n, ngay cáº£ khi Ä‘Æ°á»£c thiáº¿t láº­p thÃ¬ váº«n cÃ³ kháº£ nÄƒng vÆ°á»£t qua.")]),n._v(" "),c("p",[n._v("Viá»‡c dá»n dáº¹p Singleton cÅ©ng cÃ³ thÃªm má»™t thÃ¡ch thá»©c ná»¯a:")]),n._v(" "),c("p",[n._v("Viá»‡c loáº¡i bá» cÃ¡c Singleton khÃ´ng Ä‘Æ°á»£c há»— trá»£, Ä‘Ã¢y cÃ³ thá»ƒ lÃ  má»™t váº¥n Ä‘á» nghiÃªm trá»ng trong má»™t vÃ i trÆ°á»ng há»£p. VÃ­ dá»¥, trong cáº¥u trÃºc cá»§a má»™t plug-in, plug-in chá»‰ Ä‘Æ°á»£c táº£i lÃªn an toÃ n sau khi táº¥t cáº£ Ä‘á»‘i tÆ°á»£ng Ä‘Ã£ Ä‘Æ°á»£c loáº¡i bá» sáº¡ch sáº½.")]),n._v(" "),c("p",[n._v("KhÃ´ng cÃ³ thá»© tá»± nÃ o trong viá»‡c loáº¡i bá» cÃ¡c Singleton khi thoÃ¡t khá»i chÆ°Æ¡ng trÃ¬nh. Äiá»u nÃ y cÃ³ thá»ƒ gÃ¢y ráº¯c rá»‘i vá»›i cÃ¡c á»©ng dá»¥ng cÃ³ chá»©a cÃ¡c Singleton cÃ³ sá»± phá»¥ thuá»™c láº«n nhau. Khi táº¯t cÃ¡c á»©ng dá»¥ng nhÆ° váº­y, má»™t Singleton cÃ³ thá»ƒ truy cáº­p má»™t á»©ng dá»¥ng khÃ¡c.\nMá»™t sá»‘ thiáº¿u sÃ³t cÃ³ thá»ƒ Ä‘Æ°á»£c kháº¯c phá»¥c báº±ng cÃ¡ch Ä‘Æ°a ra cÆ¡ cháº¿ bá»• sung. Tuy váº­y, Ä‘iá»u nÃ y pháº£i tráº£ giÃ¡ báº±ng viá»‡c sá»± phá»©c táº¡p sáº½ tÄƒng cao trong code trÃ¡nh viá»‡c thay Ä‘á»•i cáº¥u trÃºc.")]),n._v(" "),c("p",[n._v("Do Ä‘Ã³, báº¡n nÃªn háº¡n cháº¿ sá»­ dá»¥ng cÃ¡c Singleton Pattern cho cÃ¡c class khÃ´ng Ä‘Æ°á»£c khá»Ÿi táº¡o nhiá»u láº§n. KhÃ´ng sá»­ dá»¥ng viá»‡c truy cáº­p toÃ n cáº§u cá»§a má»™t Singleton tá»« code tÃ¹y Ã½. Thay vÃ o Ä‘Ã³, truy cáº­p trá»±c tiáº¿p vÃ o Singleton pháº£i tá»« má»™t vá»‹ trÃ­ xÃ¡c Ä‘á»‹nh, tá»« Ä‘Ã³ cÃ³ thá»ƒ chuyá»ƒn giao diá»‡n cá»§a nÃ³ qua má»™t Ä‘oáº¡n code khÃ¡c. Äoáº¡n code khÃ¡c nÃ y khÃ´ng Ä‘Æ°á»£c sá»­ dá»¥ng trÆ°á»›c Ä‘Ã³ cho nÃªn nÃ³ khÃ´ng phá»¥ thuá»™c vÃ o Singleton hay class nÃ o táº¡o ra giao diá»‡n. Äiá»u nÃ y phÃ¡ vá»¡ cÃ¡c phá»¥ thuá»™c ngÄƒn cáº£n viá»‡c kiá»ƒm tra vÃ  cáº£i thiá»‡n kháº£ nÄƒng báº£o trÃ¬. VÃ¬ váº­y, trong láº§n tá»›i, khi báº¡n nghÄ© vá» viá»‡c sá»­ dá»¥ng hay triá»ƒn khai má»™t Singleton, hy vá»ng báº¡n sáº½ táº¡m dá»«ng vÃ  suy nghÄ© láº¡i.")]),n._v(" "),c("p",[c("strong",[n._v("ğŸ’¬ ChÃº thÃ­ch:")]),n._v("\n(*) Má»™t design pattern mÃ  Ä‘áº£m báº£o ráº±ng má»™t class chá»‰ cÃ³ má»™t instance vÃ  cung cáº¥p truy cáº­p vÃ o instance Ä‘Ã³ toÃ n cáº§u\n(**) Thá»±c thá»ƒ, giá»¯ Ä‘á»‹a chá»‰ bá»™ nhá»›")])])}),[],!1,null,null,null);t.default=i.exports}}]);