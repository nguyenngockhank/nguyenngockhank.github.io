(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{179:function(a,t,s){"use strict";s.r(t);var n=s(0),e=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"javascript-ky-di"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#javascript-ky-di","aria-hidden":"true"}},[a._v("#")]),a._v(" Javascript kỳ dị")]),a._v(" "),s("hr"),a._v(" "),s("h2",{attrs:{id:"éo-eo-false"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#éo-eo-false","aria-hidden":"true"}},[a._v("#")]),a._v(" 'éo' == 'éo' (false)")]),a._v(" "),s("p",[a._v("Gì đây, vâng nó đấy")]),a._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[a._v("console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'éo'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("==")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'éo'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("/// false")]),a._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'éo'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 3")]),a._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'éo'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 2")]),a._v("\n")])])]),s("p",[a._v("Nhìn các ký tự có vẻ giống nhau nhưng phía sau nó là cả 1 câu chuyện =)) Ngắn gọn là do cách "),s("code",[a._v("encode")]),a._v(" khác nhau.")]),a._v(" "),s("h3",{attrs:{id:"solution"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#solution","aria-hidden":"true"}},[a._v("#")]),a._v(" Solution")]),a._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'éo'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("normalize")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("==")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'éo'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("normalize")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("/// true")]),a._v("\n")])])]),s("p",[a._v("Nhớ Babel / polyfill nếu browser ko support")]),a._v(" "),s("hr"),a._v(" "),s("h2",{attrs:{id:"a-a-false"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#a-a-false","aria-hidden":"true"}},[a._v("#")]),a._v(" a == a (false)")]),a._v(" "),s("p",[a._v("Chính "),s("code",[a._v("a")]),a._v(" so sánh với nó mà vẫn "),s("code",[a._v("false")]),a._v(". Đây là case giá trị của a là "),s("code",[a._v("NaN")])]),a._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("var")]),a._v(" a "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("NaN")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v(" a "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("==")]),a._v(" a "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// false")]),a._v("\n")])])]),s("p",[a._v("Nên cẩn trọng khi làm việc tính toán, nên nhớ có case NaN này.")]),a._v(" "),s("hr"),a._v(" "),s("h2",{attrs:{id:"_1-2-3-map-parseint"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-3-map-parseint","aria-hidden":"true"}},[a._v("#")]),a._v(' ["1", "2", "3"].map(parseInt);')]),a._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"2"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"3"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("map")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("parseInt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" \n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("/// expect :  [1, 2, 3]")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("/// thực tế :  [1, NaN, NaN] ")]),a._v("\n")])])]),s("h3",{attrs:{id:"nguyen-nhan"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nguyen-nhan","aria-hidden":"true"}},[a._v("#")]),a._v(" Nguyên nhân")]),a._v(" "),s("p",[a._v("Cú pháp của "),s("code",[a._v("array.map")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("var new_array = arr.map(function callback(currentValue[, index[, array]]) {\n    // Return element for new_array\n}[, thisArg])\n")])])]),s("p",[a._v("Cú pháp của "),s("code",[a._v("parseInt")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("parseInt(string, radix);\n")])])]),s("p",[a._v("=> cho nên 2 params đầu của callback, sẽ truyền xuống tham số của parseInt nên sai tè le")]),a._v(" "),s("h3",{attrs:{id:"phong-tranh"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#phong-tranh","aria-hidden":"true"}},[a._v("#")]),a._v(" Phòng tránh")]),a._v(" "),s("ul",[s("li",[a._v("Viết rõ ràng ra, đừng viết tắt, giả bộ nguy hiểm làm gì =))")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('["1", "2", "3"].map((v) => parseInt(v)); \n')])])]),s("hr"),a._v(" "),s("h2",{attrs:{id:"mat-attribute-khi-json-stringify"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mat-attribute-khi-json-stringify","aria-hidden":"true"}},[a._v("#")]),a._v(' Mất attribute khi "JSON.stringify"')]),a._v(" "),s("ul",[s("li",[a._v("Server Node: Dùng "),s("code",[a._v("express")]),a._v(" truyền dữ liệu JSON xuống client")])]),a._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[a._v("obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("total "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nres"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("json")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" \n")])])]),s("ul",[s("li",[a._v("Client nhận response nhưng không thấy attribute "),s("code",[a._v("total")]),a._v(" của "),s("code",[a._v("obj")])])]),a._v(" "),s("h3",{attrs:{id:"nguyen-nhan-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nguyen-nhan-2","aria-hidden":"true"}},[a._v("#")]),a._v(" Nguyên nhân")]),a._v(" "),s("ul",[s("li",[s("code",[a._v("obj")]),a._v(" thuộc 1 instance của 1 ("),s("code",[a._v("class")]),a._v(") đã implement function  "),s("code",[a._v("toJSON")]),a._v(". Dẫn đến "),s("code",[a._v("res.json")]),a._v(" gọi "),s("code",[a._v("JSON.stringify")]),a._v(", rồi trong  "),s("code",[a._v("JSON.stringify")]),a._v(" gọi hàm "),s("code",[a._v("toJSON")]),a._v(" override và lỗi :v")])]),a._v(" "),s("h3",{attrs:{id:"phong-tranh-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#phong-tranh-2","aria-hidden":"true"}},[a._v("#")]),a._v(" Phòng tránh")]),a._v(" "),s("ul",[s("li",[a._v("Cẩn trọng khi sử dụng các object không rõ nguồn gốc =))")]),a._v(" "),s("li",[a._v("Sử dụng DTO / request.")]),a._v(" "),s("li",[a._v("Nghỉ code")])])])}],!1,null,null,null);t.default=e.exports}}]);