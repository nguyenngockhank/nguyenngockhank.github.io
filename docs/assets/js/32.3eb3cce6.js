(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{266:function(n,t,h){"use strict";h.r(t);var a=h(2),i=Object(a.a)({},(function(){var n=this,t=n.$createElement,h=n._self._c||t;return h("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[h("h1",{attrs:{id:"toi-uu-mysql-database-tuning"}},[h("a",{staticClass:"header-anchor",attrs:{href:"#toi-uu-mysql-database-tuning","aria-hidden":"true"}},[n._v("#")]),n._v(" T·ªëi ∆∞u MySQL (Database Tuning)")]),n._v(" "),h("div",{staticClass:"tip custom-block"},[h("p",[n._v("Database tuning describes a group of activities used to optimize and homogenize the performance of a database.")])]),n._v(" "),h("h2",{attrs:{id:"khoa-cua-khoa-ngo"}},[h("a",{staticClass:"header-anchor",attrs:{href:"#khoa-cua-khoa-ngo","aria-hidden":"true"}},[n._v("#")]),n._v(" Kh√≥a c·ª≠a kh√≥a ng√µ")]),n._v(" "),h("p",[n._v("N·∫øu nh·∫•t qu√°n d·ªØ li·ªáu, r√†ng bu·ªôc to√†n v·∫πn kh√¥ng l√† v·∫•n ƒë·ªÅ th√¨ b·ªè m·∫•y c√°i quan h·ªá kh√≥a ch√≠nh, kh√≥a ngo·∫°i.")]),n._v(" "),h("h2",{attrs:{id:"thiet-ke-pha-chuan"}},[h("a",{staticClass:"header-anchor",attrs:{href:"#thiet-ke-pha-chuan","aria-hidden":"true"}},[n._v("#")]),n._v(" Thi·∫øt k·∫ø ph√° chu·∫©n")]),n._v(" "),h("p",[n._v("ƒê√¥i khi thi·∫øt k·∫ø chu·∫©n, kh√¥ng d∆∞ th·ª´a d·ªØ li·ªáu l·∫°i g√¢y ra c√¢u query ph·ª©c t·∫°p nh∆∞ c, nh∆∞ b, nh∆∞ l... n√™n ph√° chu·∫©n, ch·∫•p nh·∫≠n d∆∞ th·ª´a l√† c√°ch c√≥ th·ªÉ xem x√©t =))")]),n._v(" "),h("h2",{attrs:{id:"su-dung-co-chon-loc"}},[h("a",{staticClass:"header-anchor",attrs:{href:"#su-dung-co-chon-loc","aria-hidden":"true"}},[n._v("#")]),n._v(" S·ª≠ d·ª•ng c√≥ ch·ªçn l·ªçc")]),n._v(" "),h("ul",[h("li",[n._v("Ch·ªâ SELECT nh·ªØng c·ªôt c·∫ßn thi·∫øt, ƒë·ª´ng "),h("code",[n._v("SELECT *")]),n._v(" v√¥ t·ªôi v·∫°")]),n._v(" "),h("li",[n._v("Ch·ªâ JOIN v·ªõi nh·ªØng b·∫£ng c·∫ßn thi·∫øt, nghe c·ª© nh∆∞ ƒë√πa nh∆∞ng m√† th·∫ø √©o n√†o... =))")]),n._v(" "),h("li",[n._v("√ù th·ª©c sort: kh√¥ng ch·ªâ l√† "),h("code",[n._v("ORDER BY")]),n._v(" l√† di·ªÖn ra sort m√† k·ªÉ c·∫£ "),h("code",[n._v("DISTINCT")]),n._v(" hay "),h("code",[n._v("GROUP BY")]),n._v(" ho·∫∑c l√† "),h("code",[n._v("UNION")]),n._v(" "),h("ul",[h("li",[n._v("Kh√¥ng s·ª≠ d·ª•ng "),h("code",[n._v("HAVING")]),n._v(" n·∫øu c√≥ th·ªÉ d√πng "),h("code",[n._v("WHERE")]),n._v(". ƒê∆°n gi·∫£n l√† "),h("code",[n._v("WHERE")]),n._v(" s·∫Ω gi·ªõi h·∫°n record tr·∫£ v·ªÅ tr∆∞·ªõc khi "),h("code",[n._v("SORT")]),n._v(" r·ªìi "),h("code",[n._v("GROUP BY")]),n._v(".")]),n._v(" "),h("li",[n._v("Ph√¢n bi·ªát gi·ªØa 2 c√°i n√†y: "),h("code",[n._v("UNION ALL")]),n._v(" hay "),h("code",[n._v("UNION")]),n._v(". C√°i sau c√≥ s·ª≠ d·ª•ng "),h("code",[n._v("DISTINCT")]),n._v(" ƒë·ªÉ lo·∫°i b·ªè record gi·ªëng nhau.")])])])]),n._v(" "),h("h2",{attrs:{id:"index-column"}},[h("a",{staticClass:"header-anchor",attrs:{href:"#index-column","aria-hidden":"true"}},[n._v("#")]),n._v(" Index column")]),n._v(" "),h("p",[n._v("C√≥ 4 lo·∫°i t√πy m·ª•c ƒë√≠ch s·ª≠ d·ª•ng m√† l√¥i ra x√†i th√¥i.")]),n._v(" "),h("p",[n._v("4 lo·∫°i n√†o th√¨ "),h("router-link",{attrs:{to:"/db/mysql_snippets.html#index"}},[n._v("üìï note ·ªü ƒë√¢y")])],1),n._v(" "),h("h3",{attrs:{id:"phan-khoa-hoc"}},[h("a",{staticClass:"header-anchor",attrs:{href:"#phan-khoa-hoc","aria-hidden":"true"}},[n._v("#")]),n._v(" Ph·∫£n khoa h·ªçc")]),n._v(" "),h("p",[h("strong",[n._v("M·∫∑c d√π ƒë√£ index nh∆∞ng nh·ªØng c√¢u ƒëi·ªÅu ki·ªán d∆∞·ªõi ƒë√¢y s·∫Ω b√≥p d*i ƒë·ªìng ƒë·ªôi:")])]),n._v(" "),h("ul",[h("li",[n._v("D√≠nh t·ªõi NULL: "),h("code",[n._v("IS NULL")]),n._v(", "),h("code",[n._v("IS NOT NULL")])]),n._v(" "),h("li",[n._v("Ph·ªß ƒë·ªãnh:  "),h("code",[n._v("!=")]),n._v(", "),h("code",[n._v("<>")]),n._v(",  "),h("code",[n._v("NOT IN")]),n._v(", "),h("code",[n._v("NOT LIKE")])]),n._v(" "),h("li",[h("code",[n._v("OR")]),n._v(" trong ƒëi·ªÅu ki·ªán")]),n._v(" "),h("li",[n._v("LIKE 2 l·∫ßn =)) "),h("code",[n._v("LIKE '%tha tim%'")]),n._v(", v√† ngay c·∫£ "),h("code",[n._v("LIKE '%tha-tim'")]),n._v(" th√¨ c≈©ng ch·∫£ ƒë∆∞·ª£c t√≠ index n√†o ƒë√¢u nha. C√°i n√†y th√¨ nhi·ªÅu khi b·∫•t kh·∫£ kh√°ng =)) ch·∫•p nh·∫≠n th√¥i")])]),n._v(" "),h("p",[h("strong",[n._v("D∆∞·ªõi ƒë√¢y l√† m·ªôt s·ªë c√°ch kh√°ch l√†m gi·∫£m hi·ªáu nƒÉng index =))")])]),n._v(" "),h("ul",[h("li",[n._v("ƒê·∫∑t sai th·ª© t·ª± c·ªôt tr√™n index nhi·ªÅu c·ªôt.")]),n._v(" "),h("li",[n._v("So s√°nh 2 l·∫ßn =)) "),h("code",[n._v("WHERE score >= 2")]),n._v(". C√°i n√†y b·∫±ng v·ªõi vi·ªác "),h("code",[n._v("WHERE score > 2 OR score = 2")]),n._v(". N·∫æUch·ªâ thao t√°c v·ªõi s·ªë nguy√™n th√¨ c√≥ th·ªÉ s·ª≠a l·∫°i "),h("code",[n._v("WHERE score > 1")]),n._v(".")])]),n._v(" "),h("p",[h("strong",[n._v("V√†i l∆∞u √Ω kh√°c v·ªÅ index:")])]),n._v(" "),h("ul",[h("li",[n._v("Kh√¥ng n√™n s·ª≠ d·ª•ng tr√™n b·∫£ng nh·ªè")]),n._v(" "),h("li",[n._v("Kh√¥ng n√™n s·ª≠ d·ª•ng tr√™n b·∫£ng th∆∞·ªùng update / insert")]),n._v(" "),h("li",[n._v("kh√¥ng n√™n s·ª≠ d·ª•ng tr√™n c·ªôt th∆∞·ªùng update / insert")]),n._v(" "),h("li",[n._v("Kh√¥ng n√™n s·ª≠ d·ª•ng tr√™n c·ªôt nhi·ªÅu gi√° tr·ªã "),h("code",[n._v("NULL")])]),n._v(" "),h("li",[n._v("Kh√¥ng n√™n s·ª≠ d·ª•ng tr√™n c·ªôt c√≥ √≠t gi√° tr·ªã. Vd nh∆∞ "),h("code",[n._v("active")]),n._v(" v√† "),h("code",[n._v("inactive")])])]),n._v(" "),h("h2",{attrs:{id:"su-dung-orm-hop-ly"}},[h("a",{staticClass:"header-anchor",attrs:{href:"#su-dung-orm-hop-ly","aria-hidden":"true"}},[n._v("#")]),n._v(" S·ª≠ d·ª•ng ORM h·ª£p l√Ω")]),n._v(" "),h("p",[n._v("C√¢n nh·∫Øc l√∫c n√†o c·∫ßn s·ª≠ d·ª•ng Lazy loading, l√∫c n√†o c·∫ßn Eager Loading. Nh·∫•t l√† khi l√†m vi·ªác v·ªõi Array.")]),n._v(" "),h("h2",{attrs:{id:"job-schedule"}},[h("a",{staticClass:"header-anchor",attrs:{href:"#job-schedule","aria-hidden":"true"}},[n._v("#")]),n._v(" Job schedule")]),n._v(" "),h("p",[n._v("Ch·∫°y script ƒë·ªÉ th·ª±c hi·ªán Job schedule (Crontab)  ho·∫∑c Backup database n√™n th·ª±c hi·ªán v√†o l√∫c √≠t ng∆∞·ªùi s·ª≠ d·ª•ng s·∫£n ph·∫©m nh·∫•t.")]),n._v(" "),h("h2",{attrs:{id:"explain"}},[h("a",{staticClass:"header-anchor",attrs:{href:"#explain","aria-hidden":"true"}},[n._v("#")]),n._v(" EXPLAIN")]),n._v(" "),h("p",[n._v("S·ª≠ d·ª•ng "),h("code",[n._v("EXPLAIN "+n._s(n.query))]),n._v(" ƒë·ªÉ ph√¢n t√≠ch c√¢u l·ªánh üòÑ Xem ƒë∆∞·ª£c ƒëang join c√°i g√¨, c√≥ index kh√¥ng, bao nhi√™u rows,... "),h("a",{attrs:{href:"https://dzone.com/articles/understanding-mysql-queries-with-explain",target:"_blank",rel:"noopener noreferrer"}},[n._v("S√°ch √¥n thi h·ªçc sinh gi·ªèi"),h("OutboundLink")],1)]),n._v(" "),h("h2",{attrs:{id:"va-su-dung-cac-mo-hinh-scale"}},[h("a",{staticClass:"header-anchor",attrs:{href:"#va-su-dung-cac-mo-hinh-scale","aria-hidden":"true"}},[n._v("#")]),n._v(" V√† s·ª≠ d·ª•ng c√°c m√¥ h√¨nh scale")]),n._v(" "),h("p",[h("router-link",{attrs:{to:"/db/db/architect.html"}},[n._v("üìï Xem b√†i n√†y")])],1)])}),[],!1,null,null,null);t.default=i.exports}}]);