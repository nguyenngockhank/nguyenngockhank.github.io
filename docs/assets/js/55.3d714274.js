(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{1228:function(e,t,a){e.exports=a.p+"assets/img/payment-overview.2f34462b.png"},1229:function(e,t,a){e.exports=a.p+"assets/img/payment-process.4d105a14.png"},1230:function(e,t,a){e.exports=a.p+"assets/img/flow.3d63a0fb.png"},1231:function(e,t,a){e.exports=a.p+"assets/img/integration.15941bad.png"},1232:function(e,t,a){e.exports=a.p+"assets/img/payment-gateway-providers-compared.bb0b624d.png"},1754:function(e,t,a){"use strict";a.r(t);var s=a(7),r=Object(s.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"payment-notes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#payment-notes"}},[e._v("#")]),e._v(" Payment notes")]),e._v(" "),s("p",[s("img",{attrs:{src:a(1228),alt:"Payment overview"}})]),e._v(" "),s("h2",{attrs:{id:"payment-flow"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#payment-flow"}},[e._v("#")]),e._v(" Payment flow")]),e._v(" "),s("ul",[s("li",[s("strong",[e._v("Payer / Card holder")]),e._v(" that decides to pay for the service.")]),e._v(" "),s("li",[s("strong",[e._v("Merchant")]),e._v(" (business owner or service provider) to whose account the funds are transmitted.")]),e._v(" "),s("li",[s("strong",[e._v("Acquirer")]),e._v(" processes payments on behalf of the merchant and routes them through the "),s("strong",[e._v("Card Networks")]),e._v(" (such as Visa or Mastercard) to the issuing bank.")]),e._v(" "),s("li",[e._v("Seldom acquirers may attract third party providers to help process payments. Payment service providers (PSP) can offer the organisation of payment reception, Internet acquiring, agency cooperation scheme, act as international or local companies, have different conditions for opening accounts.")]),e._v(" "),s("li",[s("strong",[e._v("Issuer bank")]),e._v(" that extends cards to consumers on behalf of the card networks.")])]),e._v(" "),s("Tabs",[s("Tab",{attrs:{label:"Pic1"}},[s("p",[s("img",{attrs:{src:a(1229),alt:"flow"}})])]),e._v(" "),s("Tab",{attrs:{label:"Pic2"}},[s("p",[s("img",{attrs:{src:a(1230),alt:"flow"}})])])],1),e._v(" "),s("ol",[s("li",[e._v("The customer places an order, fills in all necessary card (account) data for payment, and press a 'Pay' button.")]),e._v(" "),s("li",[e._v("The encrypted data are sent to a payment gateway that collects payment details, initiates a transaction and sends data to an acquirer. Yet, the acquirer by itself may act as a payment gateway in several cases.")]),e._v(" "),s("li",[e._v("After confirming transaction data and, optionally, checking the payer by OTP verification, the acquirer transfer data to a payment system.")]),e._v(" "),s("li",[e._v("The payment system validates the transaction data and passes them to an issuer bank.")]),e._v(" "),s("li",[e._v("The issuer also checks the authorisation request and responds to the payment processor with the transaction status or error details. Before this, the issuer bank may request 3DS verification from the payer.")]),e._v(" "),s("li",[e._v("Through the payment gateway, the transaction status is returned to the merchant.")]),e._v(" "),s("li",[e._v("The merchant displays a status page with the transaction status (accepted or denied). And the issuer bank also sends an appropriate message to the customer.")]),e._v(" "),s("li",[e._v("Within a day or a couple of days, during clearing process, the issuing bank transfers funds to the merchant's account.")])]),e._v(" "),s("h2",{attrs:{id:"integration"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#integration"}},[e._v("#")]),e._v(" Integration")]),e._v(" "),s("p",[s("img",{attrs:{src:a(1231),alt:"flow"}}),e._v(" "),s("em",[e._v("Typicla Payment gateway integration")])]),e._v(" "),s("h3",{attrs:{id:"authorization-capture"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#authorization-capture"}},[e._v("#")]),e._v(" Authorization & Capture")]),e._v(" "),s("ul",[s("li",[s("strong",[e._v("Authorization")]),e._v("  The bank checks for sufficient funds and, if successful, holds the amount on the customer‚Äôs account to guarantee it or the merchant.")]),e._v(" "),s("li",[s("strong",[e._v("Capture")]),e._v(" The money moves from the issuing bank to the merchant‚Äôs account.")])]),e._v(" "),s("p",[e._v("Separating authorization and capture is useful if you need to take additional actions between confirming that a customer is able to pay and collecting their payment. For example, if you‚Äôre selling stock-limited items, you may need to confirm that an item purchased by your customer using Checkout is still available before capturing their payment and fulfilling the purchase.")]),e._v(" "),s("h3",{attrs:{id:"stripe-separate-authorization-capture"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#stripe-separate-authorization-capture"}},[e._v("#")]),e._v(" "),s("a",{attrs:{href:"https://stripe.com/docs/payments/accept-a-payment?platform=web&ui=checkout#auth-and-capture",target:"_blank",rel:"noopener noreferrer"}},[e._v("Stripe: Separate authorization & capture"),s("OutboundLink")],1)]),e._v(" "),s("div",{staticClass:"language-js extra-class"},[s("div",{staticClass:"highlight-lines"},[s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("div",{staticClass:"highlighted"},[e._v("¬†")]),s("br"),s("br"),s("br"),s("br"),s("br")]),s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" session "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("await")]),e._v(" stripe"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("checkout"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("sessions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("create")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  line_items"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n      price"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'{{PRICE_ID}}'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n      quantity"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  mode"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'payment'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  payment_intent_data"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    capture_method"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'manual'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  success_url"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'https://example.com/success.html'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  cancel_url"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'https://example.com/cancel.html'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),s("p",[e._v("To capture an uncaptured payment use "),s("a",{attrs:{href:"https://stripe.com/docs/api/payment_intents/capture",target:"_blank",rel:"noopener noreferrer"}},[e._v("capture API"),s("OutboundLink")],1)]),e._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" paymentIntent "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("await")]),e._v(" stripe"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("paymentIntents"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("capture")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'pi_3NDBAc2eZvKYlo2C0KIz0yl1'")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),s("h3",{attrs:{id:"mollie-two-flows-authorized-and-paid"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mollie-two-flows-authorized-and-paid"}},[e._v("#")]),e._v(" "),s("a",{attrs:{href:"https://docs.mollie.com/orders/status-changes#two-flows-authorized-and-paid",target:"_blank",rel:"noopener noreferrer"}},[e._v("Mollie: Two flows: authorized and paid"),s("OutboundLink")],1)]),e._v(" "),s("p",[s("img",{attrs:{src:"https://assets.docs.mollie.com/_images/order-status-flow@2x.png",alt:"mollie order status"}})]),e._v(" "),s("p",[e._v("We take action "),s("code",[e._v("cancel")]),e._v(" the payment when "),s("code",[e._v("authorized")]),e._v(", "),s("code",[e._v("refund")]),e._v(" if payment "),s("code",[e._v("paid")]),e._v(", "),s("code",[e._v("completed")]),e._v(", "),s("code",[e._v("shipping")]),e._v(".")]),e._v(" "),s("ul",[s("li",[s("code",[e._v("refund")]),e._v(" action could be charged double (from the original payment, and the refund payment)")]),e._v(" "),s("li",[e._v("increase action "),s("code",[e._v("cancel")]),e._v(" to avoid being charged")]),e._v(" "),s("li",[s("a",{attrs:{href:"https://docs.mollie.com/reference/v2/orders-api/cancel-order-lines",target:"_blank",rel:"noopener noreferrer"}},[e._v("Cancel order lines"),s("OutboundLink")],1)])]),e._v(" "),s("h3",{attrs:{id:"avoid-missing-payment-status-changes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#avoid-missing-payment-status-changes"}},[e._v("#")]),e._v(" Avoid missing payment status changes")]),e._v(" "),s("ol",[s("li",[e._v("Redirect - a request from FE to BE")]),e._v(" "),s("li",[e._v("Instant Payment notification (IPN) / Webhooks  - a request from PSP to your BE")]),e._v(" "),s("li",[e._v("Polling - a request from your BE to PSP (be carefully with ratelimit)")])]),e._v(" "),s("p",[s("em",[e._v("Note")]),e._v(": Use a distributed lock to avoid race-condition if implement multi ways to fulfill the payment.")]),e._v(" "),s("p",[s("strong",[e._v("See more")])]),e._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://docs.mollie.com/payments/status-changes",target:"_blank",rel:"noopener noreferrer"}},[e._v("Mollie: Payment status changes"),s("OutboundLink")],1)]),e._v(" "),s("li",[s("a",{attrs:{href:"https://docs.mollie.com/orders/status-changesges",target:"_blank",rel:"noopener noreferrer"}},[e._v("Mollie: Order status changes"),s("OutboundLink")],1)]),e._v(" "),s("li",[s("a",{attrs:{href:"https://stripe.com/docs/payments/intents",target:"_blank",rel:"noopener noreferrer"}},[e._v("Stripe: How payment intents work"),s("OutboundLink")],1)])]),e._v(" "),s("div",{staticClass:"custom-block danger"},[s("p",{staticClass:"custom-block-title"},[e._v("Stripe Failed Payment")]),e._v(" "),s("p",[e._v("A "),s("strong",[e._v("failed")]),e._v(" payemnt intent of Stripe can become a "),s("strong",[e._v("succeeded")]),e._v(" after payer retries.")])]),e._v(" "),s("h3",{attrs:{id:"tokenization"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tokenization"}},[e._v("#")]),e._v(" Tokenization")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://i.pinimg.com/originals/02/8f/14/028f14f35c0f6bd9fcc4dfdbe54918d3.jpg",alt:"Tokenization"}})]),e._v(" "),s("div",{staticClass:"custom-block danger"},[s("p",{staticClass:"custom-block-title"},[e._v("‚ö†Ô∏è‚ö†Ô∏è‚ö†Ô∏è Can a Merchant Store Credit Card Information?")]),e._v(" "),s("p",[e._v("To answer briefly, yes, merchants can store credit card information.")]),e._v(" "),s("p",[e._v("The long answer is that merchants must be "),s("strong",[e._v("PCI compliant")]),e._v(" to store their credit card data. However, there‚Äôs also some data you can keep and some you can‚Äôt make sure you securely handle your customers‚Äô credit card information.")]),e._v(" "),s("p",[s("a",{attrs:{href:"https://www.pcidssguide.com/pci-requirements-for-storing-credit-card-information/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Read more: PCI requirements for storing credit card"),s("OutboundLink")],1)])]),e._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[e._v("Use Tokenization")]),e._v(" "),s("p",[e._v("Tokenization is the process uses to collect sensitive card or bank account details, or personally identifiable information (PII), directly from your customers in a secure manner.")]),e._v(" "),s("p",[s("strong",[e._v("A token representing this information is returned to your server to use")]),e._v(". You should use our recommended payments integrations to perform this process "),s("strong",[e._v("client-side")]),e._v(". This ensures that no sensitive card data touches your server, and allows your integration to operate in a PCI-compliant way.")])]),e._v(" "),s("p",[e._v("Note: Card Token is valid in 1 hour")]),e._v(" "),s("p",[e._v("Read more:")]),e._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://stripe.com/docs/issuing/controls/token-management",target:"_blank",rel:"noopener noreferrer"}},[e._v("Stripe - Token Management (Beta)"),s("OutboundLink")],1)]),e._v(" "),s("li",[s("a",{attrs:{href:"https://stripe.com/docs/payments/accept-a-payment?platform=web&ui=checkout#save-payment-method-details",target:"_blank",rel:"noopener noreferrer"}},[e._v("Stripe - Save payment method details"),s("OutboundLink")],1)]),e._v(" "),s("li",[s("a",{attrs:{href:"https://docs.mollie.com/reference/v2/payments-api/create-payment#credit-card",target:"_blank",rel:"noopener noreferrer"}},[e._v("Mollie - Create payment (Credit card)"),s("OutboundLink")],1)])]),e._v(" "),s("h3",{attrs:{id:"recurring-payments"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#recurring-payments"}},[e._v("#")]),e._v(" Recurring payments")]),e._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[e._v("Reducing the risk of chargebacks")]),e._v(" "),s("p",[e._v("To reduce the risk of chargebacks, it‚Äôs recommended to communicate how often and how much the customer will be charged as clearly as possible. We suggest notifying the customer a couple of days in advance of the next payment, for example by sending them an email.")])]),e._v(" "),s("p",[s("strong",[e._v("Types")]),e._v(":")]),e._v(" "),s("ul",[s("li",[e._v("Subscriptions: billings, recurring donations, ...")]),e._v(" "),s("li",[e._v("Installments: let you split a payment into a few recurring charges")])]),e._v(" "),s("p",[s("strong",[e._v("Refs")]),e._v(":")]),e._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://docs.mollie.com/payments/recurring",target:"_blank",rel:"noopener noreferrer"}},[e._v("Mollie Recurring "),s("OutboundLink")],1)]),e._v(" "),s("li",[s("a",{attrs:{href:"https://stripe.com/docs/recurring-payments",target:"_blank",rel:"noopener noreferrer"}},[e._v("Stripe Recurring payments"),s("OutboundLink")],1)])]),e._v(" "),s("h3",{attrs:{id:"avoid-double-charge"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#avoid-double-charge"}},[e._v("#")]),e._v(" Avoid double charge")]),e._v(" "),s("p",[e._v("When we design the payment system, it is important to guarantee that the payment system executes a payment order exactly-once.")]),e._v(" "),s("p",[e._v("At the first glance, exactly-once delivery seems very hard to tackle, but if we divide the problem into two parts, it is much easier to solve. Mathematically, an operation is executed exactly-once if:")]),e._v(" "),s("ol",[s("li",[e._v("It is executed at least once.")]),e._v(" "),s("li",[e._v("At the same time, it is executed at most once.")])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("Exactly-once = Retry + Idempotency \n")])])]),s("ul",[s("li",[e._v("Retry: Occasionally, we need to retry a payment transaction due to network errors or timeout. Retry provides the "),s("strong",[e._v("at-least-once")]),e._v(" guarantee.")]),e._v(" "),s("li",[e._v("Idempotency: From an API standpoint, idempotency means clients can make the same call repeatedly and produce the same result.")])]),e._v(" "),s("p",[e._v("For communication between clients (web and mobile applications) and servers, an idempotency key is usually a unique value that is generated by clients and expires after a certain period of time.")]),e._v(" "),s("h2",{attrs:{id:"payment-security"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#payment-security"}},[e._v("#")]),e._v(" Payment security")]),e._v(" "),s("p",[e._v("The table below summarizes techniques that are commonly used in payment security.")]),e._v(" "),s("table",[s("thead",[s("tr",[s("th",[e._v("Problem")]),e._v(" "),s("th",[e._v("Solution")])])]),e._v(" "),s("tbody",[s("tr",[s("td",[e._v("Request/response eavesdropping")]),e._v(" "),s("td",[e._v("Use HTTPS")])]),e._v(" "),s("tr",[s("td",[e._v("Data tampering")]),e._v(" "),s("td",[e._v("Enforce encryption and integrity monitoring")])]),e._v(" "),s("tr",[s("td",[e._v("Man-in-the-middle attack")]),e._v(" "),s("td",[e._v("Use SSL and authentication certificates")])]),e._v(" "),s("tr",[s("td",[e._v("Data loss")]),e._v(" "),s("td",[e._v("Database replication across multiple regions and take snapshot of data")])]),e._v(" "),s("tr",[s("td",[e._v("Distributed denial-of-service attack (DDoS)")]),e._v(" "),s("td",[e._v("Rate limiting and firewall")])]),e._v(" "),s("tr",[s("td",[e._v("Card theft")]),e._v(" "),s("td",[e._v("Tokenization. Instead of using real card numbers, tokens are stored and used for payment")])]),e._v(" "),s("tr",[s("td",[e._v("PCI compliance")]),e._v(" "),s("td",[e._v("PCI DSS is an information security standard for organizations that handle branded credit cards")])]),e._v(" "),s("tr",[s("td",[e._v("Fraud")]),e._v(" "),s("td",[e._v("Address verification, card verification value (CVV), user behavior analysis, etc.")])])])]),e._v(" "),s("h2",{attrs:{id:"popular-psp-s"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#popular-psp-s"}},[e._v("#")]),e._v(" Popular PSP(s)")]),e._v(" "),s("p",[s("img",{attrs:{src:a(1232),alt:"Compare"}})]),e._v(" "),s("h2",{attrs:{id:"database-design"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#database-design"}},[e._v("#")]),e._v(" Database Design")]),e._v(" "),s("h3",{attrs:{id:"never-use-floating-point-double-data-types-for-monetary-calculations"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#never-use-floating-point-double-data-types-for-monetary-calculations"}},[e._v("#")]),e._v(" Never Use Floating-Point / Double Data types for Monetary Calculations!")]),e._v(" "),s("p",[e._v("Floating point values, or even (Double precision floating point format), should be avoided when using a currency amount with fractions (like Dollars and cents), in its nature, it cannot be stored exactly as is in memory.")]),e._v(" "),s("p",[e._v("Say we want to store 0.1 dollars, any floating-point data type can not store it as is, it get‚Äôs stored as an approximation (0.10000000149‚Ä¶.).")]),e._v(" "),s("p",[e._v("When doing a series of math operations, some problem can rise, that is called (loss of significance), the errors can be amplified and cause trouble üßê.\nthe solution is simple in swift, use NSNumber")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("let myBalance = 12.333\nlet decimal: Decimal = NSNumber(floatLiteral: 12.333).decimalValue\nlet result = decimal / 3\n")])])]),s("ul",[s("li",[s("a",{attrs:{href:"https://dba.stackexchange.com/questions/248815/monetary-value-in-integer-over-decimal-datatype",target:"_blank",rel:"noopener noreferrer"}},[e._v("Monetary value in integer over decimal datatype"),s("OutboundLink")],1)]),e._v(" "),s("li",[s("a",{attrs:{href:"https://laracasts.com/discuss/channels/laravel/best-data-type-is-for-storing-money-values",target:"_blank",rel:"noopener noreferrer"}},[e._v("best data type is for storing money values"),s("OutboundLink")],1)])]),e._v(" "),s("h2",{attrs:{id:"payment-reconciliation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#payment-reconciliation"}},[e._v("#")]),e._v(" Payment reconciliation")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://i.pinimg.com/originals/72/9d/c9/729dc9e71675d04479968afee8ddde39.jpg",alt:"Payment reconciliation"}})]),e._v(" "),s("h3",{attrs:{id:"foreign-currency"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#foreign-currency"}},[e._v("#")]),e._v(" Foreign Currency:")]),e._v(" "),s("p",[e._v("Dealing with different currencies adds complexity.\nConversions between currencies by payment providers (like Paypal) need to be reconciled.")]),e._v(" "),s("h3",{attrs:{id:"multiple-events-per-purchase"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#multiple-events-per-purchase"}},[e._v("#")]),e._v(" Multiple Events per Purchase:")]),e._v(" "),s("p",[e._v("A single purchase triggers multiple financial events (debits & credits) at different times:\nWhen you use Paypal (considering time and currency).\nWhen money moves from Paypal to your bank (potentially involving another currency conversion).\nAll these transactions need to be reconciled for accurate accounting.")]),e._v(" "),s("h3",{attrs:{id:"platform-specific-buyer-issues"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#platform-specific-buyer-issues"}},[e._v("#")]),e._v(" Platform-Specific Buyer Issues:")]),e._v(" "),s("p",[e._v('Paypal\'s "shadow transaction" is an example. Funds reserved for a pending purchase (A) might be used partially for a newer purchase (B) if A gets cancelled. This can lead to confusion with bank withdrawals for B.')]),e._v(" "),s("h3",{attrs:{id:"ideal-reconciliation-process"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ideal-reconciliation-process"}},[e._v("#")]),e._v(" Ideal Reconciliation Process:")]),e._v(" "),s("p",[e._v("A smooth flow of information between your shop, payment provider, and accounting system is key.\nOrder IDs and payment IDs should be carried through the process to create invoices automatically.\nThis allows for easier reconciliation of accounts receivable and payable.")]),e._v(" "),s("h2",{attrs:{id:"stripe-api-redesign"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#stripe-api-redesign"}},[e._v("#")]),e._v(" Stripe API Redesign")]),e._v(" "),s("p",[e._v("Stage 1  2011: The Stripe API, or what could be described as ‚Äú7 lines of code‚Äù, revolved around the Charge concept. At this point, it exclusively handled card payments.")]),e._v(" "),s("p",[e._v("Stage 2  2011-2015: the Stripe API introduced the Token API. Its goal was to enable its customers to avoid the complex and tedious process of adhering to PCI compliance requirements.")]),e._v(" "),s("p",[e._v("Stage 3  2015: ACH and Bitcoin payments entered the scene. Because these types of transactions needed some time to ‚Äúfinalize‚Äù, Stripe integrated a feedback loop into the API. The change helped indicate the success of the charge.")]),e._v(" "),s("p",[e._v("Stage 4  2015-2017: This stage saw the addition of even more payment methods, including AliPay, WeChat Pay, and iDeal. As a result, the Source API was developed as an abstraction to support these varying payment methods.")]),e._v(" "),s("p",[e._v("Stage 5  2017-2018: As the number of supported payment methods grew, the team spent several months drafting a "),s("strong",[e._v("Unified Payments API")]),e._v(", with the introduction of "),s("em",[e._v("PaymentIntents")]),e._v(" and "),s("em",[e._v("PaymentMethod")]),e._v(".")]),e._v(" "),s("p",[e._v("Stage 6  2018-2020: Stripe invested two years to migrate their clients to the "),s("strong",[e._v("Unified Payments API")]),e._v(".")]),e._v(" "),s("h2",{attrs:{id:"acronyms"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#acronyms"}},[e._v("#")]),e._v(" Acronyms")]),e._v(" "),s("ul",[s("li",[e._v("PCI DSS = Payment Card Industry Data Security Standard")]),e._v(" "),s("li",[e._v("PSP = Payment Service Provider")]),e._v(" "),s("li",[e._v("CVV = Card Verification Value")])])],1)}),[],!1,null,null,null);t.default=r.exports}}]);