(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{1289:function(t,e,a){"use strict";a.r(e);var s=a(7),r=Object(s.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"logging-audit-notes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#logging-audit-notes"}},[t._v("#")]),t._v(" Logging / Audit notes")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("You never know what data you can collect today that will be useful to you tomorrow.")])]),t._v(" "),s("TagLinks"),t._v(" "),s("h2",{attrs:{id:"correlation-id-pattern"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#correlation-id-pattern"}},[t._v("#")]),t._v(" Correlation ID Pattern")]),t._v(" "),s("p",[t._v("A correlation ID is a unique identifier assigned to a request as it enters a distributed system. It's propagated through all components involved in processing the request, serving as a thread that connects related log entries, metrics, and traces. This pattern is essential for debugging, monitoring, and troubleshooting complex distributed systems.")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.pinimg.com/originals/1b/b0/f7/1bb0f7f9bd2f2df15b8aae755aad8c34.jpg",alt:"Correlation ID Pattern "}})]),t._v(" "),s("h3",{attrs:{id:"how-it-works"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#how-it-works"}},[t._v("#")]),t._v(" How It Works")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("Generation")]),t._v(": A correlation ID is typically generated at the entry point of a system (e.g., API gateway, load balancer).")]),t._v(" "),s("li",[s("strong",[t._v("Propagation")]),t._v(": The ID is included in subsequent requests or messages as they move through the system. This can be done through headers, message bodies, or context propagation mechanisms.")]),t._v(" "),s("li",[s("strong",[t._v("Correlation")]),t._v(": Log entries, metrics, and traces are enriched with the correlation ID. This allows for grouping related data points together for analysis.")])]),t._v(" "),s("h3",{attrs:{id:"benefits-of-correlation-id"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#benefits-of-correlation-id"}},[t._v("#")]),t._v(" Benefits of Correlation ID")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Improved Debugging")]),t._v(": By correlating log entries, developers can quickly identify the flow of a request and pinpoint issues.")]),t._v(" "),s("li",[s("strong",[t._v("Enhanced Monitoring")]),t._v(": Correlation IDs enable tracking request performance and identifying bottlenecks.")]),t._v(" "),s("li",[s("strong",[t._v("Facilitated Troubleshooting")]),t._v(": When problems occur, correlation IDs help to isolate the affected components.")]),t._v(" "),s("li",[s("strong",[t._v("Security Analysis")]),t._v(": Correlation IDs can aid in detecting suspicious activity by linking related events.")])]),t._v(" "),s("h2",{attrs:{id:"observer-pattern"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#observer-pattern"}},[t._v("#")]),t._v(" Observer Pattern")]),t._v(" "),s("p",[t._v("The observers are objects that register themselves to the subject and react to the notifications. This pattern is useful for monitoring and logging, as it allows you to "),s("strong",[t._v("decouple the logic of the subject from the logic of the observers, and to add or remove observers dynamically")]),t._v(".")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://www.linkedin.com/advice/0/what-best-design-patterns-monitoring-logging-r92ue",alt:"Read more for other patterns"}})]),t._v(" "),s("h2",{attrs:{id:"comparision"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#comparision"}},[t._v("#")]),t._v(" Comparision")]),t._v(" "),s("h3",{attrs:{id:"logging-vs-auditing"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#logging-vs-auditing"}},[t._v("#")]),t._v(" Logging vs Auditing")]),t._v(" "),s("p",[t._v("Logging typically means the "),s("strong",[t._v("recording of implementation level events")]),t._v(" that happen as the program is running (methods get called, objects are created, etc.). As such it focuses on things that interest programmers")]),t._v(" "),s("p",[t._v("Auditing is about "),s("strong",[t._v("recording domain-level events")]),t._v(": a transaction is created, a user is performing an action, etc. In certain types of application (Banking) there is a legal obligation to record such events.")]),t._v(" "),s("h3",{attrs:{id:"logging-vs-tracing-vs-metrics"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#logging-vs-tracing-vs-metrics"}},[t._v("#")]),t._v(" Logging vs Tracing vs Metrics")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.pinimg.com/originals/57/0c/00/570c00cb3c499cdcbb5259957e550f9d.jpg",alt:"Logging vs Auditing"}})]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Feature")]),t._v(" "),s("th",[t._v("Logging")]),t._v(" "),s("th",[t._v("Tracing")]),t._v(" "),s("th",[t._v("Metrics")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("strong",[t._v("Purpose")])]),t._v(" "),s("td",[t._v("Records discrete events or states within an application")]),t._v(" "),s("td",[t._v("Tracks the flow of requests through a distributed system.")]),t._v(" "),s("td",[t._v("Aggregates numerical data points over time to provide insights into system health and performance.")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("Data")])]),t._v(" "),s("td",[t._v("Textual information, often including timestamps, severity levels, and additional context.")]),t._v(" "),s("td",[t._v("Time-stamped records of actions and their durations, forming a timeline of request execution.")]),t._v(" "),s("td",[t._v("Numerical values, often collected at regular intervals.")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("Use Cases")])]),t._v(" "),s("td",[t._v("Debugging, auditing, security analysis, and troubleshooting specific issues.")]),t._v(" "),s("td",[t._v("Identifying performance bottlenecks, understanding request latency, and diagnosing complex issues.")]),t._v(" "),s("td",[t._v("Monitoring system performance, detecting anomalies, and setting alerts.")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("Examples")])]),t._v(" "),s("td",[t._v("Error messages, audit logs, configuration changes.")]),t._v(" "),s("td",[t._v("Distributed tracing, service maps, dependency analysis.")]),t._v(" "),s("td",[t._v("CPU usage, memory consumption, response times, error rates.")])])])]),t._v(" "),s("h3",{attrs:{id:"auditing-vs-profiling-vs-statistics"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#auditing-vs-profiling-vs-statistics"}},[t._v("#")]),t._v(" Auditing vs. Profiling vs. Statistics")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Feature")]),t._v(" "),s("th",[t._v("Auditing")]),t._v(" "),s("th",[t._v("Profiling")]),t._v(" "),s("th",[t._v("Statistics")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("strong",[t._v("Focus")])]),t._v(" "),s("td",[t._v("Compliance, security, and accountability.")]),t._v(" "),s("td",[t._v("Performance and optimization.")]),t._v(" "),s("td",[t._v("Data analysis and inference.")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("Purpose")])]),t._v(" "),s("td",[t._v("To examine records and processes to ensure adherence to rules, regulations, or standards.")]),t._v(" "),s("td",[t._v("To analyze system or application behavior to identify performance bottlenecks and areas for improvement.")]),t._v(" "),s("td",[t._v("To collect, organize, analyze, interpret, and present data to draw conclusions.")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("Methods")])]),t._v(" "),s("td",[t._v("Reviewing logs, documentation, and system activities.")]),t._v(" "),s("td",[t._v("Measuring resource utilization, code execution time, and memory usage.")]),t._v(" "),s("td",[t._v("Descriptive statistics, inferential statistics, and data visualization.")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("Example")])]),t._v(" "),s("td",[t._v("Auditing financial transactions to detect fraud or ensuring compliance with data privacy regulations.")]),t._v(" "),s("td",[t._v("Profiling a web application to determine which parts are causing slow load times.")]),t._v(" "),s("td",[t._v("Conducting a statistical analysis of customer behavior to identify trends and preferences.")])])])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Auditing")]),t._v(": this is sometimes a business requirement. The idea is to capture significant events that matter to the management or legal people. These are statements that describe usually what users of the system are doing (like who signed-in, who edited that, etc…).")]),t._v(" "),s("li",[s("strong",[t._v("Profiling")]),t._v(": as logs are timestamped (sometimes to the millisecond level), it can become a good tool to profile sections of a program, for instance by logging the start and end of an operation, you can either automatically (by parsing the log) or during troubleshooting infer some performance metrics without adding those metrics to the program itself.")]),t._v(" "),s("li",[s("strong",[t._v("Statistics")]),t._v(": if you log each time a certain event happens (like a certain kind of error or event) you can compute interesting statistics about the running program (or the user behaviors). It’s also possible to hook this to an alert system that can detect too many errors in a row.")])]),t._v(" "),s("h2",{attrs:{id:"practices"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#practices"}},[t._v("#")]),t._v(" Practices")]),t._v(" "),s("p",[t._v("Effective logging is crucial for maintaining a healthy and resilient system. Here are some key practices:")]),t._v(" "),s("h3",{attrs:{id:"log-level-management"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#log-level-management"}},[t._v("#")]),t._v(" Log Level Management")]),t._v(" "),s("p",[t._v("Use appropriate log levels:")]),t._v(" "),s("ul",[s("li",[t._v("TRACE: Extremely detailed, used for debugging.")]),t._v(" "),s("li",[t._v("DEBUG: Detailed information for diagnosing problems.")]),t._v(" "),s("li",[t._v("INFO: General operational information.")]),t._v(" "),s("li",[t._v("WARN: Potential issues or unexpected conditions.")]),t._v(" "),s("li",[t._v("ERROR: Errors that prevent correct operation.")]),t._v(" "),s("li",[t._v("FATAL: Critical errors that terminate the application.")])]),t._v(" "),s("h3",{attrs:{id:"log-formatting"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#log-formatting"}},[t._v("#")]),t._v(" Log Formatting")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Structured logging")]),t._v(": Use a structured format (JSON, XML, or custom) for easier parsing and analysis.")]),t._v(" "),s("li",[s("strong",[t._v("Include essential information")]),t._v(": Timestamp, thread ID, process ID, log level, class/method name, and message.")]),t._v(" "),s("li",[s("strong",[t._v("Consider additional context")]),t._v(": Correlation ID, user ID, IP address, environment, and exception details.")])]),t._v(" "),s("p",[t._v("E.g: "),s("a",{attrs:{href:"https://www.npmjs.com/package/bunyan",target:"_blank",rel:"noopener noreferrer"}},[t._v("Package bunyan for nodejs"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"log-rotation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#log-rotation"}},[t._v("#")]),t._v(" Log Rotation")]),t._v(" "),s("ul",[s("li",[t._v("Implement log rotation: Prevent log files from growing indefinitely.")]),t._v(" "),s("li",[t._v("Retain logs appropriately: Balance storage requirements with troubleshooting needs.")])]),t._v(" "),s("h3",{attrs:{id:"log-aggregation-and-centralization"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#log-aggregation-and-centralization"}},[t._v("#")]),t._v(" Log Aggregation and Centralization")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Centralize logs")]),t._v(": Collect logs from multiple sources into a centralized repository.")]),t._v(" "),s("li",[s("strong",[t._v("Use a log management platform")]),t._v(": Tools like "),s("code",[t._v("Elasticsearch")]),t._v(", "),s("code",[t._v("Logstash")]),t._v(", and "),s("code",[t._v("Kibana")]),t._v(" (ELK Stack) can help manage and analyze logs.")])]),t._v(" "),s("h3",{attrs:{id:"error-handling-and-logging"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#error-handling-and-logging"}},[t._v("#")]),t._v(" Error Handling and Logging")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Log exceptions")]),t._v(": Capture detailed exception information, including stack traces.")]),t._v(" "),s("li",[s("strong",[t._v("Provide context")]),t._v(": Include relevant data to understand the error's cause.")]),t._v(" "),s("li",[s("strong",[t._v("Avoid logging sensitive information")]),t._v(": Protect user data and security.")])]),t._v(" "),s("p",[t._v("E.g: "),s("a",{attrs:{href:"https://www.npmjs.com/package/verror",target:"_blank",rel:"noopener noreferrer"}},[t._v("Package verror for js"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"performance-considerations"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#performance-considerations"}},[t._v("#")]),t._v(" Performance Considerations")]),t._v(" "),s("ul",[s("li",[t._v("Minimize log overhead: Avoid excessive logging that impacts performance.")]),t._v(" "),s("li",[t._v("Optimize log formatting: Use efficient formats to reduce log size.")]),t._v(" "),s("li",[t._v("Consider asynchronous logging: Improve performance by offloading log writing.")])]),t._v(" "),s("h3",{attrs:{id:"security"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#security"}},[t._v("#")]),t._v(" Security")]),t._v(" "),s("ul",[s("li",[t._v("Protect SENSITIVE information: Avoid logging sensitive data like passwords, credit card numbers, or personal information.")]),t._v(" "),s("li",[t._v("Encrypt logs: Consider encrypting logs to protect data in transit and at rest.")]),t._v(" "),s("li",[t._v("Implement access controls: Restrict access to log data to authorized personnel.")])]),t._v(" "),s("h3",{attrs:{id:"additional-tips"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#additional-tips"}},[t._v("#")]),t._v(" Additional Tips")]),t._v(" "),s("ul",[s("li",[t._v("Use a logging framework: Leverage existing libraries to simplify logging.")]),t._v(" "),s("li",[t._v("Test your logging configuration: Ensure logs are generated as expected.")]),t._v(" "),s("li",[t._v("Monitor log volume: Keep track of log growth to prevent issues.")]),t._v(" "),s("li",[t._v("Review and refine logs: Regularly assess log effectiveness and make improvements.")]),t._v(" "),s("li",[t._v("Avoid excessive logging: Overlogging can impact performance and storage.")]),t._v(" "),s("li",[t._v("Don’t use "),s("code",[t._v("debug")]),t._v(" level for system monitoring data")])]),t._v(" "),s("h2",{attrs:{id:"log-what"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#log-what"}},[t._v("#")]),t._v(" Log what")]),t._v(" "),s("h3",{attrs:{id:"requests"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#requests"}},[t._v("#")]),t._v(" Requests")]),t._v(" "),s("ul",[s("li",[t._v("time / start / stop")]),t._v(" "),s("li",[t._v("correlation id")]),t._v(" "),s("li",[t._v("user agent")]),t._v(" "),s("li",[t._v("IP / GPS / ...")]),t._v(" "),s("li",[t._v("user id / request id / idempotent key")])]),t._v(" "),s("h3",{attrs:{id:"errors-and-exceptions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#errors-and-exceptions"}},[t._v("#")]),t._v(" Errors and Exceptions:")]),t._v(" "),s("p",[t._v("Logging errors and exceptions is crucial for troubleshooting and debugging. It helps developers identify and fix issues quickly. When an error occurs, logging the relevant error message, stack trace, and any contextual information can provide valuable insights into the root cause of the problem.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Code that may throw an exception")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Exception e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    logger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"An error occurred: "')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMessage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"performance-metrics-availability"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#performance-metrics-availability"}},[t._v("#")]),t._v(" Performance Metrics / Availability")]),t._v(" "),s("p",[t._v("Logging performance metrics such as response times, database queries, or resource utilization can help identify bottlenecks and optimize the application's performance. This information can be valuable for capacity planning, load testing, and identifying areas for improvement.")]),t._v(" "),s("ul",[s("li",[t._v("Slow queries")]),t._v(" "),s("li",[t._v("Network error")]),t._v(" "),s("li",[t._v("At infra layer / firewall / gateway / ...")])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" startTime "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentTimeMillis")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Code to measure performance")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" endTime "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentTimeMillis")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" executionTime "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" endTime "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" startTime"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nlogger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Execution time: "')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" executionTime "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ms"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"configuration-changes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#configuration-changes"}},[t._v("#")]),t._v(" Configuration Changes")]),t._v(" "),s("p",[t._v("Logging configuration changes can help track modifications made to the application's settings or environment.")]),t._v(" "),s("p",[t._v("This can be useful for troubleshooting issues related to configuration changes or "),s("strong",[t._v("ensuring compliance")]),t._v(" with security and regulatory requirements.")]),t._v(" "),s("h3",{attrs:{id:"user-actions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#user-actions"}},[t._v("#")]),t._v(" User Actions")]),t._v(" "),s("p",[t._v("Logging user actions can be useful for auditing, security, and understanding user behavior. It can help track user interactions, identify patterns, and detect any suspicious or unauthorized activities.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("logger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"User {username} logged in"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"application-events"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#application-events"}},[t._v("#")]),t._v(" Application Events")]),t._v(" "),s("ul",[s("li",[t._v("Background threads / async job")])]),t._v(" "),s("p",[t._v("Logging important application events can help track the flow of execution and provide a detailed history of the application's behavior. This includes logging when the application starts or stops, when specific actions are performed, or when significant milestones are reached.")]),t._v(" "),s("h3",{attrs:{id:"third-party-integrations"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#third-party-integrations"}},[t._v("#")]),t._v(" Third-Party Integrations")]),t._v(" "),s("p",[t._v("If your application integrates with external services or APIs, logging the interactions with these integrations can help diagnose issues and monitor their performance.")]),t._v(" "),s("h3",{attrs:{id:"security-events-threats"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#security-events-threats"}},[t._v("#")]),t._v(" Security Events/ Threats")]),t._v(" "),s("p",[t._v("Logging security-related events, such as failed login attempts, access control violations, or suspicious activities, can help detect and respond to potential security breaches")]),t._v(" "),s("ul",[s("li",[t._v("suspicious activities")]),t._v(" "),s("li",[t._v("unauthorized access to restricted processes or data")]),t._v(" "),s("li",[t._v("invalid parameters or input")]),t._v(" "),s("li",[t._v("warnings by the application’s security mechanisms.")])]),t._v(" "),s("h3",{attrs:{id:"trace-logging-audit-trail"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#trace-logging-audit-trail"}},[t._v("#")]),t._v(" Trace Logging / Audit Trail")]),t._v(" "),s("ul",[s("li",[t._v("correlation id")])]),t._v(" "),s("h2",{attrs:{id:"what-not-to-log"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#what-not-to-log"}},[t._v("#")]),t._v(" What Not to Log")]),t._v(" "),s("ul",[s("li",[t._v("large messages")]),t._v(" "),s("li",[t._v("known errors, all errors")])]),t._v(" "),s("h3",{attrs:{id:"personally-identifiable-information-pii"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#personally-identifiable-information-pii"}},[t._v("#")]),t._v(" Personally Identifiable Information (PII)")]),t._v(" "),s("p",[t._v("PII includes sensitive data such as "),s("code",[t._v("names")]),t._v(", "),s("code",[t._v("emails")]),t._v(", "),s("code",[t._v("addresses")]),t._v(", "),s("code",[t._v("social security numbers")]),t._v(", "),s("code",[t._v("credit card details")]),t._v(", and other personally identifiable information. Logging this information can pose a significant risk to user privacy and may violate data protection laws.")]),t._v(" "),s("div",{staticClass:"language-py extra-class"},[s("pre",{pre:!0,attrs:{class:"language-py"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Example: Logging PII should be avoided")]),t._v("\nlogger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("info"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"User ')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("user_id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(" logged in with password ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("password"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"authentication-credentials"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#authentication-credentials"}},[t._v("#")]),t._v(" Authentication Credentials")]),t._v(" "),s("p",[t._v("Logging usernames, passwords, or any other authentication credentials is highly discouraged. Storing this information in logs can lead to unauthorized access and compromise the security of user accounts.")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Example: Avoid logging authentication credentials")]),t._v("\nlogger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("debug")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"User login attempt with username: "')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" username "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('" and password: "')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" password"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"sensitive-business-data"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sensitive-business-data"}},[t._v("#")]),t._v(" Sensitive Business Data")]),t._v(" "),s("p",[t._v("Logging sensitive business data, such as trade secrets, financial information, or proprietary algorithms, can expose critical information to unauthorized individuals. It is crucial to protect this type of data from being logged.")]),t._v(" "),s("div",{staticClass:"language-csharp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-csharp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Example: Avoid logging sensitive business data")]),t._v("\nlogger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("LogInformation")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Customer XYZ purchased product ABC for $1000"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"session-identifiers-and-tokens"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#session-identifiers-and-tokens"}},[t._v("#")]),t._v(" Session Identifiers and Tokens")]),t._v(" "),s("p",[t._v("Session identifiers, access tokens, or any other session-related information should not be logged. These values can be used to impersonate users or gain unauthorized access to their accounts.")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Example: Do not log session identifiers or tokens")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Session ID: "')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" sessionId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"internal-system-details"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#internal-system-details"}},[t._v("#")]),t._v(" Internal System Details")]),t._v(" "),s("p",[t._v("Logging internal system details, such as server configurations, database connection strings, or API keys, can expose critical infrastructure information to potential attackers. It is essential to keep this information confidential and not log it.")]),t._v(" "),s("div",{staticClass:"language-ruby extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ruby"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Example: Avoid logging internal system details")]),t._v("\nlogger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("debug"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Database connection string: "')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" dbConnectionString"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"architecture"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#architecture"}},[t._v("#")]),t._v(" Architecture")]),t._v(" "),s("p",[s("img",{attrs:{src:a(402),alt:"arch"}})]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Metrics source")]),t._v(": This can be application servers, SQL databases, message queues, etc.")]),t._v(" "),s("li",[s("strong",[t._v("Metrics collector")]),t._v(": It gathers metrics data and writes data into the time-series database.")]),t._v(" "),s("li",[s("strong",[t._v("Time-series database")]),t._v(": This stores metrics data as time series. It usually provides a custom query interface for analyzing and summarizing a large amount of time-series data. It maintains indexes on labels to facilitate the fast lookup of time-series data by labels. (prometheus / S3 / ...)")]),t._v(" "),s("li",[s("strong",[t._v("Kafka")]),t._v(": Kafka is used as a highly reliable and scalable distributed messaging platform. It decouples the data collection and data processing services from each other.")]),t._v(" "),s("li",[s("strong",[t._v("Consumers")]),t._v(": Consumers or streaming processing services such as Apache Storm, Flink and Spark, process and push data to the time-series database.")]),t._v(" "),s("li",[s("strong",[t._v("Query service")]),t._v(": The query service makes it easy to query and retrieve data from the time-series database. This should be a very thin wrapper if we choose a good time-series database. It could also be entirely replaced by the time-series database’s own query interface.")]),t._v(" "),s("li",[s("strong",[t._v("Alerting system")]),t._v(": This sends alert notifications to various alerting destinations.")]),t._v(" "),s("li",[s("strong",[t._v("Visualization system")]),t._v(": This shows metrics in the form of various graphs/charts.")])]),t._v(" "),s("p",[s("strong",[t._v("E.g Prometheus stack:")])]),t._v(" "),s("ul",[s("li",[t._v("metrics source - your app")]),t._v(" "),s("li",[t._v("collector - promtail")]),t._v(" "),s("li",[t._v("DB - prometheus/S3")]),t._v(" "),s("li",[t._v("query service - loki")]),t._v(" "),s("li",[t._v("visual - grafana,")]),t._v(" "),s("li",[t._v("alert is alertmanager")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(467),alt:"k8s monitoring"}})]),t._v(" "),s("h3",{attrs:{id:"prometheus-architecture"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#prometheus-architecture"}},[t._v("#")]),t._v(" Prometheus Architecture")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.pinimg.com/originals/eb/77/98/eb779867085ce444c6552de66cb22e06.jpg",alt:"Prometheus arch"}})]),t._v(" "),s("h3",{attrs:{id:"elk"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#elk"}},[t._v("#")]),t._v(" ELK")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.pinimg.com/564x/d5/b2/bf/d5b2bf0b2019bfcb2e67361f707ce780.jpg",alt:"ELK arch"}})]),t._v(" "),s("h2",{attrs:{id:"refs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#refs"}},[t._v("#")]),t._v(" Refs")]),t._v(" "),s("p",[t._v("https://stackoverflow.com/questions/967970/what-information-should-i-be-logging-in-my-web-app")]),t._v(" "),s("p",[t._v("https://www.dataset.com/blog/the-10-commandments-of-logging/")]),t._v(" "),s("p",[t._v("https://www.freecodecamp.org/news/how-to-use-logs-effectively-in-your-code/")]),t._v(" "),s("p",[t._v("https://www.bloghoctap.com/security/authentication-authorization-va-accounting.html")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://jessicagreben.medium.com/four-minute-paper-facebooks-time-series-database-gorilla-800697717d72",target:"_blank",rel:"noopener noreferrer"}},[t._v("Four Minute Paper: Facebook’s time series database, Gorilla"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://k21academy.com/docker-kubernetes/prometheus-grafana-monitoring/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Kubernetes Monitoring: Install Prometheus and Grafana using Helm"),s("OutboundLink")],1)])],1)}),[],!1,null,null,null);e.default=r.exports},402:function(t,e,a){t.exports=a.p+"assets/img/f6.54b4a63c.png"},467:function(t,e,a){t.exports=a.p+"assets/img/Prometheus-Server_Chart.a793fd6e.png"}}]);