(window.webpackJsonp=window.webpackJsonp||[]).push([[278],{1448:function(t,e,a){"use strict";a.r(e);var s=a(7),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"mongodb-notes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mongodb-notes"}},[t._v("#")]),t._v(" MongoDB Notes")]),t._v(" "),a("h2",{attrs:{id:"mongodb-vs-sql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mongodb-vs-sql"}},[t._v("#")]),t._v(" MongoDB vs SQL")]),t._v(" "),a("h3",{attrs:{id:"terms-comparision"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#terms-comparision"}},[t._v("#")]),t._v(" Terms comparision")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("RDBMS")]),t._v(" "),a("th",[t._v("MongoDB")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("database")]),t._v(" "),a("td",[t._v("database")])]),t._v(" "),a("tr",[a("td",[t._v("table")]),t._v(" "),a("td",[t._v("collection")])]),t._v(" "),a("tr",[a("td",[t._v("row")]),t._v(" "),a("td",[t._v("document / BSON document")])]),t._v(" "),a("tr",[a("td",[t._v("column")]),t._v(" "),a("td",[t._v("field")])]),t._v(" "),a("tr",[a("td",[t._v("index")]),t._v(" "),a("td",[t._v("index")])]),t._v(" "),a("tr",[a("td",[t._v("table join")]),t._v(" "),a("td",[a("code",[t._v("$lookup")]),t._v(", embedded documents")])]),t._v(" "),a("tr",[a("td",[t._v("primary key")]),t._v(" "),a("td",[t._v("primary key (automatically set to the "),a("code",[t._v("_id")]),t._v(" field)")])]),t._v(" "),a("tr",[a("td",[t._v("aggregation (e.g. group by)")]),t._v(" "),a("td",[t._v("aggregation pipeline")])]),t._v(" "),a("tr",[a("td",[t._v("materialized views")]),t._v(" "),a("td",[a("a",{attrs:{href:"https://www.mongodb.com/docs/manual/core/materialized-views/",target:"_blank",rel:"noopener noreferrer"}},[t._v("On-Demand Materialized Views"),a("OutboundLink")],1)])]),t._v(" "),a("tr",[a("td",[t._v("transactions")]),t._v(" "),a("td",[a("a",{attrs:{href:"https://www.mongodb.com/docs/manual/core/transactions/",target:"_blank",rel:"noopener noreferrer"}},[t._v("transactions"),a("OutboundLink")],1),t._v("3")])])])]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/sql-comparison/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Full here - sql-comparison"),a("OutboundLink")],1)]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Sql Comparison")]),t._v(" "),a("th",[t._v("MongoDB")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("WHERE col IN()")]),t._v(" "),a("td",[a("code",[t._v("$in()")])])]),t._v(" "),a("tr",[a("td",[t._v("NOT IN()")]),t._v(" "),a("td",[a("code",[t._v("$nin")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v(">")])]),t._v(" "),a("td",[a("code",[t._v("$gt")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v(">=")])]),t._v(" "),a("td",[a("code",[t._v("$gte")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("<")])]),t._v(" "),a("td",[a("code",[t._v("$lt")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("<=")])]),t._v(" "),a("td",[a("code",[t._v("$lte")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("!=")])]),t._v(" "),a("td",[a("code",[t._v("$ne")])])])])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Sql Logical")]),t._v(" "),a("th",[t._v("MongoDB")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("AND")]),t._v(" "),a("td",[a("code",[t._v("$and")])])]),t._v(" "),a("tr",[a("td",[t._v("NOT")]),t._v(" "),a("td",[a("code",[t._v("$not")])])]),t._v(" "),a("tr",[a("td",[t._v("OR")]),t._v(" "),a("td",[a("code",[t._v("$or")])])]),t._v(" "),a("tr",[a("td",[t._v("NOT ... AND NOT ...")]),t._v(" "),a("td",[a("code",[t._v("$nor")])])])])]),t._v(" "),a("h2",{attrs:{id:"arggregate-pipelines"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#arggregate-pipelines"}},[t._v("#")]),t._v(" Arggregate Pipelines")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Sql Terms")]),t._v(" "),a("th",[t._v("MongoDB")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("SELECT")]),t._v(" "),a("td",[a("code",[t._v("$project")])])]),t._v(" "),a("tr",[a("td",[t._v("WHERE")]),t._v(" "),a("td",[a("code",[t._v("$match")])])]),t._v(" "),a("tr",[a("td",[t._v("GROUP BY")]),t._v(" "),a("td",[a("code",[t._v("$group")])])]),t._v(" "),a("tr",[a("td",[t._v("HAVING")]),t._v(" "),a("td",[a("code",[t._v("$match")])])]),t._v(" "),a("tr",[a("td",[t._v("LIMIT")]),t._v(" "),a("td",[a("code",[t._v("$limit")])])]),t._v(" "),a("tr",[a("td",[t._v("OFFSET")]),t._v(" "),a("td",[a("code",[t._v("$skip")])])]),t._v(" "),a("tr",[a("td",[t._v("ORDER BY")]),t._v(" "),a("td",[a("code",[t._v("$sort")])])]),t._v(" "),a("tr",[a("td",[t._v("SUM()")]),t._v(" "),a("td",[a("code",[t._v("$sum")])])]),t._v(" "),a("tr",[a("td",[t._v("COUNT()")]),t._v(" "),a("td",[a("code",[t._v("$sum")]),t._v(" and "),a("code",[t._v("$sortByCount")])])]),t._v(" "),a("tr",[a("td",[t._v("JOIN")]),t._v(" "),a("td",[a("code",[t._v("$lookup")])])]),t._v(" "),a("tr",[a("td",[t._v("SELECT INTO NEW_TABLE")]),t._v(" "),a("td",[a("code",[t._v("$out")])])]),t._v(" "),a("tr",[a("td",[t._v("MERGE INTO TABLE")]),t._v(" "),a("td",[a("code",[t._v("$merge")])])]),t._v(" "),a("tr",[a("td",[t._v("UNION ALL")]),t._v(" "),a("td",[a("code",[t._v("$unionWith")])])])])]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.mongodb.com/developer/products/mongodb/sql-to-aggregation-pipeline/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Full here - sql-to-aggregation-pipeline"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/operator/aggregation-pipeline/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Aggregation Pipeline Stages"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"example"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#example"}},[t._v("#")]),t._v(" Example")]),t._v(" "),a("p",[t._v("For example, you can use the "),a("code",[t._v("$match")]),t._v(" stage to filter documents, the "),a("code",[t._v("$group")]),t._v(" stage to group documents by a specific field, and the "),a("code",[t._v("$project")]),t._v(" stage to reshape the output.")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("runAggregation")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" pipeline "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" $match"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" status"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'active'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" $group"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" _id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'$category'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" total"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" $sum"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'$quantity'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" $project"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" category"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'$_id'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" total"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" collection "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" client"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("db")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("collection")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'products'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" collection"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("aggregate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pipeline"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toArray")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Error executing aggregation'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("finally")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" client"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("runAggregation")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"migration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#migration"}},[t._v("#")]),t._v(" Migration")]),t._v(" "),a("p",[t._v("https://dba.stackexchange.com/questions/203926/how-to-find-all-invalid-document-based-on-jsonschema-validator/203950#203950")]),t._v(" "),a("p",[t._v("https://www.mongodb.com/community/forums/t/can-i-update-a-schema/154565")]),t._v(" "),a("h2",{attrs:{id:"indexes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#indexes"}},[t._v("#")]),t._v(" Indexes")]),t._v(" "),a("h3",{attrs:{id:"single-field-index"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#single-field-index"}},[t._v("#")]),t._v(" Single Field Index")]),t._v(" "),a("p",[t._v("This is the most basic type of index in MongoDB. It indexes a single field in a collection. Single field indexes can significantly improve the performance of queries that involve filtering or sorting based on that field.")]),t._v(" "),a("p",[t._v('Here\'s an example of creating a single field index on the "name" field of a collection called "users":')]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("users"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createIndex")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"compound-index"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#compound-index"}},[t._v("#")]),t._v(" Compound Index")]),t._v(" "),a("p",[t._v("A compound index is created on multiple fields in a collection. It can improve the performance of queries that involve filtering or sorting based on multiple fields.")]),t._v(" "),a("p",[t._v('Here\'s an example of creating a compound index on the "name" and "age" fields of a collection called "users":')]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("users"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createIndex")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" age"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"text-index"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#text-index"}},[t._v("#")]),t._v(" Text Index")]),t._v(" "),a("p",[t._v("Text indexes are used to perform full-text search on string content. They enable efficient searching of text fields for words or phrases. Text indexes are particularly useful when implementing search functionality in applications.")]),t._v(" "),a("p",[t._v('Here\'s an example of creating a text index on the "description" field of a collection called "products":')]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("products"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createIndex")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" description"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"geospatial-index"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#geospatial-index"}},[t._v("#")]),t._v(" Geospatial Index")]),t._v(" "),a("p",[t._v("Geospatial indexes are used to optimize queries that involve geospatial data. They enable efficient querying of data based on location and support various geospatial operations like finding nearby points or calculating distances.")]),t._v(" "),a("p",[t._v('Here\'s an example of creating a geospatial index on the "location" field of a collection called "places":')]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("places"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createIndex")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" location"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2dsphere"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"hashed-index"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hashed-index"}},[t._v("#")]),t._v(" Hashed Index")]),t._v(" "),a("p",[t._v('Hashed indexes are useful for sharding data across multiple servers in a MongoDB cluster. They distribute data evenly based on the hash value of a field. Hashed indexes are typically used for fields with high cardinality.\nHere\'s an example of creating a hashed index on the "user_id" field of a collection called "orders":')]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("orders"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createIndex")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" user_id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hashed"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("These are just a few examples of the types of indexes available in MongoDB. Each index type serves a specific purpose and can greatly enhance the performance of queries in different scenarios. It's important to choose the appropriate index type based on the nature of your data and the types of queries you need to optimize.")]),t._v(" "),a("p",[t._v("Remember, creating indexes comes with a trade-off in terms of increased storage space and write performance. Therefore, it's essential to carefully analyze your application's requirements and query patterns before deciding on the indexes to create.")]),t._v(" "),a("h2",{attrs:{id:"example-data"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#example-data"}},[t._v("#")]),t._v(" Example data")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/neelabalan/mongodb-sample-dataset",target:"_blank",rel:"noopener noreferrer"}},[t._v("Sample Data"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"best-practices"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#best-practices"}},[t._v("#")]),t._v(" Best practices")]),t._v(" "),a("h3",{attrs:{id:"general-rules-for-mongodb-schema-design"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#general-rules-for-mongodb-schema-design"}},[t._v("#")]),t._v(" General Rules for MongoDB Schema Design:")]),t._v(" "),a("p",[t._v("Rule 1: Favor embedding unless there is a compelling reason not to")]),t._v(" "),a("p",[t._v("Rule 2: Needing to access an object on its own is a compelling reason not to embed it.")]),t._v(" "),a("p",[t._v("Rule 3: Avoid joins/lookups if possible, but don't be afraid if they can provide a better schema design.")]),t._v(" "),a("p",[t._v("Rule 4: Arrays should not grow without bound.\n- "),a("strong",[t._v('If there are more than a couple of hundred documents on the "many" side, don\'t embed them')]),t._v(";\n- "),a("strong",[t._v('If there are more than a few thousand documents on the "many" side, don\'t use an array of ObjectID references')]),t._v(".\n- High-cardinality arrays are a compelling reason not to embed.")]),t._v(" "),a("p",[t._v("Rule 5: As always, with MongoDB, how you model your data depends – entirely – on your particular application's data access patterns. You want to structure your data to match the ways that your application queries and updates it.")]),t._v(" "),a("p",[t._v("Recap:\nOne-to-One - Prefer key value pairs within the document\nOne-to-Few - Prefer embedding\nOne-to-Many - Prefer embedding\nOne-to-Squillions - Prefer Referencing\nMany-to-Many - Prefer Referencing")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.mongodb.com/developer/products/mongodb/mongodb-schema-design-best-practices/#additional-resources-",target:"_blank",rel:"noopener noreferrer"}},[t._v("Full here"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("https://developer.mongodb.com/article/schema-design-anti-pattern-massive-arrays")]),t._v(" "),a("h2",{attrs:{id:"distributed-architecture"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#distributed-architecture"}},[t._v("#")]),t._v(" Distributed Architecture")]),t._v(" "),a("p",[t._v("Prefer Consistency")]),t._v(" "),a("h3",{attrs:{id:"replica-set"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#replica-set"}},[t._v("#")]),t._v(" Replica set")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://www.mongodb.com/docs/manual/images/replica-set-read-write-operations-primary.bakedsvg.svg",alt:"Replica set"}})]),t._v(" "),a("p",[a("strong",[t._v("Automatic Failover")]),t._v(": "),a("em",[t._v("The replica set cannot process write operations until the election completes successfully.")])]),t._v(" "),a("h3",{attrs:{id:"sharding"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sharding"}},[t._v("#")]),t._v(" Sharding")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://www.mongodb.com/docs/manual/images/sharded-cluster-production-architecture.bakedsvg.svg",alt:"Sharded Cluster"}})]),t._v(" "),a("h3",{attrs:{id:"tunable-consistency"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tunable-consistency"}},[t._v("#")]),t._v(" Tunable Consistency")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Read concern")]),t._v(" "),a("th",[t._v("Description")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("Local")]),t._v(" "),a("td",[t._v("Returns data from the instance without guaranteeing the data has been written to a majority of the instances. This is equivalent to a "),a("code",[t._v("read uncommitted")]),t._v(" isolation in a relational database")])]),t._v(" "),a("tr",[a("td",[t._v("Available")]),t._v(" "),a("td",[t._v("Same as local")])]),t._v(" "),a("tr",[a("td",[t._v("Majority")]),t._v(" "),a("td",[t._v("Guarantees that a majority of the cluster members acknowledged the request. A majority read returns only committed data.")])])])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Write concern")]),t._v(" "),a("th",[t._v("Description")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("0")]),t._v(" "),a("td",[t._v("Does not require an acknowledgment of the write.database")])]),t._v(" "),a("tr",[a("td",[t._v("1")]),t._v(" "),a("td",[t._v("Requires acknowledgment from the primary member only.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("<number>")])]),t._v(" "),a("td",[t._v("Checks if the operation has replicated to the specified number of instances.")])]),t._v(" "),a("tr",[a("td",[t._v("Majority")]),t._v(" "),a("td",[t._v("Checks if the operations have propagated to the majority.")])])])]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.mongodb.com/docs/v6.0/reference/read-concern/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docs - Read Concern"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.mongodb.com/docs/v6.0/reference/write-concern/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docs - Write Concern"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"performance"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#performance"}},[t._v("#")]),t._v(" Performance")]),t._v(" "),a("p",[t._v("use projection to select few fields")]),t._v(" "),a("p",[t._v("https://www.mongodb.com/docs/manual/indexes/")]),t._v(" "),a("p",[t._v("https://www.mongodb.com/docs/manual/core/query-plans/")]),t._v(" "),a("h2",{attrs:{id:"arggregate-pipelines-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#arggregate-pipelines-2"}},[t._v("#")]),t._v(" Arggregate Pipelines")]),t._v(" "),a("p",[t._v("https://studio3t.com/knowledge-base/articles/build-mongodb-aggregation-queries/\nhttps://studio3t.com/knowledge-base/categories/import-export/")]),t._v(" "),a("h2",{attrs:{id:"others"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#others"}},[t._v("#")]),t._v(" Others")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.instaclustr.com/blog/cassandra-vs-mongodb/",target:"_blank",rel:"noopener noreferrer"}},[t._v("cassandra-vs-mongodb"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/limits/",target:"_blank",rel:"noopener noreferrer"}},[t._v("MongoDB Limits and Thresholds"),a("OutboundLink")],1)])]),t._v(" "),a("h3",{attrs:{id:"tools"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tools"}},[t._v("#")]),t._v(" Tools")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://studio3t.com/download/",target:"_blank",rel:"noopener noreferrer"}},[t._v("studio3t"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://robomongo.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("robomongo"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://leanylabs.com/blog/mongoose-vs-mongodb/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mongoose vs. MongoDB"),a("OutboundLink")],1)])]),t._v(" "),a("h3",{attrs:{id:"running-on-docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#running-on-docker"}},[t._v("#")]),t._v(" Running on docker")]),t._v(" "),a("p",[t._v("https://hub.docker.com/_/mongo")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("docker run --name some-mongo -d -p 27017:27017 mongo:latest\n")])])])])}),[],!1,null,null,null);e.default=n.exports}}]);