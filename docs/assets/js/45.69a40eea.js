(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{324:function(e,t,n){"use strict";n.r(t);var a=n(0),o=Object(a.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h1",{attrs:{id:"code-refactoring"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#code-refactoring","aria-hidden":"true"}},[e._v("#")]),e._v(" Code Refactoring")]),e._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[e._v("Refactoring")]),e._v(" "),n("p",[e._v("tái cấu trúc – là quá trình làm thay đổi mã hiện có bên trong mà không thay đổi hành vi bên ngoài của nó. Nói cách khác, tức là thay đổi cách nó thực hiện, nhưng không không thay đổi nó làm cái gì. Mục đích là để cải thiện cơ cấu nội bộ.")])]),e._v(" "),n("p",[e._v("Refactoring có thể thực hiện ở nhiều mức độ")]),e._v(" "),n("ul",[n("li",[e._v("Hệ thống")]),e._v(" "),n("li",[e._v("Chức năng")]),e._v(" "),n("li",[e._v("File/Class")]),e._v(" "),n("li",[e._v("Method/Functions.")])]),e._v(" "),n("p",[e._v('Tùy theo những mức độ này thì "cấu trúc bên trong" "hành vi bên ngoài" "hệ thống" sẽ được hiểu khác nhau.')]),e._v(" "),n("h2",{attrs:{id:"clean-code"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#clean-code","aria-hidden":"true"}},[e._v("#")]),e._v(" Clean Code ???")]),e._v(" "),n("collapse",{attrs:{"title-tag":"h4"},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("\n        💥 Clean code is obvious for other programmers.\n    ")]},proxy:!0}])},[e._v("\n    And I’m not talking about super sophisticated algorithms. Poor variable naming, bloated classes and methods, magic numbers -you name it- all of that makes code sloppy and difficult to grasp.\n")]),e._v(" "),n("collapse",{attrs:{"title-tag":"h4"},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("\n       💥 Clean code doesn’t contain duplication.\n    ")]},proxy:!0}])},[e._v("\n    Each time you have to make a change in a duplicate code, you have to remember to make the same change to every instance. This increases the cognitive load and slows down the progress.\n")]),e._v(" "),n("collapse",{attrs:{"title-tag":"h4"},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("\n       💥 Clean code contains a minimal number of classes and other moving parts.\n    ")]},proxy:!0}])},[e._v("\n    Less code is less stuff to keep in your head. Less code is less maintenance. Less code is fewer bugs. Code is liability, keep it short and simple.\n")]),e._v(" "),n("collapse",{attrs:{"title-tag":"h4"},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("\n    💥 Clean code passes all tests.\n    ")]},proxy:!0}])},[e._v("\n    You know your code is dirty when only 95% of your tests passed. You know you’re screwed when you test coverage is 0%.\n")]),e._v(" "),n("p",[n("strong",[e._v("💥 Clean code is easier and cheaper to maintain!")])]),e._v(" "),n("h2",{attrs:{id:"when-to-refactor"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#when-to-refactor","aria-hidden":"true"}},[e._v("#")]),e._v(" When to refactor")]),e._v(" "),n("collapse",{attrs:{title:"💥 Rule of Three",show:!1}},[n("ol",[n("li",[e._v("When you’re doing something for the first time, just get it done.")]),e._v(" "),n("li",[e._v("When you’re doing something similar for the second time, cringe at having to repeat but do the same thing anyway.")]),e._v(" "),n("li",[e._v("When you’re doing something for the third time, start refactoring.")])])]),e._v(" "),n("collapse",{attrs:{title:"💥 When adding a feature",show:!1}},[n("ul",[n("li",[e._v("Refactoring helps you understand other people’s code. If you have to deal with someone else’s dirty code, try to refactor it first. Clean code is much easier to grasp. You will improve it not only for yourself but also for those who use it after you.")]),e._v(" "),n("li",[e._v("Refactoring makes it easier to add new features. It’s much easier to make changes in clean code.")])])]),e._v(" "),n("collapse",{attrs:{title:"💥 When fixing a bug",show:!1}},[e._v("\nBugs in code behave just like those in real life: they live in the darkest, dirtiest places in the code. Clean your code and the errors will practically discover themselves.\n"),n("br"),e._v("\nManagers appreciate proactive refactoring as it eliminates the need for special refactoring tasks later. Happy bosses make happy programmers!\n")]),e._v(" "),n("collapse",{attrs:{title:"💥 During a code review",show:!1}},[e._v("\nThe code review may be the last chance to tidy up the code before it becomes available to the public.\n"),n("br"),e._v("\nIt’s best to perform such reviews in a pair with an author. This way you could fix simple problems quickly and gauge the time for fixing the more difficult ones.\n")]),e._v(" "),n("ul",[n("li",[e._v("khi chúng ta nhận thức rằng mã và / hoặc mục đích của nó là không rõ ràng")]),e._v(" "),n("li",[e._v("khi chúng ta phát hiện code smells (1 thuật ngữ để chỉ các đoạn mã tồi tệ), và đó xem như rằng có một vấn đề.")])]),e._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[e._v("Code smells")]),e._v(" "),n("p",[e._v("là bất kỳ triệu chứng bất ổn nào bên trong mã nguồn của một chương trình, mà vì nó có thể sẽ dẫn đến các vấn đề lớn hơn.")]),e._v(" "),n("ul",[n("li",[e._v("không phải là bugs (lỗi lập trình), nghĩa là chúng không làm sai chứ năng của ứng dụng.")]),e._v(" "),n("li",[e._v("biểu hiện của sự yếu kém trong thiết kế và sẽ làm cho quá trình phát triển ứng dụng bị chậm lại hoặc tăng nguy cơ của bugs hoặc lỗi trong tương lai.")])])]),e._v(" "),n("h2",{attrs:{id:"dieu-gi-ngan-can-code-refactoring"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#dieu-gi-ngan-can-code-refactoring","aria-hidden":"true"}},[e._v("#")]),e._v(" Điều gì ngăn cản code refactoring?")]),e._v(" "),n("ul",[n("li",[n("strong",[e._v("Kiến thức")]),e._v(": ví dụ ko có hiểu biết sâu sắc về OOP thì code ban đầu viết ra sẽ rất “dở” nhưng quan trọng là họ hoàn toàn không biết rằng nó “dở”.")]),e._v(" "),n("li",[n("strong",[e._v("Chấp nhận")]),e._v(": Sau một thời gian dài, nhóm nhận ra có rất nhiều đoạn code “dở” nhưng nhóm vẫn chấp nhận bởi số lượng code “dở” là quá nhiều và có tư tưởng chấp nhận “sống chung với lũ”, hoặc nghĩ tới việc viết lại toàn bộ hệ thống.")]),e._v(" "),n("li",[n("strong",[e._v("Không có thời gian")]),e._v(":  Đây là lý do khá xác đáng; khách hàng hoàn toàn không nhận được lợi ích trực tiếp từ code refactoring, nên khó thuyết phục họ trả tiền cho nhóm phát triển thực hiện code refactoring.")])]),e._v(" "),n("h2",{attrs:{id:"checklist-of-refactoring-done-right-way"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#checklist-of-refactoring-done-right-way","aria-hidden":"true"}},[e._v("#")]),e._v(" Checklist of refactoring done right way")]),e._v(" "),n("p",[e._v("::: collapse ✔️ The code should become cleaner.\nIf the code remains just as unclean after refactoring... well, I’m sorry, but you’ve just wasted an hour of your life. Try to figure out why this happened.")]),e._v(" "),n("p",[e._v("It frequently happens when you move away from refactoring with small changes and mix a whole bunch of refactorings into one big change. So it’s very easy to lose your mind, especially if you have a time limit.")]),e._v(" "),n("p",[e._v("But it can also happen when working with extremely sloppy code. Whatever you improve, the code as a whole remains a disaster.")]),e._v(" "),n("p",[e._v("In this case, it’s worthwhile to think about completely rewriting parts of the code. But before that, you should have written tests and set aside a good chunk of time. Otherwise, you’ll end up with the kinds of results we talked about in the first paragraph.\n:::")]),e._v(" "),n("p",[e._v("::: collapse ✔️ New functionality shouldn’t be created during refactoring.\nDon’t mix refactoring and direct development of new features. Try to separate these processes at least within the confines of individual commits.\n:::")]),e._v(" "),n("p",[e._v("::: collapse ✔️ All existing tests must pass after refactoring.\nThere are two cases when tests can break down after refactoring:")]),e._v(" "),n("ul",[n("li",[n("p",[n("strong",[e._v("You made an error during refactoring.")]),e._v(" This one is a no-brainer: go ahead and fix the error.")])]),e._v(" "),n("li",[n("p",[n("strong",[e._v("Your tests were too low-level")]),e._v(". For example, you were testing private methods of classes.")]),e._v(" "),n("p",[e._v("In this case, the tests are to blame. You can either refactor the tests themselves or write an entirely new set of higher-level tests. A great way to avoid this kind of a situation is to write BDD-style tests.\n:::")])])]),e._v(" "),n("h2",{attrs:{id:"refs"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#refs","aria-hidden":"true"}},[e._v("#")]),e._v(" Refs")]),e._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://refactoring.com/catalog/",target:"_blank",rel:"noopener noreferrer"}},[e._v("SÁCH GIÁO KHOA"),n("OutboundLink")],1),e._v(" xịn sò do anh "),n("code",[e._v("Martin Fowler")]),e._v(" đại hiệp chỉ giáo =))")]),e._v(" "),n("li",[n("a",{attrs:{href:"https://refactoring.guru/refactoring/what-is-refactoring",target:"_blank",rel:"noopener noreferrer"}},[e._v("web sịn sò hay"),n("OutboundLink")],1)])])],1)}),[],!1,null,null,null);t.default=o.exports}}]);