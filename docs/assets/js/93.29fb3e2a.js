(window.webpackJsonp=window.webpackJsonp||[]).push([[93],{1448:function(e,t,a){"use strict";a.r(t);var o=a(7),r=Object(o.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h1",{attrs:{id:"database-design"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#database-design"}},[e._v("#")]),e._v(" Database design")]),e._v(" "),o("TagLinks"),e._v(" "),o("h2",{attrs:{id:"cap-theorem"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#cap-theorem"}},[e._v("#")]),e._v(" CAP theorem")]),e._v(" "),o("p",[e._v("The CAP theorem says that a distributed system can deliver on only two of three desired characteristics: consistency, availability and partition tolerance.")]),e._v(" "),o("p",[o("img",{attrs:{src:"https://i.pinimg.com/originals/5d/45/a0/5d45a01c6048b0ec7c085f8191932212.jpg",alt:"CAP"}})]),e._v(" "),o("h2",{attrs:{id:"normalization"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#normalization"}},[e._v("#")]),e._v(" Normalization")]),e._v(" "),o("p",[o("img",{attrs:{src:"https://i.pinimg.com/736x/f9/54/e0/f954e03a9bd7c5879a607655cf5f9480.jpg",alt:"Normalization"}})]),e._v(" "),o("h2",{attrs:{id:"db-isolation-options"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#db-isolation-options"}},[e._v("#")]),e._v(" DB Isolation options")]),e._v(" "),o("p",[e._v("Data isolation ensures that modules are independent and loosely coupled.")]),e._v(" "),o("p",[o("img",{attrs:{src:"https://i.pinimg.com/564x/76/1f/68/761f684da8d15a28ec2faad9a250e5c4.jpg",alt:"DB Isolation options"}})]),e._v(" "),o("p",[e._v("A modular monolith has strict rules for data integrity:")]),e._v(" "),o("ul",[o("li",[e._v("Each module can only access its own tables")]),e._v(" "),o("li",[e._v("No sharing of tables or objects between modules")]),e._v(" "),o("li",[e._v("Joins are only allowed between tables of the same module")])]),e._v(" "),o("h2",{attrs:{id:"database-normalization"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#database-normalization"}},[e._v("#")]),e._v(" Database Normalization")]),e._v(" "),o("p",[e._v("Database Normalization is a design step which eliminates redundant data stored in form of large monolithic tables making the overall query execution simpler.")]),e._v(" "),o("p",[e._v("The main purpose of this normalized data is logical storage of data using relationships between the tables. As originally proposed by "),o("strong",[e._v("Edgar Codd")]),e._v(", there are six steps involved in the overall process from 1NF to 6NF as described below. Most modern databases follow a standard upto the 4NF step.")]),e._v(" "),o("p",[o("img",{attrs:{src:"https://static.javatpoint.com/dbms/images/dbms-normalization.png",alt:"db normalize"}})]),e._v(" "),o("h2",{attrs:{id:"polymorphic-db-table-design"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#polymorphic-db-table-design"}},[e._v("#")]),e._v(" Polymorphic DB Table Design")]),e._v(" "),o("p",[e._v("Look at "),o("a",{attrs:{href:"https://dba.stackexchange.com/questions/179654/developing-a-database-for-a-funds-transfers-business-where-a-people-and-organi",target:"_blank",rel:"noopener noreferrer"}},[e._v("Example Person and Organization Example"),o("OutboundLink")],1)]),e._v(" "),o("p",[e._v("source:\n"),o("img",{attrs:{src:a(700),alt:"Polymorphic DB Table Design"}})]),e._v(" "),o("p",[e._v("Key takeaways:")]),e._v(" "),o("ul",[o("li",[e._v('"As demonstrated, Person and Organization are depicted as mutually exclusive subtypes of Party."')]),e._v(" "),o("li",[e._v('"The Party '),o("strong",[e._v("supertype")]),e._v(" holds a discriminator (i.e., PartyTypeCode) and all the properties (or attributes) that are common to its "),o("strong",[e._v("subtypes")]),e._v(', which, in turn, have the properties that apply to each of them."')])]),e._v(" "),o("p",[e._v("Result DB diagram. Pay attention to how the polymorphic relationships resolved using this design:")]),e._v(" "),o("ul",[o("li",[e._v("Person is-a Party")]),e._v(" "),o("li",[e._v("Organization is-a Party")]),e._v(" "),o("li",[e._v("PartyTypeCode is the "),o("strong",[e._v("discriminator")])])]),e._v(" "),o("p",[e._v("See more:")]),e._v(" "),o("ul",[o("li",[o("a",{attrs:{href:"https://stackoverflow.com/questions/9174200/how-to-create-multiple-one-to-ones/9178524#9178524",target:"_blank",rel:"noopener noreferrer"}},[e._v("3 ways to implement class hierarchies in relational databases"),o("OutboundLink")],1)]),e._v(" "),o("li",[o("a",{attrs:{href:"https://www.martinfowler.com/eaaCatalog/singleTableInheritance.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Single Table Inheritance"),o("OutboundLink")],1)]),e._v(" "),o("li",[o("a",{attrs:{href:"https://www.martinfowler.com/eaaCatalog/classTableInheritance.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Class Table Inheritance"),o("OutboundLink")],1)]),e._v(" "),o("li",[o("a",{attrs:{href:"https://www.martinfowler.com/eaaCatalog/concreteTableInheritance.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Concrete Table Inheritance"),o("OutboundLink")],1)])]),e._v(" "),o("h2",{attrs:{id:"metadata-db-table-design"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#metadata-db-table-design"}},[e._v("#")]),e._v(" Metadata DB Table Design")]),e._v(" "),o("p",[e._v("Wordpress database is a great example\n"),o("img",{attrs:{src:a(701),alt:"Polymorphic DB Table Design"}})]),e._v(" "),o("p",[o("a",{attrs:{href:"https://stackoverflow.com/questions/3241033/designing-database-to-hold-different-metadata-information",target:"_blank",rel:"noopener noreferrer"}},[e._v("Another one"),o("OutboundLink")],1)]),e._v(" "),o("h2",{attrs:{id:"thoughts-on-foreign-keys"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#thoughts-on-foreign-keys"}},[e._v("#")]),e._v(" Thoughts on Foreign Keys")]),e._v(" "),o("p",[e._v("At GitHub we do not use foreign keys, ever, anywhere.")]),e._v(" "),o("ul",[o("li",[e._v("FKs are in your way to shard your database. Your app is accustomed to rely on FK to maintain integrity, instead of doing it on its own. It may even rely on FK to cascade deletes (shudder). When eventually you want to shard or extract data out, you need to change & test the app to an unknown extent.")]),e._v(" "),o("li",[e._v("FKs are a performance impact. The fact they require indexes is likely fine, since those indexes are needed anyhow. But the lookup made for each "),o("code",[e._v("insert")]),e._v("/"),o("code",[e._v("delete")]),e._v(" is an overhead.")]),e._v(" "),o("li",[e._v("FKs don't work well with online schema migrations.")])]),e._v(" "),o("p",[e._v("Read more:")]),e._v(" "),o("ul",[o("li",[o("a",{attrs:{href:"https://softwareengineering.stackexchange.com/questions/334624/should-i-define-the-relations-between-tables-in-the-database-or-just-in-code",target:"_blank",rel:"noopener noreferrer"}},[e._v("Should I define the relations between tables in the database or just in code?"),o("OutboundLink")],1)]),e._v(" "),o("li",[o("a",{attrs:{href:"https://github.com/github/gh-ost/issues/331#issuecomment-266027731",target:"_blank",rel:"noopener noreferrer"}},[e._v("Thoughts on Foreign Keys?"),o("OutboundLink")],1)])])],1)}),[],!1,null,null,null);t.default=r.exports},700:function(e,t,a){e.exports=a.p+"assets/img/Polymorphic-table.eb59cbb9.png"},701:function(e,t,a){e.exports=a.p+"assets/img/wp-metadatatable.c1b9b204.png"}}]);