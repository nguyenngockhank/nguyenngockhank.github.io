(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1394:function(t,e,a){"use strict";a.r(e);var s=a(7),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"virtual-private-cloud-vpc"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#virtual-private-cloud-vpc"}},[t._v("#")]),t._v(" Virtual Private Cloud (VPC)")]),t._v(" "),s("h2",{attrs:{id:"vpc-components-diagram"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vpc-components-diagram"}},[t._v("#")]),t._v(" VPC Components Diagram")]),t._v(" "),s("p",[s("img",{attrs:{src:a(649),alt:"img"}})]),t._v(" "),s("h2",{attrs:{id:"understanding-cidr-ipv4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#understanding-cidr-ipv4"}},[t._v("#")]),t._v(" Understanding CIDR – IPv4")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Classless Inter-Domain Routing")]),t._v(" – a method for allocating IP addresses")]),t._v(" "),s("li",[t._v("Used in "),s("strong",[t._v("Security Groups")]),t._v(" rules and AWS networking in general")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("IP Version")]),t._v(" "),s("th",[t._v("Type")]),t._v(" "),s("th",[t._v("Protocol")]),t._v(" "),s("th",[t._v("Port range")]),t._v(" "),s("th",[t._v("Source")]),t._v(" "),s("th",[t._v("Description")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("IPv4")]),t._v(" "),s("td",[t._v("SSH")]),t._v(" "),s("td",[t._v("TCP")]),t._v(" "),s("td",[t._v("22")]),t._v(" "),s("td",[s("code",[t._v("122.149.196.85/32")])]),t._v(" "),s("td",[t._v("-")])]),t._v(" "),s("tr",[s("td",[t._v("IPv4")]),t._v(" "),s("td",[t._v("HTTP")]),t._v(" "),s("td",[t._v("TCP")]),t._v(" "),s("td",[t._v("80")]),t._v(" "),s("td",[s("code",[t._v("0.0.0.0/0")])]),t._v(" "),s("td",[t._v("-")])])])]),t._v(" "),s("p",[t._v("They help to define an IP address range:")]),t._v(" "),s("ul",[s("li",[t._v("We’ve seen "),s("code",[t._v("WW.XX.YY.ZZ/32")]),t._v(" => one IP")]),t._v(" "),s("li",[t._v("We’ve seen "),s("code",[t._v("0.0.0.0/0")]),t._v(" => all IPs")]),t._v(" "),s("li",[t._v("But we can define: "),s("code",[t._v("192.168.0.0/26")]),t._v(" => "),s("code",[t._v("192.168.0.0 – 192.168.0.63")]),t._v(" (64 IP addresses)")])]),t._v(" "),s("h3",{attrs:{id:"a-cidr-consists-of-two-components"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#a-cidr-consists-of-two-components"}},[t._v("#")]),t._v(" A CIDR consists of two components")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Base IP")]),t._v(" "),s("ul",[s("li",[t._v("Represents an IP contained in the range (XX.XX.XX.XX)")]),t._v(" "),s("li",[t._v("Example: 10.0.0.0, 192.168.0.0, …")])])]),t._v(" "),s("li",[s("strong",[t._v("Subnet Mask")]),t._v(" "),s("ul",[s("li",[t._v("Defines how many bits can change in the IP")]),t._v(" "),s("li",[t._v("Example: "),s("code",[t._v("/0")]),t._v(", "),s("code",[t._v("/24")]),t._v(", "),s("code",[t._v("/32")])]),t._v(" "),s("li",[t._v("Can take two forms:\n"),s("ul",[s("li",[t._v("/8 <=> 255.0.0.0")]),t._v(" "),s("li",[t._v("/16 <=> 255.255.0.0")]),t._v(" "),s("li",[t._v("/24 <=> 255.255.255.0")]),t._v(" "),s("li",[t._v("/32 <=> 255.255.255.255")])])])])])]),t._v(" "),s("h3",{attrs:{id:"subnet-mask"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#subnet-mask"}},[t._v("#")]),t._v(" Subnet Mask")]),t._v(" "),s("p",[t._v("The Subnet Mask basically allows part of the underlying IP to get additional next values from the base IP")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("Quick Memo")]),t._v(" "),s("p",[s("strong",[t._v("Octets")]),t._v("\n1st   2nd   3rd   4th")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("/32")]),t._v(" - no octet can change")]),t._v(" "),s("li",[s("code",[t._v("/24")]),t._v(" - last octet can change")]),t._v(" "),s("li",[s("code",[t._v("/16")]),t._v(" - last 2 octets can change")]),t._v(" "),s("li",[s("code",[t._v("/8")]),t._v(" - last 3 octets can change")]),t._v(" "),s("li",[s("code",[t._v("/0")]),t._v(" - all octets can change")])])]),t._v(" "),s("h2",{attrs:{id:"public-vs-private-ip-ipv4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#public-vs-private-ip-ipv4"}},[t._v("#")]),t._v(" Public vs. Private IP (IPv4)")]),t._v(" "),s("ul",[s("li",[t._v("The Internet Assigned Numbers Authority (IANA) established certain blocks of IPv4 addresses for the use of private (LAN) and public (Internet) addresses")]),t._v(" "),s("li",[s("strong",[t._v("Private IP")]),t._v(" can only allow certain values:\n"),s("ul",[s("li",[t._v("10.0.0.0 – 10.255.255.255 (10.0.0.0/8) - in big networks")]),t._v(" "),s("li",[t._v("172.16.0.0 – 172.31.255.255 (172.16.0.0/12) - "),s("code",[t._v("AWS default VPC in that range")])]),t._v(" "),s("li",[t._v("192.168.0.0 – 192.168.255.255 (192.168.0.0/16) - e.g., home networks")])])]),t._v(" "),s("li",[t._v("All the rest of the IP addresses on the Internet are Public")])]),t._v(" "),s("h2",{attrs:{id:"default-vpc-walkthrough"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#default-vpc-walkthrough"}},[t._v("#")]),t._v(" Default VPC Walkthrough")]),t._v(" "),s("ul",[s("li",[t._v("All new AWS accounts have a default VPC")]),t._v(" "),s("li",[t._v("New EC2 instances are launched into the default VPC if no subnet is specified")]),t._v(" "),s("li",[t._v("Default VPC has Internet connectivity and all EC2 instances inside it have public IPv4 addresses")]),t._v(" "),s("li",[t._v("We also get a public and a private IPv4 DNS names")])]),t._v(" "),s("h2",{attrs:{id:"vpc-in-aws-ipv4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vpc-in-aws-ipv4"}},[t._v("#")]),t._v(" VPC in AWS – IPv4")]),t._v(" "),s("ul",[s("li",[t._v("You can have multiple VPCs in an AWS region (max. 5 per region – soft limit)")]),t._v(" "),s("li",[t._v("Max. CIDR per VPC is 5, for each CIDR:\n"),s("ul",[s("li",[s("strong",[t._v("Min. size is /28 (16 IP addresses)")])]),t._v(" "),s("li",[s("strong",[t._v("Max. size is /16 (65536 IP addresses)")])])])]),t._v(" "),s("li",[t._v("Because VPC is private, only the Private IPv4 ranges are allowed:\n"),s("ul",[s("li",[t._v("10.0.0.0 – 10.255.255.255 (10.0.0.0/8)")]),t._v(" "),s("li",[t._v("172.16.0.0 – 172.31.255.255 (172.16.0.0/12)")]),t._v(" "),s("li",[t._v("192.168.0.0 – 192.168.255.255 (192.168.0.0/16)")])])]),t._v(" "),s("li",[t._v("Your VPC CIDR should NOT overlap with your other networks (e.g., corporate)")])]),t._v(" "),s("h2",{attrs:{id:"vpc-subnet-ipv4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vpc-subnet-ipv4"}},[t._v("#")]),t._v(" VPC – Subnet (IPv4)")]),t._v(" "),s("ul",[s("li",[t._v("AWS reserves "),s("strong",[t._v("5 IP addresses (first 4 & last 1)")]),t._v(" in each subnet")]),t._v(" "),s("li",[t._v("These 5 IP addresses are not available for use and can’t be assigned to an\nEC2 instance")]),t._v(" "),s("li",[t._v("Example: if CIDR block 10.0.0.0/24, then reserved IP addresses are:\n"),s("ul",[s("li",[t._v("10.0.0.0 – Network Address")]),t._v(" "),s("li",[t._v("10.0.0.1 – reserved by AWS for the VPC router")]),t._v(" "),s("li",[t._v("10.0.0.2 – reserved by AWS for mapping to Amazon-provided DNS")]),t._v(" "),s("li",[t._v("10.0.0.3 – reserved by AWS for future use")]),t._v(" "),s("li",[t._v("10.0.0.255 – Network broadcast Address. AWS does not support broadcast in a VPC, therefore the address is reserved")])])])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("Exam Tip")]),t._v(" "),s("p",[t._v("if you need 29 IP addresses for EC2 instances:")]),t._v(" "),s("ul",[s("li",[t._v("You can’t choose a subnet of size /27 (32 IP addresses, 32 – 5 = 27 < 29)")]),t._v(" "),s("li",[t._v("You need to choose a subnet of size /26 (64 IP addresses, 64 – 5 = 59 > 29)")])])]),t._v(" "),s("h2",{attrs:{id:"internet-gateway-igw"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#internet-gateway-igw"}},[t._v("#")]),t._v(" Internet Gateway (IGW)")]),t._v(" "),s("ul",[s("li",[t._v("Allows resources (e.g., EC2 instances) in a VPC connect to the Internet")]),t._v(" "),s("li",[t._v("It scales horizontally and is highly available and redundant")]),t._v(" "),s("li",[t._v("Must be created separately from a VPC")]),t._v(" "),s("li",[t._v("One VPC can only be attached to one IGW and vice versa")]),t._v(" "),s("li",[t._v("Internet Gateways on their own do not allow Internet access…")]),t._v(" "),s("li",[t._v("Route tables must also be edited!")])]),t._v(" "),s("h2",{attrs:{id:"bastion-hosts"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#bastion-hosts"}},[t._v("#")]),t._v(" Bastion Hosts")]),t._v(" "),s("p",[s("img",{attrs:{src:a(650),alt:"img"}})]),t._v(" "),s("ul",[s("li",[t._v("We can use a Bastion Host to SSH into our private EC2 instances")]),t._v(" "),s("li",[t._v("The bastion is in the public subnet which is then connected to all other private subnets")]),t._v(" "),s("li",[s("strong",[t._v("Bastion Host security group must allow")]),t._v(" inbound from the internet on port 22 from restricted CIDR, for example the public CIDR of your corporation")]),t._v(" "),s("li",[s("strong",[t._v("Security Group of the EC2 Instances")]),t._v(" must allow the Security Group of the Bastion Host, or the "),s("strong",[t._v("private IP")]),t._v(" of the Bastion host")])]),t._v(" "),s("h2",{attrs:{id:"nat-gateway"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nat-gateway"}},[t._v("#")]),t._v(" NAT Gateway")]),t._v(" "),s("ul",[s("li",[t._v("AWS-managed NAT, higher bandwidth, high availability, no administration")]),t._v(" "),s("li",[t._v("Pay per hour for usage and bandwidth")]),t._v(" "),s("li",[t._v("NATGW is created in a specific Availability Zone, uses an Elastic IP")]),t._v(" "),s("li",[t._v("Can’t be used by EC2 instance in the same subnet (only from other subnets)")]),t._v(" "),s("li",[t._v("Requires an IGW (Private Subnet => NATGW => IGW)")]),t._v(" "),s("li",[t._v("5 Gbps of bandwidth with automatic scaling up to 45 Gbps")]),t._v(" "),s("li",[t._v("No Security Groups to manage / required")])]),t._v(" "),s("h3",{attrs:{id:"nat-gateway-with-high-availability"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nat-gateway-with-high-availability"}},[t._v("#")]),t._v(" NAT Gateway with High Availability")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("NAT Gateway is resilient within a single Availability Zone")])]),t._v(" "),s("li",[t._v("Must create "),s("strong",[t._v("multiple NAT Gateways")]),t._v(" in "),s("strong",[t._v("multiple AZs")]),t._v(" for fault-tolerance")]),t._v(" "),s("li",[t._v("There is no cross-AZ failover needed because if an AZ goes down it doesn't need NAT")])]),t._v(" "),s("h3",{attrs:{id:"nat-gateway-vs-nat-instance"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nat-gateway-vs-nat-instance"}},[t._v("#")]),t._v(" NAT Gateway vs. NAT Instance")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v(".")]),t._v(" "),s("th",[t._v("NAT Gateway")]),t._v(" "),s("th",[t._v("NAT Instance (outdated)")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("Availability")]),t._v(" "),s("td",[t._v("Highly available within AZ (create in another AZ)")]),t._v(" "),s("td",[t._v("Use a script to manage failover between instances")])]),t._v(" "),s("tr",[s("td",[t._v("Bandwidth")]),t._v(" "),s("td",[t._v("Up to 45 Gbps")]),t._v(" "),s("td",[t._v("Depends on EC2 instance type")])]),t._v(" "),s("tr",[s("td",[t._v("Maintenance")]),t._v(" "),s("td",[t._v("Managed by AWS")]),t._v(" "),s("td",[t._v("Managed by you (e.g., software, OS patches, …)")])]),t._v(" "),s("tr",[s("td",[t._v("Cost")]),t._v(" "),s("td",[t._v("Per hour & amount of data transferred")]),t._v(" "),s("td",[t._v("Per hour, EC2 instance type and size, + network $")])]),t._v(" "),s("tr",[s("td",[t._v("Public IPv4")]),t._v(" "),s("td",[t._v("✅")]),t._v(" "),s("td",[t._v("✅")])]),t._v(" "),s("tr",[s("td",[t._v("Private IPv4")]),t._v(" "),s("td",[t._v("✅")]),t._v(" "),s("td",[t._v("✅")])]),t._v(" "),s("tr",[s("td",[t._v("Security Groups")]),t._v(" "),s("td",[t._v("❌")]),t._v(" "),s("td",[t._v("✅")])]),t._v(" "),s("tr",[s("td",[t._v("Use as Bastion Host?")]),t._v(" "),s("td",[t._v("❌")]),t._v(" "),s("td",[t._v("✅")])])])]),t._v(" "),s("p",[s("a",{attrs:{href:"https://docs.aws.amazon.com/vpc/latest/userguide/vpc-nat-comparison.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Compare NAT gateways and NAT instances"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"security-groups-nacls"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#security-groups-nacls"}},[t._v("#")]),t._v(" Security Groups & NACLs")]),t._v(" "),s("p",[s("img",{attrs:{src:a(651),alt:"img"}})]),t._v(" "),s("h2",{attrs:{id:"network-access-control-list-nacl"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#network-access-control-list-nacl"}},[t._v("#")]),t._v(" Network Access Control List (NACL)")]),t._v(" "),s("ul",[s("li",[t._v("NACL are like a firewall which control traffic from and to subnets")]),t._v(" "),s("li",[s("strong",[t._v("One NACL per subnet")]),t._v(", new subnets are assigned the "),s("strong",[t._v("Default NACL")])]),t._v(" "),s("li",[t._v("You define "),s("strong",[t._v("NACL Rules")]),t._v(":\n"),s("ul",[s("li",[t._v("Rules have a number (1-32766), higher precedence with a lower number")]),t._v(" "),s("li",[t._v("First rule match will drive the decision")]),t._v(" "),s("li",[t._v("Example: if you define "),s("code",[t._v("#100 ALLOW 10.0.0.10/32")]),t._v(" and "),s("code",[t._v("#200 DENY 10.0.0.10/32")]),t._v(", the IP address will be allowed because 100 has a higher precedence over 200")]),t._v(" "),s("li",[t._v("The last rule is an asterisk (*) and denies a request in case of no rule match")]),t._v(" "),s("li",[t._v("AWS recommends adding rules by increment of 100")])])]),t._v(" "),s("li",[t._v("Newly created NACLs will deny everything")]),t._v(" "),s("li",[t._v("NACL are a great way of blocking a specific IP address at the subnet level")])]),t._v(" "),s("h3",{attrs:{id:"default-nacl"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#default-nacl"}},[t._v("#")]),t._v(" Default NACL")]),t._v(" "),s("ul",[s("li",[t._v("Accepts everything inbound/outbound with the subnets it’s associated with")]),t._v(" "),s("li",[t._v("Do "),s("strong",[t._v("NOT")]),t._v(" modify the Default NACL, instead create custom NACLs")])]),t._v(" "),s("p",[s("strong",[t._v("Default NACL for a VPC that supports IPv4")])]),t._v(" "),s("p",[s("strong",[t._v("Inbound Rules")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Rule #")]),t._v(" "),s("th",[t._v("Type")]),t._v(" "),s("th",[t._v("Protocol")]),t._v(" "),s("th",[t._v("Port Range")]),t._v(" "),s("th",[t._v("Source")]),t._v(" "),s("th",[t._v("Allow /Deny")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("100")]),t._v(" "),s("td",[t._v("All IPv4 Traffic")]),t._v(" "),s("td",[t._v("All")]),t._v(" "),s("td",[t._v("All")]),t._v(" "),s("td",[t._v("0.0.0.0/0")]),t._v(" "),s("td",[t._v("ALLOW")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("*")])]),t._v(" "),s("td",[t._v("All IPv4 Traffic")]),t._v(" "),s("td",[t._v("All")]),t._v(" "),s("td",[t._v("All")]),t._v(" "),s("td",[t._v("0.0.0.0/0")]),t._v(" "),s("td",[t._v("DENY")])])])]),t._v(" "),s("p",[s("strong",[t._v("Outbound Rules")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Rule #")]),t._v(" "),s("th",[t._v("Type")]),t._v(" "),s("th",[t._v("Protocol")]),t._v(" "),s("th",[t._v("Port Range")]),t._v(" "),s("th",[t._v("Source")]),t._v(" "),s("th",[t._v("Allow /Deny")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("100")]),t._v(" "),s("td",[t._v("All IPv4 Traffic")]),t._v(" "),s("td",[t._v("All")]),t._v(" "),s("td",[t._v("All")]),t._v(" "),s("td",[t._v("0.0.0.0/0")]),t._v(" "),s("td",[t._v("ALLOW")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("*")])]),t._v(" "),s("td",[t._v("All IPv4 Traffic")]),t._v(" "),s("td",[t._v("All")]),t._v(" "),s("td",[t._v("All")]),t._v(" "),s("td",[t._v("0.0.0.0/0")]),t._v(" "),s("td",[t._v("DENY")])])])]),t._v(" "),s("h3",{attrs:{id:"ephemeral-ports"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ephemeral-ports"}},[t._v("#")]),t._v(" Ephemeral Ports")]),t._v(" "),s("p",[s("img",{attrs:{src:a(652),alt:"img"}})]),t._v(" "),s("ul",[s("li",[t._v("For any two endpoints to establish a connection, they must use ports")]),t._v(" "),s("li",[t._v("Clients connect to a "),s("strong",[t._v("defined port")]),t._v(", and expect a response on an "),s("strong",[t._v("ephemeral port")])]),t._v(" "),s("li",[t._v("Different Operating Systems use different port ranges, examples:\n"),s("ul",[s("li",[t._v("IANA & MS Windows 10 => 49152 – 65535")]),t._v(" "),s("li",[t._v("Many Linux Kernels => 32768 – 60999")])])])]),t._v(" "),s("h3",{attrs:{id:"nacl-with-ephemeral-ports"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nacl-with-ephemeral-ports"}},[t._v("#")]),t._v(" NACL with Ephemeral Ports")]),t._v(" "),s("p",[s("img",{attrs:{src:a(653),alt:"img"}})]),t._v(" "),s("h3",{attrs:{id:"security-group-vs-nacls"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#security-group-vs-nacls"}},[t._v("#")]),t._v(" Security Group vs. NACLs")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Security Group")]),t._v(" "),s("th",[t._v("NACL")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("Operates at the instance level")]),t._v(" "),s("td",[t._v("Operates at the subnet level")])]),t._v(" "),s("tr",[s("td",[t._v("Supports allow rules only")]),t._v(" "),s("td",[t._v("Supports allow rules and deny rules")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("Stateful")]),t._v(": return traffic is automatically allowed, regardless of any rules")]),t._v(" "),s("td",[s("strong",[t._v("Stateless")]),t._v(": return traffic must be explicitly allowed by rules (think of ephemeral ports)")])]),t._v(" "),s("tr",[s("td",[t._v("All rules are evaluated before deciding whether to allow traffic")]),t._v(" "),s("td",[t._v("Rules are evaluated in order (lowest to highest) when deciding whether to allow traffic, first match wins")])]),t._v(" "),s("tr",[s("td",[t._v("Applies to an EC2 instance when specified by someone")]),t._v(" "),s("td",[t._v("Automatically applies to all EC2 instances in the subnet that it’s associated with")])])])]),t._v(" "),s("p",[s("a",{attrs:{href:"https://docs.aws.amazon.com/vpc/latest/userguide/vpc-network-acls.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Control traffic to subnets using network ACLs"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"vpc-peering"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vpc-peering"}},[t._v("#")]),t._v(" VPC Peering")]),t._v(" "),s("ul",[s("li",[t._v("Privately connect two VPCs using AWS’network")]),t._v(" "),s("li",[t._v("Make them behave as if they were in the same network")]),t._v(" "),s("li",[t._v("Must not have overlapping CIDRs")]),t._v(" "),s("li",[t._v("VPC Peering connection is "),s("strong",[t._v("NOT transitive")]),t._v(" (must be established for each VPC that need to communicate with one another)")]),t._v(" "),s("li",[s("strong",[t._v("You must update route tables in each VPC’s subnets to ensure EC2 instances can communicate with each other")])])]),t._v(" "),s("h3",{attrs:{id:"good-to-know"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#good-to-know"}},[t._v("#")]),t._v(" Good to know")]),t._v(" "),s("ul",[s("li",[t._v("You can create VPC Peering connection between VPCs in "),s("strong",[t._v("different AWS accounts/regions")])]),t._v(" "),s("li",[t._v("You can reference a security group in a peered VPC (works cross accounts – same region)")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Type")]),t._v(" "),s("th",[t._v("Protocol")]),t._v(" "),s("th",[t._v("Port range")]),t._v(" "),s("th",[t._v("Source")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("HTTP")]),t._v(" "),s("td",[t._v("TCP")]),t._v(" "),s("td",[t._v("80")]),t._v(" "),s("td",[t._v("sg004991f9af3474b9349 / default")])]),t._v(" "),s("tr",[s("td",[t._v("HTTP")]),t._v(" "),s("td",[t._v("TCP")]),t._v(" "),s("td",[t._v("80")]),t._v(" "),s("td",[s("code",[t._v("[Account ID]")]),t._v(" / sg-023af754235vhdsfcsdf")])])])]),t._v(" "),s("h2",{attrs:{id:"vpc-endpoints"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vpc-endpoints"}},[t._v("#")]),t._v(" VPC Endpoints")]),t._v(" "),s("h3",{attrs:{id:"types-of-endpoints"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#types-of-endpoints"}},[t._v("#")]),t._v(" Types of Endpoints")]),t._v(" "),s("p",[s("strong",[t._v("Interface Endpoints (powered by PrivateLink)")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(654),alt:"img"}})]),t._v(" "),s("ul",[s("li",[t._v("Provisions an ENI (private IP address) as an entry point (must attach a Security Group)")]),t._v(" "),s("li",[t._v("Supports most AWS services")]),t._v(" "),s("li",[t._v("$ per hour + $ per GB of data processed")])]),t._v(" "),s("p",[s("strong",[t._v("Gateway Endpoints")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(655),alt:"img"}})]),t._v(" "),s("ul",[s("li",[t._v("Provisions a gateway and must be used "),s("strong",[t._v("as a target in a route table (does not use security groups)")])]),t._v(" "),s("li",[t._v("Supports both S3 and DynamoDB")]),t._v(" "),s("li",[t._v("Free")])]),t._v(" "),s("h3",{attrs:{id:"vpc-endpoints-aws-privatelink"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vpc-endpoints-aws-privatelink"}},[t._v("#")]),t._v(" VPC Endpoints - AWS PrivateLink")]),t._v(" "),s("ul",[s("li",[t._v("Every AWS service is publicly exposed (public URL)")]),t._v(" "),s("li",[t._v("VPC Endpoints (powered by AWS PrivateLink) allows you to connect to AWS services using a "),s("strong",[t._v("private network")]),t._v(" instead of using the public Internet")]),t._v(" "),s("li",[t._v("They’re redundant and scale horizontally")]),t._v(" "),s("li",[t._v("They remove the need of IGW, NATGW, … to access AWS Services")]),t._v(" "),s("li",[t._v("In case of issues:\n"),s("ul",[s("li",[t._v("Check DNS Setting Resolution in your VPC")]),t._v(" "),s("li",[t._v("Check Route Tables")])])])]),t._v(" "),s("h3",{attrs:{id:"gateway-or-interface-endpoint-for-s3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gateway-or-interface-endpoint-for-s3"}},[t._v("#")]),t._v(" Gateway or Interface Endpoint for S3?")]),t._v(" "),s("p",[s("img",{attrs:{src:a(656),alt:"img"}})]),t._v(" "),s("ul",[s("li",[t._v("Gateway is most likely going to be preferred all the time at the exam")]),t._v(" "),s("li",[t._v("Cost: free for Gateway, $ for interface endpoint")]),t._v(" "),s("li",[t._v("Interface Endpoint is preferred access is required from onpremises (Site to Site VPN or Direct Connect), a different VPC or a different region")])]),t._v(" "),s("h3",{attrs:{id:"lambda-in-vpc-accessing-dynamodb"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lambda-in-vpc-accessing-dynamodb"}},[t._v("#")]),t._v(" Lambda in VPC accessing DynamoDB")]),t._v(" "),s("ul",[s("li",[t._v("DynamoDB is a public service from AWS")]),t._v(" "),s("li",[t._v("Option 1: Access from the public internet\n"),s("ul",[s("li",[t._v("Because Lambda is in a VPC, it needs a NAT Gateway in a public subnet and an internet gateway")])])]),t._v(" "),s("li",[s("strong",[t._v("Option 2 (better & free): Access from the private VPC network")]),t._v(" "),s("ul",[s("li",[t._v("Deploy a VPC Gateway endpoint for DynamoDB")]),t._v(" "),s("li",[t._v("Change the Route Tables")])])])]),t._v(" "),s("p",[s("img",{attrs:{src:a(657),alt:"img"}})]),t._v(" "),s("h2",{attrs:{id:"vpc-flow-logs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vpc-flow-logs"}},[t._v("#")]),t._v(" VPC Flow Logs")]),t._v(" "),s("ul",[s("li",[t._v("Capture information about IP traffic going into your interfaces:\n"),s("ul",[s("li",[t._v("VPC Flow Logs")]),t._v(" "),s("li",[t._v("Subnet Flow Logs")]),t._v(" "),s("li",[t._v("Elastic Network Interface (ENI) Flow Logs")])])]),t._v(" "),s("li",[t._v("Helps to monitor & troubleshoot connectivity issues")]),t._v(" "),s("li",[t._v("Flow logs data can go to S3, CloudWatch Logs, and Kinesis Data Firehose")]),t._v(" "),s("li",[t._v("Captures network information from AWS managed interfaces too: ELB, RDS, ElastiCache, Redshift, WorkSpaces, NATGW, Transit Gateway…")])]),t._v(" "),s("h3",{attrs:{id:"vpc-flow-logs-syntax"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vpc-flow-logs-syntax"}},[t._v("#")]),t._v(" VPC Flow Logs Syntax")]),t._v(" "),s("p",[s("img",{attrs:{src:a(658),alt:"img"}})]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("srcaddr & dstaddr")]),t._v(" – help identify problematic IP")]),t._v(" "),s("li",[s("strong",[t._v("srcport & dstport")]),t._v(" – help identity problematic ports")]),t._v(" "),s("li",[s("strong",[t._v("Action")]),t._v(" – success or failure of the request due to Security Group / NACL")]),t._v(" "),s("li",[t._v("Can be used for analytics on usage patterns, or malicious behavior")]),t._v(" "),s("li",[s("strong",[t._v("Query VPC flow logs using Athena on S3 or CloudWatch Logs Insights")]),t._v("\n-"),s("a",{attrs:{href:"https://docs.aws.amazon.com/vpc/latest/userguide/flow-logs-records-examples.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Flow Logs examples"),s("OutboundLink")],1)])]),t._v(" "),s("h3",{attrs:{id:"troubleshoot-sg-nacl-issues"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#troubleshoot-sg-nacl-issues"}},[t._v("#")]),t._v(" Troubleshoot SG & NACL issues")]),t._v(" "),s("p",[s("strong",[t._v("Look at the “ACTION” field")])]),t._v(" "),s("p",[s("strong",[t._v("Incoming Requests")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(659),alt:"img"}})]),t._v(" "),s("ul",[s("li",[t._v("Inbound REJECT => NACL or SG")]),t._v(" "),s("li",[t._v("Inbound ACCEPT, Outbound REJECT => NACL")])]),t._v(" "),s("p",[s("strong",[t._v("Outgoing Requests")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(660),alt:"img"}})]),t._v(" "),s("ul",[s("li",[t._v("Outbound REJECT => NACL or SG")]),t._v(" "),s("li",[t._v("Outbound ACCEPT, Inbound REJECT => NACL")])]),t._v(" "),s("h3",{attrs:{id:"vpc-flow-logs-architectures"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vpc-flow-logs-architectures"}},[t._v("#")]),t._v(" VPC Flow Logs – Architectures")]),t._v(" "),s("p",[s("img",{attrs:{src:a(661),alt:"img"}})]),t._v(" "),s("h2",{attrs:{id:"aws-site-to-site-vpn"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#aws-site-to-site-vpn"}},[t._v("#")]),t._v(" AWS Site-to-Site VPN")]),t._v(" "),s("p",[s("strong",[t._v("Virtual Private Gateway (VGW)")])]),t._v(" "),s("ul",[s("li",[t._v("VPN concentrator on the AWS side of the VPN connection")]),t._v(" "),s("li",[t._v("VGW is created and attached to the VPC from which you want to create the Site-to-Site VPN connection")]),t._v(" "),s("li",[t._v("Possibility to customize the ASN (Autonomous System Number)")])]),t._v(" "),s("p",[s("strong",[t._v("Customer Gateway (CGW)")])]),t._v(" "),s("ul",[s("li",[t._v("Software application or physical device on customer side of the VPN connection\n-"),s("a",{attrs:{href:"https://docs.aws.amazon.com/vpn/latest/s2svpn/your-cgw.html#DevicesTested",target:"_blank",rel:"noopener noreferrer"}},[t._v("Your CGW"),s("OutboundLink")],1)])]),t._v(" "),s("h3",{attrs:{id:"site-to-site-vpn-connections"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#site-to-site-vpn-connections"}},[t._v("#")]),t._v(" Site-to-Site VPN Connections")]),t._v(" "),s("p",[s("img",{attrs:{src:a(662),alt:"img"}})]),t._v(" "),s("ul",[s("li",[t._v("Customer Gateway Device (On-premises)\n"),s("ul",[s("li",[t._v("What IP address to use?\n"),s("ul",[s("li",[t._v("Public Internet-routable IP address for your Customer Gateway device")]),t._v(" "),s("li",[t._v("If it’s behind a NAT device that’s enabled for NAT traversal (NAT-T), use the public IP address of the NAT device")])])])])]),t._v(" "),s("li",[s("strong",[t._v("Important step")]),t._v(": enable "),s("strong",[t._v("Route Propagation")]),t._v(" for the Virtual Private Gateway in the route table that is associated with your subnets")]),t._v(" "),s("li",[t._v("If you need to ping your EC2 instances from on-premises, make sure you add the ICMP protocol on the inbound of your security groups")])]),t._v(" "),s("h2",{attrs:{id:"aws-vpn-cloudhub"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#aws-vpn-cloudhub"}},[t._v("#")]),t._v(" AWS VPN CloudHub")]),t._v(" "),s("p",[s("img",{attrs:{src:a(663),alt:"img"}})]),t._v(" "),s("ul",[s("li",[t._v("Provide secure communication between multiple sites, if you have multiple VPN connections")]),t._v(" "),s("li",[t._v("Low-cost hub-and-spoke model for primary or secondary network connectivity between different locations (VPN only)")]),t._v(" "),s("li",[t._v("It’s a VPN connection so it goes over the public Internet")]),t._v(" "),s("li",[t._v("To set it up, connect multiple VPN connections on the same VGW, setup dynamic routing and configure route tables")])]),t._v(" "),s("h2",{attrs:{id:"direct-connect-dx"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#direct-connect-dx"}},[t._v("#")]),t._v(" Direct Connect (DX)")]),t._v(" "),s("p",[s("img",{attrs:{src:a(664),alt:"img"}})]),t._v(" "),s("ul",[s("li",[t._v("Provides a dedicated "),s("strong",[t._v("private")]),t._v(" connection from a remote network to your VPC")]),t._v(" "),s("li",[t._v("Dedicated connection must be setup between your DC and AWS Direct Connect locations")]),t._v(" "),s("li",[t._v("You need to setup a Virtual Private Gateway on your VPC")]),t._v(" "),s("li",[t._v("Access public resources (S3) and private (EC2) on same connection")]),t._v(" "),s("li",[t._v("Use Cases:\n"),s("ul",[s("li",[t._v("Increase bandwidth throughput - working with large data sets – lower cost")]),t._v(" "),s("li",[t._v("More consistent network experience - applications using real-time data feeds")]),t._v(" "),s("li",[t._v("Hybrid Environments (on prem + cloud)")])])]),t._v(" "),s("li",[t._v("Supports both IPv4 and IPv6")])]),t._v(" "),s("h3",{attrs:{id:"direct-connect-gateway"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#direct-connect-gateway"}},[t._v("#")]),t._v(" Direct Connect Gateway")]),t._v(" "),s("p",[t._v("If you want to setup a Direct Connect to one or more VPC in many different regions (same account), you must use a Direct Connect Gateway")]),t._v(" "),s("p",[s("img",{attrs:{src:a(665),alt:"img"}})]),t._v(" "),s("h3",{attrs:{id:"direct-connect-connection-types"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#direct-connect-connection-types"}},[t._v("#")]),t._v(" Direct Connect – Connection Types")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Dedicated Connections")]),t._v(": 1Gbps,10 Gbps and 100 Gbps capacity\n"),s("ul",[s("li",[t._v("Physical ethernet port dedicated to a customer")]),t._v(" "),s("li",[t._v("Request made to AWS first, then completed by AWS Direct Connect Partners")])])]),t._v(" "),s("li",[s("strong",[t._v("Hosted Connections")]),t._v(": 50Mbps, 500 Mbps, to 10 Gbps\n"),s("ul",[s("li",[t._v("Connection requests are made via AWS Direct Connect Partners")]),t._v(" "),s("li",[t._v("Capacity can be a"),s("strong",[t._v("dded or removed on demand")])]),t._v(" "),s("li",[t._v("1, 2, 5, 10 Gbps available at select AWS Direct Connect Partners")])])]),t._v(" "),s("li",[t._v("Lead times are often longer than 1 month to establish a new connection")])]),t._v(" "),s("h3",{attrs:{id:"direct-connect-encryption"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#direct-connect-encryption"}},[t._v("#")]),t._v(" Direct Connect – Encryption")]),t._v(" "),s("p",[s("img",{attrs:{src:a(666),alt:"img"}})]),t._v(" "),s("ul",[s("li",[t._v("Data in transit is "),s("strong",[t._v("not encrypted")]),t._v(" but is private")]),t._v(" "),s("li",[t._v("AWS Direct Connect + VPN provides an IPsec-encrypted private connection")]),t._v(" "),s("li",[t._v("Good for an extra level of security, but slightly more complex to put in place")])]),t._v(" "),s("h3",{attrs:{id:"direct-connect-resiliency"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#direct-connect-resiliency"}},[t._v("#")]),t._v(" Direct Connect - Resiliency")]),t._v(" "),s("p",[s("strong",[t._v("High Resiliency for Critical Workloads")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(667),alt:"img"}})]),t._v(" "),s("p",[t._v("One connection at multiple locations")]),t._v(" "),s("p",[s("strong",[t._v("Maximum Resiliency for Critical Workloads")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(668),alt:"img"}})]),t._v(" "),s("p",[t._v("Maximum resilience is achieved by separate connections terminating on separate devices in more than one location.")]),t._v(" "),s("h3",{attrs:{id:"site-to-site-vpn-connection-as-a-backup"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#site-to-site-vpn-connection-as-a-backup"}},[t._v("#")]),t._v(" Site-to-Site VPN connection as a backup")]),t._v(" "),s("p",[t._v("In case Direct Connect fails, you can set up a backup Direct Connect connection (expensive), or a Site-to-Site VPN connection")]),t._v(" "),s("p",[s("img",{attrs:{src:a(669),alt:"img"}})]),t._v(" "),s("h3",{attrs:{id:"network-topologies-can-become-complicated"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#network-topologies-can-become-complicated"}},[t._v("#")]),t._v(" Network topologies can become complicated")]),t._v(" "),s("p",[s("img",{attrs:{src:a(670),alt:"img"}})]),t._v(" "),s("h2",{attrs:{id:"transit-gateway"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#transit-gateway"}},[t._v("#")]),t._v(" Transit Gateway")]),t._v(" "),s("p",[s("img",{attrs:{src:a(671),alt:"img"}})]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("For having transitive peering between thousands of VPC and on-premises, hub-and-spoke (star) connection")])]),t._v(" "),s("li",[t._v("Regional resource, can work cross-region")]),t._v(" "),s("li",[t._v("Share cross-account using Resource Access Manager (RAM)")]),t._v(" "),s("li",[t._v("You can peer Transit Gateways across regions")]),t._v(" "),s("li",[t._v("Route Tables: limit which VPC can talk with other VPC")]),t._v(" "),s("li",[t._v("Works with Direct Connect Gateway, VPN connections")]),t._v(" "),s("li",[t._v("Supports "),s("strong",[t._v("IP Multicast")]),t._v(" (not supported by any other AWS service)")])]),t._v(" "),s("h3",{attrs:{id:"transit-gateway-site-to-site-vpn-ecmp"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#transit-gateway-site-to-site-vpn-ecmp"}},[t._v("#")]),t._v(" Transit Gateway: Site-to-Site VPN ECMP")]),t._v(" "),s("p",[s("img",{attrs:{src:a(672),alt:"img"}})]),t._v(" "),s("ul",[s("li",[t._v("ECMP = Equal-cost multi-path routing")]),t._v(" "),s("li",[t._v("Routing strategy to allow to forward a packet over multiple best path")]),t._v(" "),s("li",[t._v("Use case: create multiple Siteto-Site VPN connections "),s("strong",[t._v("to increase the bandwidth of your connection to AWS")])])]),t._v(" "),s("h2",{attrs:{id:"vpc-traffic-mirroring"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vpc-traffic-mirroring"}},[t._v("#")]),t._v(" VPC – Traffic Mirroring")]),t._v(" "),s("p",[s("img",{attrs:{src:a(673),alt:"img"}})]),t._v(" "),s("ul",[s("li",[t._v("Allows you to capture and inspect network traffic in your VPC")]),t._v(" "),s("li",[t._v("Route the traffic to security appliances that you manage")]),t._v(" "),s("li",[t._v("Capture the traffic\n"),s("ul",[s("li",[t._v("From (Source) – ENIs")]),t._v(" "),s("li",[t._v("To (Targets) – an ENI or a Network Load Balancinger")])])]),t._v(" "),s("li",[t._v("Capture all packets or capture the packets of your interest (optionally, truncate packets)")]),t._v(" "),s("li",[t._v("Source and Target can be in the same VPC or different VPCs (VPC Peering)")]),t._v(" "),s("li",[t._v("Use cases: content inspection, threat monitoring, troubleshooting, …")])]),t._v(" "),s("h2",{attrs:{id:"what-is-ipv6"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#what-is-ipv6"}},[t._v("#")]),t._v(" What is IPv6?")]),t._v(" "),s("ul",[s("li",[t._v("IPv4 designed to provide 4.3 Billion addresses (they’ll be exhausted soon)")]),t._v(" "),s("li",[t._v("IPv6 is the successor of IPv4")]),t._v(" "),s("li",[t._v("IPv6 is designed to provide 3.4 × 10"),s("sup",[t._v("38")]),t._v(", unique IP addresses")]),t._v(" "),s("li",[t._v("Every IPv6 address is public and Internet-routable (no private range)")]),t._v(" "),s("li",[t._v("Format => "),s("code",[t._v("x.x.x.x.x.x.x.x")]),t._v(" (x is hexadecimal, range can be from "),s("code",[t._v("0000")]),t._v(" to "),s("code",[t._v("ffff")]),t._v(")")]),t._v(" "),s("li",[t._v("Examples:\n"),s("ul",[s("li",[s("code",[t._v("2001:db8:3333:4444:5555:6666:7777:8888")])]),t._v(" "),s("li",[s("code",[t._v("2001:db8:3333:4444:cccc:dddd:eeee:ffff")])]),t._v(" "),s("li",[s("code",[t._v("::")]),t._v(" => all 8 segments are zero")]),t._v(" "),s("li",[s("code",[t._v("2001:db8::")]),t._v(" => the last 6 segments are zero")]),t._v(" "),s("li",[s("code",[t._v("::1234:5678")]),t._v(" => the first 6 segments are zero")]),t._v(" "),s("li",[s("code",[t._v("2001:db8::1234:5678")]),t._v(" => the middle 4 segments are zero")])])])]),t._v(" "),s("h3",{attrs:{id:"ipv6-in-vpc"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ipv6-in-vpc"}},[t._v("#")]),t._v(" IPv6 in VPC")]),t._v(" "),s("p",[s("img",{attrs:{src:a(674),alt:"img"}})]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("IPv4 cannot be disabled for your VPC and subnets")])]),t._v(" "),s("li",[t._v("You can enable IPv6 (they’re public IP addresses) to operate in dual-stack mode")]),t._v(" "),s("li",[t._v("Your EC2 instances will get at least a private internal IPv4 and a public IPv6")]),t._v(" "),s("li",[t._v("They can communicate using either IPv4 or IPv6 to the internet through an Internet Gateway")])]),t._v(" "),s("h3",{attrs:{id:"ipv6-troubleshooting"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ipv6-troubleshooting"}},[t._v("#")]),t._v(" IPv6 Troubleshooting")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("IPv4 cannot be disabled for your VPC and subnets")])]),t._v(" "),s("li",[t._v("So, if you cannot launch an EC2 instance in your subnet\n"),s("ul",[s("li",[t._v("It’s not because it cannot acquire an IPv6 (the space is very large)")]),t._v(" "),s("li",[t._v("It’s because there are no available IPv4 in your subnet")])])]),t._v(" "),s("li",[t._v("Solution: create a new IPv4 CIDR in your subnet")])]),t._v(" "),s("h3",{attrs:{id:"egress-only-internet-gateway"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#egress-only-internet-gateway"}},[t._v("#")]),t._v(" Egress-only Internet Gateway")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Used for IPv6 only")])]),t._v(" "),s("li",[t._v("(similar to a NAT Gateway but for IPv6)")]),t._v(" "),s("li",[t._v("Allows instances in your VPC outbound connections over IPv6 while preventing the internet to initiate an IPv6 connection to your instances")]),t._v(" "),s("li",[s("strong",[t._v("You must update the Route Tables")])])]),t._v(" "),s("h3",{attrs:{id:"ipv6-routing"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ipv6-routing"}},[t._v("#")]),t._v(" IPv6 Routing")]),t._v(" "),s("p",[s("img",{attrs:{src:a(675),alt:"img"}})]),t._v(" "),s("h2",{attrs:{id:"summary"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#summary"}},[t._v("#")]),t._v(" Summary")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("CIDR")]),t._v(" – IP Range")]),t._v(" "),s("li",[s("strong",[t._v("VPC")]),t._v(" – Virtual Private Cloud => we define a list of IPv4 & IPv6 CIDR")]),t._v(" "),s("li",[s("strong",[t._v("Subnets")]),t._v(" – tied to an AZ, we define a CIDR")]),t._v(" "),s("li",[s("strong",[t._v("Internet Gateway")]),t._v(" – at the VPC level, provide IPv4 & IPv6 Internet Access")]),t._v(" "),s("li",[s("strong",[t._v("Route Tables")]),t._v(" – must be edited to add routes from subnets to the IGW, VPC Peering Connections, VPC Endpoints, …")]),t._v(" "),s("li",[s("strong",[t._v("Bastion Host")]),t._v(" – public EC2 instance to SSH into, that has SSH connectivity to EC2 instances in private subnets")]),t._v(" "),s("li",[s("strong",[t._v("NAT Instances")]),t._v(" – gives Internet access to EC2 instances in private subnets. Old, must be setup in a public subnet, disable Source / Destination check flag")]),t._v(" "),s("li",[s("strong",[t._v("NAT Gateway")]),t._v(" – managed by AWS, provides scalable Internet access to private EC2 instances, IPv4 only")]),t._v(" "),s("li",[s("strong",[t._v("Private DNS + Route 53")]),t._v(" – enable DNS Resolution + DNS Hostnames (VPC)")]),t._v(" "),s("li",[s("strong",[t._v("NACL")]),t._v(" – stateless, subnet rules for inbound and outbound, don’t forget Ephemeral Ports")]),t._v(" "),s("li",[s("strong",[t._v("Security Groups")]),t._v(" – stateful, operate at the EC2 instance level")]),t._v(" "),s("li",[s("strong",[t._v("Reachability Analyzer")]),t._v(" – perform network connectivity testing between AWS resources")]),t._v(" "),s("li",[s("strong",[t._v("VPC Peering")]),t._v(" – connect two VPCs with non overlapping CIDR, non-transitive")]),t._v(" "),s("li",[s("strong",[t._v("VPC Endpoints")]),t._v(" – provide private access to AWS Services (S3, DynamoDB, CloudFormation, SSM) within a VPC")]),t._v(" "),s("li",[s("strong",[t._v("VPC Flow Logs")]),t._v(" – can be setup at the VPC / Subnet / ENI Level, for ACCEPT and REJECT traffic, helps identifying attacks, analyze using Athena or CloudWatch Logs Insights")]),t._v(" "),s("li",[s("strong",[t._v("Site-to-Site VPN")]),t._v(" – setup a Customer Gateway on DC, a Virtual Private Gateway on VPC, and site-to-site VPN over public Internet")]),t._v(" "),s("li",[s("strong",[t._v("AWS VPN CloudHub")]),t._v(" – hub-and-spoke VPN model to connect your sites")]),t._v(" "),s("li",[s("strong",[t._v("Direct Connect")]),t._v(" – setup a Virtual Private Gateway on VPC, and establish a direct private connection to an AWS Direct Connect Location")]),t._v(" "),s("li",[s("strong",[t._v("Direct Connect Gateway")]),t._v(" – setup a Direct Connect to many VPCs in different AWS regions")]),t._v(" "),s("li",[s("strong",[t._v("AWS PrivateLink / VPC Endpoint Services")]),t._v(":\n"),s("ul",[s("li",[t._v("Connect services privately from your service VPC to customers VPC")]),t._v(" "),s("li",[t._v("Doesn’t need VPC Peering, public Internet, NAT Gateway, Route Tables")]),t._v(" "),s("li",[t._v("Must be used with Network Load Balancer & ENI")])])]),t._v(" "),s("li",[s("strong",[t._v("ClassicLink")]),t._v(" – connect EC2-Classic EC2 instances privately to your VPC")]),t._v(" "),s("li",[s("strong",[t._v("Transit Gateway")]),t._v(" – transitive peering connections for VPC, VPN & DX")]),t._v(" "),s("li",[s("strong",[t._v("Traffic Mirroring")]),t._v(" – copy network traffic from ENIs for further analysis")]),t._v(" "),s("li",[s("strong",[t._v("Egress-only Internet Gateway")]),t._v(" – like a NAT Gateway, but for IPv6")])])])}),[],!1,null,null,null);e.default=n.exports},649:function(t,e,a){t.exports=a.p+"assets/img/components.8c48dad0.png"},650:function(t,e,a){t.exports=a.p+"assets/img/bastion-host.c5894ffe.png"},651:function(t,e,a){t.exports=a.p+"assets/img/sg-nacl.07fc4721.png"},652:function(t,e,a){t.exports=a.p+"assets/img/ephemeral-port.4ec13894.png"},653:function(t,e,a){t.exports=a.p+"assets/img/nacl-w-ephemeralport.4482a6d1.png"},654:function(t,e,a){t.exports=a.p+"assets/img/interface-endpoints.16c57692.png"},655:function(t,e,a){t.exports=a.p+"assets/img/gateway-endpoints.4f248f10.png"},656:function(t,e,a){t.exports=a.p+"assets/img/gw-or-i-4-s3.7df8668a.png"},657:function(t,e,a){t.exports=a.p+"assets/img/lamda-in-vpc.8315f718.png"},658:function(t,e,a){t.exports=a.p+"assets/img/logs-syntax.f085d1e1.png"},659:function(t,e,a){t.exports=a.p+"assets/img/incoming-request.8845aed6.png"},660:function(t,e,a){t.exports=a.p+"assets/img/outgoing-request.2747b95b.png"},661:function(t,e,a){t.exports=a.p+"assets/img/vpc-flow-logs-arch.d8ecdb3a.png"},662:function(t,e,a){t.exports=a.p+"assets/img/s2s-vpn-conn.e9a2b73c.png"},663:function(t,e,a){t.exports=a.p+"assets/img/cloudhub.6172fbcc.png"},664:function(t,e,a){t.exports=a.p+"assets/img/dx.7d0f78d9.png"},665:function(t,e,a){t.exports=a.p+"assets/img/dx-gw.81179511.png"},666:function(t,e,a){t.exports=a.p+"assets/img/dx-encrypt.d2e570af.png"},667:function(t,e,a){t.exports=a.p+"assets/img/dx-1con-at-multi-locations.391e9899.png"},668:function(t,e,a){t.exports=a.p+"assets/img/dx-many-conns.9d775a73.png"},669:function(t,e,a){t.exports=a.p+"assets/img/dx-backup.fc24986b.png"},670:function(t,e,a){t.exports=a.p+"assets/img/nw-topologies.9b9e7268.png"},671:function(t,e,a){t.exports=a.p+"assets/img/transit-gw.75eeadb0.png"},672:function(t,e,a){t.exports=a.p+"assets/img/ecmp.ffe938a3.png"},673:function(t,e,a){t.exports=a.p+"assets/img/traffic-monitor.ceb04e10.png"},674:function(t,e,a){t.exports=a.p+"assets/img/ip6-in-vpc.abb5d3b5.png"},675:function(t,e,a){t.exports=a.p+"assets/img/ip6-routing.01046955.png"}}]);