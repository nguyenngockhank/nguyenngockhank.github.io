
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Tính lịch can chi</title>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <style>.wrapper div { margin-bottom: 7px; }</style>
</head>
<body>
    <h1>Tính lịch can chi</h1>
    <p>Vừa mới du học Du tu be, thấy 1 clip khá hay về cách tính nên mình code ra cái ni. <a href="https://www.youtube.com/watch?v=nbWjWVV-570">Link clip đây</a></p>

    <script type="text/x-template" id="wrapperTemplate">
        <div class="wrapper">
            <div> Nhập năm nè:   <input type="number" v-model="year"></div>
            <div>Năm con giáp: <span style="color: red">{{displayYear}}</span></div>
            <div>Ngũ hành: <span style="color: green">{{displayNguhanh}}</span></div>
        </div>
    </script>

    <div id="app"><div>

    <script>

    var CAN_DICTIONARY = [
        'Canh',
        'Tân',
        'Nhâm',
        'Quý',
        'Giáp',
        'Ất',
        'Bính',
        'Đinh',
        'Mậu',
        'Kỷ',
    ];

   
    var CHI_DICTIONARY = [
        'Thân',
        'Dậu',
        'Tuất',
        'Hợi',
        'Tý',
        'Sửu',
        'Dần',
        'Mão',
        'Thìn',
        'Tỵ',
        'Ngọ',
        'Mùi',
    ];

    var THIEN_CAN_SCORE = [
        4,4, // canh, tan 
        5,5, // nham, quy 
        1,1,
        2,2,
        3,3,
    ];

    var DIA_CHI_SCORE = [
        1,1, // than, dau
        2,2, // 
        0,0, // ti, suu
        1,1, 
        2,2,
        0,0, // ngo mui
    ];

    var NGU_HANH_DICTIONARY = {
        '1': 'Kim',
        '2': 'Thủy',
        '3': 'Hỏa',
        '4': 'Thổ',
        '5': 'Mộc',
    };

    var app = new Vue({
        el: '#app',
        template: '#wrapperTemplate',
        data: {
            year: 2000,
        },
        created() {
            var dt = new Date();
            this.year = dt.getFullYear();
        },
        computed: {
            canIndex: function() {
                return this.year % 10; 
            },
            chiIndex: function() {
                return this.year % 12;
            },
            nguhanhIndex: function() {
                var thiencan = THIEN_CAN_SCORE[this.canIndex];
                var diachi = DIA_CHI_SCORE[this.chiIndex];

                console.log('thien can', thiencan, 'diachi', diachi)

                var result = thiencan + diachi;

                if (result > 5) {
                    result = result - 5;
                }

                return result;
            },
            displayNguhanh: function() {
                return NGU_HANH_DICTIONARY[this.nguhanhIndex];
            },
            displayYear: function() {
                if (isNaN(this.canIndex) || isNaN(this.chiIndex)) {
                    return 'Nope';
                }

                var canText = CAN_DICTIONARY[this.canIndex];
                var chiText = CHI_DICTIONARY[this.chiIndex];

                return canText + ' ' + chiText;
            }
        }
    })
    </script>

var 
</body>
</html>

